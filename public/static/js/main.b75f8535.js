/*! For license information please see main.b75f8535.js.LICENSE.txt */
!function(){var e={6031:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=6031,e.exports=t},5883:function(e,t,n){"use strict";n.d(t,{c:function(){return m}});var r,i=n(4942),a=n(7762),o=n(3433),s=n(4136),l=n(1811),u=function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},c=function(e){if(void 0===r){var t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;r=!t&&n?"-webkit-":""}return r},h=function(e,t,n){var r=t.startsWith("animation")?c(e):"";e.style.setProperty(r+t,n)},f=function(e,t){var n=t.startsWith("animation")?c(e):"";e.style.removeProperty(n+t)},d=[],p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(void 0!==t){var n=Array.isArray(t)?t:[t];return[].concat((0,o.Z)(e),(0,o.Z)(n))}return e},m=function(e){var t,n,r,m,v,g,y,_,x,b,w,k,E,S=[],T=[],C=[],M=!1,A={},P=[],I=[],z={},L=0,D=!1,R=!1,O=!0,j=!1,N=!0,B=!1,F=e,$=[],V=[],U=[],Z=[],H=[],W=[],q=[],G=[],X=[],K=[],Y="function"===typeof AnimationEffect||void 0!==s.w&&"function"===typeof s.w.AnimationEffect,J="function"===typeof Element&&"function"===typeof Element.prototype.animate&&Y,Q=function(){return K},ee=function(e){re(),e&&ie()},te=function(e,t){return((null===t||void 0===t?void 0:t.oneTimeCallback)?V:$).push({c:e,o:t}),E},ne=function(){return $.length=0,V.length=0,E},re=function(){if(J)K.forEach((function(e){e.cancel()})),K.length=0;else{var e=U.slice();(0,l.r)((function(){e.forEach((function(e){f(e,"animation-name"),f(e,"animation-duration"),f(e,"animation-timing-function"),f(e,"animation-iteration-count"),f(e,"animation-delay"),f(e,"animation-play-state"),f(e,"animation-fill-mode"),f(e,"animation-direction")}))}))}},ie=function(){H.forEach((function(e){(null===e||void 0===e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),H.length=0},ae=function(){return void 0!==v?v:y?y.getFill():"both"},oe=function(){return void 0!==x?x:void 0!==g?g:y?y.getDirection():"normal"},se=function(){return D?"linear":void 0!==r?r:y?y.getEasing():"linear"},le=function(){return R?0:void 0!==b?b:void 0!==n?n:y?y.getDuration():0},ue=function(){return void 0!==m?m:y?y.getIterations():1},ce=function(){return void 0!==w?w:void 0!==t?t:y?y.getDelay():0},he=function(e){J?Q().forEach((function(t){if(t.effect.setKeyframes)t.effect.setKeyframes(e);else{var n=new KeyframeEffect(t.effect.target,e,t.effect.getTiming());t.effect=n}})):de()},fe=function(){0!==L&&0===--L&&(!function(){be(),G.forEach((function(e){return e()})),X.forEach((function(e){return e()}));var e=O?1:0,t=P,n=I,r=z;U.forEach((function(e){var i=e.classList;for(var a in t.forEach((function(e){return i.add(e)})),n.forEach((function(e){return i.remove(e)})),r)r.hasOwnProperty(a)&&h(e,a,r[a])})),$.forEach((function(t){return t.c(e,E)})),V.forEach((function(t){return t.c(e,E)})),V.length=0,N=!0,O&&(j=!0),O=!0}(),y&&y.animationFinish())},de=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];ie();var n=function(e){return e.forEach((function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{var r=u(t);r!==t&&(e[r]=n,delete e[t])}}})),e}(S);U.forEach((function(r){if(n.length>0){var i=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){var t=e.offset,n=[];for(var r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push("".concat(r,": ").concat(e[r],";"));return"".concat(100*t,"% { ").concat(n.join(" ")," }")})).join(" ")}(n);k=void 0!==e?e:function(e){var t=d.indexOf(e);return t<0&&(t=d.push(e)-1),"ion-animation-".concat(t)}(i);var a=function(e,t,n){var r,i=function(e){var t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t}(n),a=c(n),o=i.querySelector("#"+e);if(o)return o;var s=(null!==(r=n.ownerDocument)&&void 0!==r?r:document).createElement("style");return s.id=e,s.textContent="@".concat(a,"keyframes ").concat(e," { ").concat(t," } @").concat(a,"keyframes ").concat(e,"-alt { ").concat(t," }"),i.appendChild(s),s}(k,i,r);H.push(a),h(r,"animation-duration","".concat(le(),"ms")),h(r,"animation-timing-function",se()),h(r,"animation-delay","".concat(ce(),"ms")),h(r,"animation-fill-mode",ae()),h(r,"animation-direction",oe());var o=ue()===1/0?"infinite":ue().toString();h(r,"animation-iteration-count",o),h(r,"animation-play-state","paused"),t&&h(r,"animation-name","".concat(a.id,"-alt")),(0,l.r)((function(){h(r,"animation-name",a.id||null)}))}}))},pe=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];!function(){W.forEach((function(e){return e()})),q.forEach((function(e){return e()}));var e=T,t=C,n=A;U.forEach((function(r){var i=r.classList;for(var a in e.forEach((function(e){return i.add(e)})),t.forEach((function(e){return i.remove(e)})),n)n.hasOwnProperty(a)&&h(r,a,n[a])}))}(),S.length>0&&(J?(U.forEach((function(e){var t=e.animate(S,{id:F,delay:ce(),duration:le(),easing:se(),iterations:ue(),fill:ae(),direction:oe()});t.pause(),K.push(t)})),K.length>0&&(K[0].onfinish=function(){fe()})):de(e)),M=!0},me=function(e){if(e=Math.min(Math.max(e,0),.9999),J)K.forEach((function(t){t.currentTime=t.effect.getComputedTiming().delay+le()*e,t.pause()}));else{var t="-".concat(le()*e,"ms");U.forEach((function(e){S.length>0&&(h(e,"animation-delay",t),h(e,"animation-play-state","paused"))}))}},ve=function(e){K.forEach((function(e){e.effect.updateTiming({delay:ce(),duration:le(),easing:se(),iterations:ue(),fill:ae(),direction:oe()})})),void 0!==e&&me(e)},ge=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;(0,l.r)((function(){U.forEach((function(n){h(n,"animation-name",k||null),h(n,"animation-duration","".concat(le(),"ms")),h(n,"animation-timing-function",se()),h(n,"animation-delay",void 0!==t?"-".concat(t*le(),"ms"):"".concat(ce(),"ms")),h(n,"animation-fill-mode",ae()||null),h(n,"animation-direction",oe()||null);var r=ue()===1/0?"infinite":ue().toString();h(n,"animation-iteration-count",r),e&&h(n,"animation-name","".concat(k,"-alt")),(0,l.r)((function(){h(n,"animation-name",k||null)}))}))}))},ye=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return e&&Z.forEach((function(r){r.update(e,t,n)})),J?ve(n):ge(t,n),E},_e=function(){M&&(J?K.forEach((function(e){e.pause()})):U.forEach((function(e){h(e,"animation-play-state","paused")})),B=!0)},xe=function(){_=void 0,fe()},be=function(){_&&clearTimeout(_)},we=function(){U.forEach((function(e){f(e,"animation-duration"),f(e,"animation-delay"),f(e,"animation-play-state")}))},ke=function(e){return new Promise((function(t){(null===e||void 0===e?void 0:e.sync)&&(R=!0,te((function(){return R=!1}),{oneTimeCallback:!0})),M||pe(),j&&(J?(me(0),ve()):ge(),j=!1),N&&(L=Z.length+1,N=!1),te((function(){return t()}),{oneTimeCallback:!0}),Z.forEach((function(e){e.play()})),J?(K.forEach((function(e){e.play()})),0!==S.length&&0!==U.length||fe()):function(){if(be(),(0,l.r)((function(){U.forEach((function(e){S.length>0&&h(e,"animation-play-state","running")}))})),0===S.length||0===U.length)fe();else{var e=ce()||0,t=le()||0,n=ue()||1;isFinite(n)&&(_=setTimeout(xe,e+t*n+100)),function(e,t){var n,r={passive:!0},i=function(){n&&n()},a=function(n){e===n.target&&(i(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",a,r),e.addEventListener("animationend",a,r),n=function(){e.removeEventListener("webkitAnimationEnd",a,r),e.removeEventListener("animationend",a,r)})}(U[0],(function(){be(),(0,l.r)((function(){we(),(0,l.r)(fe)}))}))}}(),B=!1}))},Ee=function(e,t){var n=S[0];return void 0===n||void 0!==n.offset&&0!==n.offset?S=[(0,i.Z)({offset:0},e,t)].concat((0,o.Z)(S)):n[e]=t,E};return E={parentAnimation:y,elements:U,childAnimations:Z,id:F,animationFinish:fe,from:Ee,to:function(e,t){var n=S[S.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?S=[].concat((0,o.Z)(S),[(0,i.Z)({offset:1},e,t)]):n[e]=t,E},fromTo:function(e,t,n){return Ee(e,t).to(e,n)},parent:function(e){return y=e,E},play:ke,pause:function(){return Z.forEach((function(e){e.pause()})),_e(),E},stop:function(){Z.forEach((function(e){e.stop()})),M&&(re(),M=!1),D=!1,R=!1,N=!0,x=void 0,b=void 0,w=void 0,L=0,j=!1,O=!0,B=!1},destroy:function(e){return Z.forEach((function(t){t.destroy(e)})),ee(e),U.length=0,Z.length=0,S.length=0,ne(),M=!1,N=!0,E},keyframes:function(e){var t=S!==e;return S=e,t&&he(S),E},addAnimation:function(e){if(null!=e)if(Array.isArray(e)){var t,n=(0,a.Z)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.parent(E),Z.push(r)}}catch(i){n.e(i)}finally{n.f()}}else e.parent(E),Z.push(e);return E},addElement:function(e){if(null!=e)if(1===e.nodeType)U.push(e);else if(e.length>=0)for(var t=0;t<e.length;t++)U.push(e[t]);else console.error("Invalid addElement value");return E},update:ye,fill:function(e){return v=e,ye(!0),E},direction:function(e){return g=e,ye(!0),E},iterations:function(e){return m=e,ye(!0),E},duration:function(e){return J||0!==e||(e=1),n=e,ye(!0),E},easing:function(e){return r=e,ye(!0),E},delay:function(e){return t=e,ye(!0),E},getWebAnimations:Q,getKeyframes:function(){return S},getFill:ae,getDirection:oe,getDelay:ce,getIterations:ue,getEasing:se,getDuration:le,afterAddRead:function(e){return G.push(e),E},afterAddWrite:function(e){return X.push(e),E},afterClearStyles:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,a.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;z[r]=""}}catch(i){n.e(i)}finally{n.f()}return E},afterStyles:function(){return z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E},afterRemoveClass:function(e){return I=p(I,e),E},afterAddClass:function(e){return P=p(P,e),E},beforeAddRead:function(e){return W.push(e),E},beforeAddWrite:function(e){return q.push(e),E},beforeClearStyles:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=(0,a.Z)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;A[r]=""}}catch(i){n.e(i)}finally{n.f()}return E},beforeStyles:function(){return A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},E},beforeRemoveClass:function(e){return C=p(C,e),E},beforeAddClass:function(e){return T=p(T,e),E},onFinish:te,isRunning:function(){return 0!==L&&!B},progressStart:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return Z.forEach((function(n){n.progressStart(e,t)})),_e(),D=e,M||pe(),ye(!1,!0,t),E},progressStep:function(e){return Z.forEach((function(t){t.progressStep(e)})),me(e),E},progressEnd:function(e,t,n){return D=!1,Z.forEach((function(r){r.progressEnd(e,t,n)})),void 0!==n&&(b=n),j=!1,O=!0,0===e?("reverse"===(x="reverse"===oe()?"normal":"reverse")&&(O=!1),J?(ye(),me(1-t)):(w=(1-t)*le()*-1,ye(!1,!1))):1===e&&(J?(ye(),me(t)):(w=t*le()*-1,ye(!1,!1))),void 0!==e&&(te((function(){b=void 0,x=void 0,w=void 0}),{oneTimeCallback:!0}),y||ke()),E}}}},1811:function(e,t,n){"use strict";n.d(t,{c:function(){return r},d:function(){return a},l:function(){return i},m:function(){return s},p:function(){return l},r:function(){return o},s:function(){return u}});var r=function(e,t){e.componentOnReady?e.componentOnReady().then((function(e){return t(e)})):o((function(){return t(e)}))},i=function(e){return void 0!==e.componentOnReady},a=function(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){e.hasAttribute(n)&&(null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n)),e.removeAttribute(n))})),t},o=function(e){return"function"===typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"===typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e)},s=function(e,t,n){return Math.max(e,Math.min(t,n))},l=function(e,t){if(!e){var n="ASSERT: "+t;throw console.error(n),new Error(n)}},u=function(e,t){if(null!==e&&void 0!==e||(e={}),null!==t&&void 0!==t||(t={}),e===t)return!0;var n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(var r=0,i=n;r<i.length;r++){var a=i[r];if(!(a in t))return!1;if(e[a]!==t[a])return!1}return!0}},9448:function(e,t,n){"use strict";n.d(t,{b:function(){return s},c:function(){return l},d:function(){return u},g:function(){return T},l:function(){return w},s:function(){return E},t:function(){return c}});var r=n(4165),i=n(5861),a=n(1554),o=n(1811),s="ionViewWillLeave",l="ionViewDidLeave",u="ionViewWillUnload",c=function(e){return new Promise((function(t,n){(0,a.Iu)((function(){h(e),f(e).then((function(n){n.animation&&n.animation.destroy(),d(e),t(n)}),(function(t){d(e),n(t)}))}))}))},h=function(e){var t=e.enteringEl,n=e.leavingEl;S(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),E(t,!1),t.style.setProperty("pointer-events","none"),n&&(E(n,!1),n.style.setProperty("pointer-events","none"))},f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return n=e.sent,i=n&&a.Z5.isBrowser?m(n,t):v(t),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(e){var t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.leavingEl&&t.animated&&0!==t.duration){e.next=2;break}return e.abrupt("return",void 0);case 2:if(!t.animationBuilder){e.next=4;break}return e.abrupt("return",t.animationBuilder);case 4:if("ios"!==t.mode){e.next=10;break}return e.next=7,n.e(372).then(n.bind(n,7372));case 7:e.t0=e.sent.iosTransitionAnimation,e.next=13;break;case 10:return e.next=12,n.e(856).then(n.bind(n,5856));case 12:e.t0=e.sent.mdTransitionAnimation;case 13:return i=e.t0,e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n,!0);case 2:return i=t(n.baseEl,n),x(n.enteringEl,n.leavingEl),e.next=6,_(i,n);case 6:return a=e.sent,n.progressCallback&&n.progressCallback(void 0),a&&b(n.enteringEl,n.leavingEl),e.abrupt("return",{hasCompleted:a,animation:i});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.enteringEl,i=t.leavingEl,e.next=4,g(t,!1);case 4:return x(n,i),b(n,i),e.abrupt("return",{hasCompleted:!0});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(void 0!==t.deepWait?t.deepWait:n)){e.next=4;break}return e.next=4,Promise.all([k(t.enteringEl),k(t.leavingEl)]);case 4:return e.next=6,y(t.viewIsReady,t.enteringEl);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=3;break}return e.next=3,t(n);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_=function(e,t){var n=t.progressCallback,r=new Promise((function(t){e.onFinish((function(e){return t(1===e)}))}));return n?(e.progressStart(!0),n(e)):e.play(),r},x=function(e,t){w(t,s),w(e,"ionViewWillEnter")},b=function(e,t){w(e,"ionViewDidEnter"),w(t,l)},w=function(e,t){if(e){var n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},k=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t)){e.next=17;break}if(null==n.componentOnReady){e.next=10;break}return e.next=5,n.componentOnReady();case 5:if(null==e.sent){e.next=8;break}return e.abrupt("return");case 8:e.next=15;break;case 10:if(null==n.__registerHost){e.next=15;break}return i=new Promise((function(e){return(0,o.r)(e)})),e.next=14,i;case 14:return e.abrupt("return");case 15:return e.next=17,Promise.all(Array.from(n.children).map(k));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(e,t){t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},S=function(e,t,n){void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},T=function(e){if(e.classList.contains("ion-page"))return e;var t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e}},4136:function(e,t,n){"use strict";n.d(t,{d:function(){return i},w:function(){return r}});var r="undefined"!==typeof window?window:void 0,i="undefined"!==typeof document?document:void 0},1554:function(e,t,n){"use strict";n.d(t,{Z5:function(){return Re},mv:function(){return gn},AA:function(){return qe},yM:function(){return rt},iJ:function(){return nt},h:function(){return He},GH:function(){return Yt},wj:function(){return Pn},Iu:function(){return In}});var r,i,a,o,s=n(5671),l=n(3144),u=n(4165),c=n(5861),h=n(9439),f=n(3433),d=!1,p=!0,m=!1,v=!0,g=!0,y=!0,_=!0,x=!0,b=!0,w=!0,k=!0,E=!0,S=!0,T=!0,C=!0,M=!1,A=!0,P=!0,I=!0,z=!0,L=!0,D=!0,R=!0,O=!0,j=!0,N=!0,B=!0,F=!0,$=!0,V=!0,U=!0,Z=!0,H=!0,W=!0,q=!0,G=!0,X=!0,K=!0,Y=!0,J=!0,Q=!0,ee=!0,te=!0,ne=!0,re=!1,ie=!1,ae=!1,oe=!1,se=!1,le=!1,ue=!1,ce=!1,he=!1,fe=!0,de=!1,pe=!0,me=!1,ve=!0,ge=!0,ye=!0,_e=!1,xe=!0,be=!0,we=!0,ke=!1,Ee=!1,Se=!1,Te=!0,Ce="app",Me=0,Ae=!1,Pe=!1,Ie=!1,ze=!1,Le=0,De=!1,Re={isDev:!!ae,isBrowser:!0,isServer:!1,isTesting:!!oe},Oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(he&&performance.mark){var n="st:".concat(e,":").concat(t,":").concat(Me++);return performance.mark(n),function(){return performance.measure("[Stencil] ".concat(e,"() <").concat(t,">"),n)}}return function(){}},je=function(e,t){return he&&performance.mark?(0===performance.getEntriesByName(e,"mark").length&&performance.mark(e),function(){0===performance.getEntriesByName(t,"measure").length&&performance.measure(t,e)}):function(){}},Ne="s-id",Be="sty-id",Fe="c-id",$e="http://www.w3.org/1999/xlink",Ve={},Ue=function(e){return"object"===(e=typeof e)||"function"===e};function Ze(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}var He=function(e,t){for(var n=null,r=null,i=null,a=!1,o=!1,s=[],l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];if(function t(r){for(var i=0;i<r.length;i++)n=r[i],Array.isArray(n)?t(n):null!=n&&"boolean"!==typeof n&&((a="function"!==typeof e&&!Ue(n))?n=String(n):ae&&"function"!==typeof e&&void 0===n.$flags$&&un("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),a&&o?s[s.length-1].$text$+=n:s.push(a?We(null,n):n),o=a)}(u),t&&(ae&&"input"===e&&Je(t),G&&t.key&&(r=t.key),fe&&t.name&&(i=t.name),W)){var h=t.className||t.class;h&&(t.class="object"!==typeof h?h:Object.keys(h).filter((function(e){return h[e]})).join(" "))}if(ae&&s.some(Ge)&&un("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),q&&"function"===typeof e)return e(null===t?{}:t,s,Xe);var f=We(e,null);return f.$attrs$=t,s.length>0&&(f.$children$=s),G&&(f.$key$=r),fe&&(f.$name$=i),f},We=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Z&&(n.$attrs$=null),G&&(n.$key$=null),fe&&(n.$name$=null),n},qe={},Ge=function(e){return e&&e.$tag$===qe},Xe={forEach:function(e,t){return e.map(Ke).forEach(t)},map:function(e,t){return e.map(Ke).map(t).map(Ye)}},Ke=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},Ye=function(e){if("function"===typeof e.vtag){var t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),He.apply(void 0,[e.vtag,t].concat((0,f.Z)(e.vchildren||[])))}var n=We(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},Je=function(e){var t=Object.keys(e),n=t.indexOf("value");if(-1!==n){var r=t.indexOf("type"),i=t.indexOf("min"),a=t.indexOf("max"),o=t.indexOf("step");(n<r||n<i||n<a||n<o)&&cn('The "value" prop of <input> should be set after "min", "max", "type" and "step"')}},Qe=function e(t,n,r,i,a,o,s){var l,u,c,h;if(1===o.nodeType){for((l=o.getAttribute(Fe))&&((u=l.split("."))[0]!==s&&"0"!==u[0]||(c={$flags$:0,$hostId$:u[0],$nodeId$:u[1],$depth$:u[2],$index$:u[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},n.push(c),o.removeAttribute(Fe),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,t=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))),h=o.childNodes.length-1;h>=0;h--)e(t,n,r,i,a,o.childNodes[h],s);if(o.shadowRoot)for(h=o.shadowRoot.childNodes.length-1;h>=0;h--)e(t,n,r,i,a,o.shadowRoot.childNodes[h],s)}else if(8===o.nodeType)(u=o.nodeValue.split("."))[1]!==s&&"0"!==u[1]||(l=u[0],c={$flags$:0,$hostId$:u[1],$nodeId$:u[2],$depth$:u[3],$index$:u[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===l?(c.$elm$=o.nextSibling,c.$elm$&&3===c.$elm$.nodeType&&(c.$text$=c.$elm$.textContent,n.push(c),o.remove(),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))):c.$hostId$===s&&("s"===l?(c.$tag$="slot",u[5]?o["s-sn"]=c.$name$=u[5]:o["s-sn"]="",o["s-sr"]=!0,j&&i&&(c.$elm$=vn.createElement(c.$tag$),c.$name$&&c.$elm$.setAttribute("name",c.$name$),o.parentNode.insertBefore(c.$elm$,o),o.remove(),"0"===c.$depth$&&(i[c.$index$]=c.$elm$)),r.push(c),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c):"r"===l&&(j&&i?o.remove():fe&&(a["s-cr"]=o,o["s-cn"]=!0))));else if(t&&"style"===t.$tag$){var f=We(null,o.textContent);f.$elm$=o,f.$index$="0",t.$children$=[f]}},et=function e(t,n){if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n);if(t.shadowRoot)for(r=0;r<t.shadowRoot.childNodes.length;r++)e(t.shadowRoot.childNodes[r],n)}else if(8===t.nodeType){var i=t.nodeValue.split(".");"o"===i[0]&&(n.set(i[1]+"."+i[2],t),t.nodeValue="",t["s-en"]=i[3])}},tt=function(e){return pn.map((function(t){return t(e)})).find((function(e){return!!e}))},nt=function(e){return rn(e).$modeName$},rt=function(e,t,n){var r=function(e){return ce?rn(e).$hostElement$:e}(e);return{emit:function(e){return ae&&!r.isConnected&&cn('The "'.concat(t,'" event was emitted, but the dispatcher node is no longer connected to the dom.')),it(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}}},it=function(e,t,n){var r=yn.ce(t,n);return e.dispatchEvent(r),r},at=new WeakMap,ot=function(e,t,n){var r=dn.get(e);bn&&n?"string"===typeof(r=r||new CSSStyleSheet)?r=t:r.replaceSync(t):r=t,dn.set(e,r)},st=function(e,t,n,r){var i,a=ut(t,n),o=dn.get(a);if(!Te)return a;if(e=11===e.nodeType?e:vn,o)if("string"===typeof o){e=e.head||e;var s,l=at.get(e);if(l||at.set(e,l=new Set),!l.has(a)){if(le&&e.host&&(s=e.querySelector("[".concat(Be,'="').concat(a,'"]'))))s.innerHTML=o;else{if(_e&&yn.$cssShim$){var u=(s=yn.$cssShim$.createHostStyle(r,a,o,!!(10&t.$flags$)))["s-sc"];u&&(a=u,l=null)}else(s=vn.createElement("style")).innerHTML=o;var c=null!==(i=yn.$nonce$)&&void 0!==i?i:Ze(vn);null!=c&&s.setAttribute("nonce",c),(se||re)&&s.setAttribute(Be,a),e.insertBefore(s,e.querySelector("link"))}l&&l.add(a)}}else xe&&!e.adoptedStyleSheets.includes(o)&&(e.adoptedStyleSheets=[].concat((0,f.Z)(e.adoptedStyleSheets),[o]));return a},lt=function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=Oe("attachStyles",t.$tagName$),a=st(j&&_n&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);(j||O)&&B&&10&r&&(n["s-sc"]=a,n.classList.add(a+"-h"),O&&2&r&&n.classList.add(a+"-s")),i()},ut=function(e,t){return"sc-"+(z&&t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$)},ct=function(e,t,n,r,i,a){if(n!==r){var o=on(e,t),s=t.toLowerCase();if(W&&"class"===t){var l=e.classList,u=ft(n),c=ft(r);l.remove.apply(l,(0,f.Z)(u.filter((function(e){return e&&!c.includes(e)})))),l.add.apply(l,(0,f.Z)(c.filter((function(e){return e&&!u.includes(e)}))))}else if(Q&&"style"===t){if(U)for(var h in n)r&&null!=r[h]||(!se&&h.includes("-")?e.style.removeProperty(h):e.style[h]="");for(var d in r)n&&r[d]===n[d]||(!se&&d.includes("-")?e.style.setProperty(d,r[d]):e.style[d]=r[d])}else if(G&&"key"===t);else if(K&&"ref"===t)r&&r(e);else if(!X||(ce?o:e.__lookupSetter__(t))||"o"!==t[0]||"n"!==t[1]){if(Y){var p=Ue(r);if((o||p&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{var m=null==r?"":r;"list"===t?o=!1:null!=n&&e[t]==m||(e[t]=m)}}catch(g){}var v=!1;H&&s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,v=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(H&&v?e.removeAttributeNS($e,t):e.removeAttribute(t)):(!o||4&a||i)&&!p&&(r=!0===r?"":r,H&&v?e.setAttributeNS($e,t,r):e.setAttribute(t,r))}}else t="-"===t[2]?t.slice(3):on(mn,s)?s.slice(2):s[2]+t.slice(3),n&&yn.rel(e,t,n,!1),r&&yn.ael(e,t,r,!1)}},ht=/\s/,ft=function(e){return e?e.split(ht):[]},dt=function(e,t,n,r){var i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||Ve,o=t.$attrs$||Ve;if(U)for(r in a)r in o||ct(i,r,a[r],void 0,n,t.$flags$);for(r in o)ct(i,r,a[r],o[r],n,t.$flags$)},pt=function e(t,n,o,s){var l,u,c,h=n.$children$[o],f=0;if(fe&&!Ae&&(Ie=!0,"slot"===h.$tag$&&(r&&s.classList.add(r+"-s"),h.$flags$|=h.$children$?2:1)),ae&&h.$elm$&&un("The JSX ".concat(null!==h.$text$?'"'.concat(h.$text$,'" text'):'"'.concat(h.$tag$,'" element')," node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes")),ee&&null!==h.$text$)l=h.$elm$=vn.createTextNode(h.$text$);else if(fe&&1&h.$flags$)l=h.$elm$=ie||se?At(h):vn.createTextNode("");else{if(V&&!ze&&(ze="svg"===h.$tag$),l=h.$elm$=V?vn.createElementNS(ze?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",fe&&2&h.$flags$?"slot-fb":h.$tag$):vn.createElement(fe&&2&h.$flags$?"slot-fb":h.$tag$),V&&ze&&"foreignObject"===h.$tag$&&(ze=!1),Z&&dt(null,h,ze),(j||O)&&null!=r&&l["s-si"]!==r&&l.classList.add(l["s-si"]=r),h.$children$)for(f=0;f<h.$children$.length;++f)(u=e(t,h,f,l))&&l.appendChild(u);V&&("svg"===h.$tag$?ze=!1:"foreignObject"===l.tagName&&(ze=!0))}return fe&&(l["s-hn"]=a,3&h.$flags$&&(l["s-sr"]=!0,l["s-cr"]=i,l["s-sn"]=h.$name$||"",(c=t&&t.$children$&&t.$children$[o])&&c.$tag$===h.$tag$&&t.$elm$&&mt(t.$elm$,!1))),l},mt=function e(t,n){yn.$flags$|=1;for(var r=t.childNodes,i=r.length-1;i>=0;i--){var o=r[i];o["s-hn"]!==a&&o["s-ol"]&&(bt(o).insertBefore(o,xt(o)),o["s-ol"].remove(),o["s-ol"]=void 0,Ie=!0),n&&e(o,n)}yn.$flags$&=-2},vt=function(e,t,n,r,i,o){var s,l=fe&&e["s-cr"]&&e["s-cr"].parentNode||e;for(j&&l.shadowRoot&&l.tagName===a&&(l=l.shadowRoot);i<=o;++i)r[i]&&(s=pt(null,n,i,e))&&(r[i].$elm$=s,l.insertBefore(s,fe?xt(t):t))},gt=function(e,t,n){for(var r=t;r<=n;++r){var i=e[r];if(i){var a=i.$elm$;Ct(i),a&&(fe&&(Pe=!0,a["s-ol"]?a["s-ol"].remove():mt(a,!0)),a.remove())}}},yt=function(e,t,n,r){for(var i,a,o=0,s=0,l=0,u=0,c=t.length-1,h=t[0],f=t[c],d=r.length-1,p=r[0],m=r[d];o<=c&&s<=d;)if(null==h)h=t[++o];else if(null==f)f=t[--c];else if(null==p)p=r[++s];else if(null==m)m=r[--d];else if(_t(h,p))wt(h,p),h=t[++o],p=r[++s];else if(_t(f,m))wt(f,m),f=t[--c],m=r[--d];else if(_t(h,m))!fe||"slot"!==h.$tag$&&"slot"!==m.$tag$||mt(h.$elm$.parentNode,!1),wt(h,m),e.insertBefore(h.$elm$,f.$elm$.nextSibling),h=t[++o],m=r[--d];else if(_t(f,p))!fe||"slot"!==h.$tag$&&"slot"!==m.$tag$||mt(f.$elm$.parentNode,!1),wt(f,p),e.insertBefore(f.$elm$,h.$elm$),f=t[--c],p=r[++s];else{if(l=-1,G)for(u=o;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===p.$key$){l=u;break}G&&l>=0?((a=t[l]).$tag$!==p.$tag$?i=pt(t&&t[s],n,l,e):(wt(a,p),t[l]=void 0,i=a.$elm$),p=r[++s]):(i=pt(t&&t[s],n,s,e),p=r[++s]),i&&(fe?bt(h.$elm$).insertBefore(i,xt(h.$elm$)):h.$elm$.parentNode.insertBefore(i,h.$elm$))}o>c?vt(e,null==r[d+1]?null:r[d+1].$elm$,n,r,s,d):U&&s>d&&gt(t,o,c)},_t=function(e,t){return e.$tag$===t.$tag$&&(fe&&"slot"===e.$tag$?e.$name$===t.$name$:!G||e.$key$===t.$key$)},xt=function(e){return e&&e["s-ol"]||e},bt=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode},wt=function(e,t){var n,r=t.$elm$=e.$elm$,i=e.$children$,a=t.$children$,o=t.$tag$,s=t.$text$;ee&&null!==s?ee&&fe&&(n=r["s-cr"])?n.parentNode.textContent=s:ee&&e.$text$!==s&&(r.data=s):(V&&(ze="svg"===o||"foreignObject"!==o&&ze),(Z||R)&&(N&&"slot"===o||dt(e,t,ze)),U&&null!==i&&null!==a?yt(r,i,t,a):null!==a?(U&&ee&&null!==e.$text$&&(r.textContent=""),vt(r,null,t,a,0,a.length-1)):U&&null!==i&&gt(i,0,i.length-1),V&&ze&&"svg"===o&&(ze=!1))},kt=function e(t){var n,r,i,a,o,s,l=t.childNodes;for(r=0,i=l.length;r<i;r++)if(1===(n=l[r]).nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,a=0;a<i;a++)if(s=l[a].nodeType,l[a]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===l[a].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==l[a].textContent.trim()){n.hidden=!0;break}e(n)}},Et=[],St=function e(t){for(var n,r,i,a,o,s,l=0,u=t.childNodes,c=u.length;l<c;l++){if((n=u[l])["s-sr"]&&(r=n["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,a=n["s-sn"],s=i.length-1;s>=0;s--)(r=i[s])["s-cn"]||r["s-nr"]||r["s-hn"]===n["s-hn"]||(Tt(r,a)?(o=Et.find((function(e){return e.$nodeToRelocate$===r})),Pe=!0,r["s-sn"]=r["s-sn"]||a,o?o.$slotRefNode$=n:Et.push({$slotRefNode$:n,$nodeToRelocate$:r}),r["s-sr"]&&Et.map((function(e){Tt(e.$nodeToRelocate$,r["s-sn"])&&(o=Et.find((function(e){return e.$nodeToRelocate$===r})))&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$)}))):Et.some((function(e){return e.$nodeToRelocate$===r}))||Et.push({$nodeToRelocate$:r}));1===n.nodeType&&e(n)}},Tt=function(e,t){return 1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t},Ct=function e(t){K&&(t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(e))},Mt=function(e,t){var n=e.$hostElement$,o=e.$cmpMeta$,s=e.$vnode$||We(null,null),l=Ge(t)?t:He(null,null,t);if(a=n.tagName,ae&&Array.isArray(t)&&t.some(Ge))throw new Error('The <Host> must be the single root component.\nLooks like the render() function of "'.concat(a.toLowerCase(),'" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  '));if(R&&o.$attrsToReflect$&&(l.$attrs$=l.$attrs$||{},o.$attrsToReflect$.map((function(e){var t=(0,h.Z)(e,2),r=t[0],i=t[1];return l.$attrs$[i]=n[r]}))),l.$tag$=null,l.$flags$|=4,e.$vnode$=l,l.$elm$=s.$elm$=j&&n.shadowRoot||n,(O||j)&&(r=n["s-sc"]),fe&&(i=n["s-cr"],Ae=_n&&0!==(1&o.$flags$),Pe=!1),wt(s,l),fe){if(yn.$flags$|=1,Ie){var u,c,f,d,p,m;St(l.$elm$);for(var v=0;v<Et.length;v++)(c=(u=Et[v]).$nodeToRelocate$)["s-ol"]||((f=ie||se?Pt(c):vn.createTextNode(""))["s-nr"]=c,c.parentNode.insertBefore(c["s-ol"]=f,c));for(v=0;v<Et.length;v++)if(c=(u=Et[v]).$nodeToRelocate$,u.$slotRefNode$){for(d=u.$slotRefNode$.parentNode,p=u.$slotRefNode$.nextSibling,f=c["s-ol"];f=f.previousSibling;)if((m=f["s-nr"])&&m["s-sn"]===c["s-sn"]&&d===m.parentNode&&(!(m=m.nextSibling)||!m["s-nr"])){p=m;break}(!p&&d!==c.parentNode||c.nextSibling!==p)&&c!==p&&(!c["s-hn"]&&c["s-ol"]&&(c["s-hn"]=c["s-ol"].parentNode.nodeName),d.insertBefore(c,p))}else 1===c.nodeType&&(c.hidden=!0)}Pe&&kt(l.$elm$),yn.$flags$&=-2,Et.length=0}},At=function(e){return vn.createComment("<slot".concat(e.$name$?' name="'+e.$name$+'"':"","> (host=").concat(a.toLowerCase(),")"))},Pt=function(e){return vn.createComment("org-location for "+(e.localName?"<".concat(e.localName,"> (host=").concat(e["s-hn"],")"):"[".concat(e.textContent,"]")))},It=function(e,t){Ee&&t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},zt=function(e,t){if(ne&&U&&(e.$flags$|=16),!(Ee&&4&e.$flags$)){It(e,e.$ancestorComponent$);var n=function(){return Lt(e,t)};return ne?In(n):n()}e.$flags$|=512},Lt=function(e,t){var n,r=e.$hostElement$,i=Oe("scheduleUpdate",e.$cmpMeta$.$tagName$),a=ce?e.$lazyInstance$:r;return t?(ce&&E&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(e){var t=(0,h.Z)(e,2),n=t[0],r=t[1];return Ft(a,n,r)})),e.$queuedListeners$=void 0)),$t(r,"componentWillLoad"),y&&(n=Ft(a,"componentWillLoad"))):($t(r,"componentWillUpdate"),_&&(n=Ft(a,"componentWillUpdate"))),$t(r,"componentWillRender"),x&&(n=Dt(n,(function(){return Ft(a,"componentWillRender")}))),i(),Dt(n,(function(){return Ot(e,a,t)}))},Dt=function(e,t){return Rt(e)?e.then(t):t()},Rt=function(e){return e instanceof Promise||e&&e.then&&"function"===typeof e.then},Ot=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t,n,r){var i,a,o,s,l,c,h;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.$hostElement$,o=Oe("update",t.$cmpMeta$.$tagName$),s=a["s-rc"],$&&r&&lt(t),l=Oe("render",t.$cmpMeta$.$tagName$),ae&&(t.$flags$|=1024),!se){e.next=11;break}return e.next=9,jt(t,n,a);case 9:e.next=12;break;case 11:jt(t,n,a);case 12:if(_e&&yn.$cssShim$&&yn.$cssShim$.updateHost(a),ae&&(t.$renderCount$=void 0===t.$renderCount$?1:t.$renderCount$+1,t.$flags$&=-1025),se)try{Ut(a),r&&(1&t.$cmpMeta$.$flags$?a["s-en"]="":2&t.$cmpMeta$.$flags$&&(a["s-en"]="c"))}catch(u){sn(u,a)}Ee&&s&&(s.map((function(e){return e()})),a["s-rc"]=void 0),l(),o(),Ee?(c=null!==(i=a["s-p"])&&void 0!==i?i:[],h=function(){return Nt(t)},0===c.length?h():(Promise.all(c).then(h),t.$flags$|=4,c.length=0)):Nt(t);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),jt=function(e,t,n){var r=!!d,i=!!ce,a=!!ne,o=!!U;try{if(t,t=(r||t.render)&&t.render(),o&&a&&(e.$flags$&=-17),(o||i)&&(e.$flags$|=2),k||R)if(J||R){if(se)return Promise.resolve(t).then((function(t){return Mt(e,t)}));Mt(e,t)}else n.textContent=t}catch(s){sn(s,e.$hostElement$)}return null,null},Nt=function(e){var t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=Oe("postUpdate",t),i=ce?e.$lazyInstance$:n,a=e.$ancestorComponent$;g&&(ae&&(e.$flags$|=1024),Ft(i,"componentDidRender"),ae&&(e.$flags$&=-1025)),$t(n,"componentDidRender"),64&e.$flags$?(v&&(ae&&(e.$flags$|=1024),Ft(i,"componentDidUpdate"),ae&&(e.$flags$&=-1025)),$t(n,"componentDidUpdate"),r()):(e.$flags$|=64,Ee&&B&&Vt(n),p&&(ae&&(e.$flags$|=2048),Ft(i,"componentDidLoad"),ae&&(e.$flags$&=-2049)),$t(n,"componentDidLoad"),r(),Ee&&(e.$onReadyResolve$(n),a||Bt(t))),re&&n["s-hmr-load"]&&n["s-hmr-load"](),I&&ce&&e.$onInstanceResolve$(n),Ee&&(e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&An((function(){return zt(e,!1)})),e.$flags$&=-517)},Bt=function(e){B&&Vt(vn.documentElement),Se&&(yn.$flags$|=2),An((function(){return it(mn,"appload",{detail:{namespace:Ce}})})),he&&performance.measure&&performance.measure("[Stencil] ".concat(Ce," initial load (by ").concat(e,")"),"st:app:start")},Ft=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){sn(r)}},$t=function(e,t){ue&&it(e,"stencil_"+t,{bubbles:!0,composed:!0,detail:{namespace:Ce}})},Vt=function(e){return pe?e.classList.add("hydrated"):de?e.setAttribute("hydrated",""):void 0},Ut=function e(t){var n=t.children;if(null!=n)for(var r=0,i=n.length;r<i;r++){var a=n[r];"function"===typeof a.connectedCallback&&a.connectedCallback(),e(a)}},Zt=function(e,t,n,r){var i,a,o=rn(e),s=ce?o.$hostElement$:e,l=o.$instanceValues$.get(t),u=o.$flags$,c=ce?o.$lazyInstance$:s;i=n,a=r.$members$[t][0],n=null==i||Ue(i)?i:ve&&4&a?"false"!==i&&(""===i||!!i):ge&&2&a?parseFloat(i):ye&&1&a?String(i):i;var h=Number.isNaN(l)&&Number.isNaN(n);if((!ce||!(8&u)||void 0===l)&&(n!==l&&!h)&&(o.$instanceValues$.set(t,n),ae&&(1024&o.$flags$?cn('The state/prop "'.concat(t,'" changed during rendering. This can potentially lead to infinite-loops and other bugs.'),"\nElement",s,"\nNew value",n,"\nOld value",l):2048&o.$flags$&&cn('The state/prop "'.concat(t,'" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"'),"\nElement",s,"\nNew value",n,"\nOld value",l)),!ce||c)){if(te&&r.$watchers$&&128&u){var f=r.$watchers$[t];f&&f.map((function(e){try{c[e](n,l,t)}catch(r){sn(r,s)}}))}if(U&&2===(18&u)){if(be&&c.componentShouldUpdate&&!1===c.componentShouldUpdate(n,l,t))return;zt(o,!1)}}},Ht=function(e,t,n){if(P&&t.$members$){te&&e.watchers&&(t.$watchers$=e.watchers);var r=Object.entries(t.$members$),i=e.prototype;if(r.map((function(e){var r=(0,h.Z)(e,2),a=r[0],o=(0,h.Z)(r[1],1)[0];(D||F)&&(31&o||(!ce||2&n)&&32&o)?Object.defineProperty(i,a,{get:function(){return e=a,rn(this).$instanceValues$.get(e);var e},set:function(e){if(ae){var r=rn(this);0===(1&n)&&0===(8&r.$flags$)&&0!==(31&o)&&0===(1024&o)&&cn('@Prop() "'.concat(a,'" on <').concat(t.$tagName$,"> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability"))}Zt(this,a,e,t)},configurable:!0,enumerable:!0}):ce&&I&&1&n&&64&o&&Object.defineProperty(i,a,{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=rn(this);return r.$onInstancePromise$.then((function(){var e;return(e=r.$lazyInstance$)[a].apply(e,t)}))}})})),L&&(!ce||1&n)){var a=new Map;i.attributeChangedCallback=function(e,t,n){var r=this;yn.jmp((function(){var t=a.get(e);if(r.hasOwnProperty(t))n=r[t],delete r[t];else if(i.hasOwnProperty(t)&&"number"===typeof r[t]&&r[t]==n)return;r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){var t=(0,h.Z)(e,2);t[0];return 15&t[1][0]})).map((function(e){var n=(0,h.Z)(e,2),r=n[0],i=n[1],o=i[1]||r;return a.set(o,r),R&&512&i[0]&&t.$attrsToReflect$.push([r,o]),o}))}}return e},Wt=function(){var e=(0,c.Z)((0,u.Z)().mark((function e(t,r,i,a,o){var s,l,c,h,f,d,p;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(32&r.$flags$)){e.next=36;break}if(r.$flags$|=32,!ce&&!le){e.next=22;break}if(!(o=fn(i,r,a)).then){e.next=10;break}return s=je("st:load:".concat(i.$tagName$,":").concat(r.$modeName$),"[Stencil] Load module for <".concat(i.$tagName$,">")),e.next=8,o;case 8:o=e.sent,s();case 10:if(!ae&&!ie||o){e.next=12;break}throw new Error('Constructor for "'.concat(i.$tagName$,"#").concat(r.$modeName$,'" was not found'));case 12:P&&!o.isProxied&&(te&&(i.$watchers$=o.watchers),Ht(o,i,2),o.isProxied=!0),l=Oe("createInstance",i.$tagName$),P&&(r.$flags$|=8);try{new o(r)}catch(u){sn(u)}P&&(r.$flags$&=-9),te&&(r.$flags$|=128),l(),qt(r.$lazyInstance$),e.next=24;break;case 22:o=t.constructor,customElements.whenDefined(i.$tagName$).then((function(){return r.$flags$|=128}));case 24:if(!$||!o.style){e.next=36;break}if(c=o.style,z&&"string"!==typeof c&&(c=c[r.$modeName$=tt(t)],se&&r.$modeName$&&t.setAttribute("s-mode",r.$modeName$)),h=ut(i,r.$modeName$),dn.has(h)){e.next=36;break}if(f=Oe("registerStyles",i.$tagName$),!(!se&&j&&me&&8&i.$flags$)){e.next=34;break}return e.next=33,n.e(738).then(n.bind(n,738)).then((function(e){return e.scopeCss(c,h,!1)}));case 33:c=e.sent;case 34:ot(h,c,!!(1&i.$flags$)),f();case 36:d=r.$ancestorComponent$,p=function(){return zt(r,!0)},Ee&&d&&d["s-rc"]?d["s-rc"].push(p):p();case 39:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),qt=function(e){ce&&b&&Ft(e,"connectedCallback")},Gt=function(e){if(0===(1&yn.$flags$)){var t=rn(e),n=t.$cmpMeta$,r=Oe("connectedCallback",n.$tagName$);if(M&&Jt(e,t,n.$listeners$,!0),1&t.$flags$)Jt(e,t,n.$listeners$,!1),qt(t.$lazyInstance$);else{var i;if(t.$flags$|=1,le&&(i=e.getAttribute(Ne))){if(j&&_n&&1&n.$flags$){var a=z?st(e.shadowRoot,n,e.getAttribute("s-mode")):st(e.shadowRoot,n);e.classList.remove(a+"-h",a+"-s")}!function(e,t,n,r){var i=Oe("hydrateClient",t),a=e.shadowRoot,o=[],s=j&&a?[]:null,l=r.$vnode$=We(t,null);yn.$orgLocNodes$||et(vn.body,yn.$orgLocNodes$=new Map),e[Ne]=n,e.removeAttribute(Ne),Qe(l,o,[],s,e,e,n),o.map((function(e){var n=e.$hostId$+"."+e.$nodeId$,r=yn.$orgLocNodes$.get(n),i=e.$elm$;r&&_n&&""===r["s-en"]&&r.parentNode.insertBefore(i,r.nextSibling),a||(i["s-hn"]=t,r&&(i["s-ol"]=r,i["s-ol"]["s-nr"]=i)),yn.$orgLocNodes$.delete(n)})),j&&a&&s.map((function(e){e&&a.appendChild(e)})),i()}(e,n.$tagName$,i,t)}if(fe&&!i&&(se||(N||j)&&12&n.$flags$)&&Xt(e),Ee)for(var o=e;o=o.parentNode||o.host;)if(le&&1===o.nodeType&&o.hasAttribute("s-id")&&o["s-p"]||o["s-p"]){It(t,t.$ancestorComponent$=o);break}D&&!se&&n.$members$&&Object.entries(n.$members$).map((function(t){var n=(0,h.Z)(t,2),r=n[0];if(31&(0,h.Z)(n[1],1)[0]&&e.hasOwnProperty(r)){var i=e[r];delete e[r],e[r]=i}})),ke?An((function(){return Wt(e,t,n)})):Wt(e,t,n)}r()}},Xt=function(e){var t=e["s-cr"]=vn.createComment(ie?"content-ref (host=".concat(e.localName,")"):"");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Kt=function(e){if(0===(1&yn.$flags$)){var t=rn(e),n=ce?t.$lazyInstance$:e;E&&t.$rmListeners$&&(t.$rmListeners$.map((function(e){return e()})),t.$rmListeners$=void 0),_e&&yn.$cssShim$&&yn.$cssShim$.removeHost(e),ce&&w&&Ft(n,"disconnectedCallback"),m&&Ft(n,"componentDidUnload")}},Yt=function(e,t){var n={$flags$:t[0],$tagName$:t[1]};P&&(n.$members$=t[2]),E&&(n.$listeners$=t[3]),te&&(n.$watchers$=e.$watchers$),R&&(n.$attrsToReflect$=[]),j&&!_n&&1&n.$flags$&&(n.$flags$|=8);var r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost:function(){an(this,n)},connectedCallback:function(){Gt(this),b&&r&&r.call(this)},disconnectedCallback:function(){Kt(this),w&&i&&i.call(this)},__attachShadow:function(){_n?we?this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=n.$tagName$,Ht(e,n,3)},Jt=function(e,t,n,r){E&&n&&(M&&(n=r?n.filter((function(e){return 32&(0,h.Z)(e,1)[0]})):n.filter((function(e){return!(32&(0,h.Z)(e,1)[0])}))),n.map((function(n){var r=(0,h.Z)(n,3),i=r[0],a=r[1],o=r[2],s=A?en(e,i):e,l=Qt(t,o),u=tn(i);yn.ael(s,a,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return yn.rel(s,a,l,u)}))})))},Qt=function(e,t){return function(n){try{ce?256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n]):e.$hostElement$[t](n)}catch(r){sn(r)}}},en=function(e,t){return T&&4&t?vn:S&&8&t?mn:C&&16&t?vn.body:M&&32&t?e.parentElement:e},tn=function(e){return xn?{passive:0!==(1&e),capture:0!==(2&e)}:0!==(2&e)},nn=new WeakMap,rn=function(e){return nn.get(e)},an=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return ae&&(n.$renderCount$=0),I&&ce&&(n.$onInstancePromise$=new Promise((function(e){return n.$onInstanceResolve$=e}))),Ee&&(n.$onReadyPromise$=new Promise((function(e){return n.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[]),Jt(e,n,t.$listeners$,!1),nn.set(e,n)},on=function(e,t){return t in e},sn=function(e,t){return(o||console.error)(e,t)},ln=oe?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],un=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,ln.concat(n))},cn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,ln.concat(n))},hn=new Map,fn=function(e,t,r){var i=e.$tagName$.replace(/-/g,"_"),a=e.$lazyBundleId$;if(!ae||"string"===typeof a){var o=!re&&hn.get(a);return o?o[i]:n(6031)("./".concat(a,".entry.js").concat(re&&r?"?s-hmr="+r:"")).then((function(e){return re||hn.set(a,e),e[i]}),sn)}un("Trying to lazily load component <".concat(e.$tagName$,'> with style mode "').concat(t.$modeName$,'", but it does not exist.'))},dn=new Map,pn=[],mn="undefined"!==typeof window?window:{},vn=(_e&&mn.CSS,mn.document||{head:{}}),gn=mn.HTMLElement||function(){return(0,l.Z)((function e(){(0,s.Z)(this,e)}))}(),yn={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},_n=!me||!j||function(){return(vn.head.attachShadow+"").indexOf("[native")>-1}(),xn=function(){var e=!1;try{vn.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return e}(),bn=!!xe&&function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1}(),wn=[],kn=[],En=[],Sn=function(e,t){return function(n){e.push(n),De||(De=!0,t&&4&yn.$flags$?An(Mn):yn.raf(Mn))}},Tn=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){sn(n)}e.length=0},Cn=function(e,t){for(var n=0,r=0;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(i){sn(i)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},Mn=function e(){if(Se&&Le++,Tn(wn),Se){var t=2===(6&yn.$flags$)?performance.now()+14*Math.ceil(.1*Le):1/0;Cn(kn,t),Cn(En,t),kn.length>0&&(En.push.apply(En,kn),kn.length=0),(De=wn.length+kn.length+En.length>0)?yn.raf(e):Le=0}else Tn(kn),(De=wn.length>0)&&yn.raf(e)},An=function(e){return Promise.resolve(t).then(e);var t},Pn=Sn(wn,!1),In=Sn(kn,!0)},2110:function(e,t,n){"use strict";var r=n(8309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&e(t,i,r)}var o=c(n);h&&(o=o.concat(h(n)));for(var s=l(t),m=l(n),v=0;v<o.length;++v){var g=o[v];if(!a[g]&&(!r||!r[g])&&(!m||!m[g])&&(!s||!s[g])){var y=f(n,g);try{u(t,g,y)}catch(_){}}}}return t}},746:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,_=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case s:case o:case d:return e;default:switch(e=e&&e.$$typeof){case u:case f:case v:case m:case l:return e;default:return t}}case i:return t}}}function w(e){return b(e)===h}t.AsyncMode=c,t.ConcurrentMode=h,t.ContextConsumer=u,t.ContextProvider=l,t.Element=r,t.ForwardRef=f,t.Fragment=a,t.Lazy=v,t.Memo=m,t.Portal=i,t.Profiler=s,t.StrictMode=o,t.Suspense=d,t.isAsyncMode=function(e){return w(e)||b(e)===c},t.isConcurrentMode=w,t.isContextConsumer=function(e){return b(e)===u},t.isContextProvider=function(e){return b(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return b(e)===f},t.isFragment=function(e){return b(e)===a},t.isLazy=function(e){return b(e)===v},t.isMemo=function(e){return b(e)===m},t.isPortal=function(e){return b(e)===i},t.isProfiler=function(e){return b(e)===s},t.isStrictMode=function(e){return b(e)===o},t.isSuspense=function(e){return b(e)===d},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===h||e===s||e===o||e===d||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===y||e.$$typeof===_||e.$$typeof===x||e.$$typeof===g)},t.typeOf=b},8309:function(e,t,n){"use strict";e.exports=n(746)},5483:function(e,t,n){var r=n(8416).default,i=n(6115).default,a=n(3515).default,o=n(1588).default,s=n(3808).default,l=n(4993).default,u=n(1589).default,c=n(861).default,h=n(7424).default,f=n(4704).default,d=n(6690).default,p=n(9728).default,m=n(1655).default,v=n(6389).default,g=n(3496).default;e.exports=function(){"use strict";var e,t,n;function y(r,i){if(e)if(t){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",o={};e(o),n=i(o),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else t=i;else e=i}return y(["exports"],(function(e){var t,n,r,y="undefined"!=typeof self?self:{},_="2.15.0",x={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==t){var e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{t=null!={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):e}catch(y){t=e}}return t},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!x.API_URL)return null;try{var t=new URL(x.API_URL);return"api.mapbox.cn"===t.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===t.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},b={supported:!1,testSupport:function(e){!w&&r&&(k?E(e):n=e)}},w=!1,k=!1;function E(e){var t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.isContextLost())return;b.supported=!0}catch(e){}e.deleteTexture(t),w=!0}y.document&&((r=y.document.createElement("img")).onload=function(){n&&E(n),n=null,k=!0},r.onerror=function(){w=!0,n=null},r.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var S="01";function T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C=M;function M(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}M.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=i/a}var o=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var A=T(C),P=I;function I(e,t){this.x=e,this.y=t}I.prototype={clone:function(){return new I(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},I.convert=function(e){return e instanceof I?e:Array.isArray(e)?new I(e[0],e[1]):e};var z=T(P),L=Math.PI/180,D=180/Math.PI;function R(e){return e*L}function O(e){return e*D}var j=[[0,0],[1,0],[1,1],[0,1]];function N(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function B(e,t,n,r){var i=new A(e,t,n,r);return function(e){return i.solve(e)}}var F=B(.25,.1,.25,1);function $(e,t,n){return Math.min(n,Math.max(t,e))}function V(e,t,n){return(n=$((n-e)/(t-e),0,1))*n*(3-2*n)}function U(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function Z(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach((function(e,o){t(e,(function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)}))}))}function H(e){var t=[];for(var n in e)t.push(e[n]);return t}function W(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}var q=1;function G(){return q++}function X(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function K(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Y(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function J(e,t){e.forEach((function(e){t[e]&&(t[e]=t[e].bind(t))}))}function Q(e,t){return-1!==e.indexOf(t,e.length-t.length)}function ee(e,t,n){var r={};for(var i in e)r[i]=t.call(n||this,e[i],i,e);return r}function te(e,t,n){var r={};for(var i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function ne(e){return Array.isArray(e)?e.map(ne):"object"==typeof e&&e?ee(e,ne):e}var re={};function ie(e){re[e]||("undefined"!=typeof console&&console.warn(e),re[e]=!0)}function ae(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function oe(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],r+=((n=e[o]).x-t.x)*(t.y+n.y);return r}function se(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function le(e){var t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(e,n,r,i){var a=r||i;return t[n]=!a||a.toLowerCase(),""})),t["max-age"]){var n=parseInt(t["max-age"],10);isNaN(n)?delete t["max-age"]:t["max-age"]=n}return t}var ue=null;function ce(e){if(null==ue){var t=e.navigator?e.navigator.userAgent:null;ue=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return ue}function he(e){try{var t=y[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function fe(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}var de,pe,me="mapbox-tiles",ve=500,ge=50;function ye(){try{return y.caches}catch(e){}}function _e(){ye()&&!de&&(de=y.caches.open(me))}function xe(e){var t=e.indexOf("?");if(t<0)return e;var n=function(e){var t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((function(e){var t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?"".concat(e.slice(0,t),"?").concat(r.join("&")):e.slice(0,t)}var be=1/0,we={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(we);var ke=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),401===r&&De(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),(a=t.call(this,e)).status=r,a.url=i,a}return p(n,[{key:"toString",value:function(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),n}(g(Error)),Ee=se()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===y.location.protocol?y.parent:y).location.href},Se=function(e,t){if(!(/^file:/.test(n=e.url)||/^file:/.test(Ee())&&!/^\w+:/.test(n))){if(y.fetch&&y.Request&&y.AbortController&&y.Request.prototype.hasOwnProperty("signal"))return function(e,t){var n,r=new y.AbortController,i=new y.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Ee(),referrerPolicy:e.referrerPolicy,signal:r.signal}),a=!1,o=!1,s=(n=i.url).indexOf("sku=")>0&&De(n);"json"===e.type&&i.headers.set("Accept","application/json");var l=function(n,r,a){if(!o){if(n&&"SecurityError"!==n.message&&ie(n.toString()),r&&a)return u(r);var l=Date.now();y.fetch(i).then((function(n){if(n.ok){var r=s?n.clone():null;return u(n,r,l)}return t(new ke(n.statusText,n.status,e.url))})).catch((function(n){"AbortError"!==n.name&&t(new Error("".concat(n.message," ").concat(e.url)))}))}},u=function(n,r,s){("arrayBuffer"===e.type?n.arrayBuffer():"json"===e.type?n.json():n.text()).then((function(e){o||(r&&s&&function(e,t,n){if(_e(),de){var r={status:t.status,statusText:t.statusText,headers:new y.Headers};t.headers.forEach((function(e,t){return r.headers.set(t,e)}));var i=le(t.headers.get("Cache-Control")||"");if(!i["no-store"]){i["max-age"]&&r.headers.set("Expires",new Date(n+1e3*i["max-age"]).toUTCString());var a=r.headers.get("Expires");a&&(new Date(a).getTime()-n<42e4||function(e,t){if(void 0===pe)try{new Response(new ReadableStream),pe=!0}catch(e){pe=!1}pe?t(e.body):e.blob().then(t)}(t,(function(t){var n=new y.Response(t,r);_e(),de&&de.then((function(t){return t.put(xe(e.url),n)})).catch((function(e){return ie(e.message)}))})))}}}(i,r,s),a=!0,t(null,e,n.headers.get("Cache-Control"),n.headers.get("Expires")))})).catch((function(e){o||t(new Error(e.message))}))};return s?function(e,t){if(_e(),!de)return t(null);var n=xe(e.url);de.then((function(e){e.match(n).then((function(r){var i=function(e){if(!e)return!1;var t=new Date(e.headers.get("Expires")||0),n=le(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,l):l(null,null),{cancel:function(){o=!0,a||r.abort()}}}(e,t);if(se()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var n;return function(e,t){var n=new y.XMLHttpRequest;for(var r in n.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(n.responseType="arraybuffer"),e.headers)n.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials="include"===e.credentials,n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||0===n.status)&&null!==n.response){var r=n.response;if("json"===e.type)try{r=JSON.parse(n.response)}catch(e){return t(e)}t(null,r,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else t(new ke(n.statusText,n.status,e.url))},n.send(e.body),{cancel:function(){return n.abort()}}}(e,t)},Te=function(e,t){return Se(W(e,{type:"arrayBuffer"}),t)};function Ce(e){var t=y.document.createElement("a");return t.href=e,t.protocol===y.document.location.protocol&&t.host===y.document.location.host}var Me,Ae,Pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Me=[],Ae=0;var Ie=function e(t,n){if(b.supported&&(t.headers||(t.headers={}),t.headers.accept="image/webp,*/*"),Ae>=x.MAX_PARALLEL_IMAGE_REQUESTS){var r={requestParameters:t,callback:n,cancelled:!1,cancel:function(){this.cancelled=!0}};return Me.push(r),r}Ae++;var i=!1,a=function(){if(!i)for(i=!0,Ae--;Me.length&&Ae<x.MAX_PARALLEL_IMAGE_REQUESTS;){var t=Me.shift(),n=t.requestParameters,r=t.callback;t.cancelled||(t.cancel=e(n,r).cancel)}},o=Te(t,(function(e,t,r,i){a(),e?n(e):t&&(y.createImageBitmap?function(e,t){var n=new y.Blob([new Uint8Array(e)],{type:"image/png"});y.createImageBitmap(n).then((function(e){t(null,e)})).catch((function(e){t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))}))}(t,(function(e,t){return n(e,t,r,i)})):function(e,t){var n=new y.Image,r=y.URL;n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,y.requestAnimationFrame((function(){n.src=Pe}))},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var i=new y.Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(i):Pe}(t,(function(e,t){return n(e,t,r,i)})))}));return{cancel:function(){o.cancel(),a()}}},ze="NO_ACCESS_TOKEN";function Le(e){return 0===e.indexOf("mapbox:")}function De(e){return x.API_URL_REGEX.test(e)}function Re(e){return x.API_CDN_URL_REGEX.test(e)}function Oe(e){return x.API_STYLE_REGEX.test(e)&&!je(e)}function je(e){return x.API_SPRITE_REGEX.test(e)}var Ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Be(e){var t=e.match(Ne);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Fe(e){var t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}var $e="mapbox.eventData";function Ve(e){if(!e)return null;var t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(y.atob(t[1]).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch(e){return null}}var Ue=function(){function e(t){d(this,e),this.type=t,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}return p(e,[{key:"getStorageKey",value:function(e){var t=Ve(x.ACCESS_TOKEN),n="";return n=t&&t.u?y.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))}))):x.ACCESS_TOKEN||"",e?"".concat($e,".").concat(e,":").concat(n):"".concat($e,":").concat(n)}},{key:"fetchEventData",value:function(){var e=he("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{var r=y.localStorage.getItem(t);r&&(this.eventData=JSON.parse(r));var i=y.localStorage.getItem(n);i&&(this.anonId=i)}catch(e){ie("Unable to read from LocalStorage")}}},{key:"saveEventData",value:function(){var e=he("localStorage"),t=this.getStorageKey(),n=this.getStorageKey("uuid");if(e)try{y.localStorage.setItem(n,this.anonId),Object.keys(this.eventData).length>=1&&y.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){ie("Unable to write to LocalStorage")}}},{key:"processRequests",value:function(e){}},{key:"postEvent",value:function(e,t,n,r){var i=this;if(x.EVENTS_URL){var a=Be(x.EVENTS_URL);a.params.push("access_token=".concat(r||x.ACCESS_TOKEN||""));var o={event:this.type,created:new Date(e).toISOString()},s=t?W(o,t):o,l={url:Fe(a),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return Se(W(e,{method:"POST"}),t)}(l,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"queueRequest",value:function(e,t){this.queue.push(e),this.processRequests(t)}}]),e}(),Ze=new(function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"appUserTurnstile"))._customAccessToken=e,r}return p(n,[{key:"postTurnstileEvent",value:function(e,t){x.EVENTS_URL&&x.ACCESS_TOKEN&&Array.isArray(e)&&e.some((function(e){return Le(e)||De(e)}))&&this.queueRequest(Date.now(),t)}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var n=Ve(x.ACCESS_TOKEN),r=n?n.u:x.ACCESS_TOKEN,i=r!==this.eventData.tokenU;Y(this.anonId)||(this.anonId=X(),i=!0);var a=this.queue.shift();if(this.eventData.lastSuccess){var o=new Date(this.eventData.lastSuccess),s=new Date(a),l=(a-this.eventData.lastSuccess)/864e5;i=i||l>=1||l<-1||o.getDate()!==s.getDate()}else i=!0;i?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:S,"enabled.telemetry":!1,userId:this.anonId},(function(e){e||(t.eventData.lastSuccess=a,t.eventData.tokenU=r)}),e):this.processRequests()}}}]),n}(Ue)),He=Ze.postTurnstileEvent.bind(Ze),We=new(function(e){m(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,"map.load")).success={},e.skuToken="",e}return p(n,[{key:"postMapLoadEvent",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,x.EVENTS_URL&&(n||x.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ze)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||(this.anonId||this.fetchEventData(),Y(this.anonId)||(this.anonId=X()),this.postEvent(i,{sdkIdentifier:"mapbox-gl-js",sdkVersion:_,skuId:S,skuToken:this.skuToken,userId:this.anonId},(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e))}}}]),n}(Ue)),qe=We.postMapLoadEvent.bind(We),Ge=new(function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"gljs.performance")}return p(n,[{key:"postPerformanceEvent",value:function(e,t){x.EVENTS_URL&&(e||x.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}},{key:"processRequests",value:function(e){if(!this.pendingRequest&&0!==this.queue.length){var t,n=this.queue.shift(),r=n.timestamp,i=function(e){var t=y.performance.getEntriesByType("resource"),n=y.performance.getEntriesByType("mark"),r=function(e){var t={};if(e)for(var n in e)if("other"!==n){var r,i=f(e[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value,o="".concat(n,"ResolveRangeMin"),s="".concat(n,"ResolveRangeMax"),l="".concat(n,"RequestCount"),u="".concat(n,"RequestCachedCount");t[o]=Math.min(t[o]||1/0,a.startTime),t[s]=Math.max(t[s]||-1/0,a.responseEnd);var c=function(e){void 0===t[e]&&(t[e]=0),++t[e]};void 0!==a.transferSize&&0===a.transferSize&&c(u),c(l)}}catch(h){i.e(h)}finally{i.f()}}return t}(function(e,t){var n={};if(e){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=t(a);void 0===n[o]&&(n[o]=[]),n[o].push(a)}}catch(s){i.e(s)}finally{i.f()}}return n}(t,tt)),i=y.devicePixelRatio,a=y.navigator.connection||y.navigator.mozConnection||y.navigator.webkitConnection,o={counters:[],metadata:[],attributes:[]},s=function(e,t,n){null!=n&&e.push({name:t,value:n.toString()})};for(var l in r)s(o.counters,l,r[l]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(s(o.counters,"interactionRangeMin",e.interactionRange[0]),s(o.counters,"interactionRangeMax",e.interactionRange[1])),n)for(var u=function(){var e=h[c],t=Qe[e],r=n.find((function(e){return e.name===t}));r&&s(o.counters,t,r.startTime)},c=0,h=Object.keys(Qe);c<h.length;c++)u();return s(o.counters,"visibilityHidden",e.visibilityHidden),s(o.attributes,"style",function(e){if(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.name.split("?")[0];if(Oe(r)){var i=r.split("/").slice(-2);if(2===i.length)return"mapbox://styles/".concat(i[0],"/").concat(i[1])}}}catch(a){n.e(a)}finally{n.f()}}}(t)),s(o.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),s(o.attributes,"fogEnabled",e.fogEnabled?"true":"false"),s(o.attributes,"projection",e.projection),s(o.attributes,"zoom",e.zoom),s(o.metadata,"devicePixelRatio",i),s(o.metadata,"connectionEffectiveType",a?a.effectiveType:void 0),s(o.metadata,"navigatorUserAgent",y.navigator.userAgent),s(o.metadata,"screenWidth",y.screen.width),s(o.metadata,"screenHeight",y.screen.height),s(o.metadata,"windowWidth",y.innerWidth),s(o.metadata,"windowHeight",y.innerHeight),s(o.metadata,"mapWidth",e.width/i),s(o.metadata,"mapHeight",e.height/i),s(o.metadata,"webglRenderer",e.renderer),s(o.metadata,"webglVendor",e.vendor),s(o.metadata,"sdkVersion",_),s(o.metadata,"sdkIdentifier","mapbox-gl-js"),o}(n.performanceData),a=f(i.metadata);try{for(a.s();!(t=a.n()).done;)t.value}catch(c){a.e(c)}finally{a.f()}var o,s=f(i.counters);try{for(s.s();!(o=s.n()).done;)o.value}catch(c){s.e(c)}finally{s.f()}var l,u=f(i.attributes);try{for(u.s();!(l=u.n()).done;)l.value}catch(c){u.e(c)}finally{u.f()}this.postEvent(r,i,(function(){}),e)}}}]),n}(Ue)),Xe=Ge.postPerformanceEvent.bind(Ge),Ke=new(function(e){m(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,"map.auth")).success={},e.skuToken="",e}return p(n,[{key:"getSession",value:function(e,t,n,r){var i=this;if(x.API_URL&&x.SESSION_PATH){var a=Be(x.API_URL+x.SESSION_PATH);a.params.push("sku=".concat(t||"")),a.params.push("access_token=".concat(r||x.ACCESS_TOKEN||""));var o={url:Fe(a),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return Se(W(e,{method:"GET"}),t)}(o,(function(e){i.pendingRequest=null,n(e),i.saveEventData(),i.processRequests(r)}))}}},{key:"getSessionAPI",value:function(e,t,n,r){this.skuToken=t,this.errorCb=r,x.SESSION_PATH&&x.API_URL&&(n||x.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ze)))}},{key:"processRequests",value:function(e){var t=this;if(!this.pendingRequest&&0!==this.queue.length){var n=this.queue.shift(),r=n.id,i=n.timestamp;r&&this.success[r]||this.getSession(i,this.skuToken,(function(e){e?t.errorCb(e):r&&(t.success[r]=!0)}),e)}}}]),n}(Ue)),Ye=Ke.getSessionAPI.bind(Ke),Je=new Set,Qe={create:"create",load:"load",fullLoad:"fullLoad"},et={mark:function(e){y.performance.mark(e)},measure:function(e,t,n){y.performance.measure(e,t,n)}};function tt(e){var t=e.name.split("?")[0];return Re(t)&&t.includes("mapbox-gl.js")?"javascript":Re(t)&&t.includes("mapbox-gl.css")?"css":function(e){return x.API_FONTS_REGEX.test(e)}(t)?"fontRange":je(t)?"sprite":Oe(t)?"style":function(e){return x.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}var nt,rt,it,at,ot=y.performance;function st(e){var t=e?e.url.toString():void 0;return ot.getEntriesByName(t)}var lt={now:function(){return void 0!==it?it:y.performance.now()},setNow:function(e){it=e},restoreNow:function(){it=void 0},frame:function(e){var t=y.requestAnimationFrame(e);return{cancel:function(){return y.cancelAnimationFrame(t)}}},getImageData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.width,r=e.height;at||(at=y.document.createElement("canvas"));var i=at.getContext("2d",{willReadFrequently:!0});if(!i)throw new Error("failed to create canvas 2d context");return(n>at.width||r>at.height)&&(at.width=n,at.height=r),i.clearRect(-t,-t,n+2*t,r+2*t),i.drawImage(e,0,0,n,r),i.getImageData(-t,-t,n+2*t,r+2*t)},resolveURL:function(e){return nt||(nt=y.document.createElement("a")),nt.href=e,nt.href},get devicePixelRatio(){return y.devicePixelRatio},get prefersReducedMotion(){return!!y.matchMedia&&(null==rt&&(rt=y.matchMedia("(prefers-reduced-motion: reduce)")),rt.matches)}};function ut(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function ct(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var ht=p((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,e),W(this,n),this.type=t})),ft=function(e){m(n,e);var t=v(n);function n(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d(this,n),t.call(this,"error",W({error:e},r))}return p(n)}(ht),dt=function(){function e(){d(this,e)}return p(e,[{key:"on",value:function(e,t){return this._listeners=this._listeners||{},ut(e,t,this._listeners),this}},{key:"off",value:function(e,t){return ct(e,t,this._listeners),ct(e,t,this._oneTimeListeners),this}},{key:"once",value:function(e,t){var n=this;return t?(this._oneTimeListeners=this._oneTimeListeners||{},ut(e,t,this._oneTimeListeners),this):new Promise((function(t){return n.once(e,t)}))}},{key:"fire",value:function(e,t){"string"==typeof e&&(e=new ht(e,t||{}));var n=e.type;if(this.listens(n)){e.target=this;var r,i=this._listeners&&this._listeners[n]?this._listeners[n].slice():[],a=f(i);try{for(a.s();!(r=a.n()).done;)r.value.call(this,e)}catch(h){a.e(h)}finally{a.f()}var o,s=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[],l=f(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;ct(n,u,this._oneTimeListeners),u.call(this,e)}}catch(h){l.e(h)}finally{l.f()}var c=this._eventedParent;c&&(W(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),c.fire(e))}else e instanceof ft&&console.error(e.error);return this}},{key:"listens",value:function(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}},{key:"setEventedParent",value:function(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}]),e}(),pt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];for(var s in o)e[s]=o[s]}return e}function vt(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function gt(e){if(Array.isArray(e))return e.map(gt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var t={};for(var n in e)t[n]=gt(e[n]);return t}return vt(e)}var yt=function(e){m(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).message=r,i.key=e,i}return p(n)}(g(Error)),_t=yt,xt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];d(this,e),this.parent=t,this.bindings={};var r,i=f(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],s=a[1];this.bindings[o]=s}}catch(l){i.e(l)}finally{i.f()}}return p(e,[{key:"concat",value:function(t){return new e(this,t)}},{key:"get",value:function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}},{key:"has",value:function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}]),e}(),bt=xt,wt={kind:"null"},kt={kind:"number"},Et={kind:"string"},St={kind:"boolean"},Tt={kind:"color"},Ct={kind:"object"},Mt={kind:"value"},At={kind:"collator"},Pt={kind:"formatted"},It={kind:"resolvedImage"};function zt(e,t){return{kind:"array",itemType:e,N:t}}function Lt(e){if("array"===e.kind){var t=Lt(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}var Dt=[wt,kt,Et,St,Tt,Pt,Ct,zt(Mt),It];function Rt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Rt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=Dt;n<r.length;n++)if(!Rt(r[n],t))return null}return"Expected ".concat(Lt(e)," but found ").concat(Lt(t)," instead.")}function Ot(e,t){return t.some((function(t){return t.kind===e.kind}))}function jt(e,t){return t.some((function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e}))}var Nt,Bt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ft(e){return(e=Math.round(e))<0?0:e>255?255:e}function $t(e){return Ft("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Vt(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Ut(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Nt={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Bt)return Bt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var a=n.substr(0,r),o=n.substr(r+1,i-(r+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=Vt(o.pop());case"rgb":return 3!==o.length?null:[$t(o[0]),$t(o[1]),$t(o[2]),s];case"hsla":if(4!==o.length)return null;s=Vt(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,u=Vt(o[1]),c=Vt(o[2]),h=c<=.5?c*(u+1):c+u-c*u,f=2*c-h;return[Ft(255*Ut(f,h,l+1/3)),Ft(255*Ut(f,h,l)),Ft(255*Ut(f,h,l-1/3)),s];default:return null}}return null}}catch(e){}var Zt=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d(this,e),this.r=t,this.g=n,this.b=r,this.a=i}return p(e,[{key:"toString",value:function(){var e=this.toArray(),t=h(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"rgba(".concat(Math.round(n),",").concat(Math.round(r),",").concat(Math.round(i),",").concat(a,")")}},{key:"toArray",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}},{key:"toArray01",value:function(){var e=this.r,t=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}},{key:"toArray01PremultipliedAlpha",value:function(){return[this.r,this.g,this.b,this.a]}}],[{key:"parse",value:function(t){if(t){if(t instanceof e)return t;if("string"==typeof t){var n=Nt(t);return n?new e(n[0]/255*n[3],n[1]/255*n[3],n[2]/255*n[3],n[3]):void 0}}}}]),e}();Zt.black=new Zt(0,0,0,1),Zt.white=new Zt(1,1,1,1),Zt.transparent=new Zt(0,0,0,0),Zt.red=new Zt(1,0,0,1),Zt.blue=new Zt(0,0,1,1);var Ht=Zt,Wt=function(){function e(t,n,r){d(this,e),this.sensitivity=t?n?"variant":"case":n?"accent":"base",this.locale=r,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}return p(e,[{key:"compare",value:function(e,t){return this.collator.compare(e,t)}},{key:"resolvedLocale",value:function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}]),e}(),qt=p((function e(t,n,r,i,a){d(this,e),this.text=t.normalize?t.normalize():t,this.image=n,this.scale=r,this.fontStack=i,this.textColor=a})),Gt=function(){function e(t){d(this,e),this.sections=t}return p(e,[{key:"isEmpty",value:function(){return 0===this.sections.length||!this.sections.some((function(e){return 0!==e.text.length||e.image&&0!==e.image.name.length}))}},{key:"toString",value:function(){return 0===this.sections.length?"":this.sections.map((function(e){return e.text})).join("")}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(r.image)t.push(["image",r.image.name]);else{t.push(r.text);var i={};r.fontStack&&(i["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(i["font-scale"]=r.scale),r.textColor&&(i["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(i)}}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"fromString",value:function(t){return new e([new qt(t,null,null,null,null)])}},{key:"factory",value:function(t){return t instanceof e?t:e.fromString(t)}}]),e}(),Xt=function(){function e(t){d(this,e),this.name=t.name,this.available=t.available}return p(e,[{key:"toString",value:function(){return this.name}},{key:"serialize",value:function(){return["image",this.name]}}],[{key:"fromString",value:function(t){return t?new e({name:t,available:!1}):null}}]),e}();function Kt(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,n,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Yt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof Ht)return!0;if(e instanceof Wt)return!0;if(e instanceof Gt)return!0;if(e instanceof Xt)return!0;if(Array.isArray(e)){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!Yt(t.value))return!1}catch(i){n.e(i)}finally{n.f()}return!0}if("object"==typeof e){for(var r in e)if(!Yt(e[r]))return!1;return!0}return!1}function Jt(e){if(null===e)return wt;if("string"==typeof e)return Et;if("boolean"==typeof e)return St;if("number"==typeof e)return kt;if(e instanceof Ht)return Tt;if(e instanceof Wt)return At;if(e instanceof Gt)return Pt;if(e instanceof Xt)return It;if(Array.isArray(e)){var t,n,r=e.length,i=f(e);try{for(i.s();!(n=i.n()).done;){var a=Jt(n.value);if(t){if(t===a)continue;t=Mt;break}t=a}}catch(o){i.e(o)}finally{i.f()}return zt(t||Mt,r)}return Ct}function Qt(e){var t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ht||e instanceof Gt||e instanceof Xt?e.toString():JSON.stringify(e)}var en=function(){function e(t,n){d(this,e),this.type=t,this.value=n}return p(e,[{key:"evaluate",value:function(){return this.value}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ht?["rgba"].concat(this.value.toArray()):this.value instanceof Gt?this.value.serialize():this.value}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'literal' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(!Yt(t[1]))return n.error("invalid value");var r=t[1],i=Jt(r),a=n.expectedType;return"array"!==i.kind||0!==i.N||!a||"array"!==a.kind||"number"==typeof a.N&&0!==a.N||(i=a),new e(i,r)}}]),e}(),tn=en,nn=function(){function e(t){d(this,e),this.name="ExpressionEvaluationError",this.message=t}return p(e,[{key:"toJSON",value:function(){return this.message}}]),e}(),rn={string:Et,number:kt,boolean:St,object:Ct},an=function(){function e(t,n){d(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){for(var t=0;t<this.args.length;t++){var n=this.args[t].evaluate(e);if(!Rt(this.type,Jt(n)))return n;if(t===this.args.length-1)throw new nn("Expected value to be of type ".concat(Lt(this.type),", but found ").concat(Lt(Jt(n))," instead."))}return null}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=this.type,t=[e.kind];if("array"===e.kind){var n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);var r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r,i=1,a=t[0];if("array"===a){var o,s;if(t.length>2){var l=t[1];if("string"!=typeof l||!(l in rn)||"object"===l)return n.error('The item type argument of "array" must be one of string, number, boolean',1);o=rn[l],i++}else o=Mt;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return n.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}r=zt(o,s)}else r=rn[a];for(var u=[];i<t.length;i++){var c=n.parse(t[i],i,Mt);if(!c)return null;u.push(c)}return new e(r,u)}}]),e}(),on=an,sn=function(){function e(t){d(this,e),this.type=Pt,this.sections=t}return p(e,[{key:"evaluate",value:function(e){return new Gt(this.sections.map((function(t){var n=t.content.evaluate(e);return Jt(n)===It?new qt("",n,null,null,null):new qt(Qt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}},{key:"eachChild",value:function(e){var t,n=f(this.sections);try{for(n.s();!(t=n.n()).done;){var r=t.value;e(r.content),r.scale&&e(r.scale),r.font&&e(r.font),r.textColor&&e(r.textColor)}}catch(i){n.e(i)}finally{n.f()}}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e,t=["format"],n=f(this.sections);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}}catch(a){n.e(a)}finally{n.f()}return t}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[1];if(!Array.isArray(r)&&"object"==typeof r)return n.error("First argument must be an image or text section.");for(var i=[],a=!1,o=1;o<=t.length-1;++o){var s=t[o];if(a&&"object"==typeof s&&!Array.isArray(s)){a=!1;var l=null;if(s["font-scale"]&&!(l=n.parse(s["font-scale"],1,kt)))return null;var u=null;if(s["text-font"]&&!(u=n.parse(s["text-font"],1,zt(Et))))return null;var c=null;if(s["text-color"]&&!(c=n.parse(s["text-color"],1,Tt)))return null;var h=i[i.length-1];h.scale=l,h.font=u,h.textColor=c}else{var f=n.parse(t[o],1,Mt);if(!f)return null;var d=f.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return n.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");a=!0,i.push({content:f,scale:null,font:null,textColor:null})}}return new e(i)}}]),e}(),ln=function(){function e(t){d(this,e),this.type=It,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=Xt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["image",this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,Et);return r?new e(r):n.error("No image name provided.")}}]),e}(),un={"to-boolean":St,"to-color":Tt,"to-number":kt,"to-string":Et},cn=function(){function e(t,n){d(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){var t,n,r,i=f(this.args);try{for(i.s();!(r=i.n()).done;){if(t=r.value.evaluate(e),n=null,t instanceof Ht)return t;if("string"==typeof t){var a=e.parseColor(t);if(a)return a}else if(Array.isArray(t)&&!(n=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Kt(t[0],t[1],t[2],t[3])))return new Ht(t[0]/255,t[1]/255,t[2]/255,t[3])}}catch(c){i.e(c)}finally{i.f()}throw new nn(n||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){var o,s=null,l=f(this.args);try{for(l.s();!(o=l.n()).done;){if(null===(s=o.value.evaluate(e)))return 0;var u=Number(s);if(!isNaN(u))return u}}catch(c){l.e(c)}finally{l.f()}throw new nn("Could not convert ".concat(JSON.stringify(s)," to number."))}return"formatted"===this.type.kind?Gt.fromString(Qt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Xt.fromString(Qt(this.args[0].evaluate(e))):Qt(this.args[0].evaluate(e))}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){if("formatted"===this.type.kind)return new sn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ln(this.args[0]).serialize();var e=["to-".concat(this.type.kind)];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expected at least one argument.");var r=t[0];if(("to-boolean"===r||"to-string"===r)&&2!==t.length)return n.error("Expected one argument.");for(var i=un[r],a=[],o=1;o<t.length;o++){var s=n.parse(t[o],o,Mt);if(!s)return null;a.push(s)}return new e(i,a)}}]),e}(),hn=cn,fn=["Unknown","Point","LineString","Polygon"],dn=function(){function e(){d(this,e),this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}return p(e,[{key:"id",value:function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}},{key:"geometryType",value:function(){return this.feature?"number"==typeof this.feature.type?fn[this.feature.type]:this.feature.type:null}},{key:"geometry",value:function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}},{key:"canonicalID",value:function(){return this.canonical}},{key:"properties",value:function(){return this.feature&&this.feature.properties||{}}},{key:"distanceFromCenter",value:function(){if(this.featureTileCoord&&this.featureDistanceData){var e=this.featureDistanceData.center,t=this.featureDistanceData.scale,n=this.featureTileCoord,r=n.x,i=n.y;return this.featureDistanceData.bearing[0]*(r*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}},{key:"parseColor",value:function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Ht.parse(e)),t}}]),e}(),pn=function(){function e(t,n,r,i){d(this,e),this.name=t,this.type=n,this._evaluate=r,this.args=i}return p(e,[{key:"evaluate",value:function(e){return this._evaluate(e,this.args)}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return[this.name].concat(this.args.map((function(e){return e.serialize()})))}}],[{key:"parse",value:function(t,n){var r,i=t[0],a=e.definitions[i];if(!a)return n.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);var o,s=Array.isArray(a)?a[0]:a.type,l=Array.isArray(a)?[[a[1],a[2]]]:a.overloads,u=l.filter((function(e){var n=h(e,1)[0];return!Array.isArray(n)||n.length===t.length-1})),d=null,p=f(u);try{for(p.s();!(o=p.n()).done;){var m=h(o.value,2),v=m[0],g=m[1];d=new $n(n.registry,n.path,null,n.scope);for(var y=[],_=!1,x=1;x<t.length;x++){var b=t[x],w=Array.isArray(v)?v[x-1]:v.type,k=d.parse(b,1+y.length,w);if(!k){_=!0;break}y.push(k)}if(!_)if(Array.isArray(v)&&v.length!==y.length)d.error("Expected ".concat(v.length," arguments, but found ").concat(y.length," instead."));else{for(var E=0;E<y.length;E++){var S=Array.isArray(v)?v[E]:v.type,T=y[E];d.concat(E+1).checkSubtype(S,T.type)}if(0===d.errors.length)return new e(i,s,g,y)}}}catch(I){p.e(I)}finally{p.f()}if(1===u.length)(r=n.errors).push.apply(r,c(d.errors));else{for(var C=(u.length?u:l).map((function(e){var t;return t=h(e,1)[0],Array.isArray(t)?"(".concat(t.map(Lt).join(", "),")"):"(".concat(Lt(t.type),"...)")})).join(" | "),M=[],A=1;A<t.length;A++){var P=n.parse(t[A],1+M.length);if(!P)return null;M.push(Lt(P.type))}n.error("Expected arguments of type ".concat(C,", but found (").concat(M.join(", "),") instead."))}return null}},{key:"register",value:function(t,n){for(var r in e.definitions=n,n)t[r]=e}}]),e}(),mn=pn,vn=function(){function e(t,n,r){d(this,e),this.type=At,this.locale=r,this.caseSensitive=t,this.diacriticSensitive=n}return p(e,[{key:"evaluate",value:function(e){return new Wt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}},{key:"eachChild",value:function(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected one argument.");var r=t[1];if("object"!=typeof r||Array.isArray(r))return n.error("Collator options argument must be an object.");var i=n.parse(void 0!==r["case-sensitive"]&&r["case-sensitive"],1,St);if(!i)return null;var a=n.parse(void 0!==r["diacritic-sensitive"]&&r["diacritic-sensitive"],1,St);if(!a)return null;var o=null;return r.locale&&!(o=n.parse(r.locale,1,Et))?null:new e(i,a,o)}}]),e}(),gn=8192;function yn(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function _n(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function xn(e,t){var n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*gn),Math.round(r*i*gn)]}function bn(e,t,n){var r=e[0]-t[0],i=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return r*o-a*i==0&&r*a<=0&&i*o<=0}function wn(e,t){for(var n,r,i,a=!1,o=0,s=t.length;o<s;o++)for(var l=t[o],u=0,c=l.length;u<c-1;u++){if(bn(e,l[u],l[u+1]))return!1;(r=l[u])[1]>(n=e)[1]!=(i=l[u+1])[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(a=!a)}return a}function kn(e,t){for(var n=0;n<t.length;n++)if(wn(e,t[n]))return!0;return!1}function En(e,t,n,r){var i=r[0]-n[0],a=r[1]-n[1],o=(e[0]-n[0])*a-i*(e[1]-n[1]),s=(t[0]-n[0])*a-i*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function Sn(e,t,n){var r,i,a,o,s,l,u,c=f(n);try{for(c.s();!(r=c.n()).done;)for(var h=r.value,d=0;d<h.length-1;++d)if(0!=(l=[(s=h[d+1])[0]-(o=h[d])[0],s[1]-o[1]])[0]*(u=[(a=t)[0]-(i=e)[0],a[1]-i[1]])[1]-l[1]*u[0]&&En(i,a,o,s)&&En(o,s,i,a))return!0}catch(p){c.e(p)}finally{c.f()}return!1}function Tn(e,t){for(var n=0;n<e.length;++n)if(!wn(e[n],t))return!1;for(var r=0;r<e.length-1;++r)if(Sn(e[r],e[r+1],t))return!1;return!0}function Cn(e,t){for(var n=0;n<t.length;n++)if(Tn(e,t[n]))return!0;return!1}function Mn(e,t,n){for(var r=[],i=0;i<e.length;i++){for(var a=[],o=0;o<e[i].length;o++){var s=xn(e[i][o],n);yn(t,s),a.push(s)}r.push(a)}return r}function An(e,t,n){for(var r=[],i=0;i<e.length;i++){var a=Mn(e[i],t,n);r.push(a)}return r}function Pn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){var i=.5*r,a=e[0]-n[0]>i?-r:n[0]-e[0]>i?r:0;0===a&&(a=e[0]-n[2]>i?-r:n[2]-e[0]>i?r:0),e[0]+=a}yn(t,e)}function In(e,t,n,r){var i=Math.pow(2,r.z)*gn,a=[r.x*gn,r.y*gn],o=[];if(!e)return o;var s,l=f(e);try{for(l.s();!(s=l.n()).done;){var u,c=s.value,h=f(c);try{for(h.s();!(u=h.n()).done;){var d=u.value,p=[d.x+a[0],d.y+a[1]];Pn(p,t,n,i),o.push(p)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){l.e(m)}finally{l.f()}return o}function zn(e,t,n,r){var i=Math.pow(2,r.z)*gn,a=[r.x*gn,r.y*gn],o=[];if(!e)return o;var s,l,u=f(e);try{for(u.s();!(s=u.n()).done;){var c,h=s.value,d=[],p=f(h);try{for(p.s();!(c=p.n()).done;){var m=c.value,v=[m.x+a[0],m.y+a[1]];yn(t,v),d.push(v)}}catch(w){p.e(w)}finally{p.f()}o.push(d)}}catch(w){u.e(w)}finally{u.f()}if(t[2]-t[0]<=i/2){(l=t)[0]=l[1]=1/0,l[2]=l[3]=-1/0;var g,y=f(o);try{for(y.s();!(g=y.n()).done;){var _,x=g.value,b=f(x);try{for(b.s();!(_=b.n()).done;)Pn(_.value,t,n,i)}catch(w){b.e(w)}finally{b.f()}}}catch(w){y.e(w)}finally{y.f()}}return o}var Ln=function(){function e(t,n){d(this,e),this.type=St,this.geojson=t,this.geometries=n}return p(e,[{key:"evaluate",value:function(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=Mn(t.coordinates,r,i),o=In(e.geometry(),n,r,i);if(!_n(n,r))return!1;var s,l=f(o);try{for(l.s();!(s=l.n()).done;)if(!wn(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var u=An(t.coordinates,r,i),c=In(e.geometry(),n,r,i);if(!_n(n,r))return!1;var h,d=f(c);try{for(d.s();!(h=d.n()).done;)if(!kn(h.value,u))return!1}catch(p){d.e(p)}finally{d.f()}}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){var a=Mn(t.coordinates,r,i),o=zn(e.geometry(),n,r,i);if(!_n(n,r))return!1;var s,l=f(o);try{for(l.s();!(s=l.n()).done;)if(!Tn(s.value,a))return!1}catch(p){l.e(p)}finally{l.f()}}if("MultiPolygon"===t.type){var u=An(t.coordinates,r,i),c=zn(e.geometry(),n,r,i);if(!_n(n,r))return!1;var h,d=f(c);try{for(d.s();!(h=d.n()).done;)if(!Cn(h.value,u))return!1}catch(p){d.e(p)}finally{d.f()}}return!0}(e,this.geometries)}return!1}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["within",this.geojson]}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("'within' expression requires exactly one argument, but found ".concat(t.length-1," instead."));if(Yt(t[1])){var r=t[1];if("FeatureCollection"===r.type)for(var i=0;i<r.features.length;++i){var a=r.features[i].geometry.type;if("Polygon"===a||"MultiPolygon"===a)return new e(r,r.features[i].geometry)}else if("Feature"===r.type){var o=r.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new e(r,r.geometry)}else if("Polygon"===r.type||"MultiPolygon"===r.type)return new e(r,r)}return n.error("'within' expression requires valid geojson object that contains polygon geometry type.")}}]),e}(),Dn=Ln;function Rn(e){if(e instanceof mn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof Dn)return!1;var t=!0;return e.eachChild((function(e){t&&!Rn(e)&&(t=!1)})),t}function On(e){if(e instanceof mn&&"feature-state"===e.name)return!1;var t=!0;return e.eachChild((function(e){t&&!On(e)&&(t=!1)})),t}function jn(e,t){if(e instanceof mn&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild((function(e){n&&!jn(e,t)&&(n=!1)})),n}var Nn=function(){function e(t,n){d(this,e),this.type=n.type,this.name=t,this.boundExpression=n}return p(e,[{key:"evaluate",value:function(e){return this.boundExpression.evaluate(e)}},{key:"eachChild",value:function(){}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["var",this.name]}}],[{key:"parse",value:function(t,n){if(2!==t.length||"string"!=typeof t[1])return n.error("'var' expression requires exactly one string literal argument.");var r=t[1];return n.scope.has(r)?new e(r,n.scope.get(r)):n.error('Unknown variable "'.concat(r,'". Make sure "').concat(r,'" has been bound in an enclosing "let" expression before using it.'),1)}}]),e}(),Bn=Nn,Fn=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new bt,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];d(this,e),this.registry=t,this.path=n,this.key=n.map((function(e){return"[".concat(e,"]")})).join(""),this.scope=i,this.errors=a,this.expectedType=r}return p(e,[{key:"parse",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}},{key:"_parse",value:function(e,t){function n(e,t,n){return"assert"===n?new on(t,[e]):"coerce"===n?new hn(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=e[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found ".concat(typeof r,' instead. If you wanted a literal array, use ["literal", [...]].'),0),null;var i=this.registry[r];if(i){var a=i.parse(e,this);if(!a)return null;if(this.expectedType){var o=this.expectedType,s=a.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==s.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(o,s))return null}else a=n(a,o,t.typeAnnotation||"coerce");else a=n(a,o,t.typeAnnotation||"assert")}if(!(a instanceof tn)&&"resolvedImage"!==a.type.kind&&Vn(a)){var l=new dn;try{a=new tn(a.type,a.evaluate(l))}catch(e){return this.error(e.message),null}}return a}return this.error('Unknown expression "'.concat(r,'". If you wanted a literal array, use ["literal", [...]].'),0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}},{key:"concat",value:function(t,n,r){var i="number"==typeof t?this.path.concat(t):this.path,a=r?this.scope.concat(r):this.scope;return new e(this.registry,i,n||null,a,this.errors)}},{key:"error",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i="".concat(this.key).concat(n.map((function(e){return"[".concat(e,"]")})).join(""));this.errors.push(new _t(i,e))}},{key:"checkSubtype",value:function(e,t){var n=Rt(e,t);return n&&this.error(n),n}}]),e}(),$n=Fn;function Vn(e){if(e instanceof Bn)return Vn(e.boundExpression);if(e instanceof mn&&"error"===e.name)return!1;if(e instanceof vn)return!1;if(e instanceof Dn)return!1;var t=e instanceof hn||e instanceof on,n=!0;return e.eachChild((function(e){n=t?n&&Vn(e):n&&e instanceof tn})),!!n&&Rn(e)&&jn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Un(e,t){for(var n,r,i=e.length-1,a=0,o=i,s=0;a<=o;)if(n=e[s=Math.floor((a+o)/2)],r=e[s+1],n<=t){if(s===i||t<r)return s;a=s+1}else{if(!(n>t))throw new nn("Input is not a number.");o=s-1}return 0}var Zn=function(){function e(t,n,r){d(this,e),this.type=t,this.input=n,this.labels=[],this.outputs=[];var i,a=f(r);try{for(a.s();!(i=a.n()).done;){var o=h(i.value,2),s=o[0],l=o[1];this.labels.push(s),this.outputs.push(l)}}catch(u){a.e(u)}finally{a.f()}}return p(e,[{key:"evaluate",value:function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[Un(t,r)].evaluate(e)}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){for(var e=["step",this.input.serialize()],t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}],[{key:"parse",value:function(t,n){if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");var r=n.parse(t[1],1,kt);if(!r)return null;var i=[],a=null;n.expectedType&&"value"!==n.expectedType.kind&&(a=n.expectedType);for(var o=1;o<t.length;o+=2){var s=1===o?-1/0:t[o],l=t[o+1],u=o,c=o+1;if("number"!=typeof s)return n.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',u);if(i.length&&i[i.length-1][0]>=s)return n.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',u);var h=n.parse(l,c,a);if(!h)return null;a=a||h.type,i.push([s,h])}return new e(a,r,i)}}]),e}(),Hn=Zn;function Wn(e,t,n){return e*(1-n)+t*n}var qn=Object.freeze({__proto__:null,array:function(e,t,n){return e.map((function(e,r){return Wn(e,t[r],n)}))},color:function(e,t,n){return new Ht(Wn(e.r,t.r,n),Wn(e.g,t.g,n),Wn(e.b,t.b,n),Wn(e.a,t.a,n))},number:Wn}),Gn=.95047,Xn=1.08883,Kn=4/29,Yn=6/29,Jn=3*Yn*Yn,Qn=Yn*Yn*Yn,er=Math.PI/180,tr=180/Math.PI;function nr(e){return e>Qn?Math.pow(e,1/3):e/Jn+Kn}function rr(e){return e>Yn?e*e*e:Jn*(e-Kn)}function ir(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function ar(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function or(e){var t=ar(e.r),n=ar(e.g),r=ar(e.b),i=nr((.4124564*t+.3575761*n+.1804375*r)/Gn),a=nr((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*a-16,a:500*(i-a),b:200*(a-nr((.0193339*t+.119192*n+.9503041*r)/Xn)),alpha:e.a}}function sr(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*rr(t),n=Gn*rr(n),r=Xn*rr(r),new Ht(ir(3.2404542*n-1.5371385*t-.4985314*r),ir(-.969266*n+1.8760108*t+.041556*r),ir(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function lr(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}var ur={forward:or,reverse:sr,interpolate:function(e,t,n){return{l:Wn(e.l,t.l,n),a:Wn(e.a,t.a,n),b:Wn(e.b,t.b,n),alpha:Wn(e.alpha,t.alpha,n)}}},cr={forward:function(e){var t=or(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*tr;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}},reverse:function(e){var t=e.h*er,n=e.c;return sr({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:lr(e.h,t.h,n),c:Wn(e.c,t.c,n),l:Wn(e.l,t.l,n),alpha:Wn(e.alpha,t.alpha,n)}}},hr=Object.freeze({__proto__:null,hcl:cr,lab:ur}),fr=function(){function e(t,n,r,i,a){d(this,e),this.type=t,this.operator=n,this.interpolation=r,this.input=i,this.labels=[],this.outputs=[];var o,s=f(a);try{for(s.s();!(o=s.n()).done;){var l=h(o.value,2),u=l[0],c=l[1];this.labels.push(u),this.outputs.push(c)}}catch(p){s.e(p)}finally{s.f()}}return p(e,[{key:"evaluate",value:function(t){var n=this.labels,r=this.outputs;if(1===n.length)return r[0].evaluate(t);var i=this.input.evaluate(t);if(i<=n[0])return r[0].evaluate(t);var a=n.length;if(i>=n[a-1])return r[a-1].evaluate(t);var o=Un(n,i),s=e.interpolationFactor(this.interpolation,i,n[o],n[o+1]),l=r[o].evaluate(t),u=r[o+1].evaluate(t);return"interpolate"===this.operator?qn[this.type.kind.toLowerCase()](l,u,s):"interpolate-hcl"===this.operator?cr.reverse(cr.interpolate(cr.forward(l),cr.forward(u),s)):ur.reverse(ur.interpolate(ur.forward(l),ur.forward(u),s))}},{key:"eachChild",value:function(e){e(this.input);var t,n=f(this.outputs);try{for(n.s();!(t=n.n()).done;)e(t.value)}catch(r){n.e(r)}finally{n.f()}}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t=[this.operator,e,this.input.serialize()],n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}],[{key:"interpolationFactor",value:function(e,t,n,r){var i=0;if("exponential"===e.name)i=dr(t,e.base,n,r);else if("linear"===e.name)i=dr(t,1,n,r);else if("cubic-bezier"===e.name){var a=e.controlPoints;i=new A(a[0],a[1],a[2],a[3]).solve(dr(t,1,n,r))}return i}},{key:"parse",value:function(t,n){var r=u(t),i=r[0],a=r[1],o=r[2],s=r.slice(3);if(!Array.isArray(a)||0===a.length)return n.error("Expected an interpolation type expression.",1);if("linear"===a[0])a={name:"linear"};else if("exponential"===a[0]){var l=a[1];if("number"!=typeof l)return n.error("Exponential interpolation requires a numeric base.",1,1);a={name:"exponential",base:l}}else{if("cubic-bezier"!==a[0])return n.error("Unknown interpolation type ".concat(String(a[0])),1,0);var c=a.slice(1);if(4!==c.length||c.some((function(e){return"number"!=typeof e||e<0||e>1})))return n.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);a={name:"cubic-bezier",controlPoints:c}}if(t.length-1<4)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if((t.length-1)%2!=0)return n.error("Expected an even number of arguments.");if(!(o=n.parse(o,2,kt)))return null;var h=[],f=null;"interpolate-hcl"===i||"interpolate-lab"===i?f=Tt:n.expectedType&&"value"!==n.expectedType.kind&&(f=n.expectedType);for(var d=0;d<s.length;d+=2){var p=s[d],m=s[d+1],v=d+3,g=d+4;if("number"!=typeof p)return n.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',v);if(h.length&&h[h.length-1][0]>=p)return n.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',v);var y=n.parse(m,g,f);if(!y)return null;f=f||y.type,h.push([p,y])}return"number"===f.kind||"color"===f.kind||"array"===f.kind&&"number"===f.itemType.kind&&"number"==typeof f.N?new e(f,i,a,o,h):n.error("Type ".concat(Lt(f)," is not interpolatable."))}}]),e}();function dr(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var pr=fr,mr=function(){function e(t,n){d(this,e),this.type=t,this.args=n}return p(e,[{key:"evaluate",value:function(e){var t,n,r=null,i=0,a=f(this.args);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i++,(r=o.evaluate(e))&&r instanceof Xt&&!r.available&&(t||(t=r),r=null,i===this.args.length))return t;if(null!==r)break}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"eachChild",value:function(e){this.args.forEach(e)}},{key:"outputDefined",value:function(){return this.args.every((function(e){return e.outputDefined()}))}},{key:"serialize",value:function(){var e=["coalesce"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<2)return n.error("Expectected at least one argument.");var r=null,i=n.expectedType;i&&"value"!==i.kind&&(r=i);var a,o=[],s=f(t.slice(1));try{for(s.s();!(a=s.n()).done;){var l=a.value,u=n.parse(l,1+o.length,r,void 0,{typeAnnotation:"omit"});if(!u)return null;r=r||u.type,o.push(u)}}catch(h){s.e(h)}finally{s.f()}var c=i&&o.some((function(e){return Rt(i,e.type)}));return new e(c?Mt:r,o)}}]),e}(),vr=mr,gr=function(){function e(t,n){d(this,e),this.type=n.type,this.bindings=[].concat(t),this.result=n}return p(e,[{key:"evaluate",value:function(e){return this.result.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.bindings);try{for(n.s();!(t=n.n()).done;)e(t.value[1])}catch(r){n.e(r)}finally{n.f()}e(this.result)}},{key:"outputDefined",value:function(){return this.result.outputDefined()}},{key:"serialize",value:function(){var e,t=["let"],n=f(this.bindings);try{for(n.s();!(e=n.n()).done;){var r=h(e.value,2),i=r[0],a=r[1];t.push(i,a.serialize())}}catch(o){n.e(o)}finally{n.f()}return t.push(this.result.serialize()),t}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found ".concat(t.length-1," instead."));for(var r=[],i=1;i<t.length-1;i+=2){var a=t[i];if("string"!=typeof a)return n.error("Expected string, but found ".concat(typeof a," instead."),i);if(/[^a-zA-Z0-9_]/.test(a))return n.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=n.parse(t[i+1],i+1);if(!o)return null;r.push([a,o])}var s=n.parse(t[t.length-1],t.length-1,n.expectedType,r);return s?new e(r,s):null}}]),e}(),yr=gr,_r=function(){function e(t,n,r){d(this,e),this.type=t,this.index=n,this.input=r}return p(e,[{key:"evaluate",value:function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new nn("Array index out of bounds: ".concat(t," < 0."));if(t>=n.length)throw new nn("Array index out of bounds: ".concat(t," > ").concat(n.length-1,"."));if(t!==Math.floor(t))throw new nn("Array index must be an integer, but found ".concat(t," instead."));return n[t]}},{key:"eachChild",value:function(e){e(this.index),e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return["at",this.index.serialize(),this.input.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,kt),i=n.parse(t[2],2,zt(n.expectedType||Mt));return r&&i?new e(i.type.itemType,r,i):null}}]),e}(),xr=_r,br=function(){function e(t,n){d(this,e),this.type=St,this.needle=t,this.haystack=n}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!jt(t,["boolean","string","number","null"]))throw new nn("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(Jt(t))," instead."));if(!jt(n,["string","array"]))throw new nn("Expected second argument to be of type array or string, but found ".concat(Lt(Jt(n))," instead."));return n.indexOf(t)>=0}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){return["in",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected 2 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Mt),i=n.parse(t[2],2,Mt);return r&&i?Ot(r.type,[St,Et,kt,wt,Mt])?new e(r,i):n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(r.type)," instead")):null}}]),e}(),wr=br,kr=function(){function e(t,n,r){d(this,e),this.type=kt,this.needle=t,this.haystack=n,this.fromIndex=r}return p(e,[{key:"evaluate",value:function(e){var t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!jt(t,["boolean","string","number","null"]))throw new nn("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(Jt(t))," instead."));if(!jt(n,["string","array"]))throw new nn("Expected second argument to be of type array or string, but found ".concat(Lt(Jt(n))," instead."));if(this.fromIndex){var r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}},{key:"eachChild",value:function(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Mt),i=n.parse(t[2],2,Mt);if(!r||!i)return null;if(!Ot(r.type,[St,Et,kt,wt,Mt]))return n.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Lt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,kt);return a?new e(r,i,a):null}return new e(r,i)}}]),e}(),Er=kr,Sr=function(){function e(t,n,r,i,a,o){d(this,e),this.inputType=t,this.type=n,this.input=r,this.cases=i,this.outputs=a,this.otherwise=o}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);return(Jt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}},{key:"eachChild",value:function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}},{key:"outputDefined",value:function(){return this.outputs.every((function(e){return e.outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e,t=this,n=["match",this.input.serialize()],r=Object.keys(this.cases).sort(),i=[],a={},o=f(r);try{for(o.s();!(e=o.n()).done;){var s=e.value,l=a[this.cases[s]];void 0===l?(a[this.cases[s]]=i.length,i.push([this.cases[s],[s]])):i[l][1].push(s)}}catch(g){o.e(g)}finally{o.f()}for(var u=function(e){return"number"===t.inputType.kind?Number(e):e},c=0,d=i;c<d.length;c++){var p=h(d[c],2),m=p[0],v=p[1];n.push(1===v.length?u(v[0]):v.map(u)),n.push(this.outputs[m].serialize())}return n.push(this.otherwise.serialize()),n}}],[{key:"parse",value:function(t,n){if(t.length<5)return n.error("Expected at least 4 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=1)return n.error("Expected an even number of arguments.");var r,i;n.expectedType&&"value"!==n.expectedType.kind&&(i=n.expectedType);for(var a={},o=[],s=2;s<t.length-1;s+=2){var l=t[s],u=t[s+1];Array.isArray(l)||(l=[l]);var c=n.concat(s);if(0===l.length)return c.error("Expected at least one branch label.");var h,d=f(l);try{for(d.s();!(h=d.n()).done;){var p=h.value;if("number"!=typeof p&&"string"!=typeof p)return c.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof p&&Math.floor(p)!==p)return c.error("Numeric branch labels must be integer values.");if(r){if(c.checkSubtype(r,Jt(p)))return null}else r=Jt(p);if(void 0!==a[String(p)])return c.error("Branch labels must be unique.");a[String(p)]=o.length}}catch(y){d.e(y)}finally{d.f()}var m=n.parse(u,s,i);if(!m)return null;i=i||m.type,o.push(m)}var v=n.parse(t[1],1,Mt);if(!v)return null;var g=n.parse(t[t.length-1],t.length-1,i);return g?"value"!==v.type.kind&&n.concat(1).checkSubtype(r,v.type)?null:new e(r,i,v,a,o,g):null}}]),e}(),Tr=Sr,Cr=function(){function e(t,n,r){d(this,e),this.type=t,this.branches=n,this.otherwise=r}return p(e,[{key:"evaluate",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];if(i.evaluate(e))return a.evaluate(e)}}catch(o){n.e(o)}finally{n.f()}return this.otherwise.evaluate(e)}},{key:"eachChild",value:function(e){var t,n=f(this.branches);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1];e(i),e(a)}}catch(o){n.e(o)}finally{n.f()}e(this.otherwise)}},{key:"outputDefined",value:function(){return this.branches.every((function(e){var t=h(e,2);return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()}},{key:"serialize",value:function(){var e=["case"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(t.length<4)return n.error("Expected at least 3 arguments, but found only ".concat(t.length-1,"."));if(t.length%2!=0)return n.error("Expected an odd number of arguments.");var r;n.expectedType&&"value"!==n.expectedType.kind&&(r=n.expectedType);for(var i=[],a=1;a<t.length-1;a+=2){var o=n.parse(t[a],a,St);if(!o)return null;var s=n.parse(t[a+1],a+1,r);if(!s)return null;i.push([o,s]),r=r||s.type}var l=n.parse(t[t.length-1],t.length-1,r);return l?new e(r,i,l):null}}]),e}(),Mr=Cr,Ar=function(){function e(t,n,r,i){d(this,e),this.type=t,this.input=n,this.beginIndex=r,this.endIndex=i}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!jt(t,["string","array"]))throw new nn("Expected first argument to be of type array or string, but found ".concat(Lt(Jt(t))," instead."));if(this.endIndex){var r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}},{key:"eachChild",value:function(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){if(null!=this.endIndex&&void 0!==this.endIndex){var e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}],[{key:"parse",value:function(t,n){if(t.length<=2||t.length>=5)return n.error("Expected 3 or 4 arguments, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1,Mt),i=n.parse(t[2],2,kt);if(!r||!i)return null;if(!Ot(r.type,[zt(Mt),Et,Mt]))return n.error("Expected first argument to be of type array or string, but found ".concat(Lt(r.type)," instead"));if(4===t.length){var a=n.parse(t[3],3,kt);return a?new e(r.type,r,i,a):null}return new e(r.type,r,i)}}]),e}(),Pr=Ar;function Ir(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function zr(e,t,n,r){return 0===r.compare(t,n)}function Lr(e,t,n){var r="=="!==e&&"!="!==e;return function(){function i(e,t,n){d(this,i),this.type=St,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}return p(i,[{key:"evaluate",value:function(i){var a=this.lhs.evaluate(i),o=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){var s=Jt(a),l=Jt(o);if(s.kind!==l.kind||"string"!==s.kind&&"number"!==s.kind)throw new nn('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(s.kind,", ").concat(l.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){var u=Jt(a),c=Jt(o);if("string"!==u.kind||"string"!==c.kind)return t(i,a,o)}return this.collator?n(i,a,o,this.collator.evaluate(i)):t(i,a,o)}},{key:"eachChild",value:function(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}},{key:"outputDefined",value:function(){return!0}},{key:"serialize",value:function(){var t=[e];return this.eachChild((function(e){t.push(e.serialize())})),t}}],[{key:"parse",value:function(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");var n=e[0],a=t.parse(e[1],1,Mt);if(!a)return null;if(!Ir(n,a.type))return t.concat(1).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Lt(a.type),"'."));var o=t.parse(e[2],2,Mt);if(!o)return null;if(!Ir(n,o.type))return t.concat(2).error('"'.concat(n,"\" comparisons are not supported for type '").concat(Lt(o.type),"'."));if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot compare types '".concat(Lt(a.type),"' and '").concat(Lt(o.type),"'."));r&&("value"===a.type.kind&&"value"!==o.type.kind?a=new on(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new on(a.type,[o])));var s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(!(s=t.parse(e[3],3,At)))return null}return new i(a,o,s)}}]),i}()}var Dr=Lr("==",(function(e,t,n){return t===n}),zr),Rr=Lr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!zr(0,t,n,r)})),Or=Lr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),jr=Lr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),Nr=Lr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),Br=Lr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0})),Fr=function(){function e(t,n,r,i,a,o){d(this,e),this.type=Et,this.number=t,this.locale=n,this.currency=r,this.unit=i,this.minFractionDigits=a,this.maxFractionDigits=o}return p(e,[{key:"evaluate",value:function(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}},{key:"eachChild",value:function(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}],[{key:"parse",value:function(t,n){if(3!==t.length)return n.error("Expected two arguments.");var r=n.parse(t[1],1,kt);if(!r)return null;var i=t[2];if("object"!=typeof i||Array.isArray(i))return n.error("NumberFormat options argument must be an object.");var a=null;if(i.locale&&!(a=n.parse(i.locale,1,Et)))return null;var o=null;if(i.currency&&!(o=n.parse(i.currency,1,Et)))return null;var s=null;if(i.unit&&!(s=n.parse(i.unit,1,Et)))return null;var l=null;if(i["min-fraction-digits"]&&!(l=n.parse(i["min-fraction-digits"],1,kt)))return null;var u=null;return i["max-fraction-digits"]&&!(u=n.parse(i["max-fraction-digits"],1,kt))?null:new e(r,a,o,s,l,u)}}]),e}(),$r=function(){function e(t){d(this,e),this.type=kt,this.input=t}return p(e,[{key:"evaluate",value:function(e){var t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new nn("Expected value to be of type string or array, but found ".concat(Lt(Jt(t))," instead."))}},{key:"eachChild",value:function(e){e(this.input)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){var e=["length"];return this.eachChild((function(t){e.push(t.serialize())})),e}}],[{key:"parse",value:function(t,n){if(2!==t.length)return n.error("Expected 1 argument, but found ".concat(t.length-1," instead."));var r=n.parse(t[1],1);return r?"array"!==r.type.kind&&"string"!==r.type.kind&&"value"!==r.type.kind?n.error("Expected argument of type string or array, but found ".concat(Lt(r.type)," instead.")):new e(r):null}}]),e}(),Vr={"==":Dr,"!=":Rr,">":jr,"<":Or,">=":Br,"<=":Nr,array:on,at:xr,boolean:on,case:Mr,coalesce:vr,collator:vn,format:sn,image:ln,in:wr,"index-of":Er,interpolate:pr,"interpolate-hcl":pr,"interpolate-lab":pr,length:$r,let:yr,literal:tn,match:Tr,number:on,"number-format":Fr,object:on,slice:Pr,step:Hn,string:on,"to-boolean":hn,"to-color":hn,"to-number":hn,"to-string":hn,var:Bn,within:Dn};function Ur(e,t){var n=h(t,4),r=n[0],i=n[1],a=n[2],o=n[3];r=r.evaluate(e),i=i.evaluate(e),a=a.evaluate(e);var s=o?o.evaluate(e):1,l=Kt(r,i,a,s);if(l)throw new nn(l);return new Ht(r/255*s,i/255*s,a/255*s,s)}function Zr(e,t){return e in t}function Hr(e,t){var n=t[e];return void 0===n?null:n}function Wr(e){return{type:e}}mn.register(Vr,{error:[{kind:"error"},[Et],function(e,t){var n=h(t,1)[0];throw new nn(n.evaluate(e))}],typeof:[Et,[Mt],function(e,t){return Lt(Jt(h(t,1)[0].evaluate(e)))}],"to-rgba":[zt(kt,4),[Tt],function(e,t){return h(t,1)[0].evaluate(e).toArray()}],rgb:[Tt,[kt,kt,kt],Ur],rgba:[Tt,[kt,kt,kt,kt],Ur],has:{type:St,overloads:[[[Et],function(e,t){return Zr(h(t,1)[0].evaluate(e),e.properties())}],[[Et,Ct],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Zr(r.evaluate(e),i.evaluate(e))}]]},get:{type:Mt,overloads:[[[Et],function(e,t){return Hr(h(t,1)[0].evaluate(e),e.properties())}],[[Et,Ct],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Hr(r.evaluate(e),i.evaluate(e))}]]},"feature-state":[Mt,[Et],function(e,t){return Hr(h(t,1)[0].evaluate(e),e.featureState||{})}],properties:[Ct,[],function(e){return e.properties()}],"geometry-type":[Et,[],function(e){return e.geometryType()}],id:[Mt,[],function(e){return e.id()}],zoom:[kt,[],function(e){return e.globals.zoom}],pitch:[kt,[],function(e){return e.globals.pitch||0}],"distance-from-center":[kt,[],function(e){return e.distanceFromCenter()}],"heatmap-density":[kt,[],function(e){return e.globals.heatmapDensity||0}],"line-progress":[kt,[],function(e){return e.globals.lineProgress||0}],"sky-radial-progress":[kt,[],function(e){return e.globals.skyRadialProgress||0}],accumulated:[Mt,[],function(e){return void 0===e.globals.accumulated?null:e.globals.accumulated}],"+":[kt,Wr(kt),function(e,t){var n,r=0,i=f(t);try{for(i.s();!(n=i.n()).done;)r+=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"*":[kt,Wr(kt),function(e,t){var n,r=1,i=f(t);try{for(i.s();!(n=i.n()).done;)r*=n.value.evaluate(e)}catch(a){i.e(a)}finally{i.f()}return r}],"-":{type:kt,overloads:[[[kt,kt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)-i.evaluate(e)}],[[kt],function(e,t){return-h(t,1)[0].evaluate(e)}]]},"/":[kt,[kt,kt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)/i.evaluate(e)}],"%":[kt,[kt,kt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)%i.evaluate(e)}],ln2:[kt,[],function(){return Math.LN2}],pi:[kt,[],function(){return Math.PI}],e:[kt,[],function(){return Math.E}],"^":[kt,[kt,kt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return Math.pow(r.evaluate(e),i.evaluate(e))}],sqrt:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.sqrt(n.evaluate(e))}],log10:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN10}],ln:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))}],log2:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.log(n.evaluate(e))/Math.LN2}],sin:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.sin(n.evaluate(e))}],cos:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.cos(n.evaluate(e))}],tan:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.tan(n.evaluate(e))}],asin:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.asin(n.evaluate(e))}],acos:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.acos(n.evaluate(e))}],atan:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.atan(n.evaluate(e))}],min:[kt,Wr(kt),function(e,t){return Math.min.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],max:[kt,Wr(kt),function(e,t){return Math.max.apply(Math,c(t.map((function(t){return t.evaluate(e)}))))}],abs:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.abs(n.evaluate(e))}],round:[kt,[kt],function(e,t){var n=h(t,1)[0].evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.floor(n.evaluate(e))}],ceil:[kt,[kt],function(e,t){var n=h(t,1)[0];return Math.ceil(n.evaluate(e))}],"filter-==":[St,[Et,Mt],function(e,t){var n=h(t,2),r=n[0],i=n[1];return e.properties()[r.value]===i.value}],"filter-id-==":[St,[Mt],function(e,t){var n=h(t,1)[0];return e.id()===n.value}],"filter-type-==":[St,[Et],function(e,t){var n=h(t,1)[0];return e.geometryType()===n.value}],"filter-<":[St,[Et,Mt],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<o}],"filter-id-<":[St,[Mt],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[St,[Et,Mt],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>o}],"filter-id->":[St,[Mt],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[St,[Et,Mt],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a<=o}],"filter-id-<=":[St,[Mt],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[St,[Et,Mt],function(e,t){var n=h(t,2),r=n[0],i=n[1],a=e.properties()[r.value],o=i.value;return typeof a==typeof o&&a>=o}],"filter-id->=":[St,[Mt],function(e,t){var n=h(t,1)[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[St,[Mt],function(e,t){return h(t,1)[0].value in e.properties()}],"filter-has-id":[St,[],function(e){return null!==e.id()&&void 0!==e.id()}],"filter-type-in":[St,[zt(Et)],function(e,t){return h(t,1)[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[St,[zt(Mt)],function(e,t){return h(t,1)[0].value.indexOf(e.id())>=0}],"filter-in-small":[St,[Et,zt(Mt)],function(e,t){var n=h(t,2),r=n[0];return n[1].value.indexOf(e.properties()[r.value])>=0}],"filter-in-large":[St,[Et,zt(Mt)],function(e,t){var n=h(t,2),r=n[0],i=n[1];return function(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[r.value],i.value,0,i.value.length-1)}],all:{type:St,overloads:[[[St,St],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)&&i.evaluate(e)}],[Wr(St),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(!n.value.evaluate(e))return!1}catch(i){r.e(i)}finally{r.f()}return!0}]]},any:{type:St,overloads:[[[St,St],function(e,t){var n=h(t,2),r=n[0],i=n[1];return r.evaluate(e)||i.evaluate(e)}],[Wr(St),function(e,t){var n,r=f(t);try{for(r.s();!(n=r.n()).done;)if(n.value.evaluate(e))return!0}catch(i){r.e(i)}finally{r.f()}return!1}]]},"!":[St,[St],function(e,t){return!h(t,1)[0].evaluate(e)}],"is-supported-script":[St,[Et],function(e,t){var n=h(t,1)[0],r=e.globals&&e.globals.isSupportedScript;return!r||r(n.evaluate(e))}],upcase:[Et,[Et],function(e,t){return h(t,1)[0].evaluate(e).toUpperCase()}],downcase:[Et,[Et],function(e,t){return h(t,1)[0].evaluate(e).toLowerCase()}],concat:[Et,Wr(Mt),function(e,t){return t.map((function(t){return Qt(t.evaluate(e))})).join("")}],"resolved-locale":[Et,[At],function(e,t){return h(t,1)[0].evaluate(e).resolvedLocale()}]});var qr=Vr;function Gr(e){return{result:"success",value:e}}function Xr(e){return{result:"error",value:e}}function Kr(e){return"data-driven"===e["property-type"]}function Yr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Jr(e){return!!e.expression&&e.expression.interpolated}function Qr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function ei(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function ti(e){return e}function ni(e,t){var n,r,i,a="color"===t.type,o=e.stops&&"object"==typeof e.stops[0][0],s=o||!(o||void 0!==e.property),l=e.type||(Jr(t)?"exponential":"interval");if(a&&((e=mt({},e)).stops&&(e.stops=e.stops.map((function(e){return[e[0],Ht.parse(e[1])]}))),e.default=Ht.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!hr[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));if("exponential"===l)n=oi;else if("interval"===l)n=ai;else if("categorical"===l){n=ii,r=Object.create(null);var u,c=f(e.stops);try{for(c.s();!(u=c.n()).done;){var h=u.value;r[h[0]]=h[1]}}catch(E){c.e(E)}finally{c.f()}i=typeof e.stops[0][0]}else{if("identity"!==l)throw new Error('Unknown function type "'.concat(l,'"'));n=si}if(o){for(var d={},p=[],m=0;m<e.stops.length;m++){var v=e.stops[m],g=v[0].zoom;void 0===d[g]&&(d[g]={zoom:g,type:e.type,property:e.property,default:e.default,stops:[]},p.push(g)),d[g].stops.push([v[0].value,v[1]])}for(var y=[],_=0,x=p;_<x.length;_++){var b=x[_];y.push([d[b].zoom,ni(d[b],t)])}var w={name:"linear"};return{kind:"composite",interpolationType:w,interpolationFactor:pr.interpolationFactor.bind(void 0,w),zoomStops:y.map((function(e){return e[0]})),evaluate:function(n,r){var i=n.zoom;return oi({stops:y,base:e.base},t,i).evaluate(i,r)}}}if(s){var k="exponential"===l?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:k,interpolationFactor:pr.interpolationFactor.bind(void 0,k),zoomStops:e.stops.map((function(e){return e[0]})),evaluate:function(a){var o=a.zoom;return n(e,t,o,r,i)}}}return{kind:"source",evaluate:function(a,o){var s=o&&o.properties?o.properties[e.property]:void 0;return void 0===s?ri(e.default,t.default):n(e,t,s,r,i)}}}function ri(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function ii(e,t,n,r,i){return ri(typeof n===i?r[n]:void 0,e.default,t.default)}function ai(e,t,n){if("number"!==Qr(n))return ri(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=Un(e.stops.map((function(e){return e[0]})),n);return e.stops[i][1]}function oi(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==Qr(n))return ri(e.default,t.default);var i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];var a=Un(e.stops.map((function(e){return e[0]})),n),o=function(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1],u=qn[t.type]||ti;if(e.colorSpace&&"rgb"!==e.colorSpace){var c=hr[e.colorSpace];u=function(e,t){return c.reverse(c.interpolate(c.forward(e),c.forward(t),o))}}return"function"==typeof s.evaluate?{evaluate:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=s.evaluate.apply(void 0,t),i=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return u(r,i,o)}}:u(s,l,o)}function si(e,t,n){return"color"===t.type?n=Ht.parse(n):"formatted"===t.type?n=Gt.fromString(n.toString()):"resolvedImage"===t.type?n=Xt.fromString(n.toString()):Qr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),ri(n,e.default,t.default)}var li=function(){function e(t,n){d(this,e),this.expression=t,this._warningHistory={},this._evaluator=new dn,this._defaultValue=n?function(e){return"color"===e.type&&(ei(e.default)||Array.isArray(e.default))?new Ht(0,0,0,0):"color"===e.type?Ht.parse(e.default)||null:void 0===e.default?null:e.default}(n):null,this._enumValues=n&&"enum"===n.type?n.values:null}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}},{key:"evaluate",value:function(e,t,n,r,i,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new nn("Expected value to be one of ".concat(Object.keys(this._enumValues).map((function(e){return JSON.stringify(e)})).join(", "),", but found ").concat(JSON.stringify(l)," instead."));return l}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}]),e}();function ui(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in qr}function ci(e,t){var n=new $n(qr,[],t?function(e){var t={color:Tt,string:Et,number:kt,enum:Et,boolean:St,formatted:Pt,resolvedImage:It};return"array"===e.type?zt(t[e.value]||Mt,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Gr(new li(r,t)):Xr(n.errors)}var hi=function(){function e(t,n){d(this,e),this.kind=t,this._styleExpression=n,this.isStateDependent="constant"!==t&&!On(n.expression)}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}}]),e}(),fi=function(){function e(t,n,r,i){d(this,e),this.kind=t,this.zoomStops=r,this._styleExpression=n,this.isStateDependent="camera"!==t&&!On(n.expression),this.interpolationType=i}return p(e,[{key:"evaluateWithoutErrorHandling",value:function(e,t,n,r,i,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,a)}},{key:"evaluate",value:function(e,t,n,r,i,a){return this._styleExpression.evaluate(e,t,n,r,i,a)}},{key:"interpolationFactor",value:function(e,t,n){return this.interpolationType?pr.interpolationFactor(this.interpolationType,e,t,n):0}}]),e}();function di(e,t){if("error"===(e=ci(e,t)).result)return e;var n=e.value.expression,r=Rn(n);if(!r&&!Kr(t))return Xr([new _t("","data expressions not supported")]);var i=jn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Yr(t))return Xr([new _t("","zoom expressions not supported")]);var a=mi(n);return a||i?a instanceof _t?Xr([a]):a instanceof pr&&!Jr(t)?Xr([new _t("",'"interpolate" expressions cannot be used with this property')]):Gr(a?new fi(r?"camera":"composite",e.value,a.labels,a instanceof pr?a.interpolation:void 0):new hi(r?"constant":"source",e.value)):Xr([new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}var pi=function(){function e(t,n){d(this,e),this._parameters=t,this._specification=n,mt(this,ni(this._parameters,this._specification))}return p(e,null,[{key:"deserialize",value:function(t){return new e(t._parameters,t._specification)}},{key:"serialize",value:function(e){return{_parameters:e._parameters,_specification:e._specification}}}]),e}();function mi(e){var t=null;if(e instanceof yr)t=mi(e.result);else if(e instanceof vr){var n,r=f(e.args);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t=mi(i))break}}catch(a){r.e(a)}finally{r.f()}}else(e instanceof Hn||e instanceof pr)&&e.input instanceof mn&&"zoom"===e.input.name&&(t=e);return t instanceof _t||e.eachChild((function(e){var n=mi(e);n instanceof _t?t=n:!t&&n?t=new _t("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new _t("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}var vi=p((function e(t,n,r,i){d(this,e),this.message=(t?"".concat(t,": "):"")+r,i&&(this.identifier=i),null!=n&&n.__line__&&(this.line=n.__line__)}));function gi(e){var t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},a=e.style,o=e.styleSpec,s=[],l=Qr(n);if("object"!==l)return[new vi(t,n,"object expected, ".concat(l," found"))];for(var u in n){var c=u.split(".")[0],h=void 0;i[c]?h=i[c]:r[c]?h=Yi:i["*"]?h=i["*"]:r["*"]&&(h=Yi),h?s=s.concat(h({key:(t?"".concat(t,"."):t)+u,value:n[u],valueSpec:r[c]||r["*"],style:a,styleSpec:o,object:n,objectKey:u},n)):s.push(new vi(t,n[u],'unknown property "'.concat(u,'"')))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new vi(t,n,'missing required property "'.concat(f,'"')));return s}function yi(e){var t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,a=e.key,o=e.arrayElementValidator||Yi;if("array"!==Qr(t))return[new vi(a,t,"array expected, ".concat(Qr(t)," found"))];if(n.length&&t.length!==n.length)return[new vi(a,t,"array length ".concat(n.length," expected, length ").concat(t.length," found"))];if(n["min-length"]&&t.length<n["min-length"])return[new vi(a,t,"array length at least ".concat(n["min-length"]," expected, length ").concat(t.length," found"))];var s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Qr(n.value)&&(s=n.value);for(var l=[],u=0;u<t.length;u++)l=l.concat(o({array:t,arrayIndex:u,value:t[u],valueSpec:s,style:r,styleSpec:i,key:"".concat(a,"[").concat(u,"]")}));return l}function _i(e){var t=e.key,n=e.value,r=e.valueSpec,i=Qr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new vi(t,n,"number expected, ".concat(i," found"))];if("minimum"in r){var a=r.minimum;if("array"===Qr(r.minimum)&&(a=r.minimum[e.arrayIndex]),n<a)return[new vi(t,n,"".concat(n," is less than the minimum value ").concat(a))]}if("maximum"in r){var o=r.maximum;if("array"===Qr(r.maximum)&&(o=r.maximum[e.arrayIndex]),n>o)return[new vi(t,n,"".concat(n," is greater than the maximum value ").concat(o))]}return[]}function xi(e){var t,n,r,i=e.valueSpec,a=vt(e.value.type),o={},s="categorical"!==a&&void 0===e.value.property,l=!s,u="array"===Qr(e.value.stops)&&"array"===Qr(e.value.stops[0])&&"object"===Qr(e.value.stops[0][0]),c=gi({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===a)return[new vi(e.key,e.value,'identity function may not have a "stops" property')];var t=[],n=e.value;return t=t.concat(yi({key:e.key,value:n,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:h})),"array"===Qr(n)&&0===n.length&&t.push(new vi(e.key,n,"array must have at least one stop")),t},default:function(e){return Yi({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===a&&s&&c.push(new vi(e.key,e.value,'missing required property "property"')),"identity"===a||e.value.stops||c.push(new vi(e.key,e.value,'missing required property "stops"')),"exponential"===a&&e.valueSpec.expression&&!Jr(e.valueSpec)&&c.push(new vi(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Kr(e.valueSpec)?c.push(new vi(e.key,e.value,"property functions not supported")):s&&!Yr(e.valueSpec)&&c.push(new vi(e.key,e.value,"zoom functions not supported"))),"categorical"!==a&&!u||void 0!==e.value.property||c.push(new vi(e.key,e.value,'"property" property is required')),c;function h(e){var t=[],a=e.value,s=e.key;if("array"!==Qr(a))return[new vi(s,a,"array expected, ".concat(Qr(a)," found"))];if(2!==a.length)return[new vi(s,a,"array length 2 expected, length ".concat(a.length," found"))];if(u){if("object"!==Qr(a[0]))return[new vi(s,a,"object expected, ".concat(Qr(a[0])," found"))];if(void 0===a[0].zoom)return[new vi(s,a,"object stop key must have zoom")];if(void 0===a[0].value)return[new vi(s,a,"object stop key must have value")];var l=vt(a[0].zoom);if("number"!=typeof l)return[new vi(s,a[0].zoom,"stop zoom values must be numbers")];if(r&&r>l)return[new vi(s,a[0].zoom,"stop zoom values must appear in ascending order")];l!==r&&(r=l,n=void 0,o={}),t=t.concat(gi({key:"".concat(s,"[0]"),value:a[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:_i,value:f}}))}else t=t.concat(f({key:"".concat(s,"[0]"),value:a[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},a));return ui(gt(a[1]))?t.concat([new vi("".concat(s,"[1]"),a[1],"expressions are not allowed in function stops.")]):t.concat(Yi({key:"".concat(s,"[1]"),value:a[1],valueSpec:i,style:e.style,styleSpec:e.styleSpec}))}function f(e,r){var s=Qr(e.value),l=vt(e.value),u=null!==e.value?e.value:r;if(t){if(s!==t)return[new vi(e.key,u,"".concat(s," stop domain type must match previous stop domain type ").concat(t))]}else t=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new vi(e.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==a){var c="number expected, ".concat(s," found");return Kr(i)&&void 0===a&&(c+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new vi(e.key,u,c)]}return"categorical"!==a||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==a&&"number"===s&&"number"==typeof l&&"number"==typeof n&&void 0!==n&&l<n?[new vi(e.key,u,"stop domain values must appear in ascending order")]:(n=l,"categorical"===a&&l in o?[new vi(e.key,u,"stop domain values must be unique")]:(o[l]=!0,[])):[new vi(e.key,u,"integer expected, found ".concat(String(l)))]}}function bi(e){var t=("property"===e.expressionContext?di:ci)(gt(e.value),e.valueSpec);if("error"===t.result)return t.value.map((function(t){return new vi("".concat(e.key).concat(t.key),e.value,t.message)}));var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new vi(e.key,e.value,'Invalid data expression for "'.concat(e.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===e.expressionContext&&"layout"===e.propertyType&&!On(n))return[new vi(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return wi(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!jn(n,["zoom","feature-state"]))return[new vi(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!Rn(n))return[new vi(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wi(e,t){var n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression){var r,i=f(t.valueSpec.expression.parameters);try{for(i.s();!(r=i.n()).done;){var a=r.value;n.delete(a)}}catch(s){i.e(s)}finally{i.f()}}if(0===n.size)return[];var o=[];return e instanceof mn&&n.has(e.name)?[new vi(t.key,t.value,'["'.concat(e.name,'"] expression is not supported in a filter for a ').concat(t.object.type," layer with id: ").concat(t.object.id))]:(e.eachChild((function(e){o.push.apply(o,c(wi(e,t)))})),o)}function ki(e){var t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(vt(n))&&i.push(new vi(t,n,"expected one of [".concat(r.values.join(", "),"], ").concat(JSON.stringify(n)," found"))):-1===Object.keys(r.values).indexOf(vt(n))&&i.push(new vi(t,n,"expected one of [".concat(Object.keys(r.values).join(", "),"], ").concat(JSON.stringify(n)," found"))),i}function Ei(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":var t,n=f(e.slice(1));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Ei(r)&&"boolean"!=typeof r)return!1}}catch(i){n.e(i)}finally{n.f()}return!0;default:return!0}}function Si(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fill";if(null==e)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Ei(e)||(e=zi(e));var n=e,r=!0;try{r=function(e){if(!Mi(e))return e;var t=gt(e);return Ci(t),t=Ti(t)}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}var i=pt["filter_".concat(t)],a=ci(r,i),o=null;if("error"===a.result)throw new Error(a.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));o=function(e,t,n){return a.value.evaluate(e,t,{},n)};var s=null,l=null;if(r!==n){var u=ci(n,i);if("error"===u.result)throw new Error(u.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));s=function(e,t,n,r,i){return u.value.evaluate(e,t,{},n,void 0,void 0,r,i)},l=!Rn(u.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:Ii(r),needFeature:!!l}}function Ti(e){if(!Array.isArray(e))return e;var t=function(e){if(Ai.has(e[0]))for(var t=1;t<e.length;t++)if(Mi(e[t]))return!0;return e}(e);return!0===t?t:t.map((function(e){return Ti(e)}))}function Ci(e){var t=!1,n=[];if("case"===e[0]){for(var r=1;r<e.length-1;r+=2)t=t||Mi(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||Mi(e[1]);for(var i=2;i<e.length-1;i+=2)n.push(e[i+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||Mi(e[1]);for(var a=1;a<e.length-1;a+=2)n.push(e[a+1])}t&&(e.length=0,e.push.apply(e,["any"].concat(n)));for(var o=1;o<e.length;o++)Ci(e[o])}function Mi(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;for(var t,n=1;n<e.length;n++)if(Mi(e[n]))return!0;return!1}var Ai=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Pi(e,t){return e<t?-1:e>t?1:0}function Ii(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var t=1;t<e.length;t++)if(Ii(e[t]))return!0;return!1}function zi(e){if(!e)return!0;var t,n=e[0];return e.length<=1?"any"!==n:"=="===n?Li(e[1],e[2],"=="):"!="===n?Oi(Li(e[1],e[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Li(e[1],e[2],n):"any"===n?(t=e.slice(1),["any"].concat(t.map(zi))):"all"===n?["all"].concat(e.slice(1).map(zi)):"none"===n?["all"].concat(e.slice(1).map(zi).map(Oi)):"in"===n?Di(e[1],e.slice(2)):"!in"===n?Oi(Di(e[1],e.slice(2))):"has"===n?Ri(e[1]):"!has"===n?Oi(Ri(e[1])):"within"!==n||e}function Li(e,t,n){switch(e){case"$type":return["filter-type-".concat(n),t];case"$id":return["filter-id-".concat(n),t];default:return["filter-".concat(n),e,t]}}function Di(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((function(e){return typeof e!=typeof t[0]}))?["filter-in-large",e,["literal",t.sort(Pi)]]:["filter-in-small",e,["literal",t]]}}function Ri(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Oi(e){return["!",e]}function ji(e){return Ei(gt(e.value))?bi(mt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_".concat(e.layerType||"fill")]})):Ni(e)}function Ni(e){var t=e.value,n=e.key;if("array"!==Qr(t))return[new vi(n,t,"array expected, ".concat(Qr(t)," found"))];var r,i=e.styleSpec,a=[];if(t.length<1)return[new vi(n,t,"filter array must have at least 1 element")];switch(a=a.concat(ki({key:"".concat(n,"[0]"),value:t[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec})),vt(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===vt(t[1])&&a.push(new vi(n,t,'"$type" cannot be use with operator "'.concat(t[0],'"')));case"==":case"!=":3!==t.length&&a.push(new vi(n,t,'filter array for operator "'.concat(t[0],'" must have 3 elements')));case"in":case"!in":t.length>=2&&"string"!==(r=Qr(t[1]))&&a.push(new vi("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));for(var o=2;o<t.length;o++)r=Qr(t[o]),"$type"===vt(t[1])?a=a.concat(ki({key:"".concat(n,"[").concat(o,"]"),value:t[o],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&a.push(new vi("".concat(n,"[").concat(o,"]"),t[o],"string, number, or boolean expected, ".concat(r," found")));break;case"any":case"all":case"none":for(var s=1;s<t.length;s++)a=a.concat(Ni({key:"".concat(n,"[").concat(s,"]"),value:t[s],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=Qr(t[1]),2!==t.length?a.push(new vi(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"string"!==r&&a.push(new vi("".concat(n,"[1]"),t[1],"string expected, ".concat(r," found")));break;case"within":r=Qr(t[1]),2!==t.length?a.push(new vi(n,t,'filter array for "'.concat(t[0],'" operator must have 2 elements'))):"object"!==r&&a.push(new vi("".concat(n,"[1]"),t[1],"object expected, ".concat(r," found")))}return a}function Bi(e,t){var n=e.key,r=e.style,i=e.styleSpec,a=e.value,o=e.objectKey,s=i["".concat(t,"_").concat(e.layerType)];if(!s)return[];var l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Yi({key:n,value:a,valueSpec:i.transition,style:r,styleSpec:i});var u,c=e.valueSpec||s[o];if(!c)return[new vi(n,a,'unknown property "'.concat(o,'"'))];if("string"===Qr(a)&&Kr(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a))){var h='`{ "type": "identity", "property": '.concat(u?JSON.stringify(u[1]):'"_"'," }`");return[new vi(n,a,'"'.concat(o,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(h,"."))]}var f=[];return"symbol"===e.layerType&&("text-field"===o&&r&&!r.glyphs&&f.push(new vi(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&ei(gt(a))&&"identity"===vt(a.type)&&f.push(new vi(n,a,'"text-font" does not support identity functions'))),f.concat(Yi({key:e.key,value:a,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:o}))}function Fi(e){return Bi(e,"paint")}function $i(e){return Bi(e,"layout")}function Vi(e){var t=[],n=e.value,r=e.key,i=e.style,a=e.styleSpec;n.type||n.ref||t.push(new vi(r,n,'either "type" or "ref" is required'));var o,s=vt(n.type),l=vt(n.ref);if(n.id)for(var u=vt(n.id),c=0;c<e.arrayIndex;c++){var h=i.layers[c];vt(h.id)===u&&t.push(new vi(r,n.id,'duplicate layer id "'.concat(n.id,'", previously used at line ').concat(h.id.__line__)))}if("ref"in n)["type","source","source-layer","filter","layout"].forEach((function(e){e in n&&t.push(new vi(r,n[e],'"'.concat(e,'" is prohibited for ref layers')))})),i.layers.forEach((function(e){vt(e.id)===l&&(o=e)})),o?o.ref?t.push(new vi(r,n.ref,"ref cannot reference another ref layer")):s=vt(o.type):"string"==typeof l&&t.push(new vi(r,n.ref,'ref layer "'.concat(l,'" not found')));else if("background"!==s&&"sky"!==s)if(n.source){var f=i.sources&&i.sources[n.source],d=f&&vt(f.type);f?"vector"===d&&"raster"===s?t.push(new vi(r,n.source,'layer "'.concat(n.id,'" requires a raster source'))):"raster"===d&&"raster"!==s?t.push(new vi(r,n.source,'layer "'.concat(n.id,'" requires a vector source'))):"vector"!==d||n["source-layer"]?"raster-dem"===d&&"hillshade"!==s?t.push(new vi(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==s||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===d&&f.lineMetrics||t.push(new vi(r,n,'layer "'.concat(n.id,'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.'))):t.push(new vi(r,n,'layer "'.concat(n.id,'" must specify a "source-layer"'))):t.push(new vi(r,n.source,'source "'.concat(n.source,'" not found')))}else t.push(new vi(r,n,'missing required property "source"'));return t=t.concat(gi({key:r,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Yi({key:"".concat(r,".type"),value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:function(e){return ji(mt({layerType:s},e))},layout:function(e){return gi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return $i(mt({layerType:s},e))}}})},paint:function(e){return gi({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return Fi(mt({layerType:s},e))}}})}}})),t}function Ui(e){var t=e.value,n=e.key,r=Qr(t);return"string"!==r?[new vi(n,t,"string expected, ".concat(r," found"))]:[]}var Zi={promoteId:function(e){var t=e.key,n=e.value;if("string"===Qr(n))return Ui({key:t,value:n});var r=[];for(var i in n)r.push.apply(r,c(Ui({key:"".concat(t,".").concat(i),value:n[i]})));return r}};function Hi(e){var t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new vi(n,t,'"type" is required')];var a,o=vt(t.type);switch(o){case"vector":case"raster":case"raster-dem":return a=gi({key:n,value:t,valueSpec:r["source_".concat(o.replace("-","_"))],style:e.style,styleSpec:r,objectElementValidators:Zi});case"geojson":if(a=gi({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Zi}),t.cluster)for(var s in t.clusterProperties){var l,u,f=h(t.clusterProperties[s],2),d=f[0],p=f[1],m="string"==typeof d?[d,["accumulated"],["get",s]]:d;(l=a).push.apply(l,c(bi({key:"".concat(n,".").concat(s,".map"),value:p,expressionContext:"cluster-map"}))),(u=a).push.apply(u,c(bi({key:"".concat(n,".").concat(s,".reduce"),value:m,expressionContext:"cluster-reduce"})))}return a;case"video":return gi({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return gi({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new vi(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ki({key:"".concat(n,".type"),value:t.type,valueSpec:{values:Wi(r)},style:i,styleSpec:r})}}function Wi(e){return e.source.reduce((function(t,n){var r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function qi(e){var t=e.value,n=e.styleSpec,r=n.light,i=e.style,a=[],o=Qr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new vi("light",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&r[l[1]]&&r[l[1]].transition?Yi({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Yi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new vi(s,t[s],'unknown property "'.concat(s,'"'))])}return a}function Gi(e){var t=e.value,n=e.key,r=e.style,i=e.styleSpec,a=i.terrain,o=[],s=Qr(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new vi("terrain",t,"object expected, ".concat(s," found"))]);for(var l in t){var u=l.match(/^(.*)-transition$/);o=o.concat(u&&a[u[1]]&&a[u[1]].transition?Yi({key:l,value:t[l],valueSpec:i.transition,style:r,styleSpec:i}):a[l]?Yi({key:l,value:t[l],valueSpec:a[l],style:r,styleSpec:i}):[new vi(l,t[l],'unknown property "'.concat(l,'"'))])}if(t.source){var c=r.sources&&r.sources[t.source],h=c&&vt(c.type);c?"raster-dem"!==h&&o.push(new vi(n,t.source,"terrain cannot be used with a source of type ".concat(String(h),', it only be used with a "raster-dem" source type'))):o.push(new vi(n,t.source,'source "'.concat(t.source,'" not found')))}else o.push(new vi(n,t,'terrain is missing required property "source"'));return o}function Xi(e){var t=e.value,n=e.style,r=e.styleSpec,i=r.fog,a=[],o=Qr(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new vi("fog",t,"object expected, ".concat(o," found"))]);for(var s in t){var l=s.match(/^(.*)-transition$/);a=a.concat(l&&i[l[1]]&&i[l[1]].transition?Yi({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Yi({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new vi(s,t[s],'unknown property "'.concat(s,'"'))])}return a}var Ki={"*":function(){return[]},array:yi,boolean:function(e){var t=e.value,n=e.key,r=Qr(t);return"boolean"!==r?[new vi(n,t,"boolean expected, ".concat(r," found"))]:[]},number:_i,color:function(e){var t=e.key,n=e.value,r=Qr(n);return"string"!==r?[new vi(t,n,"color expected, ".concat(r," found"))]:null===Nt(n)?[new vi(t,n,'color expected, "'.concat(n,'" found'))]:[]},enum:ki,filter:ji,function:xi,layer:Vi,object:gi,source:Hi,light:qi,terrain:Gi,fog:Xi,string:Ui,formatted:function(e){return 0===Ui(e).length?[]:bi(e)},resolvedImage:function(e){return 0===Ui(e).length?[]:bi(e)},projection:function(e){var t=e.value,n=e.styleSpec,r=n.projection,i=e.style,a=[],o=Qr(t);if("object"===o)for(var s in t)a=a.concat(Yi({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==o&&(a=a.concat([new vi("projection",t,"object or string expected, ".concat(o," found"))]));return a}};function Yi(e){var t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&ei(vt(t))?xi(e):n.expression&&ui(gt(t))?bi(e):n.type&&Ki[n.type]?Ki[n.type](e):gi(mt({},e,{valueSpec:n.type?r[n.type]:n}))}function Ji(e){var t=e.value,n=e.key,r=Ui(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new vi(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new vi(n,t,'"glyphs" url must include a "{range}" token'))),r}function Qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pt;return na(Yi({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Ji,"*":function(){return[]}}}))}var ea=function(e){return na(Fi(e))},ta=function(e){return na($i(e))};function na(e){return e.slice().sort((function(e,t){return e.line&&t.line?e.line-t.line:0}))}function ra(e,t){var n=!1;if(t&&t.length){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.fire(new ft(new Error(a.message))),n=!0}}catch(o){i.e(o)}finally{i.f()}}return n}var ia=oa,aa=3;function oa(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var a=0;a<this.d*this.d;a++){var o=i[aa+a],s=i[aa+a+1];r.push(o===s?null:i.subarray(o,s))}var l=i[aa+r.length+1];this.keys=i.subarray(i[aa+r.length],l),this.bboxes=i.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var u=0;u<this.d*this.d;u++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var c=n/t*e;this.min=-c,this.max=e+c}oa.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},oa.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},oa.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},oa.prototype.query=function(e,t,n,r,i){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},oa.prototype._queryCell=function(e,t,n,r,i,a,o,s){var l=this.cells[i];if(null!==l)for(var u=this.keys,c=this.bboxes,h=0;h<l.length;h++){var f=l[h];if(void 0===o[f]){var d=4*f;(s?s(c[d+0],c[d+1],c[d+2],c[d+3]):e<=c[d+2]&&t<=c[d+3]&&n>=c[d+0]&&r>=c[d+1])?(o[f]=!0,a.push(u[f])):o[f]=!1}}},oa.prototype._forEachCell=function(e,t,n,r,i,a,o,s){for(var l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),h=this._convertToCellCoord(r),f=l;f<=c;f++)for(var d=u;d<=h;d++){var p=this.d*d+f;if((!s||s(this._convertFromCellCoord(f),this._convertFromCellCoord(d),this._convertFromCellCoord(f+1),this._convertFromCellCoord(d+1)))&&i.call(this,e,t,n,r,p,a,o,s))return}},oa.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},oa.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},oa.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=aa+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];i[aa+o]=a,i.set(s,a),a+=s.length}return i[aa+e.length]=a,i.set(this.keys,a),i[aa+e.length+1]=a+=this.keys.length,i.set(this.bboxes,a),a+=this.bboxes.length,i.buffer};var sa=T(ia),la={};function ua(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),la[t]={klass:e,omit:n.omit||[]}}for(var ca in ua(Object,"Object"),sa.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},sa.deserialize=function(e){return new sa(e.buffer)},Object.defineProperty(sa,"name",{value:"Grid"}),ua(sa,"Grid"),ua(Ht,"Color"),ua(Error,"Error"),ua(ke,"AJAXError"),ua(Xt,"ResolvedImage"),ua(pi,"StylePropertyFunction"),ua(li,"StyleExpression",{omit:["_evaluator"]}),ua(fi,"ZoomDependentExpression"),ua(hi,"ZoomConstantExpression"),ua(mn,"CompoundExpression",{omit:["_evaluate"]}),qr)la[qr[ca]._classRegistryKey]||ua(qr[ca],"Expression".concat(ca));function ha(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function fa(e){return y.ImageBitmap&&e instanceof y.ImageBitmap}function da(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(ha(e)||fa(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof y.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){var r,i=[],a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(da(o,t))}}catch(h){a.e(h)}finally{a.f()}return i}if("object"==typeof e){var s=e.constructor,l=s._classRegistryKey;if(!l)throw new Error("can't serialize object of unregistered class ".concat(l));var u=s.serialize?s.serialize(e,t):{};if(!s.serialize){for(var c in e)e.hasOwnProperty(c)&&(la[l].omit.indexOf(c)>=0||(u[c]=da(e[c],t)));e instanceof Error&&(u.message=e.message)}if(u.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(u.$name=l),u}throw new Error("can't serialize object of type "+typeof e)}function pa(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||ha(e)||fa(e)||ArrayBuffer.isView(e)||e instanceof y.ImageData)return e;if(Array.isArray(e))return e.map(pa);if("object"==typeof e){var t=e.$name||"Object",n=la[t].klass;if(!n)throw new Error("can't deserialize unregistered class ".concat(t));if(n.deserialize)return n.deserialize(e);for(var r=Object.create(n.prototype),i=0,a=Object.keys(e);i<a.length;i++){var o=a[i];"$name"!==o&&(r[o]=pa(e[o]))}return r}throw new Error("can't deserialize object of type "+typeof e)}var ma={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},Khmer:function(e){return e>=6016&&e<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};function va(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(_a(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}function ga(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(!ya(t.value.charCodeAt(0)))return!1}catch(r){n.e(r)}finally{n.f()}return!0}function ya(e){return!(ma.Arabic(e)||ma["Arabic Supplement"](e)||ma["Arabic Extended-A"](e)||ma["Arabic Presentation Forms-A"](e)||ma["Arabic Presentation Forms-B"](e))}function _a(e){return!(746!==e&&747!==e&&(e<4352||!(ma["Bopomofo Extended"](e)||ma.Bopomofo(e)||ma["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||ma["CJK Compatibility Ideographs"](e)||ma["CJK Compatibility"](e)||ma["CJK Radicals Supplement"](e)||ma["CJK Strokes"](e)||!(!ma["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||ma["CJK Unified Ideographs Extension A"](e)||ma["CJK Unified Ideographs"](e)||ma["Enclosed CJK Letters and Months"](e)||ma["Hangul Compatibility Jamo"](e)||ma["Hangul Jamo Extended-A"](e)||ma["Hangul Jamo Extended-B"](e)||ma["Hangul Jamo"](e)||ma["Hangul Syllables"](e)||ma.Hiragana(e)||ma["Ideographic Description Characters"](e)||ma.Kanbun(e)||ma["Kangxi Radicals"](e)||ma["Katakana Phonetic Extensions"](e)||ma.Katakana(e)&&12540!==e||!(!ma["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!ma["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||ma["Unified Canadian Aboriginal Syllabics"](e)||ma["Unified Canadian Aboriginal Syllabics Extended"](e)||ma["Vertical Forms"](e)||ma["Yijing Hexagram Symbols"](e)||ma["Yi Syllables"](e)||ma["Yi Radicals"](e))))}function xa(e){return!(_a(e)||function(e){return!!(ma["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||ma["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||ma["Letterlike Symbols"](e)||ma["Number Forms"](e)||ma["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ma["Control Pictures"](e)&&9251!==e||ma["Optical Character Recognition"](e)||ma["Enclosed Alphanumerics"](e)||ma["Geometric Shapes"](e)||ma["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||ma["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ma["CJK Symbols and Punctuation"](e)||ma.Katakana(e)||ma["Private Use Area"](e)||ma["CJK Compatibility Forms"](e)||ma["Small Form Variants"](e)||ma["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ba(e){return e>=1424&&e<=2303||ma["Arabic Presentation Forms-A"](e)||ma["Arabic Presentation Forms-B"](e)}function wa(e,t){return!(!t&&ba(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||ma.Khmer(e))}function ka(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(ba(t.value.charCodeAt(0)))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var Ea="deferred",Sa="loading",Ta="loaded",Ca=null,Ma="unavailable",Aa=null,Pa=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Ma="error"),Ca&&Ca(e)};function Ia(){za.fire(new ht("pluginStateChange",{pluginStatus:Ma,pluginURL:Aa}))}var za=new dt,La=function(){return Ma},Da=function(){if(Ma!==Ea||!Aa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ma=Sa,Ia(),Aa&&Te({url:Aa},(function(e){e?Pa(e):(Ma=Ta,Ia())}))},Ra={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ma===Ta||null!=Ra.applyArabicShaping},isLoading:function(){return Ma===Sa},setState:function(e){Ma=e.pluginStatus,Aa=e.pluginURL},isParsed:function(){return null!=Ra.applyArabicShaping&&null!=Ra.processBidirectionalText&&null!=Ra.processStyledBidirectionalText},getPluginURL:function(){return Aa}},Oa=function(){function e(t,n){d(this,e),this.zoom=t,n?(this.now=n.now,this.fadeDuration=n.fadeDuration,this.transition=n.transition,this.pitch=n.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}return p(e,[{key:"isSupportedScript",value:function(e){return function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;)if(!wa(n.value.charCodeAt(0),t))return!1}catch(i){r.e(i)}finally{r.f()}return!0}(e,Ra.isLoaded())}}]),e}(),ja=function(){function e(t,n){d(this,e),this.property=t,this.value=n,this.expression=function(e,t){if(ei(e))return new pi(e,t);if(ui(e)){var n=di(e,t);if("error"===n.result)throw new Error(n.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));return n.value}var r=e;return"string"==typeof e&&"color"===t.type&&(r=Ht.parse(e)),{kind:"constant",evaluate:function(){return r}}}(void 0===n?t.specification.default:n,t.specification)}return p(e,[{key:"isDataDriven",value:function(){return"source"===this.expression.kind||"composite"===this.expression.kind}},{key:"possiblyEvaluate",value:function(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}]),e}(),Na=function(){function e(t){d(this,e),this.property=t,this.value=new ja(t,void 0)}return p(e,[{key:"transitioned",value:function(e,t){return new Fa(this.property,this.value,t,W({},e.transition,this.transition),e.now)}},{key:"untransitioned",value:function(){return new Fa(this.property,this.value,null,{},0)}}]),e}(),Ba=function(){function e(t){d(this,e),this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}return p(e,[{key:"getValue",value:function(e){return ne(this._values[e].value.value)}},{key:"setValue",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Na(this._values[e].property)),this._values[e].value=new ja(this._values[e].property,null===t?void 0:ne(t))}},{key:"getTransition",value:function(e){return ne(this._values[e].transition)}},{key:"setTransition",value:function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Na(this._values[e].property)),this._values[e].transition=ne(t)||void 0}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i);var a=this.getTransition(r);void 0!==a&&(e["".concat(r,"-transition")]=a)}return e}},{key:"transitioned",value:function(e,t){for(var n=new $a(this._properties),r=0,i=Object.keys(this._values);r<i.length;r++){var a=i[r];n._values[a]=this._values[a].transitioned(e,t._values[a])}return n}},{key:"untransitioned",value:function(){for(var e=new $a(this._properties),t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t];e._values[r]=this._values[r].untransitioned()}return e}}]),e}(),Fa=function(){function e(t,n,r,i,a){d(this,e);var o=i.delay||0,s=i.duration||0;a=a||0,this.property=t,this.value=n,this.begin=a+o,this.end=this.begin+s,t.specification.transition&&(i.delay||i.duration)&&(this.prior=r)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n){var r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return a.possiblyEvaluate(e,t,n);var o=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),i,N(o))}return i}}]),e}(),$a=function(){function e(t){d(this,e),this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new Za(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}},{key:"hasTransition",value:function(){for(var e=0,t=Object.keys(this._values);e<t.length;e++){var n=t[e];if(this._values[n].prior)return!0}return!1}}]),e}(),Va=function(){function e(t){d(this,e),this._properties=t,this._values=Object.create(t.defaultPropertyValues)}return p(e,[{key:"getValue",value:function(e){return ne(this._values[e].value)}},{key:"setValue",value:function(e,t){this._values[e]=new ja(this._values[e].property,null===t?void 0:ne(t))}},{key:"serialize",value:function(){for(var e={},t=0,n=Object.keys(this._values);t<n.length;t++){var r=n[t],i=this.getValue(r);void 0!==i&&(e[r]=i)}return e}},{key:"possiblyEvaluate",value:function(e,t,n){for(var r=new Za(this._properties),i=0,a=Object.keys(this._values);i<a.length;i++){var o=a[i];r._values[o]=this._values[o].possiblyEvaluate(e,t,n)}return r}}]),e}(),Ua=function(){function e(t,n,r){d(this,e),this.property=t,this.value=n,this.parameters=r}return p(e,[{key:"isConstant",value:function(){return"constant"===this.value.kind}},{key:"constantOr",value:function(e){return"constant"===this.value.kind?this.value.value:e}},{key:"evaluate",value:function(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}]),e}(),Za=function(){function e(t){d(this,e),this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}return p(e,[{key:"get",value:function(e){return this._values[e]}}]),e}(),Ha=function(){function e(t){d(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t){return e.expression.evaluate(t)}},{key:"interpolate",value:function(e,t,n){var r=qn[this.specification.type];return r?r(e,t,n):e}}]),e}(),Wa=function(){function e(t,n){d(this,e),this.specification=t,this.overrides=n}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return new Ua(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}},{key:"interpolate",value:function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Ua(this,{kind:"constant",value:void 0},e.parameters);var r=qn[this.specification.type];return r?new Ua(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}},{key:"evaluate",value:function(e,t,n,r,i,a){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,a)}}]),e}(),qa=function(){function e(t){d(this,e),this.specification=t}return p(e,[{key:"possiblyEvaluate",value:function(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}},{key:"interpolate",value:function(){return!1}}]),e}(),Ga=p((function e(t){d(this,e),this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];var n=new Oa(0,{});for(var r in t){var i=t[r];i.specification.overridable&&this.overridableProperties.push(r);var a=this.defaultPropertyValues[r]=new ja(i,void 0),o=this.defaultTransitionablePropertyValues[r]=new Na(i);this.defaultTransitioningPropertyValues[r]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=a.possiblyEvaluate(n)}}));function Xa(e,t){return 256*(e=$(Math.floor(e),0,255))+$(Math.floor(t),0,255)}ua(Wa,"DataDrivenProperty"),ua(Ha,"DataConstantProperty"),ua(qa,"ColorRampProperty");var Ka={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Ya=p((function e(t,n){d(this,e),this._structArray=t,this._pos1=n*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8})),Ja=function(){function e(){d(this,e),this.isTransferred=!1,this.capacity=-1,this.resize(0)}return p(e,[{key:"_trim",value:function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}},{key:"clear",value:function(){this.length=0}},{key:"resize",value:function(e){this.reserve(e),this.length=e}},{key:"reserve",value:function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}},{key:"_refreshViews",value:function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}},{key:"destroy",value:function(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}],[{key:"serialize",value:function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}},{key:"deserialize",value:function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}}]),e}();function Qa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=0,r=0;return{members:e.map((function(e){var i=Ka[e.type].BYTES_PER_ELEMENT,a=n=eo(n,Math.max(t,i)),o=e.components||1;return r=Math.max(r,i),n+=i*o,{name:e.name,type:e.type,components:o,offset:a}})),size:eo(n,Math.max(r,t)),alignment:t}}function eo(e,t){return Math.ceil(e/t)*t}var to=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}]),n}(Ja);to.prototype.bytesPerElement=4,ua(to,"StructArrayLayout2i4");var no=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}]),n}(Ja);no.prototype.bytesPerElement=6,ua(no,"StructArrayLayout3i6");var ro=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=r,this.int16[a+3]=i,e}}]),n}(Ja);ro.prototype.bytesPerElement=8,ua(ro,"StructArrayLayout4i8");var io=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var l=6*e,u=12*e,c=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[u+4]=r,this.uint8[u+5]=i,this.uint8[u+6]=a,this.uint8[u+7]=o,this.float32[c+2]=s,e}}]),n}(Ja);io.prototype.bytesPerElement=12,ua(io,"StructArrayLayout2i4ub1f12");var ao=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,e}}]),n}(Ja);ao.prototype.bytesPerElement=16,ua(ao,"StructArrayLayout4f16");var oo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=6*e,s=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,this.float32[s+2]=a,e}}]),n}(Ja);oo.prototype.bytesPerElement=12,ua(oo,"StructArrayLayout4ui1f12");var so=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=4*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,e}}]),n}(Ja);so.prototype.bytesPerElement=8,ua(so,"StructArrayLayout4ui8");var lo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=a,this.int16[s+5]=o,e}}]),n}(Ja);lo.prototype.bytesPerElement=12,ua(lo,"StructArrayLayout6i12");var uo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h){var f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,r,i,a,o,s,l,u,c,h)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f){var d=12*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.uint16[d+4]=a,this.uint16[d+5]=o,this.uint16[d+6]=s,this.uint16[d+7]=l,this.int16[d+8]=u,this.int16[d+9]=c,this.int16[d+10]=h,this.int16[d+11]=f,e}}]),n}(Ja);uo.prototype.bytesPerElement=24,ua(uo,"StructArrayLayout4i4ui4i24");var co=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a){var o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i,a)}},{key:"emplace",value:function(e,t,n,r,i,a,o){var s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[l+2]=i,this.float32[l+3]=a,this.float32[l+4]=o,e}}]),n}(Ja);co.prototype.bytesPerElement=20,ua(co,"StructArrayLayout3i3f20");var ho=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint32[1*e+0]=t,e}}]),n}(Ja);ho.prototype.bytesPerElement=4,ua(ho,"StructArrayLayout1ul4");var fo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f){var d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,a,o,s,l,u,c,h,f)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d){var p=20*e,m=10*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=a,this.float32[m+3]=o,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=u,this.int16[p+14]=c,this.uint32[m+8]=h,this.uint16[p+18]=f,this.uint16[p+19]=d,e}}]),n}(Ja);fo.prototype.bytesPerElement=40,ua(fo,"StructArrayLayout5i4f1i1ul2ui40");var po=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o){var s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,a,o)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s){var l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=r,this.int16[l+4]=i,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}]),n}(Ja);po.prototype.bytesPerElement=16,ua(po,"StructArrayLayout3i2i2i16");var mo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.int16[s+6]=i,this.int16[s+7]=a,e}}]),n}(Ja);mo.prototype.bytesPerElement=16,ua(mo,"StructArrayLayout2f1f2i16");var vo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=r,this.float32[o+2]=i,e}}]),n}(Ja);vo.prototype.bytesPerElement=12,ua(vo,"StructArrayLayout2ub2f12");var go=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}]),n}(Ja);go.prototype.bytesPerElement=12,ua(go,"StructArrayLayout3f12");var yo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n){var r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}},{key:"emplace",value:function(e,t,n,r){var i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}]),n}(Ja);yo.prototype.bytesPerElement=6,ua(yo,"StructArrayLayout3ui6");var _o=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x){var b=this.length;return this.resize(b+1),this.emplace(b,e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x,b){var w=30*e,k=15*e,E=60*e;return this.int16[w+0]=t,this.int16[w+1]=n,this.int16[w+2]=r,this.float32[k+2]=i,this.float32[k+3]=a,this.uint16[w+8]=o,this.uint16[w+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=u,this.uint32[k+7]=c,this.uint16[w+16]=h,this.uint16[w+17]=f,this.uint16[w+18]=d,this.float32[k+10]=p,this.float32[k+11]=m,this.uint8[E+48]=v,this.uint8[E+49]=g,this.uint8[E+50]=y,this.uint32[k+13]=_,this.int16[w+28]=x,this.uint8[E+58]=b,e}}]),n}(Ja);_o.prototype.bytesPerElement=60,ua(_o,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");var xo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x,b,w,k,E,S,T,C,M,A){var P=this.length;return this.resize(P+1),this.emplace(P,e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x,b,w,k,E,S,T,C,M,A)}},{key:"emplace",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_,x,b,w,k,E,S,T,C,M,A,P){var I=38*e,z=19*e;return this.int16[I+0]=t,this.int16[I+1]=n,this.int16[I+2]=r,this.float32[z+2]=i,this.float32[z+3]=a,this.int16[I+8]=o,this.int16[I+9]=s,this.int16[I+10]=l,this.int16[I+11]=u,this.int16[I+12]=c,this.int16[I+13]=h,this.uint16[I+14]=f,this.uint16[I+15]=d,this.uint16[I+16]=p,this.uint16[I+17]=m,this.uint16[I+18]=v,this.uint16[I+19]=g,this.uint16[I+20]=y,this.uint16[I+21]=_,this.uint16[I+22]=x,this.uint16[I+23]=b,this.uint16[I+24]=w,this.uint16[I+25]=k,this.uint16[I+26]=E,this.uint16[I+27]=S,this.uint16[I+28]=T,this.uint32[z+15]=C,this.float32[z+16]=M,this.float32[z+17]=A,this.float32[z+18]=P,e}}]),n}(Ja);xo.prototype.bytesPerElement=76,ua(xo,"StructArrayLayout3i2f6i15ui1ul3f76");var bo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.float32[1*e+0]=t,e}}]),n}(Ja);bo.prototype.bytesPerElement=4,ua(bo,"StructArrayLayout1f4");var wo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r,i){var a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i)}},{key:"emplace",value:function(e,t,n,r,i,a){var o=5*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,this.float32[o+4]=a,e}}]),n}(Ja);wo.prototype.bytesPerElement=20,ua(wo,"StructArrayLayout5f20");var ko=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t,n,r){var i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}},{key:"emplace",value:function(e,t,n,r,i){var a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=r,this.uint16[a+4]=i,e}}]),n}(Ja);ko.prototype.bytesPerElement=12,ua(ko,"StructArrayLayout1ul3ui12");var Eo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}]),n}(Ja);Eo.prototype.bytesPerElement=4,ua(Eo,"StructArrayLayout2ui4");var So=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e){var t=this.length;return this.resize(t+1),this.emplace(t,e)}},{key:"emplace",value:function(e,t){return this.uint16[1*e+0]=t,e}}]),n}(Ja);So.prototype.bytesPerElement=2,ua(So,"StructArrayLayout1ui2");var To=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_refreshViews",value:function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}},{key:"emplaceBack",value:function(e,t){var n=this.length;return this.resize(n+1),this.emplace(n,e,t)}},{key:"emplace",value:function(e,t,n){var r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}]),n}(Ja);To.prototype.bytesPerElement=8,ua(To,"StructArrayLayout2f8");var Co=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.int16[this._pos2+3]}},{key:"tileAnchorY",get:function(){return this._structArray.int16[this._pos2+4]}},{key:"x1",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"y1",get:function(){return this._structArray.float32[this._pos4+4]}},{key:"x2",get:function(){return this._structArray.float32[this._pos4+5]}},{key:"y2",get:function(){return this._structArray.float32[this._pos4+6]}},{key:"padding",get:function(){return this._structArray.int16[this._pos2+14]}},{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+8]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+19]}}]),n}(Ya);Co.prototype.size=40;var Mo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Co(this,e)}}]),n}(fo);ua(Mo,"CollisionBoxArray");var Ao=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"glyphStartIndex",get:function(){return this._structArray.uint16[this._pos2+8]}},{key:"numGlyphs",get:function(){return this._structArray.uint16[this._pos2+9]}},{key:"vertexStartIndex",get:function(){return this._structArray.uint32[this._pos4+5]}},{key:"lineStartIndex",get:function(){return this._structArray.uint32[this._pos4+6]}},{key:"lineLength",get:function(){return this._structArray.uint32[this._pos4+7]}},{key:"segment",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"lowerSize",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"upperSize",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"lineOffsetX",get:function(){return this._structArray.float32[this._pos4+10]}},{key:"lineOffsetY",get:function(){return this._structArray.float32[this._pos4+11]}},{key:"writingMode",get:function(){return this._structArray.uint8[this._pos1+48]}},{key:"placedOrientation",get:function(){return this._structArray.uint8[this._pos1+49]},set:function(e){this._structArray.uint8[this._pos1+49]=e}},{key:"hidden",get:function(){return this._structArray.uint8[this._pos1+50]},set:function(e){this._structArray.uint8[this._pos1+50]=e}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+13]},set:function(e){this._structArray.uint32[this._pos4+13]=e}},{key:"associatedIconIndex",get:function(){return this._structArray.int16[this._pos2+28]}},{key:"flipState",get:function(){return this._structArray.uint8[this._pos1+58]},set:function(e){this._structArray.uint8[this._pos1+58]=e}}]),n}(Ya);Ao.prototype.size=60;var Po=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Ao(this,e)}}]),n}(_o);ua(Po,"PlacedSymbolArray");var Io=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"projectedAnchorX",get:function(){return this._structArray.int16[this._pos2+0]}},{key:"projectedAnchorY",get:function(){return this._structArray.int16[this._pos2+1]}},{key:"projectedAnchorZ",get:function(){return this._structArray.int16[this._pos2+2]}},{key:"tileAnchorX",get:function(){return this._structArray.float32[this._pos4+2]}},{key:"tileAnchorY",get:function(){return this._structArray.float32[this._pos4+3]}},{key:"rightJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+8]}},{key:"centerJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+9]}},{key:"leftJustifiedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+10]}},{key:"verticalPlacedTextSymbolIndex",get:function(){return this._structArray.int16[this._pos2+11]}},{key:"placedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+12]}},{key:"verticalPlacedIconSymbolIndex",get:function(){return this._structArray.int16[this._pos2+13]}},{key:"key",get:function(){return this._structArray.uint16[this._pos2+14]}},{key:"textBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+15]}},{key:"textBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+16]}},{key:"verticalTextBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+17]}},{key:"verticalTextBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+18]}},{key:"iconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+19]}},{key:"iconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+20]}},{key:"verticalIconBoxStartIndex",get:function(){return this._structArray.uint16[this._pos2+21]}},{key:"verticalIconBoxEndIndex",get:function(){return this._structArray.uint16[this._pos2+22]}},{key:"featureIndex",get:function(){return this._structArray.uint16[this._pos2+23]}},{key:"numHorizontalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+24]}},{key:"numVerticalGlyphVertices",get:function(){return this._structArray.uint16[this._pos2+25]}},{key:"numIconVertices",get:function(){return this._structArray.uint16[this._pos2+26]}},{key:"numVerticalIconVertices",get:function(){return this._structArray.uint16[this._pos2+27]}},{key:"useRuntimeCollisionCircles",get:function(){return this._structArray.uint16[this._pos2+28]}},{key:"crossTileID",get:function(){return this._structArray.uint32[this._pos4+15]},set:function(e){this._structArray.uint32[this._pos4+15]=e}},{key:"textOffset0",get:function(){return this._structArray.float32[this._pos4+16]}},{key:"textOffset1",get:function(){return this._structArray.float32[this._pos4+17]}},{key:"collisionCircleDiameter",get:function(){return this._structArray.float32[this._pos4+18]}}]),n}(Ya);Io.prototype.size=76;var zo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Io(this,e)}}]),n}(xo);ua(zo,"SymbolInstanceArray");var Lo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getoffsetX",value:function(e){return this.float32[1*e+0]}}]),n}(bo);ua(Lo,"GlyphOffsetArray");var Do=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getx",value:function(e){return this.int16[2*e+0]}},{key:"gety",value:function(e){return this.int16[2*e+1]}}]),n}(to);ua(Do,"SymbolLineVertexArray");var Ro=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"featureIndex",get:function(){return this._structArray.uint32[this._pos4+0]}},{key:"sourceLayerIndex",get:function(){return this._structArray.uint16[this._pos2+2]}},{key:"bucketIndex",get:function(){return this._structArray.uint16[this._pos2+3]}},{key:"layoutVertexArrayOffset",get:function(){return this._structArray.uint16[this._pos2+4]}}]),n}(Ya);Ro.prototype.size=12;var Oo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"get",value:function(e){return new Ro(this,e)}}]),n}(ko);ua(Oo,"FeatureIndexArray");var jo=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"geta_centroid_pos0",value:function(e){return this.uint16[2*e+0]}},{key:"geta_centroid_pos1",value:function(e){return this.uint16[2*e+1]}}]),n}(Eo);ua(jo,"FillExtrusionCentroidArray");var No=Qa([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Bo=Qa([{name:"a_dash",components:4,type:"Uint16"}]),Fo={exports:{}},$o={exports:{}};$o.exports=function(e,t){var n,r,i,a,o,s,l,u;for(r=e.length-(n=3&e.length),i=t,o=3432918353,s=461845907,u=0;u<r;)l=255&e.charCodeAt(u)|(255&e.charCodeAt(++u))<<8|(255&e.charCodeAt(++u))<<16|(255&e.charCodeAt(++u))<<24,++u,i=27492+(65535&(a=5*(65535&(i=(i^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(u+2))<<16;case 2:l^=(255&e.charCodeAt(u+1))<<8;case 1:i^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(u)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Vo=$o.exports,Uo={exports:{}};Uo.exports=function(e,t){for(var n,r=e.length,i=t^r,a=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++a;switch(r){case 3:i^=(255&e.charCodeAt(a+2))<<16;case 2:i^=(255&e.charCodeAt(a+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(a)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var Zo=Vo,Ho=Uo.exports;Fo.exports=Zo,Fo.exports.murmur3=Zo,Fo.exports.murmur2=Ho;var Wo=T(Fo.exports),qo=function(){function e(){d(this,e),this.ids=[],this.positions=[],this.indexed=!1}return p(e,[{key:"add",value:function(e,t,n,r){this.ids.push(Go(e)),this.positions.push(t,n,r)}},{key:"getPositions",value:function(e){for(var t=Go(e),n=0,r=this.ids.length-1;n<r;){var i=n+r>>1;this.ids[i]>=t?r=i:n=i+1}for(var a=[];this.ids[n]===t;)a.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return a}}],[{key:"serialize",value:function(e,t){var n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return Xo(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}},{key:"deserialize",value:function(t){var n=new e;return n.ids=t.ids,n.positions=t.positions,n.indexed=!0,n}}]),e}();function Go(e){var t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Wo(String(e))}function Xo(e,t,n,r){for(;n<r;){for(var i=e[n+r>>1],a=n-1,o=r+1;;){do{a++}while(e[a]<i);do{o--}while(e[o]>i);if(a>=o)break;Ko(e,a,o),Ko(t,3*a,3*o),Ko(t,3*a+1,3*o+1),Ko(t,3*a+2,3*o+2)}o-n<r-o?(Xo(e,t,n,o),n=o+1):(Xo(e,t,o+1,r),r=o)}}function Ko(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}ua(qo,"FeaturePositionMap");var Yo=function(){function e(t){d(this,e),this.gl=t.gl,this.initialized=!1}return p(e,[{key:"fetchUniformLocation",value:function(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}]),e}(),Jo=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=0,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}]),n}(Yo),Qo=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=[0,0,0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}]),n}(Yo),es=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=Ht.transparent,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}]),n}(Yo),ts=new Float32Array(16),ns=new Float32Array(9),rs=new Float32Array(4);function is(e){return[Xa(255*e.r,255*e.g),Xa(255*e.b,255*e.a)]}var as=function(){function e(t,n,r){d(this,e),this.value=t,this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.type=r}return p(e,[{key:"setUniform",value:function(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}},{key:"getBinding",value:function(e,t){return"color"===this.type?new es(e):new Jo(e)}}]),e}(),os=function(){function e(t,n){d(this,e),this.uniformNames=n.map((function(e){return"u_".concat(e)})),this.pattern=null,this.pixelRatio=1}return p(e,[{key:"setConstantPatternPositions",value:function(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}},{key:"setUniform",value:function(e,t,n,r,i){var a="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;a&&t.set(e,i,a)}},{key:"getBinding",value:function(e,t){return"u_pattern"===t||"u_dash"===t?new Qo(e):new Jo(e)}}]),e}(),ss=function(){function e(t,n,r,i){d(this,e),this.expression=t,this.type=r,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?2:1,offset:0}})),this.paintVertexArray=new i}return p(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.paintVertexArray.length,s=this.expression.evaluate(new Oa(0),t,{},i,r,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,a)}},{key:"_setPaintValue",value:function(e,t,n){if("color"===this.type)for(var r=is(n),i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1]);else{for(var a=e;a<t;a++)this.paintVertexArray.emplace(a,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),ls=function(){function e(t,n,r,i,a,o){d(this,e),this.expression=t,this.uniformNames=n.map((function(e){return"u_".concat(e,"_t")})),this.type=r,this.useIntegerZoom=i,this.zoom=a,this.maxValue=0,this.paintVertexAttributes=n.map((function(e){return{name:"a_".concat(e),type:"Float32",components:"color"===r?4:2,offset:0}})),this.paintVertexArray=new o}return p(e,[{key:"populatePaintArray",value:function(e,t,n,r,i,a){var o=this.expression.evaluate(new Oa(this.zoom),t,{},i,r,a),s=this.expression.evaluate(new Oa(this.zoom+1),t,{},i,r,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}},{key:"updatePaintArray",value:function(e,t,n,r,i){var a=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),o=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,a,o)}},{key:"_setPaintValue",value:function(e,t,n,r){if("color"===this.type)for(var i=is(n),a=is(r),o=e;o<t;o++)this.paintVertexArray.emplace(o,i[0],i[1],a[0],a[1]);else{for(var s=e;s<t;s++)this.paintVertexArray.emplace(s,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}},{key:"setUniform",value:function(e,t,n,r,i){var a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=$(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,i,o)}},{key:"getBinding",value:function(e,t){return new Jo(e)}}]),e}(),us=function(){function e(t,n,r,i,a){d(this,e),this.expression=t,this.layerId=a,this.paintVertexAttributes=("array"===r?Bo:No).members;for(var o=0;o<n.length;++o);this.paintVertexArray=new i}return p(e,[{key:"populatePaintArray",value:function(e,t,n){var r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}},{key:"updatePaintArray",value:function(e,t,n,r,i,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}},{key:"_setPaintValues",value:function(e,t,n,r){if(r&&n){var i=r[n];if(i)for(var a=i.tl,o=i.br,s=i.pixelRatio,l=e;l<t;l++)this.paintVertexArray.emplace(l,a[0],a[1],o[0],o[1],s)}}},{key:"upload",value:function(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}},{key:"destroy",value:function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}]),e}(),cs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};d(this,e),this.binders={},this._buffers=[];var i=[];for(var a in t.paint._values)if(r(a)){var o=t.paint.get(a);if(o instanceof Ua&&Kr(o.property.specification)){var s=ds(a,t.type),l=o.value,u=o.property.specification.type,c=!!o.property.useIntegerZoom,h="line-dasharray"===a||a.endsWith("pattern"),f="line-dasharray"===a&&"constant"!==t.layout.get("line-cap").value.kind;if("constant"!==l.kind||f)if("source"===l.kind||f||h){var p=vs(a,u,"source");this.binders[a]=h?new us(l,s,u,p,t.id):new ss(l,s,u,p),i.push("/a_".concat(a))}else{var m=vs(a,u,"composite");this.binders[a]=new ls(l,s,u,c,n,m),i.push("/z_".concat(a))}else this.binders[a]=h?new os(l.value,s):new as(l.value,s,u),i.push("/u_".concat(a))}}this.cacheKey=i.sort().join("")}return p(e,[{key:"getMaxValue",value:function(e){var t=this.binders[e];return t instanceof ss||t instanceof ls?t.maxValue:0}},{key:"populatePaintArrays",value:function(e,t,n,r,i,a){for(var o in this.binders){var s=this.binders[o];(s instanceof ss||s instanceof ls||s instanceof us)&&s.populatePaintArray(e,t,n,r,i,a)}}},{key:"setConstantPatternPositions",value:function(e){for(var t in this.binders){var n=this.binders[t];n instanceof os&&n.setConstantPatternPositions(e)}}},{key:"updatePaintArrays",value:function(e,t,n,r,i,a){var o=!1;for(var s in e){var l,u=t.getPositions(s),c=f(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,d=n.feature(h.index);for(var p in this.binders){var m=this.binders[p];if((m instanceof ss||m instanceof ls||m instanceof us)&&!0===m.expression.isStateDependent){var v=r.paint.get(p);m.expression=v.value,m.updatePaintArray(h.start,h.end,d,e[s],i,a),o=!0}}}}catch(g){c.e(g)}finally{c.f()}}return o}},{key:"defines",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];(n instanceof as||n instanceof os)&&e.push.apply(e,c(n.uniformNames.map((function(e){return"#define HAS_UNIFORM_".concat(e)}))))}return e}},{key:"getBinderAttributes",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof ss||n instanceof ls||n instanceof us)for(var r=0;r<n.paintVertexAttributes.length;r++)e.push(n.paintVertexAttributes[r].name)}return e}},{key:"getBinderUniforms",value:function(){var e=[];for(var t in this.binders){var n=this.binders[t];if(n instanceof as||n instanceof os||n instanceof ls){var r,i=f(n.uniformNames);try{for(i.s();!(r=i.n()).done;){var a=r.value;e.push(a)}}catch(o){i.e(o)}finally{i.f()}}}return e}},{key:"getPaintVertexBuffers",value:function(){return this._buffers}},{key:"getUniforms",value:function(e){var t=[];for(var n in this.binders){var r=this.binders[n];if(r instanceof as||r instanceof os||r instanceof ls){var i,a=f(r.uniformNames);try{for(a.s();!(i=a.n()).done;){var o=i.value;t.push({name:o,property:n,binding:r.getBinding(e,o)})}}catch(s){a.e(s)}finally{a.f()}}}return t}},{key:"setUniforms",value:function(e,t,n,r,i){var a,o=f(n);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.name,u=s.property,c=s.binding;this.binders[u].setUniform(e,c,i,r.get(u),l)}}catch(h){o.e(h)}finally{o.f()}}},{key:"updatePaintBuffers",value:function(){for(var e in this._buffers=[],this.binders){var t=this.binders[e];(t instanceof ss||t instanceof ls||t instanceof us)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}},{key:"upload",value:function(e){for(var t in this.binders){var n=this.binders[t];(n instanceof ss||n instanceof ls||n instanceof us)&&n.upload(e)}this.updatePaintBuffers()}},{key:"destroy",value:function(){for(var e in this.binders){var t=this.binders[e];(t instanceof ss||t instanceof ls||t instanceof us)&&t.destroy()}}}]),e}(),hs=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};d(this,e),this.programConfigurations={};var i,a=f(t);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.programConfigurations[o.id]=new cs(o,n,r)}}catch(s){a.e(s)}finally{a.f()}this.needsUpload=!1,this._featureMap=new qo,this._bufferOffset=0}return p(e,[{key:"populatePaintArrays",value:function(e,t,n,r,i,a,o){for(var s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,a,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}},{key:"updatePaintArrays",value:function(e,t,n,r,i){var a,o=f(n);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.needsUpload=this.programConfigurations[s.id].updatePaintArrays(e,this._featureMap,t,s,r,i)||this.needsUpload}}catch(l){o.e(l)}finally{o.f()}}},{key:"get",value:function(e){return this.programConfigurations[e]}},{key:"upload",value:function(e){if(this.needsUpload){for(var t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}},{key:"destroy",value:function(){for(var e in this.programConfigurations)this.programConfigurations[e].destroy()}}]),e}(),fs={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ds(e,t){return fs[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}var ps={"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo},"line-dasharray":{source:so,composite:so}},ms={color:{source:To,composite:ao},number:{source:bo,composite:To}};function vs(e,t,n){var r=ps[e];return r&&r[n]||ms[t][n]}ua(as,"ConstantBinder"),ua(os,"PatternConstantBinder"),ua(ss,"SourceExpressionBinder"),ua(us,"PatternCompositeBinder"),ua(ls,"CompositeExpressionBinder"),ua(cs,"ProgramConfiguration",{omit:["_buffers"]}),ua(hs,"ProgramConfigurationSet");var gs="-transition",ys=function(e){m(n,e);var t=v(n);function n(e,r){var i;if(d(this,n),(i=t.call(this)).id=e.id,i.type=e.type,i._featureFilter={filter:function(){return!0},needGeometry:!1,needFeature:!1},i._filterCompiled=!1,"custom"!==e.type&&(i.metadata=e.metadata,i.minzoom=e.minzoom,i.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(i.source=e.source,i.sourceLayer=e["source-layer"],i.filter=e.filter),r.layout&&(i._unevaluatedLayout=new Va(r.layout)),r.paint)){for(var a in i._transitionablePaint=new Ba(r.paint),e.paint)i.setPaintProperty(a,e.paint[a],{validate:!1});for(var o in e.layout)i.setLayoutProperty(o,e.layout[o],{validate:!1});i._transitioningPaint=i._transitionablePaint.untransitioned(),i.paint=new Za(r.paint)}return l(i)}return p(n,[{key:"getLayoutProperty",value:function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}},{key:"setLayoutProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!=t&&this._validate(ta,"layers.".concat(this.id,".layout.").concat(e),e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}},{key:"getPaintProperty",value:function(e){return Q(e,gs)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}},{key:"setPaintProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!=t&&this._validate(ea,"layers.".concat(this.id,".paint.").concat(e),e,t,n))return!1;if(Q(e,gs))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;var r=this._transitionablePaint._values[e],i=r.value.isDataDriven(),a=r.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);var o=this._transitionablePaint._values[e].value,s=o.isDataDriven(),l=Q(e,"pattern")||"line-dasharray"===e;return s||i||l||this._handleOverridablePaintPropertyUpdate(e,a,o)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){}},{key:"getProgramIds",value:function(){return null}},{key:"getProgramConfiguration",value:function(e){return null}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,n){return!1}},{key:"isHidden",value:function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}},{key:"updateTransitions",value:function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}},{key:"hasTransition",value:function(){return this._transitioningPaint.hasTransition()}},{key:"recalculate",value:function(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}},{key:"serialize",value:function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),te(e,(function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)}))}},{key:"_validate",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!i||!1!==i.validate)&&ra(this,e.call(Qi,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:pt,style:{glyphs:!0,sprite:!0}}))}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!1}},{key:"isTileClipped",value:function(){return!1}},{key:"hasOffscreenPass",value:function(){return!1}},{key:"resize",value:function(){}},{key:"isStateDependent",value:function(){for(var e in this.paint._values){var t=this.paint.get(e);if(t instanceof Ua&&Kr(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}},{key:"compileFilter",value:function(){this._filterCompiled||(this._featureFilter=Si(this.filter),this._filterCompiled=!0)}},{key:"invalidateCompiledFilter",value:function(){this._filterCompiled=!1}},{key:"dynamicFilter",value:function(){return this._featureFilter.dynamicFilter}},{key:"dynamicFilterNeedsFeature",value:function(){return this._featureFilter.needFeature}}]),n}(dt),_s=Qa([{name:"a_pos",components:2,type:"Int16"}],4),xs=Qa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),bs=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.segments=t}return p(e,[{key:"prepareSegment",value:function(t,n,r,i){var a=this.segments[this.segments.length-1];return t>e.MAX_VERTEX_ARRAY_LENGTH&&ie("Max vertices per segment is ".concat(e.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(t)),(!a||a.vertexLength+t>e.MAX_VERTEX_ARRAY_LENGTH||a.sortKey!==i)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},void 0!==i&&(a.sortKey=i),this.segments.push(a)),a}},{key:"get",value:function(){return this.segments}},{key:"destroy",value:function(){var e,t=f(this.segments);try{for(t.s();!(e=t.n()).done;){var n=e.value;for(var r in n.vaos)n.vaos[r].destroy()}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"simpleSegment",value:function(t,n,r,i){return new e([{vertexOffset:t,primitiveOffset:n,vertexLength:r,primitiveLength:i,vaos:{},sortKey:0}])}}]),e}();bs.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ua(bs,"SegmentVector");var ws=8192,ks=function(){function e(t,n){d(this,e),t&&(n?this.setSouthWest(t).setNorthEast(n):4===t.length?this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]]):this.setSouthWest(t[0]).setNorthEast(t[1]))}return p(e,[{key:"setNorthEast",value:function(e){return this._ne=e instanceof nu?new nu(e.lng,e.lat):nu.convert(e),this}},{key:"setSouthWest",value:function(e){return this._sw=e instanceof nu?new nu(e.lng,e.lat):nu.convert(e),this}},{key:"extend",value:function(t){var n,r,i=this._sw,a=this._ne;if(t instanceof nu)n=t,r=t;else{if(!(t instanceof e))return Array.isArray(t)?4===t.length||t.every(Array.isArray)?this.extend(e.convert(t)):this.extend(nu.convert(t)):"object"==typeof t&&null!==t&&t.hasOwnProperty("lat")&&(t.hasOwnProperty("lon")||t.hasOwnProperty("lng"))?this.extend(nu.convert(t)):this;if(n=t._sw,r=t._ne,!n||!r)return this}return i||a?(i.lng=Math.min(n.lng,i.lng),i.lat=Math.min(n.lat,i.lat),a.lng=Math.max(r.lng,a.lng),a.lat=Math.max(r.lat,a.lat)):(this._sw=new nu(n.lng,n.lat),this._ne=new nu(r.lng,r.lat)),this}},{key:"getCenter",value:function(){return new nu((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}},{key:"getSouthWest",value:function(){return this._sw}},{key:"getNorthEast",value:function(){return this._ne}},{key:"getNorthWest",value:function(){return new nu(this.getWest(),this.getNorth())}},{key:"getSouthEast",value:function(){return new nu(this.getEast(),this.getSouth())}},{key:"getWest",value:function(){return this._sw.lng}},{key:"getSouth",value:function(){return this._sw.lat}},{key:"getEast",value:function(){return this._ne.lng}},{key:"getNorth",value:function(){return this._ne.lat}},{key:"toArray",value:function(){return[this._sw.toArray(),this._ne.toArray()]}},{key:"toString",value:function(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}},{key:"isEmpty",value:function(){return!(this._sw&&this._ne)}},{key:"contains",value:function(e){var t=nu.convert(e),n=t.lng,r=t.lat,i=this._sw.lng<=n&&n<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=n&&n>=this._ne.lng),this._sw.lat<=r&&r<=this._ne.lat&&i}}],[{key:"convert",value:function(t){return!t||t instanceof e?t:new e(t)}}]),e}(),Es=1e-6,Ss="undefined"!=typeof Float32Array?Float32Array:Array;function Ts(){var e=new Ss(9);return Ss!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Cs(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=n[0],d=n[1],p=n[2],m=n[3],v=n[4],g=n[5],y=n[6],_=n[7],x=n[8];return e[0]=f*r+d*o+p*u,e[1]=f*i+d*s+p*c,e[2]=f*a+d*l+p*h,e[3]=m*r+v*o+g*u,e[4]=m*i+v*s+g*c,e[5]=m*a+v*l+g*h,e[6]=y*r+_*o+x*u,e[7]=y*i+_*s+x*c,e[8]=y*a+_*l+x*h,e}function Ms(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function As(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],h=t[9],f=t[10],d=t[11],p=t[12],m=t[13],v=t[14],g=t[15],y=n*s-r*o,_=n*l-i*o,x=n*u-a*o,b=r*l-i*s,w=r*u-a*s,k=i*u-a*l,E=c*m-h*p,S=c*v-f*p,T=c*g-d*p,C=h*v-f*m,M=h*g-d*m,A=f*g-d*v,P=y*A-_*M+x*C+b*T-w*S+k*E;return P?(e[0]=(s*A-l*M+u*C)*(P=1/P),e[1]=(i*M-r*A-a*C)*P,e[2]=(m*k-v*w+g*b)*P,e[3]=(f*w-h*k-d*b)*P,e[4]=(l*T-o*A-u*S)*P,e[5]=(n*A-i*T+a*S)*P,e[6]=(v*x-p*k-g*_)*P,e[7]=(c*k-f*x+d*_)*P,e[8]=(o*M-s*T+u*E)*P,e[9]=(r*T-n*M-a*E)*P,e[10]=(p*w-m*x+g*y)*P,e[11]=(h*x-c*w-d*y)*P,e[12]=(s*S-o*C-l*E)*P,e[13]=(n*C-r*S+i*E)*P,e[14]=(m*_-p*b-v*y)*P,e[15]=(c*b-h*_+f*y)*P,e):null}function Ps(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],m=t[12],v=t[13],g=t[14],y=t[15],_=n[0],x=n[1],b=n[2],w=n[3];return e[0]=_*r+x*s+b*h+w*m,e[1]=_*i+x*l+b*f+w*v,e[2]=_*a+x*u+b*d+w*g,e[3]=_*o+x*c+b*p+w*y,e[4]=(_=n[4])*r+(x=n[5])*s+(b=n[6])*h+(w=n[7])*m,e[5]=_*i+x*l+b*f+w*v,e[6]=_*a+x*u+b*d+w*g,e[7]=_*o+x*c+b*p+w*y,e[8]=(_=n[8])*r+(x=n[9])*s+(b=n[10])*h+(w=n[11])*m,e[9]=_*i+x*l+b*f+w*v,e[10]=_*a+x*u+b*d+w*g,e[11]=_*o+x*c+b*p+w*y,e[12]=(_=n[12])*r+(x=n[13])*s+(b=n[14])*h+(w=n[15])*m,e[13]=_*i+x*l+b*f+w*v,e[14]=_*a+x*u+b*d+w*g,e[15]=_*o+x*c+b*p+w*y,e}function Is(e,t,n){var r,i,a,o,s,l,u,c,h,f,d,p,m=n[0],v=n[1],g=n[2];return t===e?(e[12]=t[0]*m+t[4]*v+t[8]*g+t[12],e[13]=t[1]*m+t[5]*v+t[9]*g+t[13],e[14]=t[2]*m+t[6]*v+t[10]*g+t[14],e[15]=t[3]*m+t[7]*v+t[11]*g+t[15]):(i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],h=t[8],f=t[9],d=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=h,e[9]=f,e[10]=d,e[11]=p,e[12]=r*m+s*v+h*g+t[12],e[13]=i*m+l*v+f*g+t[13],e[14]=a*m+u*v+d*g+t[14],e[15]=o*m+c*v+p*g+t[15]),e}function zs(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ls(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+h*r,e[7]=l*i+f*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=h*i-s*r,e[11]=f*i-l*r,e}function Ds(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],h=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-h*r,e[3]=l*i-f*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+h*i,e[11]=l*r+f*i,e}function Rs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Os(e,t,n){var r,i,a,o=n[0],s=n[1],l=n[2],u=Math.hypot(o,s,l);return u<Es?null:(o*=u=1/u,s*=u,l*=u,r=Math.sin(t),i=Math.cos(t),e[0]=o*o*(a=1-i)+i,e[1]=s*o*a+l*r,e[2]=l*o*a-s*r,e[3]=0,e[4]=o*s*a-l*r,e[5]=s*s*a+i,e[6]=l*s*a+o*r,e[7]=0,e[8]=o*l*a+s*r,e[9]=s*l*a-o*r,e[10]=l*l*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var js=Ps;function Ns(){var e=new Ss(3);return Ss!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Bs(e){var t=new Ss(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Fs(e){return Math.hypot(e[0],e[1],e[2])}function $s(e,t,n){var r=new Ss(3);return r[0]=e,r[1]=t,r[2]=n,r}function Vs(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Us(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Zs(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Hs(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ws(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function qs(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Gs(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function Xs(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function Ks(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Ys(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e}function Js(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/(o=o||1),e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function Qs(e,t,n){var r=n[0],i=n[1],a=n[2],o=t[0],s=t[1],l=t[2],u=i*l-a*s,c=a*o-r*l,h=r*s-i*o,f=i*h-a*c,d=a*u-r*h,p=r*c-i*u,m=2*n[3];return c*=m,h*=m,d*=2,p*=2,e[0]=o+(u*=m)+(f*=2),e[1]=s+c+d,e[2]=l+h+p,e}var el,tl=Us,nl=Zs,rl=Fs;function il(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function al(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o,e}function ol(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function sl(){var e=new Ss(4);return Ss!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function ll(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function ul(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=a*l-i*s,e[3]=o*l-r*s,e}function cl(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-a*s,e[1]=i*l+o*s,e[2]=a*l+r*s,e[3]=o*l-i*s,e}Ns(),el=new Ss(4),Ss!=Float32Array&&(el[0]=0,el[1]=0,el[2]=0,el[3]=0);var hl=al;Ns(),$s(1,0,0),$s(0,1,0),sl(),sl(),Ts();var fl=Qa([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]).members,dl=Qa([{name:"a_pos_3",components:3,type:"Int16"}]),pl=Qa([{name:"a_pos",type:"Int16",components:2}]),ml=function(){function e(t,n){d(this,e),this.pos=t,this.dir=n}return p(e,[{key:"intersectsPlane",value:function(e,t,n){var r=Ks(t,this.dir);if(Math.abs(r)<1e-6)return!1;var i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}},{key:"closestPointOnSphere",value:function(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=Es*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=Es*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=Es*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;var r=h(this.dir,3),i=r[0],a=r[1],o=r[2],s=this.pos[0]-e[0],l=this.pos[1]-e[1],u=this.pos[2]-e[2],c=i*i+a*a+o*o,f=2*(s*i+l*a+u*o),d=f*f-4*c*(s*s+l*l+u*u-t*t);if(d<0){var p=Math.max(-f/2,0),m=s+i*p,v=l+a*p,g=u+o*p,y=Math.hypot(m,v,g);return n[0]=m*t/y,n[1]=v*t/y,n[2]=g*t/y,!1}var _=(-f-Math.sqrt(d))/(2*c);if(_<0){var x=Math.hypot(s,l,u);return n[0]=s*t/x,n[1]=l*t/x,n[2]=u*t/x,!1}return n[0]=s+i*_,n[1]=l+a*_,n[2]=u+o*_,!0}}]),e}(),vl=function(){function e(t,n,r,i,a){d(this,e),this.TL=t,this.TR=n,this.BR=r,this.BL=i,this.horizon=a}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r){var i=[-1,1,1],a=[1,1,1],o=[1,-1,1],s=[-1,-1,1];return new e(Js(i,i,t),Js(a,a,t),Js(o,o,t),Js(s,s,t),n/r)}}]),e}(),gl=function(){function e(t,n){d(this,e),this.points=t,this.planes=n}return p(e,null,[{key:"fromInvProjectionMatrix",value:function(t,n,r,i){var a=Math.pow(2,r),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(e){var r=ol([],e,t),o=1/r[3]/n*a;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(r,r,[o,o,i?1/r[3]:o,o])})),s=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(e){var t=Xs([],Ys([],tl([],o[e[0]],o[e[1]]),tl([],o[e[2]],o[e[1]]))),n=-Ks(t,o[e[1]]);return t.concat(n)}));return new e(o,s)}}]),e}(),yl=function(){function e(t,n){d(this,e),this.min=t,this.max=n,this.center=qs([],Vs([],this.min,this.max),.5)}return p(e,[{key:"quadrant",value:function(t){for(var n=[t%2==0,t<2],r=Bs(this.min),i=Bs(this.max),a=0;a<n.length;a++)r[a]=n[a]?this.min[a]:this.center[a],i[a]=n[a]?this.center[a]:this.max[a];return i[2]=this.max[2],new e(r,i)}},{key:"distanceX",value:function(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}},{key:"distanceY",value:function(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}},{key:"distanceZ",value:function(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}},{key:"getCorners",value:function(){var e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}},{key:"intersects",value:function(e){for(var t=this.getCorners(),n=!0,r=0;r<e.planes.length;r++){for(var i=e.planes[r],a=0,o=0;o<t.length;o++)a+=Ks(i,t[o])+i[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(var s=0;s<3;s++){for(var l=Number.MAX_VALUE,u=-Number.MAX_VALUE,c=0;c<e.points.length;c++){var h=e.points[c][s]-this.min[s];l=Math.min(l,h),u=Math.max(u,h)}if(u<0||l>this.max[s]-this.min[s])return 0}return 1}}],[{key:"fromPoints",value:function(t){var n,r=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0],a=f(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;Hs(r,r,o),Ws(i,i,o)}}catch(s){a.e(s)}finally{a.f()}return new e(r,i)}},{key:"applyTransform",value:function(t,n){for(var r=t.getCorners(),i=0;i<r.length;++i)Js(r[i],r[i],n);return e.fromPoints(r)}}]),e}(),_l=5,xl=6,bl=ws/Math.PI/2,wl=16383,kl=64,El=[kl,32,16],Sl=-bl,Tl=bl,Cl=[new yl([Sl,Sl,Sl],[Tl,Tl,Tl]),new yl([Sl,Sl,Sl],[0,0,Tl]),new yl([0,Sl,Sl],[Tl,0,Tl]),new yl([Sl,0,Sl],[0,Tl,Tl]),new yl([0,0,Sl],[Tl,Tl,Tl])];function Ml(e){return e*bl/Ql}function Al(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=qs([],e._camera.position,e.worldSize),a=[t,n,1,1];ol(a,a,e.pixelMatrixInverse),il(a,a,1/a[3]);var o=Xs([],tl([],a,i)),s=e.globeMatrix,l=[s[12],s[13],s[14]],u=tl([],l,i),c=Fs(u),h=Xs([],u),f=e.worldSize/(2*Math.PI),d=Ks(h,o),p=Math.asin(f/c);if(p<Math.acos(d)){if(!r)return null;var m=[],v=[];qs(m,o,c/d),Xs(v,tl(v,m,u)),Xs(o,Vs(o,u,qs(o,v,Math.tan(p)*c)))}var g=[];new ml(i,o).closestPointOnSphere(l,f,g);var y=Xs([],fe(s,0)),_=Xs([],fe(s,1)),x=Xs([],fe(s,2)),b=Ks(y,g),w=Ks(_,g),k=Ks(x,g),E=O(Math.asin(-w/f)),S=O(Math.atan2(b,k));S=e.center.lng+function(e,t){var n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,S);var T=iu(S),C=$(au(E),0,1);return new fu(T,C)}var Pl=p((function e(t,n,r){d(this,e),this.a=tl([],t,r),this.b=tl([],n,r),this.center=r;var i=Xs([],this.a),a=Xs([],this.b);this.angle=Math.acos(Ks(i,a))}));function Il(e,t){return 0===e.angle||(n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)))<0||n>1?null:function(e,t,n,r){var i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,$(n,0,1))+e.center[t];var n}function zl(e){if(e.z<=1)return Cl[e.z+2*e.y+e.x];var t=Nl(jl(e));return yl.fromPoints(t)}function Ll(e,t,n){return qs(e,e,1-n),Gs(e,e,t,n)}function Dl(e,t){var n=ql(t.zoom);if(0===n)return zl(e);var r=jl(e),i=Nl(r),a=iu(r.getWest())*t.worldSize,o=iu(r.getEast())*t.worldSize,s=au(r.getNorth())*t.worldSize,l=au(r.getSouth())*t.worldSize,u=[a,s,0],c=[o,s,0],h=[a,l,0],f=[o,l,0],d=As([],t.globeMatrix);return Js(u,u,d),Js(c,c,d),Js(h,h,d),Js(f,f,d),i[0]=Ll(i[0],h,n),i[1]=Ll(i[1],f,n),i[2]=Ll(i[2],c,n),i[3]=Ll(i[3],u,n),yl.fromPoints(i)}function Rl(e,t,n){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;Js(a,a,t),qs(a,a,n)}}catch(o){i.e(o)}finally{i.f()}}function Ol(e,t,n){var r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){var a=zl(n).getCorners();return Rl(a,i,r),yl.fromPoints(a)}var o=jl(n),s=Nl(o);Rl(s,i,r);var l=Number.MAX_VALUE,u=[-l,-l,-l],c=[l,l,l];if(o.contains(e.center)){var h,d=f(s);try{for(d.s();!(h=d.n()).done;){var p=h.value;Hs(c,c,p),Ws(u,u,p)}}catch(N){d.e(N)}finally{d.f()}u[2]=0;var m=e.point,v=[m.x*r,m.y*r,0];return Hs(c,c,v),Ws(u,u,v),new yl(c,u)}var g=[i[12]*r,i[13]*r,i[14]*r],y=o.getCenter(),_=$(e.center.lat,-cu,cu),x=$(y.lat,-cu,cu),b=iu(e.center.lng),w=au(_),k=b-iu(y.lng),E=w-au(x);k>.5?k-=1:k<-.5&&(k+=1);var S=0;Math.abs(k)>Math.abs(E)?S=k>=0?1:3:(S=E>=0?0:2,Gs(g,g,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(R(E>=0?o.getSouth():o.getNorth()))*bl));var T=s[S],C=s[(S+1)%4],M=new Pl(T,C,g),A=[Il(M,0)||T[0],Il(M,1)||T[1],Il(M,2)||T[2]],P=ql(e.zoom);if(P>0){for(var I=function(e,t,n,r,i){var a=e.x,o=e.y,s=1/(1<<e.z),l=a*s,u=l+s,c=o*s,h=c+s,f=0,d=(l+u)/2-r;return d>.5?f=-1:d<-.5&&(f=1),c=(c*t-(i*=t))*n+i,[[l=((l+f)*t-(r*=t))*n+r,h=(h*t-i)*n+i,0],[u=((u+f)*t-r)*n+r,h,0],[u,c,0],[l,c,0]]}(n,t,e._pixelsPerMercatorPixel,b,w),z=0;z<s.length;z++)Ll(s[z],I[z],P);var L=Vs([],I[S],I[(S+1)%4]);qs(L,L,.5),Ll(A,L,P)}var D,O=f(s);try{for(O.s();!(D=O.n()).done;){var j=D.value;Hs(c,c,j),Ws(u,u,j)}}catch(N){O.e(N)}finally{O.f()}return c[2]=Math.min(T[2],C[2]),Hs(c,c,A),Ws(u,u,A),new yl(c,u)}function jl(e){var t=e.x,n=e.y,r=1/(1<<e.z),i=new nu(su(t*r),lu((n+1)*r)),a=new nu(su((t+1)*r),lu(n*r));return new ks(i,a)}function Nl(e){var t=R(e.getNorth()),n=R(e.getSouth()),r=Math.cos(t),i=Math.cos(n),a=Math.sin(t),o=Math.sin(n),s=e.getWest(),l=e.getEast();return[Bl(i,o,s),Bl(i,o,l),Bl(r,a,l),Bl(r,a,s)]}function Bl(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:bl;return n=R(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Fl(e,t,n){return Bl(Math.cos(R(e)),Math.sin(R(e)),t,n)}function $l(e,t,n,r){var i=1<<n.z,a=(e/ws+n.x)/i;return Fl(lu((t/ws+n.y)/i),su(a),r)}function Vl(e){var t=e.min,n=e.max;return wl/Math.max(n[0]-t[0],n[1]-t[1],n[2]-t[2])}var Ul=new Float64Array(16);function Zl(e){var t,n,r=Vl(e),i=Rs(Ul,[r,r,r]);return Is(i,i,((t=[])[0]=-(n=e.min)[0],t[1]=-n[1],t[2]=-n[2],t))}function Hl(e){var t,n,r=(n=e.min,(t=Ul)[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t),i=1/Vl(e);return zs(r,r,[i,i,i])}function Wl(e,t,n,r,i){var a=function(e){var t=ws/(2*Math.PI);return e/(2*Math.PI)/t}(n),o=[e,t,-n/(2*Math.PI)],s=Ms(new Float64Array(16));return Is(s,s,o),zs(s,s,[a,a,a]),Ls(s,s,R(-i)),Ds(s,s,R(-r)),s}function ql(e){return V(_l,xl,e)}function Gl(e,t){var n,r,i,a,o,s,l,u,c,h,f=Fl(t.lat,t.lng),d=function(e){var t=Fl(e._center.lat,e._center.lng),n=Ys([],$s(0,1,0),t),r=Os([],-e.angle,t);n=Js(n,n,r),Os(r,-e._pitch,n);var i=Xs([],t);return qs(i,i,Ml(e.cameraToCenterDistance/e.pixelsPerMeter)),Js(i,i,r),Vs([],t,i)}(e);return i=(n=Us([],d,f))[0],a=n[1],o=n[2],s=(r=f)[0],l=r[1],u=r[2],h=(c=Math.sqrt(i*i+a*a+o*o)*Math.sqrt(s*s+l*l+u*u))&&Ks(n,r)/c,Math.acos(Math.min(Math.max(h,-1),1))}function Xl(e,t){return Gl(e,t)>Math.PI/2*1.01}var Kl=R(85),Yl=Math.cos(Kl),Jl=Math.sin(Kl),Ql=6371008.8,eu=2*Math.PI*Ql,tu=function(){function e(t,n){if(d(this,e),isNaN(t)||isNaN(n))throw new Error("Invalid LngLat object: (".concat(t,", ").concat(n,")"));if(this.lng=+t,this.lat=+n,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}return p(e,[{key:"wrap",value:function(){return new e(U(this.lng,-180,180),this.lat)}},{key:"toArray",value:function(){return[this.lng,this.lat]}},{key:"toString",value:function(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}},{key:"distanceTo",value:function(e){var t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Ql*Math.acos(Math.min(i,1))}},{key:"toBounds",value:function(){var t=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new ks(new e(this.lng-n,this.lat-t),new e(this.lng+n,this.lat+t))}},{key:"toEcef",value:function(e){var t=Ml(e);return Fl(this.lat,this.lng,bl+t)}}],[{key:"convert",value:function(t){if(t instanceof e)return t;if(Array.isArray(t)&&(2===t.length||3===t.length))return new e(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&"object"==typeof t&&null!==t)return new e(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}]),e}(),nu=tu;function ru(e){return eu*Math.cos(e*Math.PI/180)}function iu(e){return(180+e)/360}function au(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ou(e,t){return e/ru(t)}function su(e){return 360*e-180}function lu(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function uu(e,t){return e*ru(lu(t))}var cu=85.051129;function hu(e){return 1/Math.cos(e*Math.PI/180)}var fu=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;d(this,e),this.x=+t,this.y=+n,this.z=+r}return p(e,[{key:"toLngLat",value:function(){return new nu(su(this.x),lu(this.y))}},{key:"toAltitude",value:function(){return uu(this.z,this.y)}},{key:"meterInMercatorCoordinateUnits",value:function(){return 1/eu*hu(lu(this.y))}}],[{key:"fromLngLat",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=nu.convert(t);return new e(iu(r.lng),au(r.lat),ou(n,r.lat))}}]),e}();function du(e,t,n,r,i,a,o,s,l){var u=(t+r)/2,c=(n+i)/2,h=new z(u,c);s(h),function(e,t,n,r,i,a){var o=n-i,s=r-a;return Math.abs((r-t)*o-(n-e)*s)/Math.hypot(o,s)}(h.x,h.y,a.x,a.y,o.x,o.y)>=l?(du(e,t,n,u,c,a,h,s,l),du(e,u,c,r,i,h,o,s,l)):e.push(o)}function pu(e,t,n){var r=e[0],i=r.x,a=r.y;t(r);for(var o=[r],s=1;s<e.length;s++){var l=e[s],u=l.x,c=l.y;t(l),du(o,i,a,u,c,r,l,t,n),i=u,a=c,r=l}return o}function mu(e,t,n,r){if(r(t,n)){var i=t.add(n)._mult(.5);mu(e,t,i,r),mu(e,i,n,r)}else e.push(n)}function vu(e,t){for(var n=e[0],r=[n],i=1;i<e.length;i++){var a=e[i];mu(r,n,a,t),n=a}return r}var gu=Math.pow(2,14)-1,yu=-gu-1;function _u(e,t){var n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=$(n,yu,gu),e.y=$(r,yu,gu),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&ie("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function xu(e,t,n){var r=e.loadGeometry(),i=e.extent,a=ws/i;if(t&&n&&n.projection.isReprojectedInTileSpace)for(var o=1<<t.z,s=n.scale,l=n.x,u=n.y,c=n.projection,h=function(e){var n=su((t.x+e.x/i)/o),r=lu((t.y+e.y/i)/o),a=c.project(n,r);e.x=(a.x*s-l)*i,e.y=(a.y*s-u)*i},d=0;d<r.length;d++)if(1!==e.type)r[d]=pu(r[d],h,1);else{var p,m=[],v=f(r[d]);try{for(v.s();!(p=v.n()).done;){var g=p.value;g.x<0||g.x>=i||g.y<0||g.y>=i||(h(g),m.push(g))}}catch(k){v.e(k)}finally{v.f()}r[d]=m}var y,_=f(r);try{for(_.s();!(y=_.n()).done;){var x,b=y.value,w=f(b);try{for(w.s();!(x=w.n()).done;)_u(x.value,a)}catch(k){w.e(k)}finally{w.f()}}}catch(k){_.e(k)}finally{_.f()}return r}function bu(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?xu(e):[]}}function wu(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function ku(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var Eu=function(){function e(t){d(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.projection=t.projection,this.layoutVertexArray=new to,this.indexArray=new yo,this.segments=new bs,this.programConfigurations=new hs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,n,r){var i=this.layers[0],a=[],o=null;"circle"===i.type&&(o=i.layout.get("circle-sort-key"));var s,l=f(e);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.feature,h=u.id,d=u.index,p=u.sourceLayerIndex,m=this.layers[0]._featureFilter.needGeometry,v=bu(c,m);if(this.layers[0]._featureFilter.filter(new Oa(this.zoom),v,n)){var g=o?o.evaluate(v,{},n):void 0,y={id:h,properties:c.properties,type:c.type,sourceLayerIndex:p,index:d,geometry:m?v.geometry:xu(c,n,r),patterns:{},sortKey:g};a.push(y)}}}catch(C){l.e(C)}finally{l.f()}o&&a.sort((function(e,t){return e.sortKey-t.sortKey}));var _=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new lo,_=r.projection);for(var x=0,b=a;x<b.length;x++){var w=b[x],k=w.geometry,E=w.index,S=w.sourceLayerIndex,T=e[E].feature;this.addFeature(w,k,E,t.availableImages,n,_),t.featureIndex.insert(T,k,E,S,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_s.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,xs.members))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a){var o,s=f(t);try{for(s.s();!(o=s.n()).done;){var l,u=o.value,c=f(u);try{for(c.s();!(l=c.n()).done;){var h=l.value,d=h.x,p=h.y;if(!(d<0||d>=ws||p<0||p>=ws)){if(a){var m=a.projectTilePoint(d,p,i),v=a.upVector(i,d,p),g=this.globeExtVertexArray;ku(g,m,v),ku(g,m,v),ku(g,m,v),ku(g,m,v)}var y=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),_=y.vertexLength;wu(this.layoutVertexArray,d,p,-1,-1),wu(this.layoutVertexArray,d,p,1,-1),wu(this.layoutVertexArray,d,p,1,1),wu(this.layoutVertexArray,d,p,-1,1),this.indexArray.emplaceBack(_,_+1,_+2),this.indexArray.emplaceBack(_,_+2,_+3),y.vertexLength+=4,y.primitiveLength+=2}}}catch(x){c.e(x)}finally{c.f()}}}catch(x){s.e(x)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}]),e}();function Su(e,t){for(var n=0;n<e.length;n++)if(Du(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(Du(e,t[r]))return!0;return!!Au(e,t)}function Tu(e,t,n){return!!Du(e,t)||!!Iu(t,e,n)}function Cu(e,t){if(1===e.length)return Lu(t,e[0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(Du(e,r[i]))return!0;for(var a=0;a<e.length;a++)if(Lu(t,e[a]))return!0;for(var o=0;o<t.length;o++)if(Au(e,t[o]))return!0;return!1}function Mu(e,t,n){if(e.length>1){if(Au(e,t))return!0;for(var r=0;r<t.length;r++)if(Iu(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(Iu(e[i],t,n))return!0;return!1}function Au(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++)if(Pu(r,i,t[a],t[a+1]))return!0;return!1}function Pu(e,t,n,r){return ae(e,n,r)!==ae(t,n,r)&&ae(e,t,n)!==ae(e,t,r)}function Iu(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(zu(e,t[i-1],t[i])<r)return!0;return!1}function zu(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Lu(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++)for(var s=0,l=(n=e[o]).length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a);return a}function Du(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function Ru(e,t,n,r,i){var a,o=f(e);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(t<=s.x&&n<=s.y&&r>=s.x&&i>=s.y)return!0}}catch(d){o.e(d)}finally{o.f()}var l=[new z(t,n),new z(t,i),new z(r,i),new z(r,n)];if(e.length>2){var u,c=f(l);try{for(c.s();!(u=c.n()).done;)if(Du(e,u.value))return!0}catch(d){c.e(d)}finally{c.f()}}for(var h=0;h<e.length-1;h++)if(Ou(e[h],e[h+1],l))return!0;return!1}function Ou(e,t,n){var r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;var a=ae(e,t,n[0]);return a!==ae(e,t,n[1])||a!==ae(e,t,n[2])||a!==ae(e,t,n[3])}function ju(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Nu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Bu(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=z.convert(t)._mult(i);"viewport"===n&&a._rotate(-r);for(var o=[],s=0;s<e.length;s++)o.push(e[s].sub(a));return o}function Fu(e,t,n,r){var i=z.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}ua(Eu,"CircleBucket",{omit:["layers"]});var $u=new Ga({"circle-sort-key":new Wa(pt.layout_circle["circle-sort-key"])}),Vu={paint:new Ga({"circle-radius":new Wa(pt.paint_circle["circle-radius"]),"circle-color":new Wa(pt.paint_circle["circle-color"]),"circle-blur":new Wa(pt.paint_circle["circle-blur"]),"circle-opacity":new Wa(pt.paint_circle["circle-opacity"]),"circle-translate":new Ha(pt.paint_circle["circle-translate"]),"circle-translate-anchor":new Ha(pt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ha(pt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ha(pt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Wa(pt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Wa(pt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Wa(pt.paint_circle["circle-stroke-opacity"])}),layout:$u};function Uu(e,t,n,r,i,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);var u,c=e.tileID.canonical,h=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile,d=f(t);try{for(d.s();!(u=d.n()).done;){var p,m=u.value,v=f(m);try{var g=function(){var t=p.value,u=t.add(s),f=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(u.x,u.y,!0):0,d=n.projection.projectTilePoint(u.x,u.y,c);if(f>0){var m=n.projection.upVector(c,u.x,u.y);d.x+=m[0]*h*f,d.y+=m[1]*h*f,d.z+=m[2]*h*f}var v=a?u:Zu(d.x,d.y,d.z,r),g=a?e.tilespaceRays.map((function(e){return qu(e,f)})):e.queryGeometry.screenGeometry,y=ol([],[d.x,d.y,d.z,1],r);if(!o&&a?l*=y[3]/n.cameraToCenterDistance:o&&!a&&(l*=n.cameraToCenterDistance/y[3]),a){var _=lu((t.y/ws+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(_,1)/ou(1,_)}if(Tu(g,v,l))return{v:!0}};for(v.s();!(p=v.n()).done;){var y=g();if("object"===typeof y)return y.v}}catch(_){v.e(_)}finally{v.f()}}}catch(_){d.e(_)}finally{d.f()}return!1}function Zu(e,t,n,r){var i=ol([],[e,t,n,1],r);return new z(i[0]/i[3],i[1]/i[3])}var Hu=$s(0,0,0),Wu=$s(0,0,1);function qu(e,t){var n=Ns();return Hu[2]=t,e.intersectsPlane(Hu,Wu,n),new z(n[0],n[1])}var Gu=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(Eu);function Xu(e,t,n,r){var i=t.width,a=t.height;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function Ku(e,t,n){var r=t.width,i=t.height;r===e.width&&i===e.height||(Yu(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Yu(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((n.y+l)*e.width+n.x)*a,c=((r.y+l)*t.width+r.x)*a,h=0;h<i.width*a;h++)s[c+h]=o[u+h];return t}ua(Gu,"HeatmapBucket",{omit:["layers"]});var Ju=function(){function e(t,n){d(this,e),Xu(this,t,1,n)}return p(e,[{key:"resize",value:function(t){Ku(this,new e(t),1)}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){Yu(e,t,n,r,i,1)}}]),e}(),Qu=function(){function e(t,n){d(this,e),Xu(this,t,4,n)}return p(e,[{key:"resize",value:function(t){Ku(this,new e(t),4)}},{key:"replace",value:function(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}},{key:"clone",value:function(){return new e({width:this.width,height:this.height},new Uint8Array(this.data))}}],[{key:"copy",value:function(e,t,n,r,i){Yu(e,t,n,r,i,4)}}]),e}();ua(Ju,"AlphaImage"),ua(Qu,"RGBAImage");var ec={paint:new Ga({"heatmap-radius":new Wa(pt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Wa(pt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ha(pt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new qa(pt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ha(pt.paint_heatmap["heatmap-opacity"])})};function tc(e){var t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Qu({width:n,height:r}),a=function(n,r,a){t[e.evaluationKey]=a;var o=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*o.r/o.a),i.data[n+r+1]=Math.floor(255*o.g/o.a),i.data[n+r+2]=Math.floor(255*o.b/o.a),i.data[n+r+3]=Math.floor(255*o.a)};if(e.clips)for(var o=0,s=0;o<r;++o,s+=4*n)for(var l=0,u=0;l<n;l++,u+=4){var c=l/(n-1),h=e.clips[o];a(s,u,h.start*(1-c)+h.end*c)}else for(var f=0,d=0;f<n;f++,d+=4)a(0,d,f/(n-1));return i}var nc={paint:new Ga({"hillshade-illumination-direction":new Ha(pt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ha(pt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ha(pt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ha(pt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ha(pt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ha(pt.paint_hillshade["hillshade-accent-color"])})},rc=Qa([{name:"a_pos",components:2,type:"Int16"}],4).members,ic={exports:{}};function ac(e,t,n){n=n||2;var r,i,a,o,s,l,u,c=t&&t.length,h=c?t[0]*n:e.length,f=oc(e,0,h,n,!0),d=[];if(!f||f.next===f.prev)return d;if(c&&(f=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=oc(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(gc(o));for(s.sort(dc),i=0;i<s.length;i++)n=pc(s[i],n);return n}(e,t,f,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<h;p+=n)(s=e[p])<r&&(r=s),(l=e[p+1])<i&&(i=l),s>a&&(a=s),l>o&&(o=l);u=0!==(u=Math.max(a-r,o-i))?32767/u:0}return lc(f,d,n,r,i,u,0),d}function oc(e,t,n,r,i){var a,o;if(i===Pc(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Cc(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Cc(a,e[a],e[a+1],o);return o&&bc(o,o.next)&&(Mc(o),o=o.next),o}function sc(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!bc(r,r.next)&&0!==xc(r.prev,r,r.next))r=r.next;else{if(Mc(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function lc(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=vc(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?cc(e,r,i,a):uc(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Mc(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?lc(e=hc(sc(e),t,n),t,n,r,i,a,2):2===o&&fc(e,t,n,r,i,a):lc(sc(e),t,n,r,i,a,1);break}}}function uc(e){var t=e.prev,n=e,r=e.next;if(xc(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,f=i>a?i>o?i:o:a>o?a:o,d=s>l?s>u?s:u:l>u?l:u,p=r.next;p!==t;){if(p.x>=c&&p.x<=f&&p.y>=h&&p.y<=d&&yc(i,s,a,l,o,u,p.x,p.y)&&xc(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function cc(e,t,n,r){var i=e.prev,a=e,o=e.next;if(xc(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,f=o.y,d=s<l?s<u?s:u:l<u?l:u,p=c<h?c<f?c:f:h<f?h:f,m=s>l?s>u?s:u:l>u?l:u,v=c>h?c>f?c:f:h>f?h:f,g=vc(d,p,t,n,r),y=vc(m,v,t,n,r),_=e.prevZ,x=e.nextZ;_&&_.z>=g&&x&&x.z<=y;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&yc(s,c,l,h,u,f,_.x,_.y)&&xc(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&yc(s,c,l,h,u,f,x.x,x.y)&&xc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=m&&_.y>=p&&_.y<=v&&_!==i&&_!==o&&yc(s,c,l,h,u,f,_.x,_.y)&&xc(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;x&&x.z<=y;){if(x.x>=d&&x.x<=m&&x.y>=p&&x.y<=v&&x!==i&&x!==o&&yc(s,c,l,h,u,f,x.x,x.y)&&xc(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function hc(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!bc(i,a)&&wc(i,r,r.next,a)&&Sc(i,a)&&Sc(a,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(a.i/n|0),Mc(r),Mc(r.next),r=e=a),r=r.next}while(r!==e);return sc(r)}function fc(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&_c(o,s)){var l=Tc(o,s);return o=sc(o,o.next),l=sc(l,l.next),lc(o,t,n,r,i,a,0),void lc(l,t,n,r,i,a,0)}s=s.next}o=o.next}while(o!==e)}function dc(e,t){return e.x-t.x}function pc(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&yc(a<h?i:o,a,c,h,a<h?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),Sc(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&mc(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=Tc(n,e);return sc(r,r.next),sc(n,n.next)}function mc(e,t){return xc(e.prev,e,t.prev)<0&&xc(t.next,e,e.next)<0}function vc(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function gc(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function yc(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function _c(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&wc(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Sc(e,t)&&Sc(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(xc(e.prev,e,t.prev)||xc(e,t.prev,t))||bc(e,t)&&xc(e.prev,e,e.next)>0&&xc(t.prev,t,t.next)>0)}function xc(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function bc(e,t){return e.x===t.x&&e.y===t.y}function wc(e,t,n,r){var i=Ec(xc(e,t,n)),a=Ec(xc(e,t,r)),o=Ec(xc(n,r,e)),s=Ec(xc(n,r,t));return i!==a&&o!==s||!(0!==i||!kc(e,n,t))||!(0!==a||!kc(e,r,t))||!(0!==o||!kc(n,e,r))||!(0!==s||!kc(n,t,r))}function kc(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ec(e){return e>0?1:e<0?-1:0}function Sc(e,t){return xc(e.prev,e,e.next)<0?xc(e,t,e.next)>=0&&xc(e,e.prev,t)>=0:xc(e,t,e.prev)<0||xc(e,e.next,t)<0}function Tc(e,t){var n=new Ac(e.i,e.x,e.y),r=new Ac(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Cc(e,t,n,r){var i=new Ac(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Mc(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Ac(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Pc(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}ic.exports=ac,ic.exports.default=ac,ac.deviation=function(e,t,n,r){var i=t&&t.length,a=Math.abs(Pc(e,0,i?t[0]*n:e.length,n));if(i)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Pc(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var l=0;for(o=0;o<r.length;o+=3){var u=r[o]*n,c=r[o+1]*n,h=r[o+2]*n;l+=Math.abs((e[u]-e[h])*(e[c+1]-e[u+1])-(e[u]-e[c])*(e[h+1]-e[u+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},ac.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&n.holes.push(r+=e[i-1].length)}return n};var Ic=T(ic.exports);function zc(e,t,n,r,i){Lc(e,t,n||0,r||e.length-1,i||Rc)}function Lc(e,t,n,r,i){for(;r>n;){if(r-n>600){var a=r-n+1,o=t-n+1,s=Math.log(a),l=.5*Math.exp(2*s/3),u=.5*Math.sqrt(s*l*(a-l)/a)*(o-a/2<0?-1:1);Lc(e,t,Math.max(n,Math.floor(t-o*l/a+u)),Math.min(r,Math.floor(t+(a-o)*l/a+u)),i)}var c=e[t],h=n,f=r;for(Dc(e,n,t),i(e[r],c)>0&&Dc(e,n,r);h<f;){for(Dc(e,h,f),h++,f--;i(e[h],c)<0;)h++;for(;i(e[f],c)>0;)f--}0===i(e[n],c)?Dc(e,n,f):Dc(e,++f,r),f<=t&&(n=f+1),t<=f&&(r=f-1)}}function Dc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Rc(e,t){return e<t?-1:e>t?1:0}function Oc(e,t){var n=e.length;if(n<=1)return[e];for(var r,i,a=[],o=0;o<n;o++){var s=oe(e[o]);0!==s&&(e[o].area=Math.abs(s),void 0===i&&(i=s<0),i===s<0?(r&&a.push(r),r=[e[o]]):r.push(e[o]))}if(r&&a.push(r),t>1)for(var l=0;l<a.length;l++)a[l].length<=t||(zc(a[l],t,1,a[l].length-1,jc),a[l]=a[l].slice(0,t));return a}function jc(e,t){return t.area-e.area}function Nc(e,t,n){var r,i=n.patternDependencies,a=!1,o=f(t);try{for(o.s();!(r=o.n()).done;){var s=r.value.paint.get("".concat(e,"-pattern"));s.isConstant()||(a=!0);var l=s.constantOr(null);l&&(a=!0,i[l]=!0)}}catch(u){o.e(u)}finally{o.f()}return a}function Bc(e,t,n,r,i){var a,o=i.patternDependencies,s=f(t);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.paint.get("".concat(e,"-pattern")).value;if("constant"!==u.kind){var c=u.evaluate({zoom:r},n,{},i.availableImages);o[c=c&&c.name?c.name:c]=!0,n.patterns[l.id]=c}}}catch(h){s.e(h)}finally{s.f()}return n}var Fc=function(){function e(t){d(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new to,this.indexArray=new yo,this.indexArray2=new Eo,this.programConfigurations=new hs(t.layers,t.zoom),this.segments=new bs,this.segments2=new bs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.projection=t.projection}return p(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Nc("fill",this.layers,t);var i,a=this.layers[0].layout.get("fill-sort-key"),o=[],s=f(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,d=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=bu(u,p);if(this.layers[0]._featureFilter.filter(new Oa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n,t.availableImages):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:h,geometry:p?m.geometry:xu(u,n,r),patterns:{},sortKey:v};o.push(g)}}}catch(S){s.e(S)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=0,_=o;y<_.length;y++){var x=_[y],b=x.geometry,w=x.index,k=x.sourceLayerIndex;if(this.hasPattern){var E=Bc("fill",this.layers,x,this.zoom,t);this.patternFeatures.push(E)}else this.addFeature(x,b,w,n,{},t.availableImages);t.featureIndex.insert(e[w].feature,b,w,k,this.index)}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,rc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}},{key:"addFeature",value:function(e,t,n,r,i){var a,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],s=f(Oc(t,500));try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=0,h=f(u);try{for(h.s();!(l=h.n()).done;)c+=l.value.length}catch(S){h.e(S)}finally{h.f()}var d,p=this.segments.prepareSegment(c,this.layoutVertexArray,this.indexArray),m=p.vertexLength,v=[],g=[],y=f(u);try{for(y.s();!(d=y.n()).done;){var _=d.value;if(0!==_.length){_!==u[0]&&g.push(v.length/2);var x=this.segments2.prepareSegment(_.length,this.layoutVertexArray,this.indexArray2),b=x.vertexLength;this.layoutVertexArray.emplaceBack(_[0].x,_[0].y),this.indexArray2.emplaceBack(b+_.length-1,b),v.push(_[0].x),v.push(_[0].y);for(var w=1;w<_.length;w++)this.layoutVertexArray.emplaceBack(_[w].x,_[w].y),this.indexArray2.emplaceBack(b+w-1,b+w),v.push(_[w].x),v.push(_[w].y);x.vertexLength+=_.length,x.primitiveLength+=_.length}}}catch(S){y.e(S)}finally{y.f()}for(var k=Ic(v,g),E=0;E<k.length;E+=3)this.indexArray.emplaceBack(m+k[E],m+k[E+1],m+k[E+2]);p.vertexLength+=c,p.primitiveLength+=k.length/3}}catch(S){s.e(S)}finally{s.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}]),e}();ua(Fc,"FillBucket",{omit:["layers","patternFeatures"]});var $c=new Ga({"fill-sort-key":new Wa(pt.layout_fill["fill-sort-key"])}),Vc={paint:new Ga({"fill-antialias":new Ha(pt.paint_fill["fill-antialias"]),"fill-opacity":new Wa(pt.paint_fill["fill-opacity"]),"fill-color":new Wa(pt.paint_fill["fill-color"]),"fill-outline-color":new Wa(pt.paint_fill["fill-outline-color"]),"fill-translate":new Ha(pt.paint_fill["fill-translate"]),"fill-translate-anchor":new Ha(pt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Wa(pt.paint_fill["fill-pattern"])}),layout:$c},Uc=Qa([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Zc=Qa([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Hc=Qa([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),Wc=Uc.members,qc={},Gc=P,Xc=Kc;function Kc(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Yc,this,t)}function Yc(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function Jc(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)r+=((n=e[o]).x-(t=e[i]).x)*(t.y+n.y);return r}Kc.types=["Unknown","Point","LineString","Polygon"],Kc.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(i<=0){var l=e.readVarint();r=7&l,i=l>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new Gc(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Kc.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<o&&(o=i),i>s&&(s=i),(a+=e.readSVarint())<l&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},Kc.prototype.toGeoJSON=function(e,t,n){var r,i,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),u=Kc.types[this.type];function c(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var h=[];for(r=0;r<l.length;r++)h[r]=l[r][0];c(l=h);break;case 2:for(r=0;r<l.length;r++)c(l[r]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=Jc(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}(l),r=0;r<l.length;r++)for(i=0;i<l[r].length;i++)c(l[r][i])}1===l.length?l=l[0]:u="Multi"+u;var f={type:"Feature",geometry:{type:u,coordinates:l},properties:this.properties};return"id"in this&&(f.id=this.id),f};var Qc=Xc,eh=th;function th(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nh,this,t),this.length=this._features.length}function nh(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}th.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Qc(this._pbf,t,this.extent,this._keys,this._values)};var rh=eh;function ih(e,t,n){if(3===e){var r=new rh(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var ah=qc.VectorTile=function(e,t){this.layers=e.readFields(ih,{},t)},oh=qc.VectorTileFeature=Xc;function sh(e,t,n,r){var i,a=[],o=0===r?function(e,t,n,r,i,a){e.push(new z(a,n+(a-t)/(r-t)*(i-n)))}:function(e,t,n,r,i,a){e.push(new z(t+(a-n)/(i-n)*(r-t),a))},s=f(e);try{for(s.s();!(i=s.n()).done;){var l,u=i.value,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;if(!(d.length<=2)){for(var p=[],m=0;m<d.length-1;m++){var v=d[m].x,g=d[m].y,y=d[m+1].x,_=d[m+1].y,x=0===r?v:g,b=0===r?y:_;x<t?b>t&&o(p,v,g,y,_,t):x>n?b<n&&o(p,v,g,y,_,n):p.push(d[m]),b<t&&x>=t&&o(p,v,g,y,_,t),b>n&&x<=n&&o(p,v,g,y,_,n)}var w=d[d.length-1],k=0===r?w.x:w.y;k>=t&&k<=n&&p.push(w),p.length&&(w=p[p.length-1],p[0].x===w.x&&p[0].y===w.y||p.push(p[0]),c.push(p))}}}catch(E){h.e(E)}finally{h.f()}c.length&&a.push(c)}}catch(E){s.e(E)}finally{s.f()}return a}qc.VectorTileLayer=eh;var lh=oh.types,uh=Math.pow(2,13);function ch(e,t,n,r,i,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(r*uh)<<1)+i,Math.round(s))}function hh(e,t,n){var r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}var fh=function(){function e(){d(this,e),this.acc=new z(0,0),this.polyCount=[]}return p(e,[{key:"startRing",value:function(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new z(e.x,e.y),this.max=new z(e.x,e.y))}},{key:"append",value:function(e,t){this.currentPolyCount.edges++,this.acc._add(e);var n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===ws)&&e.x===t.x)!=((0===e.y||e.y===ws)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Wn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>ws!=e.x>ws&&this.addBorderIntersection(1,Wn(t.y,e.y,(ws-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Wn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>ws!=e.y>ws&&this.addBorderIntersection(3,Wn(t.x,e.x,(ws-t.y)/(e.y-t.y)))}},{key:"addBorderIntersection",value:function(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);var n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}},{key:"processBorderOverlap",value:function(e,t){if(e.x===t.x){if(e.y===t.y)return;var n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{var r=0===e.y?2:3;this.addBorderIntersection(r,t.x),this.addBorderIntersection(r,e.x)}}},{key:"centroid",value:function(){var e=this.polyCount.reduce((function(e,t){return e+t.edges}),0);return 0!==e?this.acc.div(e)._round():new z(0,0)}},{key:"span",value:function(){return new z(this.max.x-this.min.x,this.max.y-this.min.y)}},{key:"intersectsCount",value:function(){return this.borders.reduce((function(e,t){return e+ +(t[0]!==Number.MAX_VALUE)}),0)}}]),e}(),dh=function(){function e(t){d(this,e),this.zoom=t.zoom,this.canonical=t.canonical,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=t.projection,this.layoutVertexArray=new ro,this.centroidVertexArray=new jo,this.indexArray=new yo,this.programConfigurations=new hs(t.layers,t.zoom),this.segments=new bs,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.enableTerrain=t.enableTerrain}return p(e,[{key:"populate",value:function(e,t,n,r){this.features=[],this.hasPattern=Nc("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){var t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/ws/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;var i,a=f(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.feature,l=o.id,u=o.index,c=o.sourceLayerIndex,h=this.layers[0]._featureFilter.needGeometry,d=bu(s,h);if(this.layers[0]._featureFilter.filter(new Oa(this.zoom),d,n)){var p={id:l,sourceLayerIndex:c,index:u,geometry:h?d.geometry:xu(s,n,r),properties:s.properties,type:s.type,patterns:{}},m=this.layoutVertexArray.length;this.hasPattern?this.features.push(Bc("fill-extrusion",this.layers,p,this.zoom,t)):this.addFeature(p,p.geometry,u,n,{},t.availableImages,r),t.featureIndex.insert(s,p.geometry,u,c,this.index,m)}}}catch(v){a.e(v)}finally{a.f()}this.sortBorders()}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.features);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=s.geometry;this.addFeature(s,l,s.index,t,n,r,i)}}catch(u){o.e(u)}finally{o.f()}this.sortBorders()}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Wc),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Hc.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"uploadCentroid",value:function(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Zc.members,!0),this.needsCentroidUpdate=!1)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"addFeature",value:function(e,t,n,r,i,a,o){var s=[new z(0,0),new z(ws,ws)],l=o.projection,u="globe"===l.name,c=this.enableTerrain&&!u?new fh:null,h="Polygon"===lh[e.type];u&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new lo);for(var d,p,m=Oc(t,500),v=m.length-1;v>=0;v--){var g=m[v];(0===g.length||(d=g[0]).every((function(e){return e.x<=0}))||d.every((function(e){return e.x>=ws}))||d.every((function(e){return e.y<=0}))||d.every((function(e){return e.y>=ws})))&&m.splice(v,1)}if(u)p=bh(m,s,r);else{p=[];var y,_=f(m);try{for(_.s();!(y=_.n()).done;){var x=y.value;p.push({polygon:x,bounds:s})}}catch(Pe){_.e(Pe)}finally{_.f()}}var b,w=h?this.edgeRadius:0,k=f(p);try{for(k.s();!(b=k.n()).done;){var E,S=b.value,T=S.polygon,C=S.bounds,M=0,A=0,P=f(T);try{for(P.s();!(E=P.n()).done;){var I=E.value;h&&!I[0].equals(I[I.length-1])&&I.push(I[0]),A+=h?I.length-1:I.length}}catch(Pe){P.e(Pe)}finally{P.f()}var L=this.segments.prepareSegment((h?5:4)*A,this.layoutVertexArray,this.indexArray);if(h){var D=[],R=[];M=L.vertexLength;var O,j=f(T);try{for(j.s();!(O=j.n()).done;){var N=O.value,B=void 0,F=void 0;N.length&&N!==T[0]&&R.push(D.length/2),B=N[1].sub(N[0])._perp()._unit();for(var $=1;$<N.length;$++){var V=N[$],U=N[$===N.length-1?1:$+1],Z=V.x,H=V.y;if(w){F=U.sub(V)._perp()._unit();var W=B.add(F)._unit(),q=w*Math.min(4,1/(B.x*W.x+B.y*W.y));Z+=q*W.x,H+=q*W.y,B=F}ch(this.layoutVertexArray,Z,H,0,0,1,1,0),L.vertexLength++,D.push(V.x,V.y),u&&hh(this.layoutVertexExtArray,l.projectTilePoint(Z,H,r),l.upVector(r,Z,H))}}}catch(Pe){j.e(Pe)}finally{j.f()}for(var G=Ic(D,R),X=0;X<G.length;X+=3)this.indexArray.emplaceBack(M+G[X],M+G[X+2],M+G[X+1]),L.primitiveLength++}var K,Y=f(T);try{for(Y.s();!(K=Y.n()).done;){var J=K.value;c&&J.length&&c.startRing(J[0]);var Q=void 0,ee=void 0,te=void 0,ne=J.length>4&&yh(J[J.length-2],J[0],J[1]),re=w?mh(J[J.length-2],J[0],J[1],w):0;ee=J[1].sub(J[0])._perp()._unit();for(var ie=!0,ae=1,oe=0;ae<J.length;ae++){var se=J[ae-1],le=J[ae],ue=J[ae===J.length-1?1:ae+1];if(c&&h&&c.currentPolyCount.top++,gh(le,se,C))w&&(ee=ue.sub(le)._perp()._unit(),ie=!ie);else{c&&c.append(le,se);var ce=le.sub(se)._perp(),he=ce.x/(Math.abs(ce.x)+Math.abs(ce.y)),fe=ce.y>0?1:0,de=se.dist(le);if(oe+de>32768&&(oe=0),w){te=ue.sub(le)._perp()._unit();var pe=vh(se,le,ue,ph(ee,te),w);isNaN(pe)&&(pe=0);var me=le.sub(se)._unit();se=se.add(me.mult(re))._round(),le=le.add(me.mult(-pe))._round(),re=pe,ee=te}var ve=L.vertexLength,ge=J.length>4&&yh(se,le,ue),ye=_h(oe,ne,ie);if(ch(this.layoutVertexArray,se.x,se.y,he,fe,0,0,ye),ch(this.layoutVertexArray,se.x,se.y,he,fe,0,1,ye),ye=_h(oe+=de,ge,!ie),ne=ge,ch(this.layoutVertexArray,le.x,le.y,he,fe,0,0,ye),ch(this.layoutVertexArray,le.x,le.y,he,fe,0,1,ye),L.vertexLength+=4,this.indexArray.emplaceBack(ve+0,ve+1,ve+2),this.indexArray.emplaceBack(ve+1,ve+3,ve+2),L.primitiveLength+=2,w){var _e=M+(1===ae?J.length-2:ae-2),xe=1===ae?M:_e+1;if(this.indexArray.emplaceBack(ve+1,_e,ve+3),this.indexArray.emplaceBack(_e,xe,ve+3),L.primitiveLength+=2,void 0===Q&&(Q=ve),!gh(ue,J[ae],C)){var be=ae===J.length-1?Q:L.vertexLength;this.indexArray.emplaceBack(ve+2,ve+3,be),this.indexArray.emplaceBack(ve+3,be+1,be),this.indexArray.emplaceBack(ve+3,xe,be+1),L.primitiveLength+=3}ie=!ie}if(u){var we=this.layoutVertexExtArray,ke=l.projectTilePoint(se.x,se.y,r),Ee=l.projectTilePoint(le.x,le.y,r),Se=l.upVector(r,se.x,se.y),Te=l.upVector(r,le.x,le.y);hh(we,ke,Se),hh(we,ke,Se),hh(we,Ee,Te),hh(we,Ee,Te)}}}h&&(M+=J.length-1)}}catch(Pe){Y.e(Pe)}finally{Y.f()}}}catch(Pe){k.e(Pe)}finally{k.f()}if(c&&c.polyCount.length>0){if(c.borders){c.vertexArrayOffset=this.centroidVertexArray.length;for(var Ce=c.borders,Me=this.featuresOnBorder.push(c)-1,Ae=0;Ae<4;Ae++)Ce[Ae][0]!==Number.MAX_VALUE&&this.borders[Ae].push(Me)}this.encodeCentroid(c.borders?void 0:c.centroid(),c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"sortBorders",value:function(){for(var e=this,t=function(t){e.borders[t].sort((function(n,r){return e.featuresOnBorder[n].borders[t][0]-e.featuresOnBorder[r].borders[t][0]}))},n=0;n<4;n++)t(n)}},{key:"encodeCentroid",value:function(e,t){var n,r,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e)if(0!==e.y){var a=t.span()._mult(this.tileToMeter);n=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(a.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(a.y/10))}else n=Math.ceil(7*(e.x+450)),r=0;else n=0,r=+i;var o,s=i?this.centroidVertexArray.length:t.vertexArrayOffset,l=f(t.polyCount);try{for(l.s();!(o=l.n()).done;){var u=o.value;i&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*u.edges+u.top);for(var c=0;c<u.top;c++)this.centroidVertexArray.emplace(s++,n,r);for(var h=0;h<2*u.edges;h++)this.centroidVertexArray.emplace(s++,0,r),this.centroidVertexArray.emplace(s++,n,r)}}catch(d){l.e(d)}finally{l.f()}}}]),e}();function ph(e,t){var n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function mh(e,t,n,r){var i=t.sub(e)._perp()._unit(),a=n.sub(t)._perp()._unit();return vh(e,t,n,ph(i,a),r)}function vh(e,t,n,r,i){var a=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*a/r)}function gh(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function yh(e,t,n){if(e.x<0||e.x>=ws||t.x<0||t.x>=ws||n.x<0||n.x>=ws)return!1;var r=n.sub(t),i=r.perp(),a=e.sub(t);return(r.x*a.x+r.y*a.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(a.x*a.x+a.y*a.y))>-.866&&i.x*a.x+i.y*a.y<0}function _h(e,t,n){var r=t?2|e:-3&e;return n?1|r:-2&r}function xh(){var e=Math.PI/32,t=Math.tan(e),n=Ql;return n*Math.sqrt(1+2*t*t)-n}function bh(e,t,n){var r=1<<n.z,i=su(n.x/r),a=su((n.x+1)/r),o=lu(n.y/r),s=lu((n.y+1)/r);return function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5?arguments[5]:void 0,o=[];if(!e.length||!n||!r)return o;for(var s=function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;o.push({polygon:i,bounds:t})}}catch(a){r.e(a)}finally{r.f()}},l=Math.ceil(Math.log2(n)),u=Math.ceil(Math.log2(r)),c=l-u,h=[],d=0;d<Math.abs(c);d++)h.push(c>0?0:1);for(var p=0;p<Math.min(l,u);p++)h.push(0),h.push(1);var m=e;if(m=sh(m,t[0].y-i,t[1].y+i,1),!(m=sh(m,t[0].x-i,t[1].x+i,0)).length)return o;var v=[];for(h.length?v.push({polygons:m,bounds:t,depth:0}):s(m,t);v.length;){var g=v.pop(),y=g.depth,_=h[y],x=g.bounds[0],b=g.bounds[1],w=0===_?x.x:x.y,k=0===_?b.x:b.y,E=a?a(_,w,k):.5*(w+k),S=sh(g.polygons,w-i,E+i,_),T=sh(g.polygons,E-i,k+i,_);if(S.length){var C=[x,new z(0===_?E:b.x,1===_?E:b.y)];h.length>y+1?v.push({polygons:S,bounds:C,depth:y+1}):s(S,C)}if(T.length){var M=[new z(0===_?E:x.x,1===_?E:x.y),b];h.length>y+1?v.push({polygons:T,bounds:M,depth:y+1}):s(T,M)}}return o}(e,t,Math.ceil((a-i)/11.25),Math.ceil((o-s)/11.25),1,(function(e,t,i){if(0===e)return.5*(t+i);var a=lu((n.y+t/ws)/r);return(au(.5*(lu((n.y+i/ws)/r)+a))*r-n.y)*ws}))}ua(dh,"FillExtrusionBucket",{omit:["layers","features"]}),ua(fh,"PartMetadata");var wh=new Ga({"fill-extrusion-edge-radius":new Ha(pt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])}),kh={paint:new Ga({"fill-extrusion-opacity":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Wa(pt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Wa(pt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Wa(pt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Wa(pt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new Ha(pt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:wh};function Eh(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}var Sh=function(){function e(t,n,r){d(this,e),this.z=t,this.x=n,this.y=r,this.key=Mh(0,t,t,n,r)}return p(e,[{key:"equals",value:function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}},{key:"url",value:function(e,t){var n=function(e,t,n){var r=Eh(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Eh(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){for(var r,i="",a=e;a>0;a--)i+=(t&(r=1<<a-1)?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}},{key:"toString",value:function(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}]),e}(),Th=p((function e(t,n){d(this,e),this.wrap=t,this.canonical=n,this.key=Mh(t,n.z,n.z,n.x,n.y)})),Ch=function(){function e(t,n,r,i,a){d(this,e),this.overscaledZ=t,this.wrap=n,this.canonical=new Sh(r,+i,+a),this.key=0===n&&t===r?this.canonical.key:Mh(n,t,r,i,a)}return p(e,[{key:"equals",value:function(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}},{key:"scaledTo",value:function(t){var n=this.canonical.z-t;return t>this.canonical.z?new e(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new e(t,this.wrap,t,this.canonical.x>>n,this.canonical.y>>n)}},{key:"calculateScaledKey",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Mh(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);var n=this.canonical.z-e;return Mh(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}},{key:"isChildOf",value:function(e){if(e.wrap!==this.wrap)return!1;var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}},{key:"children",value:function(t){if(this.overscaledZ>=t)return[new e(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var n=this.canonical.z+1,r=2*this.canonical.x,i=2*this.canonical.y;return[new e(n,this.wrap,n,r,i),new e(n,this.wrap,n,r+1,i),new e(n,this.wrap,n,r,i+1),new e(n,this.wrap,n,r+1,i+1)]}},{key:"isLessThan",value:function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}},{key:"wrapped",value:function(){return new e(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"unwrapTo",value:function(t){return new e(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}},{key:"overscaleFactor",value:function(){return Math.pow(2,this.overscaledZ-this.canonical.z)}},{key:"toUnwrapped",value:function(){return new Th(this.wrap,this.canonical)}},{key:"toString",value:function(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}]),e}();function Mh(e,t,n,r,i){var a=1<<Math.min(n,22),o=a*(i%a)+r%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}ua(Sh,"CanonicalTileID"),ua(Ch,"OverscaledTileID",{omit:["projMatrix"]});var Ah=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r)).z=i,a}return p(n)}(z);function Ph(e,t){return e.x*t.x+e.y*t.y}function Ih(e,t){if(1===e.length){for(var n,r=0,i=t[r++];!n||i.equals(n);)if(!(n=t[r++]))return 1/0;for(;r<t.length;r++){var a=t[r],o=e[0],s=n.sub(i),l=a.sub(i),u=o.sub(i),c=Ph(s,s),h=Ph(s,l),d=Ph(l,l),p=Ph(u,s),m=Ph(u,l),v=c*d-h*h,g=(d*p-h*m)/v,y=(c*m-h*p)/v,_=i.z*(1-g-y)+n.z*g+a.z*y;if(isFinite(_))return _}return 1/0}var x,b=1/0,w=f(t);try{for(w.s();!(x=w.n()).done;){var k=x.value;b=Math.min(b,k.z)}}catch(E){w.e(E)}finally{w.f()}return b}function zh(e,t,n,r,i,a,o,s){var l=o*i.getElevationAt(e,t,!0,!0),u=0!==a[0],c=u?0===a[1]?o*(a[0]/7-450):o*function(e,t,n){var r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),a=10*(t[0]-8*r),o=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),l=e.getMeterToDEM(n),u=Math.floor(.5*(a*l-1)),c=Math.floor(.5*(o*l-1)),h=e.tileCoordToPixel(r,i),f=2*u+1,d=2*c+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,h.x-u,h.y-c,f,d),m=Math.abs(p[0]-p[1]),v=Math.abs(p[2]-p[3]),g=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),y=Math.min(.25,.5*l*(m+v)/f),_=Math.min(.25,.5*l*g/d);return s+Math.max(y*a,_*o)}(i,a,s):l;return{base:l+(0===n)?-1:n,top:u?Math.max(c+r,l+n+2):l+r}}var Lh=Qa([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4).members,Dh=Qa([{name:"a_packed",components:4,type:"Float32"}]).members,Rh=oh.types,Oh=Math.cos(Math.PI/180*37.5),jh=function(){function e(t){var n=this;d(this,e),this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.projection=t.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(e){n.gradients[e.id]={}})),this.layoutVertexArray=new io,this.layoutVertexArray2=new ao,this.indexArray=new yo,this.programConfigurations=new hs(t.layers,t.zoom),this.segments=new bs,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id}))}return p(e,[{key:"populate",value:function(e,t,n,r){this.hasPattern=Nc("line",this.layers,t);var i,a=this.layers[0].layout.get("line-sort-key"),o=[],s=f(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=l.feature,c=l.id,h=l.index,d=l.sourceLayerIndex,p=this.layers[0]._featureFilter.needGeometry,m=bu(u,p);if(this.layers[0]._featureFilter.filter(new Oa(this.zoom),m,n)){var v=a?a.evaluate(m,{},n):void 0,g={id:c,properties:u.properties,type:u.type,sourceLayerIndex:d,index:h,geometry:p?m.geometry:xu(u,n,r),patterns:{},sortKey:v};o.push(g)}}}catch(M){s.e(M)}finally{s.f()}a&&o.sort((function(e,t){return e.sortKey-t.sortKey}));for(var y=t.lineAtlas,_=t.featureIndex,x=this.addConstantDashes(y),b=0,w=o;b<w.length;b++){var k=w[b],E=k.geometry,S=k.index,T=k.sourceLayerIndex;if(x&&this.addFeatureDashes(k,y),this.hasPattern){var C=Bc("line",this.layers,k,this.zoom,t);this.patternFeatures.push(C)}else this.addFeature(k,E,S,n,y.positions,t.availableImages);_.insert(e[S].feature,E,S,T,this.index)}}},{key:"addConstantDashes",value:function(e){var t,n=!1,r=f(this.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.paint.get("line-dasharray").value,o=i.layout.get("line-cap").value;if("constant"!==a.kind||"constant"!==o.kind)n=!0;else{var s=o.value,l=a.value;if(!l)continue;e.addDash(l,s)}}}catch(u){r.e(u)}finally{r.f()}return n}},{key:"addFeatureDashes",value:function(e,t){var n,r=this.zoom,i=f(this.layers);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.paint.get("line-dasharray").value,s=a.layout.get("line-cap").value;if("constant"!==o.kind||"constant"!==s.kind){var l=void 0,u=void 0;if("constant"===o.kind){if(!(l=o.value))continue}else l=o.evaluate({zoom:r},e);u="constant"===s.kind?s.value:s.evaluate({zoom:r},e),t.addDash(l,u),e.patterns[a.id]=t.getKey(l,u)}}}catch(c){i.e(c)}finally{i.f()}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}},{key:"addFeatures",value:function(e,t,n,r,i){var a,o=f(this.patternFeatures);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.addFeature(s,s.geometry,s.index,t,n,r)}}catch(l){o.e(l)}finally{o.f()}}},{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length}},{key:"uploadPending",value:function(){return!this.uploaded||this.programConfigurations.needsUpload}},{key:"upload",value:function(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,Dh)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Lh),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}},{key:"lineFeatureClips",value:function(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}},{key:"addFeature",value:function(e,t,n,r,i,a){var o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),u=o.get("line-miter-limit"),c=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);var h,d=f(t);try{for(d.s();!(h=d.n()).done;){var p=h.value;this.addLine(p,e,s,l,u,c)}}catch(m){d.e(m)}finally{d.f()}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,a,r)}},{key:"addLine",value:function(e,t,n,r,i,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var o=0;o<e.length-1;o++)this.totalDistance+=e[o].dist(e[o+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var s="Polygon"===Rh[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c,h,f,d,p,m=this.overscaling<=16?15*ws/(512*this.overscaling):0,v=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.e1=this.e2=-1,s&&(c=e[l-2],p=e[u].sub(c)._unit()._perp());for(var g=u;g<l;g++)if(!(f=g===l-1?s?e[u+1]:void 0:e[g+1])||!e[g].equals(f)){p&&(d=p),c&&(h=c),c=e[g],p=f?f.sub(c)._unit()._perp():d;var y=(d=d||p).add(p);0===y.x&&0===y.y||y._unit();var _=d.x*p.x+d.y*p.y,x=y.x*p.x+y.y*p.y,b=0!==x?1/x:1/0,w=2*Math.sqrt(2-2*x),k=x<Oh&&h&&f,E=d.x*p.y-d.y*p.x>0;if(k&&g>u){var S=c.dist(h);if(S>2*m){var T=c.sub(c.sub(h)._mult(m/S)._round());this.updateDistance(h,T),this.addCurrentVertex(T,d,0,0,v),h=T}}var C=h&&f,M=C?n:s?"butt":r;if(C&&"round"===M&&(b<a?M="miter":b<=2&&(M="fakeround")),"miter"===M&&b>i&&(M="bevel"),"bevel"===M&&(b>2&&(M="flipbevel"),b<i&&(M="miter")),h&&this.updateDistance(h,c),"miter"===M)y._mult(b),this.addCurrentVertex(c,y,0,0,v);else if("flipbevel"===M){if(b>100)y=p.mult(-1);else{var A=b*d.add(p).mag()/d.sub(p).mag();y._perp()._mult(A*(E?-1:1))}this.addCurrentVertex(c,y,0,0,v),this.addCurrentVertex(c,y.mult(-1),0,0,v)}else if("bevel"===M||"fakeround"===M){var P=-Math.sqrt(b*b-1),I=E?P:0,z=E?0:P;if(h&&this.addCurrentVertex(c,d,I,z,v),"fakeround"===M)for(var L=Math.round(180*w/Math.PI/20),D=1;D<L;D++){var R=D/L;if(.5!==R){var O=R-.5;R+=R*O*(R-1)*((1.0904+_*(_*(3.55645-1.43519*_)-3.2452))*O*O+(.848013+_*(.215638*_-1.06021)))}var j=p.sub(d)._mult(R)._add(d)._unit()._mult(E?-1:1);this.addHalfVertex(c,j.x,j.y,!1,E,0,v)}f&&this.addCurrentVertex(c,p,-I,-z,v)}else if("butt"===M)this.addCurrentVertex(c,y,0,0,v);else if("square"===M){var N=h?1:-1;h||this.addCurrentVertex(c,y,N,N,v),this.addCurrentVertex(c,y,0,0,v),h&&this.addCurrentVertex(c,y,N,N,v)}else"round"===M&&(h&&(this.addCurrentVertex(c,d,0,0,v),this.addCurrentVertex(c,d,1,1,v,!0)),f&&(this.addCurrentVertex(c,p,-1,-1,v,!0),this.addCurrentVertex(c,p,0,0,v)));if(k&&g<l-1){var B=c.dist(f);if(B>2*m){var F=c.add(f.sub(c)._mult(m/B)._round());this.updateDistance(c,F),this.addCurrentVertex(F,p,0,0,v),c=F}}}}}},{key:"addCurrentVertex",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,i),this.addHalfVertex(e,o,s,a,!0,-r,i)}},{key:"addHalfVertex",value:function(e,t,n,r,i,a,o){var s=e.x,l=e.y;this.layoutVertexArray.emplaceBack((s<<1)+(r?1:0),(l<<1)+(i?1:0),Math.round(63*t)+128,Math.round(63*n)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);var u=o.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),o.primitiveLength++),i?this.e2=u:this.e1=u}},{key:"updateScaledDistance",value:function(){if(this.lineClips){var e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}},{key:"updateDistance",value:function(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}]),e}();ua(jh,"LineBucket",{omit:["layers","patternFeatures"]});var Nh=new Ga({"line-cap":new Wa(pt.layout_line["line-cap"]),"line-join":new Wa(pt.layout_line["line-join"]),"line-miter-limit":new Ha(pt.layout_line["line-miter-limit"]),"line-round-limit":new Ha(pt.layout_line["line-round-limit"]),"line-sort-key":new Wa(pt.layout_line["line-sort-key"])}),Bh={paint:new Ga({"line-opacity":new Wa(pt.paint_line["line-opacity"]),"line-color":new Wa(pt.paint_line["line-color"]),"line-translate":new Ha(pt.paint_line["line-translate"]),"line-translate-anchor":new Ha(pt.paint_line["line-translate-anchor"]),"line-width":new Wa(pt.paint_line["line-width"]),"line-gap-width":new Wa(pt.paint_line["line-gap-width"]),"line-offset":new Wa(pt.paint_line["line-offset"]),"line-blur":new Wa(pt.paint_line["line-blur"]),"line-dasharray":new Wa(pt.paint_line["line-dasharray"]),"line-pattern":new Wa(pt.paint_line["line-pattern"]),"line-gradient":new qa(pt.paint_line["line-gradient"]),"line-trim-offset":new Ha(pt.paint_line["line-trim-offset"])}),layout:Nh},Fh=new(function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"possiblyEvaluate",value:function(e,t){return t=new Oa(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),o(s(n.prototype),"possiblyEvaluate",this).call(this,e,t)}},{key:"evaluate",value:function(e,t,r,i){return t=W({},t,{zoom:Math.floor(t.zoom)}),o(s(n.prototype),"evaluate",this).call(this,e,t,r,i)}}]),n}(Wa))(Bh.paint.properties["line-width"].specification);function $h(e,t){return t>0?t+2*e:e}Fh.useIntegerZoom=!0;var Vh=Qa([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Uh=Qa([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Zh=Qa([{name:"a_projected_pos",components:4,type:"Float32"}],4);Qa([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var Hh=Qa([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Wh=Qa([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Qa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var qh=Qa([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gh=Qa([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Qa([{name:"triangle",components:3,type:"Uint16"}]),Qa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Qa([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Qa([{type:"Float32",name:"offsetX"}]),Qa([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Xh=24,Kh=128;function Yh(e,t){var n=t.expression;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Oa(e+1))};if("source"===n.kind)return{kind:"source"};for(var r=n.zoomStops,i=n.interpolationType,a=0;a<r.length&&r[a]<=e;)a++;for(var o=a=Math.max(0,a-1);o<r.length&&r[o]<e+1;)o++;o=Math.min(r.length-1,o);var s=r[a],l=r[o];return"composite"===n.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:i}:{kind:"camera",minZoom:s,maxZoom:l,minSize:n.evaluate(new Oa(s)),maxSize:n.evaluate(new Oa(l)),interpolationType:i}}function Jh(e,t,n){var r=t.uSize,i=t.uSizeT,a=n.lowerSize,o=n.upperSize;return"source"===e.kind?a/Kh:"composite"===e.kind?Wn(a/Kh,o/Kh,i):r}function Qh(e,t){var n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){var i=e.interpolationType,a=e.minZoom,o=e.maxZoom,s=i?$(pr.interpolationFactor(i,t,a,o),0,1):0;"camera"===e.kind?r=Wn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var ef=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Kh,evaluateSizeForFeature:Jh,evaluateSizeForZoom:Qh,getSizeData:Yh});function tf(e,t,n){return e.sections.forEach((function(e){e.text=function(e,t,n){var r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Ra.applyArabicShaping&&(e=Ra.applyArabicShaping(e)),e}(e.text,t,n)})),e}var nf={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function rf(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function af(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var of=uf,sf=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,h=n?i-1:0,f=n?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,r),a-=u}return(d?-1:1)*o*Math.pow(2,a-r)},lf=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+d]=255&o,d+=p,o/=256,u-=8);e[n+d-p]|=128*m};function uf(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}uf.Varint=0,uf.Fixed64=1,uf.Bytes=2,uf.Fixed32=5;var cf=4294967296,hf=1/cf,ff="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function df(e){return e.type===uf.Bytes?e.readVarint()+e.pos:e.pos+1}function pf(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function mf(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function vf(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function gf(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function yf(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function _f(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function xf(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function bf(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function wf(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function kf(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ef(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Sf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Tf(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Cf(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}uf.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,a=this.pos;this.type=7&r,e(i,t,this),this.pos===a&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sf(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Cf(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sf(this.buf,this.pos)+Sf(this.buf,this.pos+4)*cf;return this.pos+=8,e},readSFixed64:function(){var e=Sf(this.buf,this.pos)+Cf(this.buf,this.pos+4)*cf;return this.pos+=8,e},readFloat:function(){var e=sf(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=sf(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,a=n.buf;if(r=(112&(i=a[n.pos++]))>>4,i<128)return pf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<3,i<128)return pf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<10,i<128)return pf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<17,i<128)return pf(e,r,t);if(r|=(127&(i=a[n.pos++]))<<24,i<128)return pf(e,r,t);if(r|=(1&(i=a[n.pos++]))<<31,i<128)return pf(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ff?function(e,t,n){return ff.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var a,o,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)<=127&&(u=null):3===c?(o=e[i+2],128==(192&(a=e[i+1]))&&128==(192&o)&&((u=(15&l)<<12|(63&a)<<6|63&o)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+2],s=e[i+3],128==(192&(a=e[i+1]))&&128==(192&o)&&128==(192&s)&&((u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==uf.Bytes)return e.push(this.readVarint(t));var n=df(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==uf.Bytes)return e.push(this.readSVarint());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==uf.Bytes)return e.push(this.readBoolean());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==uf.Bytes)return e.push(this.readFloat());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==uf.Bytes)return e.push(this.readDouble());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==uf.Bytes)return e.push(this.readFixed32());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==uf.Bytes)return e.push(this.readSFixed32());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==uf.Bytes)return e.push(this.readFixed64());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==uf.Bytes)return e.push(this.readSFixed64());var t=df(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===uf.Varint)for(;this.buf[this.pos++]>127;);else if(t===uf.Bytes)this.pos=this.readVarint()+this.pos;else if(t===uf.Fixed32)this.pos+=4;else{if(t!==uf.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Tf(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Tf(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Tf(this.buf,-1&e,this.pos),Tf(this.buf,Math.floor(e*hf),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Tf(this.buf,-1&e,this.pos),Tf(this.buf,Math.floor(e*hf),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&mf(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),lf(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),lf(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&mf(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,uf.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,vf,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,gf,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xf,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,yf,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,_f,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,bf,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,wf,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,kf,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Ef,t)},writeBytesField:function(e,t){this.writeTag(e,uf.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,uf.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,uf.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,uf.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,uf.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,uf.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,uf.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,uf.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,uf.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,uf.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var Mf=T(of),Af=3;function Pf(e,t,n){t.glyphs=[],1===e&&n.readMessage(If,t)}function If(e,t,n){if(3===e){var r=n.readMessage(zf,{}),i=r.id,a=r.bitmap,o=r.width,s=r.height,l=r.left,u=r.top,c=r.advance;t.glyphs.push({id:i,bitmap:new Ju({width:o+2*Af,height:s+2*Af},a),metrics:{width:o,height:s,left:l,top:u,advance:c}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function zf(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var Lf=Af;function Df(e){var t,n=0,r=0,i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n+=a.w*a.h,r=Math.max(r,a.w)}}catch(v){i.e(v)}finally{i.f()}e.sort((function(e,t){return t.h-e.h}));var o,s=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),r),h:1/0}],l=0,u=0,c=f(e);try{for(c.s();!(o=c.n()).done;)for(var h=o.value,d=s.length-1;d>=0;d--){var p=s[d];if(!(h.w>p.w||h.h>p.h)){if(h.x=p.x,h.y=p.y,u=Math.max(u,h.y+h.h),l=Math.max(l,h.x+h.w),h.w===p.w&&h.h===p.h){var m=s.pop();d<s.length&&(s[d]=m)}else h.h===p.h?(p.x+=h.w,p.w-=h.w):h.w===p.w?(p.y+=h.h,p.h-=h.h):(s.push({x:p.x+h.w,y:p.y,w:p.w-h.w,h:h.h}),p.y+=h.h,p.h-=h.h);break}}}catch(v){c.e(v)}finally{c.f()}return{w:l,h:u,fill:n/(l*u)||0}}var Rf=1,Of=function(){function e(t,n){var r=n.pixelRatio,i=n.version,a=n.stretchX,o=n.stretchY,s=n.content;d(this,e),this.paddedRect=t,this.pixelRatio=r,this.stretchX=a,this.stretchY=o,this.content=s,this.version=i}return p(e,[{key:"tl",get:function(){return[this.paddedRect.x+Rf,this.paddedRect.y+Rf]}},{key:"br",get:function(){return[this.paddedRect.x+this.paddedRect.w-Rf,this.paddedRect.y+this.paddedRect.h-Rf]}},{key:"displaySize",get:function(){return[(this.paddedRect.w-2*Rf)/this.pixelRatio,(this.paddedRect.h-2*Rf)/this.pixelRatio]}}]),e}(),jf=function(){function e(t,n){d(this,e);var r={},i={};this.haveRenderCallbacks=[];var a=[];this.addImages(t,r,a),this.addImages(n,i,a);var o=Df(a),s=o.w,l=o.h,u=new Qu({width:s||1,height:l||1});for(var c in t){var h=t[c],f=r[c].paddedRect;Qu.copy(h.data,u,{x:0,y:0},{x:f.x+Rf,y:f.y+Rf},h.data)}for(var p in n){var m=n[p],v=i[p].paddedRect,g=v.x+Rf,y=v.y+Rf,_=m.data.width,x=m.data.height;Qu.copy(m.data,u,{x:0,y:0},{x:g,y:y},m.data),Qu.copy(m.data,u,{x:0,y:x-1},{x:g,y:y-1},{width:_,height:1}),Qu.copy(m.data,u,{x:0,y:0},{x:g,y:y+x},{width:_,height:1}),Qu.copy(m.data,u,{x:_-1,y:0},{x:g-1,y:y},{width:1,height:x}),Qu.copy(m.data,u,{x:0,y:0},{x:g+_,y:y},{width:1,height:x})}this.image=u,this.iconPositions=r,this.patternPositions=i}return p(e,[{key:"addImages",value:function(e,t,n){for(var r in e){var i=e[r],a={x:0,y:0,w:i.data.width+2*Rf,h:i.data.height+2*Rf};n.push(a),t[r]=new Of(a,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}},{key:"patchUpdatedImages",value:function(e,t){for(var n in this.haveRenderCallbacks=this.haveRenderCallbacks.filter((function(t){return e.hasImage(t)})),e.dispatchRenderCallbacks(this.haveRenderCallbacks),e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}},{key:"patchUpdatedImage",value:function(e,t,n){if(e&&t&&e.version!==t.version){e.version=t.version;var r=h(e.tl,2),i=r[0],a=r[1];n.update(t.data,void 0,{x:i,y:a})}}}]),e}();ua(Of,"ImagePosition"),ua(jf,"ImageAtlas");var Nf={horizontal:1,vertical:2,horizontalOnly:3},Bf=-17,Ff=function(){function e(){d(this,e),this.scale=1,this.fontStack="",this.imageName=null}return p(e,null,[{key:"forText",value:function(t,n){var r=new e;return r.scale=t||1,r.fontStack=n,r}},{key:"forImage",value:function(t){var n=new e;return n.imageName=t,n}}]),e}(),$f=function(){function e(){d(this,e),this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}return p(e,[{key:"length",value:function(){return this.text.length}},{key:"getSection",value:function(e){return this.sections[this.sectionIndex[e]]}},{key:"getSections",value:function(){return this.sections}},{key:"getSectionIndex",value:function(e){return this.sectionIndex[e]}},{key:"getCharCode",value:function(e){return this.text.charCodeAt(e)}},{key:"verticalizePunctuation",value:function(e){this.text=function(e,t){for(var n="",r=0;r<e.length;r++){var i=e.charCodeAt(r+1)||null,a=e.charCodeAt(r-1)||null;n+=!t&&(i&&xa(i)&&!nf[e[r+1]]||a&&xa(a)&&!nf[e[r-1]])||!nf[e[r]]?e[r]:nf[e[r]]}return n}(this.text,e)}},{key:"trim",value:function(){for(var e=0,t=0;t<this.text.length&&Uf[this.text.charCodeAt(t)];t++)e++;for(var n=this.text.length,r=this.text.length-1;r>=0&&r>=e&&Uf[this.text.charCodeAt(r)];r--)n--;this.text=this.text.substring(e,n),this.sectionIndex=this.sectionIndex.slice(e,n)}},{key:"substring",value:function(t,n){var r=new e;return r.text=this.text.substring(t,n),r.sectionIndex=this.sectionIndex.slice(t,n),r.sections=this.sections,r}},{key:"toString",value:function(){return this.text}},{key:"getMaxScale",value:function(){var e=this;return this.sectionIndex.reduce((function(t,n){return Math.max(t,e.sections[n].scale)}),0)}},{key:"addTextSection",value:function(e,t){this.text+=e.text,this.sections.push(Ff.forText(e.scale,e.fontStack||t));for(var n=this.sections.length-1,r=0;r<e.text.length;++r)this.sectionIndex.push(n)}},{key:"addImageSection",value:function(e){var t=e.image?e.image.name:"";if(0!==t.length){var n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(Ff.forImage(t)),this.sectionIndex.push(this.sections.length-1)):ie("Reached maximum number of images 6401")}else ie("Can't add FormattedSection with an empty image.")}},{key:"getNextImageSectionCharCode",value:function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}],[{key:"fromFeature",value:function(t,n){for(var r=new e,i=0;i<t.sections.length;i++){var a=t.sections[i];a.image?r.addImageSection(a):r.addTextSection(a,n)}return r}}]),e}();function Vf(e,t,n,r,i,a,o,s,l,u,c,h,d,p,m){var v=$f.fromFeature(e,i);h===Nf.vertical&&v.verticalizePunctuation(d);var g=[],y=function(e,t,n,r,i,a){if(!e)return[];for(var o,s=[],l=function(e,t,n,r,i,a){for(var o=0,s=0;s<e.length();s++){var l=e.getSection(s);o+=Hf(e.getCharCode(s),l,r,i,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,r,i,a),u=e.text.indexOf("\u200b")>=0,c=0,h=0;h<e.length();h++){var f=e.getSection(h),d=e.getCharCode(h);if(Uf[d]||(c+=Hf(d,f,r,i,t,a)),h<e.length()-1){var p=!((o=d)<11904||!(ma["Bopomofo Extended"](o)||ma.Bopomofo(o)||ma["CJK Compatibility Forms"](o)||ma["CJK Compatibility Ideographs"](o)||ma["CJK Compatibility"](o)||ma["CJK Radicals Supplement"](o)||ma["CJK Strokes"](o)||ma["CJK Symbols and Punctuation"](o)||ma["CJK Unified Ideographs Extension A"](o)||ma["CJK Unified Ideographs"](o)||ma["Enclosed CJK Letters and Months"](o)||ma["Halfwidth and Fullwidth Forms"](o)||ma.Hiragana(o)||ma["Ideographic Description Characters"](o)||ma["Kangxi Radicals"](o)||ma["Katakana Phonetic Extensions"](o)||ma.Katakana(o)||ma["Vertical Forms"](o)||ma["Yi Radicals"](o)||ma["Yi Syllables"](o)));(Zf[d]||p||f.imageName)&&s.push(Gf(h+1,c,l,s,qf(d,e.getCharCode(h+1),p&&u),!1))}}return Xf(Gf(e.length(),c,l,s,0,!0))}(v,u,a,t,r,p),_=Ra.processBidirectionalText,x=Ra.processStyledBidirectionalText;if(_&&1===v.sections.length){var b,w=_(v.toString(),y),k=f(w);try{for(k.s();!(b=k.n()).done;){var E=b.value,S=new $f;S.text=E,S.sections=v.sections;for(var T=0;T<E.length;T++)S.sectionIndex.push(0);g.push(S)}}catch(D){k.e(D)}finally{k.f()}}else if(x){var C,M=x(v.text,v.sectionIndex,y),A=f(M);try{for(A.s();!(C=A.n()).done;){var P=C.value,I=new $f;I.text=P[0],I.sectionIndex=P[1],I.sections=v.sections,g.push(I)}}catch(D){A.e(D)}finally{A.f()}}else g=function(e,t){var n,r=[],i=e.text,a=0,o=f(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.push(e.substring(a,s)),a=s}}catch(D){o.e(D)}finally{o.f()}return a<i.length&&r.push(e.substring(a,i.length)),r}(v,y);var z=[],L={positionedLines:z,text:v.toString(),top:c[1],bottom:c[1],left:c[0],right:c[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,a,o,s,l,u,c,h){var d,p=0,m=0,v=0,g="right"===s?1:"left"===s?0:.5,y=!1,_=f(i);try{for(_.s();!(d=_.n()).done;){var x,b=d.value.getSections(),w=f(b);try{for(w.s();!(x=w.n()).done;){var k=x.value;if(!k.imageName){var E=t[k.fontStack];if(E&&!(y=void 0!==E.ascender&&void 0!==E.descender))break}}}catch(D){w.e(D)}finally{w.f()}if(!y)break}}catch(D){_.e(D)}finally{_.f()}var S,T,C=0,M=f(i);try{for(M.s();!(S=M.n()).done;){var A=S.value;A.trim();var P=A.getMaxScale(),I=(P-1)*Xh,z={positionedGlyphs:[],lineOffset:0};e.positionedLines[C]=z;var L=z.positionedGlyphs,R=0;if(A.length()){for(var O=0,j=0,N=0;N<A.length();N++){var B=A.getSection(N),F=A.getSectionIndex(N),$=A.getCharCode(N),V=B.scale,U=null,Z=null,H=null,W=Xh,q=0,G=!(l===Nf.horizontal||!c&&!_a($)||c&&(Uf[$]||(T=$,ma.Arabic(T)||ma["Arabic Supplement"](T)||ma["Arabic Extended-A"](T)||ma["Arabic Presentation Forms-A"](T)||ma["Arabic Presentation Forms-B"](T))));if(B.imageName){var X=r[B.imageName];if(!X)continue;H=B.imageName,e.iconsInText=e.iconsInText||!0,Z=X.paddedRect;var K=X.displaySize;V=V*Xh/h,U={width:K[0],height:K[1],left:Rf,top:-Lf,advance:G?K[1]:K[0],localGlyph:!1},q=y?-U.height*V:Bf+P*Xh-K[1]*V,W=U.advance;var Y=(G?K[0]:K[1])*V-Xh*P;Y>0&&Y>R&&(R=Y)}else{var J=n[B.fontStack];if(!J)continue;J[$]&&(Z=J[$]);var Q=t[B.fontStack];if(!Q)continue;var ee=Q.glyphs[$];if(!ee)continue;if(U=ee.metrics,W=8203!==$?Xh:0,y){var te=void 0!==Q.ascender?Math.abs(Q.ascender):0,ne=void 0!==Q.descender?Math.abs(Q.descender):0,re=(te+ne)*V;O<re&&(O=re,j=(te-ne)/2*V),q=-te*V}else q=Bf+(P-V)*Xh}G?(e.verticalizable=!0,L.push({glyph:$,imageName:H,x:p,y:m+q,vertical:G,scale:V,localGlyph:U.localGlyph,fontStack:B.fontStack,sectionIndex:F,metrics:U,rect:Z}),p+=W*V+u):(L.push({glyph:$,imageName:H,x:p,y:m+q,vertical:G,scale:V,localGlyph:U.localGlyph,fontStack:B.fontStack,sectionIndex:F,metrics:U,rect:Z}),p+=U.advance*V+u)}0!==L.length&&(v=Math.max(p-u,v),y?Yf(L,g,R,j,a*P/2):Yf(L,g,R,0,a/2)),p=0;var ie=a*P+R;z.lineOffset=Math.max(R,I),m+=ie,++C}else m+=a,++C}}catch(D){M.e(D)}finally{M.f()}var ae=m,oe=Kf(o),se=oe.horizontalAlign,le=oe.verticalAlign;(function(e,t,n,r,i,a){var o,s=(t-n)*i,l=-a*r,u=f(e);try{for(u.s();!(o=u.n()).done;){var c,h=o.value,d=f(h.positionedGlyphs);try{for(d.s();!(c=d.n()).done;){var p=c.value;p.x+=s,p.y+=l}}catch(D){d.e(D)}finally{d.f()}}}catch(D){u.e(D)}finally{u.f()}})(e.positionedLines,g,se,le,v,ae),e.top+=-le*ae,e.bottom=e.top+ae,e.left+=-se*v,e.right=e.left+v,e.hasBaseline=y}(L,t,n,r,g,o,s,l,h,u,d,m),!function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;)if(0!==t.value.positionedGlyphs.length)return!1}catch(D){n.e(D)}finally{n.f()}return!0}(z)&&L}var Uf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Zf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Hf(e,t,n,r,i,a){if(t.imageName){var o=r[t.imageName];return o?o.displaySize[0]*t.scale*Xh/a+i:0}var s=n[t.fontStack],l=s&&s.glyphs[e];return l?l.metrics.advance*t.scale+i:0}function Wf(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function qf(e,t,n){var r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Gf(e,t,n,r,i,a){var o,s=null,l=Wf(t,n,i,a),u=f(r);try{for(u.s();!(o=u.n()).done;){var c=o.value,h=Wf(t-c.x,n,i,a)+c.badness;h<=l&&(s=c,l=h)}}catch(d){u.e(d)}finally{u.f()}return{index:e,x:t,priorBreak:s,badness:l}}function Xf(e){return e?Xf(e.priorBreak).concat(e.index):[]}function Kf(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function Yf(e,t,n,r,i){if(t||n||r||i)for(var a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t,l=0;l<=a;l++)e[l].x-=s,e[l].y+=n+r+i}function Jf(e,t,n){var r=Kf(n),i=r.horizontalAlign,a=r.verticalAlign,o=t[0]-e.displaySize[0]*i,s=t[1]-e.displaySize[1]*a;return{image:e,top:s,bottom:s+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Qf(e,t,n,r,i,a){var o,s=e.image;if(s.content){var l=s.content,u=s.pixelRatio||1;o=[l[0]/u,l[1]/u,s.displaySize[0]-l[2]/u,s.displaySize[1]-l[3]/u]}var c,h,f,d,p=t.left*a,m=t.right*a;"width"===n||"both"===n?(d=i[0]+p-r[3],h=i[0]+m+r[1]):h=(d=i[0]+(p+m-s.displaySize[0])/2)+s.displaySize[0];var v=t.top*a,g=t.bottom*a;return"height"===n||"both"===n?(c=i[1]+v-r[0],f=i[1]+g+r[2]):f=(c=i[1]+(v+g-s.displaySize[1])/2)+s.displaySize[1],{image:s,top:c,right:h,bottom:f,left:d,collisionPadding:o}}var ed=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this,e,r)).angle=a,s.z=i,void 0!==o&&(s.segment=o),s}return p(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.z,this.angle,this.segment)}}]),n}(z);function td(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=e[o],h=e[o+1];if(!h)return!1;var f=e[o-1].angleTo(c)-c.angleTo(h);for(f=Math.abs((f+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:f}),u+=f;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;o++,s+=c.dist(h)}return!0}function nd(e){for(var t=0,n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function rd(e,t,n){return e?.6*t*n:0}function id(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function ad(e,t,n,r,i,a){for(var o=rd(n,i,a),s=id(n,r)*a,l=0,u=nd(e)/2,c=0;c<e.length-1;c++){var h=e[c],f=e[c+1],d=h.dist(f);if(l+d>u){var p=(u-l)/d,m=Wn(h.x,f.x,p),v=Wn(h.y,f.y,p),g=new ed(m,v,0,f.angleTo(h),c);return!o||td(e,g,s,o,t)?g:void 0}l+=d}}function od(e,t,n,r,i,a,o,s,l){var u=rd(r,a,o),c=id(r,i),h=c*o,f=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),sd(e,f?t/2*s%t:(c/2+2*a)*o*s%t,t,u,n,h,f,!1,l)}function sd(e,t,n,r,i,a,o,s,l){for(var u=a/2,c=nd(e),h=0,f=t-n,d=[],p=0;p<e.length-1;p++){for(var m=e[p],v=e[p+1],g=m.dist(v),y=v.angleTo(m);f+n<h+g;){var _=((f+=n)-h)/g,x=Wn(m.x,v.x,_),b=Wn(m.y,v.y,_);if(x>=0&&x<l&&b>=0&&b<l&&f-u>=0&&f+u<=c){var w=new ed(x,b,0,y,p);w._round(),r&&!td(e,w,a,r,i)||d.push(w)}}h+=g}return s||d.length||o||(d=sd(e,h/2,n,r,i,a,o,!0,l)),d}function ld(e,t,n,r,i){for(var a=[],o=0;o<e.length;o++)for(var s=e[o],l=void 0,u=0;u<s.length-1;u++){var c=s[u],h=s[u+1];c.x<t&&h.x<t||(c.x<t?c=new z(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x<t&&(h=new z(t,c.y+(t-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y<n&&h.y<n||(c.y<n?c=new z(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round():h.y<n&&(h=new z(c.x+(n-c.y)/(h.y-c.y)*(h.x-c.x),n)._round()),c.x>=r&&h.x>=r||(c.x>=r?c=new z(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round():h.x>=r&&(h=new z(r,c.y+(r-c.x)/(h.x-c.x)*(h.y-c.y))._round()),c.y>=i&&h.y>=i||(c.y>=i?c=new z(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round():h.y>=i&&(h=new z(c.x+(i-c.y)/(h.y-c.y)*(h.x-c.x),i)._round()),l&&c.equals(l[l.length-1])||(l=[c],a.push(l)),l.push(h)))))}return a}ua(ed,"Anchor");var ud=1e20;function cd(e,t,n,r,i,a,o,s,l){for(var u=t;u<t+r;u++)hd(e,n*a+u,a,i,o,s,l);for(var c=n;c<n+i;c++)hd(e,c*a+t,1,r,o,s,l)}function hd(e,t,n,r,i,a,o){a[0]=0,o[0]=-ud,o[1]=ud,i[0]=e[t];for(var s=1,l=0,u=0;s<r;s++){i[s]=e[t+s*n];var c=s*s;do{var h=a[l];u=(i[s]-i[h]+c-h*h)/(s-h)/2}while(u<=o[l]&&--l>-1);a[++l]=s,o[l]=u,o[l+1]=ud}for(var f=0,d=0;f<r;f++){for(;o[d+1]<f;)d++;var p=a[d],m=f-p;e[t+f*n]=i[p]+m*m}}var fd=2,dd={none:0,ideographs:1,all:2},pd=function(){function e(t,n,r){d(this,e),this.requestManager=t,this.localGlyphMode=n,this.localFontFamily=r,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}return p(e,[{key:"setURL",value:function(e){this.url=e}},{key:"getGlyphs",value:function(t,n){var r=this,i=[];for(var a in t){var o,s=f(t[a]);try{for(s.s();!(o=s.n()).done;){var l=o.value;i.push({stack:a,id:l})}}catch(u){s.e(u)}finally{s.f()}}Z(i,(function(t,n){var i=t.stack,a=t.id,o=r.entries[i];o||(o=r.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});var s=o.glyphs[a];if(void 0===s){if(s=r._tinySDF(o,i,a))return o.glyphs[a]=s,void n(null,{stack:i,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)n(new Error("glyphs > 65535 not supported"));else if(o.ranges[l])n(null,{stack:i,id:a,glyph:s});else{var c=o.requests[l];c||(c=o.requests[l]=[],e.loadGlyphRange(i,l,r.url,r.requestManager,(function(e,t){if(t){for(var n in o.ascender=t.ascender,o.descender=t.descender,t.glyphs)r._doesCharSupportLocalGlyph(+n)||(o.glyphs[+n]=t.glyphs[+n]);o.ranges[l]=!0}var i,a=f(c);try{for(a.s();!(i=a.n()).done;)(0,i.value)(e,t)}catch(u){a.e(u)}finally{a.f()}delete o.requests[l]}))),c.push((function(e,t){e?n(e):t&&n(null,{stack:i,id:a,glyph:t.glyphs[a]||null})}))}}else n(null,{stack:i,id:a,glyph:s})}),(function(e,t){if(e)n(e);else if(t){var i,a={},o=f(t);try{for(o.s();!(i=o.n()).done;){var s=i.value,l=s.stack,c=s.id,h=s.glyph;void 0===a[l]&&(a[l]={}),void 0===a[l].glyphs&&(a[l].glyphs={}),a[l].glyphs[c]=h&&{id:h.id,bitmap:h.bitmap.clone(),metrics:h.metrics},a[l].ascender=r.entries[l].ascender,a[l].descender=r.entries[l].descender}}catch(u){o.e(u)}finally{o.f()}n(null,a)}}))}},{key:"_doesCharSupportLocalGlyph",value:function(e){return this.localGlyphMode!==dd.none&&(this.localGlyphMode===dd.all?!!this.localFontFamily:!!this.localFontFamily&&(ma["CJK Unified Ideographs"](e)||ma["Hangul Syllables"](e)||ma.Hiragana(e)||ma.Katakana(e)||ma["CJK Symbols and Punctuation"](e)))}},{key:"_tinySDF",value:function(t,n,r){var i=this.localFontFamily;if(i&&this._doesCharSupportLocalGlyph(r)){var a=t.tinySDF;if(!a){var o="400";/bold/i.test(n)?o="900":/medium/i.test(n)?o="500":/light/i.test(n)&&(o="200"),(a=t.tinySDF=new e.TinySDF({fontFamily:i,fontWeight:o,fontSize:24*fd,buffer:3*fd,radius:8*fd})).fontWeight=o}if(this.localGlyphs[a.fontWeight][r])return this.localGlyphs[a.fontWeight][r];var s=String.fromCharCode(r),l=a.draw(s),u=l.data,c=l.width,h=l.height,f=l.glyphWidth,d=l.glyphHeight,p=l.glyphLeft,m=l.glyphTop,v=l.glyphAdvance;return this.localGlyphs[a.fontWeight][r]={id:r,bitmap:new Ju({width:c,height:h},u),metrics:{width:f/fd,height:d/fd,left:p/fd,top:m/fd-27,advance:v/fd,localGlyph:!0}}}}}]),e}();pd.loadGlyphRange=function(e,t,n,r,i){var a=256*t,o=a+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}","".concat(a,"-").concat(o)),we.Glyphs);Te(s,(function(e,t){if(e)i(e);else if(t){var n,r={},a=function(e){return new Mf(e).readFields(Pf,{})}(t),o=f(a.glyphs);try{for(o.s();!(n=o.n()).done;){var s=n.value;r[s.id]=s}}catch(l){o.e(l)}finally{o.f()}i(null,{glyphs:r,ascender:a.ascender,descender:a.descender})}}))},pd.TinySDF=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fontSize,r=void 0===n?24:n,i=t.buffer,a=void 0===i?3:i,o=t.radius,s=void 0===o?8:o,l=t.cutoff,u=void 0===l?.25:l,c=t.fontFamily,h=void 0===c?"sans-serif":c,f=t.fontWeight,p=void 0===f?"normal":f,m=t.fontStyle,v=void 0===m?"normal":m;d(this,e),this.buffer=a,this.cutoff=u,this.radius=s;var g=this.size=r+4*a,y=this._createCanvas(g),_=this.ctx=y.getContext("2d",{willReadFrequently:!0});_.font="".concat(v," ").concat(p," ").concat(r,"px ").concat(h),_.textBaseline="alphabetic",_.textAlign="left",_.fillStyle="black",this.gridOuter=new Float64Array(g*g),this.gridInner=new Float64Array(g*g),this.f=new Float64Array(g),this.z=new Float64Array(g+1),this.v=new Uint16Array(g)}return p(e,[{key:"_createCanvas",value:function(e){var t=document.createElement("canvas");return t.width=t.height=e,t}},{key:"draw",value:function(e){var t=this.ctx.measureText(e),n=t.width,r=t.actualBoundingBoxAscent,i=t.actualBoundingBoxDescent,a=t.actualBoundingBoxLeft,o=t.actualBoundingBoxRight,s=Math.ceil(r),l=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-a))),u=Math.min(this.size-this.buffer,s+Math.ceil(i)),c=l+2*this.buffer,h=u+2*this.buffer,f=Math.max(c*h,0),d=new Uint8ClampedArray(f),p={data:d,width:c,height:h,glyphWidth:l,glyphHeight:u,glyphTop:s,glyphLeft:0,glyphAdvance:n};if(0===l||0===u)return p;var m=this.ctx,v=this.buffer,g=this.gridInner,y=this.gridOuter;m.clearRect(v,v,l,u),m.fillText(e,v,v+s);var _=m.getImageData(v,v,l,u);y.fill(ud,0,f),g.fill(0,0,f);for(var x=0;x<u;x++)for(var b=0;b<l;b++){var w=_.data[4*(x*l+b)+3]/255;if(0!==w){var k=(x+v)*c+b+v;if(1===w)y[k]=0,g[k]=ud;else{var E=.5-w;y[k]=E>0?E*E:0,g[k]=E<0?E*E:0}}}cd(y,0,0,c,h,c,this.f,this.v,this.z),cd(g,v,v,l,u,c,this.f,this.v,this.z);for(var S=0;S<f;S++){var T=Math.sqrt(y[S])-Math.sqrt(g[S]);d[S]=Math.round(255-255*(T/this.radius+this.cutoff))}return p}}]),e}();var md=Rf;function vd(e,t,n,r){var i=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2*md,l=a.paddedRect.h-2*md,u=e.right-e.left,c=e.bottom-e.top,h=a.stretchX||[[0,s]],f=a.stretchY||[[0,l]],d=function(e,t){return e+t[1]-t[0]},p=h.reduce(d,0),m=f.reduce(d,0),v=s-p,g=l-m,y=0,_=p,x=0,b=m,w=0,k=v,E=0,S=g;if(a.content&&r){var T=a.content;y=gd(h,0,T[0]),x=gd(f,0,T[1]),_=gd(h,T[0],T[2]),b=gd(f,T[1],T[3]),w=T[0]-y,E=T[1]-x,k=T[2]-T[0]-_,S=T[3]-T[1]-b}var C=function(r,i,s,l){var h=_d(r.stretch-y,_,u,e.left),f=xd(r.fixed-w,k,r.stretch,p),d=_d(i.stretch-x,b,c,e.top),v=xd(i.fixed-E,S,i.stretch,m),g=_d(s.stretch-y,_,u,e.left),T=xd(s.fixed-w,k,s.stretch,p),C=_d(l.stretch-x,b,c,e.top),M=xd(l.fixed-E,S,l.stretch,m),A=new z(h,d),P=new z(g,d),I=new z(g,C),L=new z(h,C),D=new z(f/o,v/o),R=new z(T/o,M/o),O=t*Math.PI/180;if(O){var j=Math.sin(O),N=Math.cos(O),B=[N,-j,j,N];A._matMult(B),P._matMult(B),L._matMult(B),I._matMult(B)}var F=r.stretch+r.fixed,$=i.stretch+i.fixed;return{tl:A,tr:P,bl:L,br:I,tex:{x:a.paddedRect.x+md+F,y:a.paddedRect.y+md+$,w:s.stretch+s.fixed-F,h:l.stretch+l.fixed-$},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:k/o/u,minFontScaleY:S/o/c,isSDF:n}};if(r&&(a.stretchX||a.stretchY))for(var M=yd(h,v,p),A=yd(f,g,m),P=0;P<M.length-1;P++)for(var I=M[P],L=M[P+1],D=0;D<A.length-1;D++)i.push(C(I,A[D],L,A[D+1]));else i.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return i}function gd(e,t,n){var r,i=0,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+=Math.max(t,Math.min(n,o[1]))-Math.max(t,Math.min(n,o[0]))}}catch(s){a.e(s)}finally{a.f()}return i}function yd(e,t,n){var r,i=[{fixed:-md,stretch:0}],a=f(e);try{for(a.s();!(r=a.n()).done;){var o=h(r.value,2),s=o[0],l=o[1],u=i[i.length-1];i.push({fixed:s-u.stretch,stretch:u.stretch}),i.push({fixed:s-u.stretch,stretch:u.stretch+(l-s)})}}catch(c){a.e(c)}finally{a.f()}return i.push({fixed:t+md,stretch:n}),i}function _d(e,t,n,r){return e/t*n+r}function xd(e,t,n,r){return e-t*n/r}function bd(e,t,n,r){var i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}var wd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kd;if(d(this,e),this.data=t,this.length=this.data.length,this.compare=n,this.length>0)for(var r=(this.length>>1)-1;r>=0;r--)this._down(r)}return p(e,[{key:"push",value:function(e){this.data.push(e),this.length++,this._up(this.length-1)}},{key:"pop",value:function(){if(0!==this.length){var e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}}},{key:"peek",value:function(){return this.data[0]}},{key:"_up",value:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}},{key:"_down",value:function(e){for(var t=this.data,n=this.compare,r=this.length>>1,i=t[e];e<r;){var a=1+(e<<1),o=t[a],s=a+1;if(s<this.length&&n(t[s],o)<0&&(a=s,o=t[s]),n(o,i)>=0)break;t[e]=o,e=a}t[e]=i}}]),e}();function kd(e,t){return e<t?-1:e>t?1:0}function Ed(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,i=1/0,a=-1/0,o=-1/0,s=e[0],l=0;l<s.length;l++){var u=s[l];(!l||u.x<r)&&(r=u.x),(!l||u.y<i)&&(i=u.y),(!l||u.x>a)&&(a=u.x),(!l||u.y>o)&&(o=u.y)}var c=Math.min(a-r,o-i),h=c/2,f=new wd([],Sd);if(0===c)return new z(r,i);for(var d=r;d<a;d+=c)for(var p=i;p<o;p+=c)f.push(new Td(d+h,p+h,h,e));for(var m=function(e){for(var t=0,n=0,r=0,i=e[0],a=0,o=i.length,s=o-1;a<o;s=a++){var l=i[a],u=i[s],c=l.x*u.y-u.x*l.y;n+=(l.x+u.x)*c,r+=(l.y+u.y)*c,t+=3*c}return new Td(n/t,r/t,0,e)}(e),v=f.length;f.length;){var g=f.pop();(g.d>m.d||!m.d)&&(m=g,n&&console.log("found best %d after %d probes",Math.round(1e4*g.d)/1e4,v)),g.max-m.d<=t||(h=g.h/2,f.push(new Td(g.p.x-h,g.p.y-h,h,e)),f.push(new Td(g.p.x+h,g.p.y-h,h,e)),f.push(new Td(g.p.x-h,g.p.y+h,h,e)),f.push(new Td(g.p.x+h,g.p.y+h,h,e)),v+=4)}return n&&(console.log("num probes: ".concat(v)),console.log("best distance: ".concat(m.d))),m.p}function Sd(e,t){return t.max-e.max}var Td=p((function e(t,n,r,i){d(this,e),this.p=new z(t,n),this.h=r,this.d=function(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l];u.y>e.y!=c.y>e.y&&e.x<(c.x-u.x)*(e.y-u.y)/(c.y-u.y)+u.x&&(n=!n),r=Math.min(r,zu(e,u,c))}return(n?1:-1)*Math.sqrt(r)}(this.p,i),this.max=this.d+this.h*Math.SQRT2})),Cd=7,Md=Number.POSITIVE_INFINITY,Ad=Math.sqrt(2);function Pd(e,t){var n=h(t,2),r=n[0],i=n[1],a=0,o=0;if(i===Md){r<0&&(r=0);var s=r/Ad;switch(e){case"top-right":case"top-left":o=s-Cd;break;case"bottom-right":case"bottom-left":o=-s+Cd;break;case"bottom":o=-r+Cd;break;case"top":o=r-Cd}switch(e){case"top-right":case"bottom-right":a=-s;break;case"top-left":case"bottom-left":a=s;break;case"left":a=r;break;case"right":a=-r}}else{switch(r=Math.abs(r),i=Math.abs(i),e){case"top-right":case"top-left":case"top":o=i-Cd;break;case"bottom-right":case"bottom-left":case"bottom":o=-i+Cd}switch(e){case"top-right":case"bottom-right":case"right":a=-r;break;case"top-left":case"bottom-left":case"left":a=r}}return[a,o]}function Id(e,t,n,r,i,a,o,s,l,u){e.createArrays(),e.tilePixelRatio=ws/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;var c=e.layers[0].layout,h=e.layers[0]._unevaluatedLayout._values,d={};if("composite"===e.textSizeData.kind){var p=e.textSizeData,m=p.minZoom,v=p.maxZoom;d.compositeTextSizes=[h["text-size"].possiblyEvaluate(new Oa(m),s),h["text-size"].possiblyEvaluate(new Oa(v),s)]}if("composite"===e.iconSizeData.kind){var g=e.iconSizeData,y=g.minZoom,_=g.maxZoom;d.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new Oa(y),s),h["icon-size"].possiblyEvaluate(new Oa(_),s)]}d.layoutTextSize=h["text-size"].possiblyEvaluate(new Oa(l+1),s),d.layoutIconSize=h["icon-size"].possiblyEvaluate(new Oa(l+1),s),d.textMaxSize=h["text-size"].possiblyEvaluate(new Oa(18),s);var x,b="map"===c.get("text-rotation-alignment")&&"point"!==c.get("symbol-placement"),w=c.get("text-size"),k=f(e.features);try{var E=function(){var a,l=x.value,h=c.get("text-font").evaluate(l,{},s).join(","),f=w.evaluate(l,{},s),p=d.layoutTextSize.evaluate(l,{},s),m=(d.layoutIconSize.evaluate(l,{},s),{horizontal:{},vertical:void 0}),v=l.text,g=[0,0];if(v){var y=v.toString(),_=c.get("text-letter-spacing").evaluate(l,{},s)*Xh,k=c.get("text-line-height").evaluate(l,{},s)*Xh,E=ga(y)?_:0,S=c.get("text-anchor").evaluate(l,{},s),T=c.get("text-variable-anchor");if(!T){var C=c.get("text-radial-offset").evaluate(l,{},s);g=C?Pd(S,[C*Xh,Md]):c.get("text-offset").evaluate(l,{},s).map((function(e){return e*Xh}))}var M=b?"center":c.get("text-justify").evaluate(l,{},s),A="point"===c.get("symbol-placement"),P=A?c.get("text-max-width").evaluate(l,{},s)*Xh:1/0,I=function(r){e.allowVerticalPlacement&&va(y)&&(m.vertical=Vf(v,t,n,i,h,P,k,S,r,E,g,Nf.vertical,!0,p,f))};if(!b&&T){for(var z="auto"===M?T.map((function(e){return zd(e)})):[M],L=!1,D=0;D<z.length;D++){var R=z[D];if(!m.horizontal[R])if(L)m.horizontal[R]=m.horizontal[0];else{var O=Vf(v,t,n,i,h,P,k,"center",R,E,g,Nf.horizontal,!1,p,f);O&&(m.horizontal[R]=O,L=1===O.positionedLines.length)}}I("left")}else{if("auto"===M&&(M=zd(S)),A||c.get("text-writing-mode").indexOf("horizontal")>=0||!va(y)){var j=Vf(v,t,n,i,h,P,k,S,M,E,g,Nf.horizontal,!1,p,f);j&&(m.horizontal[M]=j)}I(A?"left":M)}}var N=!1;if(l.icon&&l.icon.name){var B=r[l.icon.name];B&&(a=Jf(i[l.icon.name],c.get("icon-offset").evaluate(l,{},s),c.get("icon-anchor").evaluate(l,{},s)),N=B.sdf,void 0===e.sdfIcons?e.sdfIcons=B.sdf:e.sdfIcons!==B.sdf&&ie("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==e.pixelRatio||0!==c.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}var F=jd(m.horizontal)||m.vertical;e.iconsInText||(e.iconsInText=!!F&&F.iconsInText),(F||a)&&Ld(e,l,m,a,r,d,p,0,g,N,o,s,u)};for(k.s();!(x=k.n()).done;)E()}catch(S){k.e(S)}finally{k.f()}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function zd(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ld(e,t,n,r,i,a,o,s,l,u,c,d,p){var m=a.textMaxSize.evaluate(t,{},d);void 0===m&&(m=o);var v,g,y=e.layers[0].layout,_=y.get("icon-offset").evaluate(t,{},d),x=jd(n.horizontal)||n.vertical,b="globe"===p.name,w=Xh,k=o/w,E=e.tilePixelRatio*m/w,S=(v=e.overscaling,e.zoom>18&&v>2&&(v>>=1),Math.max(ws/(512*v),1)*y.get("symbol-spacing")),T=y.get("text-padding")*e.tilePixelRatio,C=y.get("icon-padding")*e.tilePixelRatio,M=R(y.get("text-max-angle")),A="map"===y.get("text-rotation-alignment")&&"point"!==y.get("symbol-placement"),P="map"===y.get("icon-rotation-alignment")&&"point"!==y.get("symbol-placement"),I=y.get("symbol-placement"),z=S/2,L=y.get("icon-text-fit");r&&"none"!==L&&(e.allowVerticalPlacement&&n.vertical&&(g=Qf(r,n.vertical,L,y.get("icon-text-fit-padding"),_,k)),x&&(r=Qf(r,x,L,y.get("icon-text-fit-padding"),_,k)));var D=function(o,s,f){if(!(s.x<0||s.x>=ws||s.y<0||s.y>=ws)){var m=null;if(b){var v=p.projectTilePoint(s.x,s.y,f),y=v.x,x=v.y,w=v.z;m={anchor:new ed(y,x,w,0,void 0),up:p.upVector(f,s.x,s.y)}}!function(e,t,n,r,i,a,o,s,l,u,c,f,d,p,m,v,g,y,_,x,b,w,k,E,S){var T,C,M,A,P,I,z,L,D,R=e.addToLineVertexArray(t,r),O=0,j=0,N=0,B=0,F=-1,$=-1,V={},U=Wo(""),Z=n?n.anchor:t,H=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?(T=l.layout.get("text-offset").evaluate(b,{},S).map((function(e){return e*Xh})),H=(C=h(T,2))[0],W=C[1]):(H=l.layout.get("text-radial-offset").evaluate(b,{},S)*Xh,W=Md),e.allowVerticalPlacement&&i.vertical){var q=i.vertical;if(m)L=Bd(q),s&&(D=Bd(s));else{var G=l.layout.get("text-rotate").evaluate(b,{},S)+90;P=Nd(u,Z,t,c,f,d,q,p,G,v),s&&(I=Nd(u,Z,t,c,f,d,s,y,G))}}if(a){var X=l.layout.get("icon-rotate").evaluate(b,{},S),K="none"!==l.layout.get("icon-text-fit"),Y=vd(a,X,k,K),J=s?vd(s,X,k,K):void 0;A=Nd(u,Z,t,c,f,d,a,y,X),O=4*Y.length;var Q=e.iconSizeData,ee=null;"source"===Q.kind?(ee=[Kh*l.layout.get("icon-size").evaluate(b,{},S)])[0]>Rd&&ie("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(Dd,'. Reduce your "icon-size".')):"composite"===Q.kind&&((ee=[Kh*w.compositeIconSizes[0].evaluate(b,{},S),Kh*w.compositeIconSizes[1].evaluate(b,{},S)])[0]>Rd||ee[1]>Rd)&&ie("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(Dd,'. Reduce your "icon-size".')),e.addSymbols(e.icon,Y,ee,x,_,b,!1,n,t,R.lineStartIndex,R.lineLength,-1,E,S),F=e.icon.placedSymbolArray.length-1,J&&(j=4*J.length,e.addSymbols(e.icon,J,ee,x,_,b,Nf.vertical,n,t,R.lineStartIndex,R.lineLength,-1,E,S),$=e.icon.placedSymbolArray.length-1)}for(var te in i.horizontal){var ne=i.horizontal[te];M||(U=Wo(ne.text),m?z=Bd(ne):M=Nd(u,Z,t,c,f,d,ne,p,l.layout.get("text-rotate").evaluate(b,{},S),v));var re=1===ne.positionedLines.length;if(N+=Od(e,n,t,ne,o,l,m,b,v,R,i.vertical?Nf.horizontal:Nf.horizontalOnly,re?Object.keys(i.horizontal):[te],V,F,w,E,S),re)break}i.vertical&&(B+=Od(e,n,t,i.vertical,o,l,m,b,v,R,Nf.vertical,["vertical"],V,$,w,E,S));var ae=-1,oe=function(e,t){return e?Math.max(e,t):t};ae=oe(z,ae),ae=oe(L,ae);var se=(ae=oe(D,ae))>-1?1:0;e.glyphOffsetArray.length>=yp.MAX_GLYPHS&&ie("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==b.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,b.sortKey),e.symbolInstances.emplaceBack(Z.x,Z.y,Z.z,t.x,t.y,V.right>=0?V.right:-1,V.center>=0?V.center:-1,V.left>=0?V.left:-1,V.vertical>=0?V.vertical:-1,F,$,U,void 0!==M?M:e.collisionBoxArray.length,void 0!==M?M+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,I||e.collisionBoxArray.length,I?I+1:e.collisionBoxArray.length,c,N,B,O,j,se,0,H,W,ae)}(e,s,m,o,n,r,i,g,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,T,A,l,0,C,P,_,t,a,u,c,d)}};if("line"===I){var O,j=f(ld(t.geometry,0,0,ws,ws));try{for(j.s();!(O=j.n()).done;){var N,B=O.value,F=od(B,S,M,n.vertical||x,r,w,E,e.overscaling,ws),$=f(F);try{for($.s();!(N=$.n()).done;){var V=N.value;x&&Fd(e,x.text,z,V)||D(B,V,d)}}catch(se){$.e(se)}finally{$.f()}}}catch(se){j.e(se)}finally{j.f()}}else if("line-center"===I){var U,Z=f(t.geometry);try{for(Z.s();!(U=Z.n()).done;){var H=U.value;if(H.length>1){var W=ad(H,M,n.vertical||x,r,w,E);W&&D(H,W,d)}}}catch(se){Z.e(se)}finally{Z.f()}}else if("Polygon"===t.type){var q,G=f(Oc(t.geometry,0));try{for(G.s();!(q=G.n()).done;){var X=q.value,K=Ed(X,16);D(X[0],new ed(K.x,K.y,0,0,void 0),d)}}catch(se){G.e(se)}finally{G.f()}}else if("LineString"===t.type){var Y,J=f(t.geometry);try{for(J.s();!(Y=J.n()).done;){var Q=Y.value;D(Q,new ed(Q[0].x,Q[0].y,0,0,void 0),d)}}catch(se){J.e(se)}finally{J.f()}}else if("Point"===t.type){var ee,te=f(t.geometry);try{for(te.s();!(ee=te.n()).done;){var ne,re=ee.value,ae=f(re);try{for(ae.s();!(ne=ae.n()).done;){var oe=ne.value;D([oe],new ed(oe.x,oe.y,0,0,void 0),d)}}catch(se){ae.e(se)}finally{ae.f()}}}catch(se){te.e(se)}finally{te.f()}}}var Dd=255,Rd=Dd*Kh;function Od(e,t,n,r,i,o,s,l,u,h,d,p,m,v,g,y,_){var x=function(e,t,n,r,i,o,s,l){var u=[];if(0===t.positionedLines.length)return u;var h,d=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,p=function(e){var t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n),m=Math.abs(t.top-t.bottom),v=f(t.positionedLines);try{for(v.s();!(h=v.n()).done;)m-=h.value.lineOffset}catch(oe){v.e(oe)}finally{v.f()}for(var g=t.positionedLines.length,y=m/g,_=t.top-n[1],x=0;x<g;++x){var b=t.positionedLines[x];_=bd(t,y,_,x);var w,k=f(b.positionedGlyphs);try{for(k.s();!(w=k.n()).done;){var E=w.value;if(E.rect){var S=E.rect||{},T=Lf+1,C=!0,M=1,A=0;if(E.imageName){var P=s[E.imageName];if(!P)continue;if(P.sdf){ie("SDF images are not supported in formatted text and will be ignored.");continue}C=!1,M=P.pixelRatio,T=Rf/M}var I=(i||l)&&E.vertical,L=E.metrics.advance*E.scale/2,D=E.metrics,R=E.rect;if(null!==R){l&&t.verticalizable&&(A=E.imageName?L-E.metrics.width*E.scale/2:0);var O=i?[E.x+L,E.y]:[0,0],j=[0,0],N=[0,0],B=!1;i||(I?(N=[E.x+L+p[0],E.y+p[1]-A],B=!0):j=[E.x+L+n[0],E.y+n[1]-A]);var F=R.w*E.scale/(M*(E.localGlyph?fd:1)),$=R.h*E.scale/(M*(E.localGlyph?fd:1)),V=void 0,U=void 0,Z=void 0,H=void 0;if(I){var W=E.y-_,q=new z(-L,L-W),G=-Math.PI/2,X=a(z,c(N));(V=new z(-L+j[0],j[1]))._rotateAround(G,q)._add(X),V.x+=-W+L,V.y-=(D.left-T)*E.scale;var K=E.imageName?D.advance*E.scale:Xh*E.scale,Y=String.fromCharCode(E.glyph);rf(Y)?V.x+=(1-T)*E.scale:af(Y)?V.x+=K-D.height*E.scale+(-T-1)*E.scale:V.x+=E.imageName||D.width+2*T===R.w&&D.height+2*T===R.h?(K-$)/2:(K-(D.height+2*T)*E.scale)/2,U=new z(V.x,V.y-F),Z=new z(V.x+$,V.y),H=new z(V.x+$,V.y-F)}else{var J=(D.left-T)*E.scale-L+j[0],Q=(-D.top-T)*E.scale+j[1],ee=J+F,te=Q+$;V=new z(J,Q),U=new z(ee,Q),Z=new z(J,te),H=new z(ee,te)}if(d){var ne=void 0;ne=i?new z(0,0):B?new z(p[0],p[1]):new z(n[0],n[1]),V._rotateAround(d,ne),U._rotateAround(d,ne),Z._rotateAround(d,ne),H._rotateAround(d,ne)}var re=new z(0,0),ae=new z(0,0);u.push({tl:V,tr:U,bl:Z,br:H,tex:S,writingMode:t.writingMode,glyphOffset:O,sectionIndex:E.sectionIndex,isSDF:C,pixelOffsetTL:re,pixelOffsetBR:ae,minFontScaleX:0,minFontScaleY:0})}}}}catch(oe){k.e(oe)}finally{k.f()}}return u}(0,r,u,o,s,l,i,e.allowVerticalPlacement),b=e.textSizeData,w=null;"source"===b.kind?(w=[Kh*o.layout.get("text-size").evaluate(l,{},_)])[0]>Rd&&ie("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(Dd,'. Reduce your "text-size".')):"composite"===b.kind&&((w=[Kh*g.compositeTextSizes[0].evaluate(l,{},_),Kh*g.compositeTextSizes[1].evaluate(l,{},_)])[0]>Rd||w[1]>Rd)&&ie("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(Dd,'. Reduce your "text-size".')),e.addSymbols(e.text,x,w,u,s,l,d,t,n,h.lineStartIndex,h.lineLength,v,y,_);var k,E=f(p);try{for(E.s();!(k=E.n()).done;)m[k.value]=e.text.placedSymbolArray.length-1}catch(S){E.e(S)}finally{E.f()}return 4*x.length}function jd(e){for(var t in e)return e[t];return null}function Nd(e,t,n,r,i,a,o,s,l,u){var c=o.top,h=o.bottom,f=o.left,d=o.right,p=o.collisionPadding;if(p&&(f-=p[0],c-=p[1],d+=p[2],h+=p[3]),l){var m=new z(f,c),v=new z(d,c),g=new z(f,h),y=new z(d,h),_=R(l),x=new z(0,0);u&&(x=new z(u[0],u[1])),m._rotateAround(_,x),v._rotateAround(_,x),g._rotateAround(_,x),y._rotateAround(_,x),f=Math.min(m.x,v.x,g.x,y.x),d=Math.max(m.x,v.x,g.x,y.x),c=Math.min(m.y,v.y,g.y,y.y),h=Math.max(m.y,v.y,g.y,y.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,f,c,d,h,s,r,i,a),e.length-1}function Bd(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);var t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Fd(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[t]=[];return i[t].push(r),!1}function $d(e,t){var n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),a=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),o=Math.sin(e._pitch)*a+i;return Math.min(1.01*o,i*(1/e._horizonShift))}function Vd(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};var n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,a=e.y*n,o=(e.y+1)*n,s=su(r),l=su(i),u=lu(a),c=lu(o),h=t.project(s,u),f=t.project(l,u),d=t.project(l,c),p=t.project(s,c),m=Math.min(h.x,f.x,d.x,p.x),v=Math.min(h.y,f.y,d.y,p.y),g=Math.max(h.x,f.x,d.x,p.x),y=Math.max(h.y,f.y,d.y,p.y),_=n/16;function x(e,n,r,i,a,o){var s=(r+a)/2,l=(i+o)/2,u=t.project(su(s),lu(l)),c=Math.max(0,m-u.x,v-u.y,u.x-g,u.y-y);m=Math.min(m,u.x),g=Math.max(g,u.x),v=Math.min(v,u.y),y=Math.max(y,u.y),c>_&&(x(e,u,r,i,s,l),x(u,n,s,l,a,o))}x(h,f,r,a,i,a),x(f,d,i,a,i,o),x(d,p,i,o,r,o),x(p,h,r,o,r,a),m-=_,v-=_,g+=_,y+=_;var b=1/Math.max(g-m,y-v);return{scale:b,x:m*b,y:v*b,x2:g*b,y2:y*b,projection:t}}var Ud=Ms(new Float32Array(16)),Zd=function(){function e(t){d(this,e),this.spec=t,this.name=t.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}return p(e,[{key:"project",value:function(e,t){return{x:0,y:0,z:0}}},{key:"unproject",value:function(e,t){return new nu(0,0)}},{key:"projectTilePoint",value:function(e,t,n){return{x:e,y:t,z:0}}},{key:"locationPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e._coordinatePoint(e.locationCoordinate(t),n)}},{key:"pixelsPerMeter",value:function(e,t){return ou(1,e)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){return 1}},{key:"farthestPixelDistance",value:function(e){return $d(e,e.pixelsPerMeter)}},{key:"pointCoordinate",value:function(e,t,n,r){var i=e.horizonLineFromTop(!1),a=new z(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,r))}},{key:"pointCoordinate3D",value:function(e,t,n){var r=new z(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);var i=this.pointCoordinate(e,r.x,r.y,0);return[i.x,i.y,i.z]}},{key:"isPointAboveHorizon",value:function(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);var n=e.horizonLineFromTop();return t.y<n}},{key:"createInversionMatrix",value:function(e,t){return Ud}},{key:"createTileMatrix",value:function(e,t,n){var r,i,a,o=n.canonical,s=Ms(new Float64Array(16));if(this.isReprojectedInTileSpace){var l=Vd(o,this);r=1,i=l.x+n.wrap*l.scale,a=l.y,zs(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(o.z),i=(o.x+Math.pow(2,o.z)*n.wrap)*r,a=o.y*r;return Is(s,s,[i,a,0]),zs(s,s,[r/ws,r/ws,1]),s}},{key:"upVector",value:function(e,t,n){return[0,0,1]}},{key:"upVectorScale",value:function(e,t,n){return{metersToTile:1}}}]),e}(),Hd=function(e){m(n,e);var t=v(n);function n(e){var r;d(this,n),(r=t.call(this,e)).range=[4,7],r.center=e.center||[-96,37.5];var i=r.parallels=e.parallels||[29.5,45.5],a=h(i,2),o=a[0],s=a[1],l=Math.sin(R(o));return r.n=(l+Math.sin(R(s)))/2,r.c=1+l*(2*r.n-l),r.r0=Math.sqrt(r.c)/r.n,r}return p(n,[{key:"project",value:function(e,t){var n=this.n,r=this.c,i=this.r0,a=R(e-this.center[0]),o=R(t),s=Math.sqrt(r-2*n*Math.sin(o))/n;return{x:s*Math.sin(a*n),y:s*Math.cos(a*n)-i,z:0}}},{key:"unproject",value:function(e,t){var n=this.n,r=this.c,i=this.r0+t,a=Math.atan2(e,Math.abs(i))*Math.sign(i);i*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(i));var o=R(this.center[0])*n,s=$(O((a=U(a,-Math.PI-o,Math.PI-o))/n)+this.center[0],-180,180),l=Math.asin($((r-(e*e+i*i)*n*n)/(2*n),-1,1)),u=$(O(l),-cu,cu);return new nu(s,u)}}]),n}(Zd),Wd=1.340264,qd=-.081106,Gd=893e-6,Xd=.003796,Kd=Math.sqrt(3)/2,Yd=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){t=t/180*Math.PI,e=e/180*Math.PI;var n=Math.asin(Kd*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Kd*(Wd+3*qd*r+i*(7*Gd+9*Xd*r)))/Math.PI+.5),y:1-.5*(n*(Wd+qd*r+i*(Gd+Xd*r))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;for(var n,r=t=(2*(1-t)-1)*Math.PI,i=r*r,a=i*i*i,o=0;o<12&&(a=(i=(r=$(r-(n=(r*(Wd+qd*i+a*(Gd+Xd*i))-t)/(Wd+3*qd*i+a*(7*Gd+9*Xd*i))),-Math.PI/3,Math.PI/3))*r)*i*i,!(Math.abs(n)<1e-12));++o);var s=Kd*e*(Wd+3*qd*i+a*(7*Gd+9*Xd*i))/Math.cos(r),l=Math.asin(Math.sin(r)/Kd),u=$(180*s/Math.PI,-180,180),c=$(180*l/Math.PI,-cu,cu);return new nu(u,c)}}]),n}(Zd),Jd=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r}return p(n,[{key:"project",value:function(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}},{key:"unproject",value:function(e,t){var n=360*(e-.5),r=$(360*(.5-t),-cu,cu);return new nu(n,r)}}]),n}(Zd),Qd=Math.PI/2;function ep(e){return Math.tan((Qd+e)/2)}var tp=function(e){m(n,e);var t=v(n);function n(e){var r;d(this,n),(r=t.call(this,e)).center=e.center||[0,30];var i=r.parallels=e.parallels||[30,30],a=h(i,2),o=a[0],s=a[1],l=R(o),u=R(s);r.southernCenter=l+u<0,r.southernCenter&&(l=-l,u=-u);var c=Math.cos(l),f=ep(l);return r.n=l===u?Math.sin(l):Math.log(c/Math.cos(u))/Math.log(ep(u)/f),r.f=c*Math.pow(ep(l),r.n)/r.n,r}return p(n,[{key:"project",value:function(e,t){t=R(t),this.southernCenter&&(t=-t),e=R(e-this.center[0]);var n=1e-6,r=this.n,i=this.f;i>0?t<-Qd+n&&(t=-Qd+n):t>Qd-n&&(t=Qd-n);var a=i/Math.pow(ep(t),r),o=a*Math.sin(r*e),s=i-a*Math.cos(r*e);return o=.5*(o/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:o,y:this.southernCenter?s:1-s,z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;var n=this.n,r=this.f,i=r-t,a=Math.sign(i),o=Math.sign(n)*Math.sqrt(e*e+i*i),s=Math.atan2(e,Math.abs(i))*a;i*n<0&&(s-=Math.PI*Math.sign(e)*a);var l=$(O(s/n)+this.center[0],-180,180),u=$(O(2*Math.atan(Math.pow(r/o,1/n))-Qd),-cu,cu);return new nu(l,this.southernCenter?-u:u)}}]),n}(Zd),np=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).wrap=!0,r.supportsWorldCopies=!0,r.supportsTerrain=!0,r.supportsFog=!0,r.supportsFreeCamera=!0,r.isReprojectedInTileSpace=!1,r.unsupportedLayers=[],r.range=null,r}return p(n,[{key:"project",value:function(e,t){return{x:iu(e),y:au(t),z:0}}},{key:"unproject",value:function(e,t){var n=su(e),r=lu(t);return new nu(n,r)}}]),n}(Zd),rp=R(cu),ip=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){var n=(t=R(t))*t,r=n*n;return{x:.5*((e=R(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){e=(2*e-.5)*Math.PI;var n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,a=n*n;do{var o=(a=n*n)*a;n=$(n-(i=(n*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))),-rp,rp)}while(Math.abs(i)>1e-6&&--r>0);var s=$(O(e/(.8707+(a=n*n)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),l=O(n);return new nu(s,l)}}]),n}(Zd),ap=R(cu),op=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"project",value:function(e,t){t=R(t),e=R(e);var n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),a=Math.sin(i)/i,o=.5*(e*r+2*n*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}},{key:"unproject",value:function(e,t){var n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25,a=1e-6,o=0,s=0;do{var l=Math.cos(r),u=Math.sin(r),c=2*u*l,h=u*u,f=l*l,d=Math.cos(n/2),p=Math.sin(n/2),m=2*d*p,v=p*p,g=1-f*d*d,y=g?1/g:0,_=g?Math.acos(l*d)*Math.sqrt(1/g):0,x=.5*(2*_*l*p+2*n/Math.PI)-e,b=.5*(_*u+r)-t,w=.5*y*(f*v+_*l*d*h)+1/Math.PI,k=y*(m*c/4-_*u*p),E=.125*y*(c*p-_*u*f*m),S=.5*y*(h*d+_*v*l)+.5,T=k*E-S*w;s=(x*E-b*w)/T,n=$(n-(o=(b*k-x*S)/T),-Math.PI,Math.PI),r=$(r-s,-ap,ap)}while((Math.abs(o)>a||Math.abs(s)>a)&&--i>0);return new nu(O(n),O(r))}}]),n}(Zd),sp=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).center=e.center||[0,0],r.parallels=e.parallels||[0,0],r.cosPhi=Math.max(.01,Math.cos(R(r.parallels[0]))),r.scale=1/(2*Math.max(Math.PI*r.cosPhi,1/r.cosPhi)),r.wrap=!0,r.supportsWorldCopies=!0,r}return p(n,[{key:"project",value:function(e,t){var n=this.scale,r=this.cosPhi;return{x:R(e)*r*n+.5,y:-Math.sin(R(t))/r*n+.5,z:0}}},{key:"unproject",value:function(e,t){var n=this.scale,r=this.cosPhi,i=-(t-.5)/n,a=$(O((e-.5)/n)/r,-180,180),o=Math.asin($(i*r,-1,1)),s=$(O(o),-cu,cu);return new nu(a,s)}}]),n}(Zd),lp=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).requiresDraping=!0,r.supportsWorldCopies=!1,r.supportsFog=!0,r.zAxisUnit="pixels",r.unsupportedLayers=["debug"],r.range=[3,5],r}return p(n,[{key:"projectTilePoint",value:function(e,t,n){var r=$l(e,t,n);return Js(r,r,Zl(zl(n))),{x:r[0],y:r[1],z:r[2]}}},{key:"locationPoint",value:function(e,t){var n=Fl(t.lat,t.lng),r=Xs([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Gs(n,n,r,ou(1,0)*ws*i);var a=Ms(new Float64Array(16));return Ps(a,e.pixelMatrix,e.globeMatrix),Js(n,n,a),new z(n[0],n[1])}},{key:"pixelsPerMeter",value:function(e,t){return ou(1,0)*t}},{key:"pixelSpaceConversion",value:function(e,t,n){var r=ou(1,e)*t,i=Wn(ou(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}},{key:"createTileMatrix",value:function(e,t,n){var r=Hl(zl(n.canonical));return Ps(new Float64Array(16),e.globeMatrix,r)}},{key:"createInversionMatrix",value:function(e,t){var n=e.center,r=Zl(zl(t));return Ds(r,r,R(n.lng)),Ls(r,r,R(n.lat)),zs(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}},{key:"pointCoordinate",value:function(e,t,n,r){return Al(e,t,n,!0)||new fu(0,0)}},{key:"pointCoordinate3D",value:function(e,t,n){var r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}},{key:"isPointAboveHorizon",value:function(e,t){return!Al(e,t.x,t.y,!1)}},{key:"farthestPixelDistance",value:function(e){var t=function(e,t){var n,r=e.cameraToCenterDistance,i=e._centerAltitude*t,a=e._camera,o=e._camera.forward(),s=Vs([],qs([],o,-r),[0,0,i]),l=e.worldSize/(2*Math.PI),u=[0,0,-l],c=e.width/e.height,h=Math.tan(e.fovAboveCenter),f=qs([],a.up(),h),d=qs([],a.right(),h*c),p=Xs([],Vs([],Vs([],o,f),d)),m=[];if(new ml(s,p).closestPointOnSphere(u,l,m)){var v=Vs([],m,u),g=tl([],v,s);n=Math.cos(e.fovAboveCenter)*Fs(g)}else{var y=tl([],s,u),_=tl([],u,s);Xs(_,_);var x=Fs(y)-l;n=Math.sqrt(x*(x+2*l));var b=Math.acos(n/(l+x))-Math.acos(Ks(o,_));n*=Math.cos(b)}return 1.01*n}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=ql(e.zoom);if(n>0){var r=$d(e,ou(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Wn(t,r+i*(1-Math.cos(a)),Math.pow(n,10))}return t}},{key:"upVector",value:function(e,t,n){return $l(t,n,e,1)}},{key:"upVectorScale",value:function(e){return{metersToTile:Ml(Vl(zl(e)))}}}]),n}(np);function up(e){var t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new np(e);case"equirectangular":return new Jd(e);case"naturalEarth":return new ip(e);case"equalEarth":return new Yd(e);case"winkelTripel":return new op(e);case"albers":return n?new sp(e):new Hd(e);case"lambertConformalConic":return n?new sp(e):new tp(e);case"globe":return new lp(e)}throw new Error("Invalid projection name: ".concat(e.name))}var cp=oh.types,hp=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function fp(e,t,n,r,i,a,o,s,l,u,c,h,f){var d=s?Math.min(Rd,Math.round(s[0])):0,p=s?Math.min(Rd,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),a,o,(d<<1)+(l?1:0),p,16*u,16*c,256*h,256*f)}function dp(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,o)}function pp(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function mp(e){var t,n=f(e.sections);try{for(n.s();!(t=n.n()).done;)if(ka(t.value.text))return!0}catch(r){n.e(r)}finally{n.f()}return!1}var vp=function(){function e(t){d(this,e),this.layoutVertexArray=new uo,this.indexArray=new yo,this.programConfigurations=t,this.segments=new bs,this.dynamicLayoutVertexArray=new ao,this.opacityVertexArray=new ho,this.placedSymbolArray=new Po,this.globeExtVertexArray=new co}return p(e,[{key:"isEmpty",value:function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}},{key:"upload",value:function(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Vh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Zh.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,hp,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Uh.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}]),e}();ua(vp,"SymbolBuffers");var gp=function(){function e(t,n,r){d(this,e),this.layoutVertexArray=new t,this.layoutAttributes=n,this.indexArray=new r,this.segments=new bs,this.collisionVertexArray=new vo,this.collisionVertexArrayExt=new go}return p(e,[{key:"upload",value:function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Hh.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Wh.members,!0)}},{key:"destroy",value:function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}]),e}();ua(gp,"CollisionBuffers");var yp=function(){function e(t){d(this,e),this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((function(e){return e.id})),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ms([]),this.placementViewportMatrix=Ms([]);var n=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yh(this.zoom,n["text-size"]),this.iconSizeData=Yh(this.zoom,n["icon-size"]);var r=this.layers[0].layout,i=r.get("symbol-sort-key"),a=r.get("symbol-z-order");this.canOverlap=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==a&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===a||"auto"===a&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=r.get("text-writing-mode").map((function(e){return Nf[e]})),this.stateDependentLayerIds=this.layers.filter((function(e){return e.isStateDependent()})).map((function(e){return e.id})),this.sourceID=t.sourceID,this.projection=t.projection}return p(e,[{key:"createArrays",value:function(){this.text=new vp(new hs(this.layers,this.zoom,(function(e){return/^text/.test(e)}))),this.icon=new vp(new hs(this.layers,this.zoom,(function(e){return/^icon/.test(e)}))),this.glyphOffsetArray=new Lo,this.lineVertexArray=new Do,this.symbolInstances=new zo}},{key:"calculateGlyphDependencies",value:function(e,t,n,r,i){for(var a=0;a<e.length;a++)if(t[e.charCodeAt(a)]=!0,r&&i){var o=nf[e.charAt(a)];o&&(t[o.charCodeAt(0)]=!0)}}},{key:"populate",value:function(e,t,n,r){var i=this,a=this.layers[0],o=a.layout,s="globe"===this.projection.name,l=o.get("text-font"),u=o.get("text-field"),c=o.get("icon-image"),h=("constant"!==u.value.kind||u.value.value instanceof Gt&&!u.value.value.isEmpty()||u.value.value.toString().length>0)&&("constant"!==l.value.kind||l.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=o.get("symbol-sort-key");if(this.features=[],h||d){var m,v=t.iconDependencies,g=t.glyphDependencies,y=t.availableImages,_=new Oa(this.zoom),x=f(e);try{var b=function(){var e,t,u=m.value,c=u.feature,x=u.id,b=u.index,w=u.sourceLayerIndex,k=a._featureFilter.needGeometry,E=bu(c,k);if(!a._featureFilter.filter(_,E,n))return"continue";if(k||(E.geometry=xu(c,n,r)),s&&1!==c.type&&n.z<=5)for(var S=E.geometry,T=.98078528056,C=function(e,t){return Ks($l(e.x,e.y,n,1),$l(t.x,t.y,n,1))<T},M=0;M<S.length;M++)S[M]=vu(S[M],C);if(h){var A=a.getValueAndResolveTokens("text-field",E,n,y),P=Gt.factory(A);mp(P)&&(i.hasRTLText=!0),(!i.hasRTLText||"unavailable"===La()||i.hasRTLText&&Ra.isParsed())&&(e=tf(P,a,E))}if(d){var I=a.getValueAndResolveTokens("icon-image",E,n,y);t=I instanceof Xt?I:Xt.fromString(I)}if(!e&&!t)return"continue";var z=i.sortFeaturesByKey?p.evaluate(E,{},n):void 0;if(i.features.push({id:x,text:e,icon:t,index:b,sourceLayerIndex:w,geometry:E.geometry,properties:c.properties,type:cp[c.type],sortKey:z}),t&&(v[t.name]=!0),e){var L=l.evaluate(E,{},n).join(","),D="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");i.allowVerticalPlacement=i.writingModes&&i.writingModes.indexOf(Nf.vertical)>=0;var R,O=f(e.sections);try{for(O.s();!(R=O.n()).done;){var j=R.value;if(j.image)v[j.image.name]=!0;else{var N=va(e.toString()),B=j.fontStack||L,F=g[B]=g[B]||{};i.calculateGlyphDependencies(j.text,F,D,i.allowVerticalPlacement,N)}}}catch($){O.e($)}finally{O.f()}}};for(x.s();!(m=x.n()).done;)b()}catch(w){x.e(w)}finally{x.f()}"line"===o.get("symbol-placement")&&(this.features=function(e){var t={},n={},r=[],i=0;function a(t){r.push(e[t]),i++}function o(e,t,i){var a=n[e];return delete n[e],n[t]=a,r[a].geometry[0].pop(),r[a].geometry[0]=r[a].geometry[0].concat(i[0]),a}function s(e,n,i){var a=t[n];return delete t[n],t[e]=a,r[a].geometry[0].shift(),r[a].geometry[0]=i[0].concat(r[a].geometry[0]),a}function l(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(var u=0;u<e.length;u++){var c=e[u],h=c.geometry,f=c.text?c.text.toString():null;if(f){var d=l(f,h),p=l(f,h,!0);if(d in n&&p in t&&n[d]!==t[p]){var m=s(d,p,h),v=o(d,p,r[m].geometry);delete t[d],delete n[p],n[l(f,r[v].geometry,!0)]=v,r[m].geometry=null}else d in n?o(d,p,h):p in t?s(d,p,h):(a(u),t[d]=i-1,n[p]=i-1)}else a(u)}return r.filter((function(e){return e.geometry}))}(this.features)),this.sortFeaturesByKey&&this.features.sort((function(e,t){return e.sortKey-t.sortKey}))}}},{key:"update",value:function(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}},{key:"isEmpty",value:function(){return 0===this.symbolInstances.length&&!this.hasRTLText}},{key:"uploadPending",value:function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}},{key:"upload",value:function(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}},{key:"destroyDebugData",value:function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}},{key:"getProjection",value:function(){return this.projectionInstance||(this.projectionInstance=up(this.projection)),this.projectionInstance}},{key:"destroy",value:function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}},{key:"addToLineVertexArray",value:function(e,t){var n=this.lineVertexArray.length;if(void 0!==e.segment){var r,i=f(t);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=a.x,s=a.y;this.lineVertexArray.emplaceBack(o,s)}}catch(l){i.e(l)}finally{i.f()}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}},{key:"addSymbols",value:function(e,t,n,r,i,a,o,s,l,u,c,f,d,p){for(var m=e.indexArray,v=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,v,m,this.canOverlap?a.sortKey:void 0),_=this.glyphOffsetArray.length,x=y.vertexLength,b=this.allowVerticalPlacement&&o===Nf.vertical?Math.PI/2:0,w=a.text&&a.text.sections,k=0;k<t.length;k++){var E=t[k],S=E.tl,T=E.tr,C=E.bl,M=E.br,A=E.tex,P=E.pixelOffsetTL,I=E.pixelOffsetBR,z=E.minFontScaleX,L=E.minFontScaleY,D=E.glyphOffset,R=E.isSDF,O=E.sectionIndex,j=y.vertexLength,N=D[1];if(fp(v,l.x,l.y,S.x,N+S.y,A.x,A.y,n,R,P.x,P.y,z,L),fp(v,l.x,l.y,T.x,N+T.y,A.x+A.w,A.y,n,R,I.x,P.y,z,L),fp(v,l.x,l.y,C.x,N+C.y,A.x,A.y+A.h,n,R,P.x,I.y,z,L),fp(v,l.x,l.y,M.x,N+M.y,A.x+A.w,A.y+A.h,n,R,I.x,I.y,z,L),s){var B=s.anchor,F=B.x,$=B.y,V=B.z,U=h(s.up,3),Z=U[0],H=U[1],W=U[2];dp(g,F,$,V,Z,H,W),dp(g,F,$,V,Z,H,W),dp(g,F,$,V,Z,H,W),dp(g,F,$,V,Z,H,W),pp(e.dynamicLayoutVertexArray,F,$,V,b)}else pp(e.dynamicLayoutVertexArray,l.x,l.y,l.z,b);m.emplaceBack(j,j+1,j+2),m.emplaceBack(j+1,j+2,j+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(D[0]),k!==t.length-1&&O===t[k+1].sectionIndex||e.programConfigurations.populatePaintArrays(v.length,a,a.index,{},d,p,w&&w[O])}var q=s?s.anchor:l;e.placedSymbolArray.emplaceBack(q.x,q.y,q.z,l.x,l.y,_,this.glyphOffsetArray.length-_,x,u,c,l.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],o,0,!1,0,f,0)}},{key:"_commitLayoutVertex",value:function(e,t,n,r,i,a,o){e.emplaceBack(t,n,r,i,a,Math.round(o.x),Math.round(o.y))}},{key:"_addCollisionDebugVertices",value:function(e,t,n,r,i,a,o){for(var s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,u=o.tileAnchorX,c=o.tileAnchorY,h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new z(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new z(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new z(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,a,u,c,new z(e.x1,e.y2)),s.vertexLength+=4;var f=n.indexArray;f.emplaceBack(l,l+1),f.emplaceBack(l+1,l+2),f.emplaceBack(l+2,l+3),f.emplaceBack(l+3,l),s.primitiveLength+=4}},{key:"_addTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(s,l,this.textCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"_addIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(s,l,this.iconCollisionBox,s.projectedAnchorX,s.projectedAnchorY,s.projectedAnchorZ,a)}}},{key:"generateCollisionDebugBuffers",value:function(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gp(po,qh.members,Eo),this.iconCollisionBox=new gp(po,qh.members,Eo);for(var n=Qh(this.iconSizeData,e),r=Qh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}},{key:"getSymbolInstanceTextSize",value:function(e,t,n,r){var i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),a=Jh(this.textSizeData,e,i)/Xh;return this.tilePixelRatio*a}},{key:"getSymbolInstanceIconSize",value:function(e,t,n){var r=this.icon.placedSymbolArray.get(n),i=Jh(this.iconSizeData,e,r);return this.tilePixelRatio*i}},{key:"_commitDebugCollisionVertexUpdate",value:function(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}},{key:"_updateTextDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"_updateIconDebugCollisionBoxes",value:function(e,t,n,r,i,a){for(var o=r;o<i;o++){var s=n.get(o),l=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,l,s.padding)}}},{key:"updateCollisionDebugBuffers",value:function(e,t){if(this.hasDebugData()){this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();for(var n=Qh(this.iconSizeData,e),r=Qh(this.textSizeData,e),i=0;i<this.symbolInstances.length;i++){var a=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(r,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}}},{key:"_deserializeCollisionBoxesForSymbol",value:function(e,t,n,r,i,a,o,s,l){var u={};if(t<n){var c=e.get(t),h=c.x1,f=c.y1,d=c.x2,p=c.y2,m=c.padding,v=c.projectedAnchorX,g=c.projectedAnchorY,y=c.projectedAnchorZ,_=c.tileAnchorX,x=c.tileAnchorY,b=c.featureIndex;u.textBox={x1:h,y1:f,x2:d,y2:p,padding:m,projectedAnchorX:v,projectedAnchorY:g,projectedAnchorZ:y,tileAnchorX:_,tileAnchorY:x},u.textFeatureIndex=b}if(r<i){var w=e.get(r),k=w.x1,E=w.y1,S=w.x2,T=w.y2,C=w.padding,M=w.projectedAnchorX,A=w.projectedAnchorY,P=w.projectedAnchorZ,I=w.tileAnchorX,z=w.tileAnchorY,L=w.featureIndex;u.verticalTextBox={x1:k,y1:E,x2:S,y2:T,padding:C,projectedAnchorX:M,projectedAnchorY:A,projectedAnchorZ:P,tileAnchorX:I,tileAnchorY:z},u.verticalTextFeatureIndex=L}if(a<o){var D=e.get(a),R=D.x1,O=D.y1,j=D.x2,N=D.y2,B=D.padding,F=D.projectedAnchorX,$=D.projectedAnchorY,V=D.projectedAnchorZ,U=D.tileAnchorX,Z=D.tileAnchorY,H=D.featureIndex;u.iconBox={x1:R,y1:O,x2:j,y2:N,padding:B,projectedAnchorX:F,projectedAnchorY:$,projectedAnchorZ:V,tileAnchorX:U,tileAnchorY:Z},u.iconFeatureIndex=H}if(s<l){var W=e.get(s),q=W.x1,G=W.y1,X=W.x2,K=W.y2,Y=W.padding,J=W.projectedAnchorX,Q=W.projectedAnchorY,ee=W.projectedAnchorZ,te=W.tileAnchorX,ne=W.tileAnchorY,re=W.featureIndex;u.verticalIconBox={x1:q,y1:G,x2:X,y2:K,padding:Y,projectedAnchorX:J,projectedAnchorY:Q,projectedAnchorZ:ee,tileAnchorX:te,tileAnchorY:ne},u.verticalIconFeatureIndex=re}return u}},{key:"deserializeCollisionBoxes",value:function(e){this.collisionArrays=[];for(var t=0;t<this.symbolInstances.length;t++){var n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}},{key:"hasTextData",value:function(){return this.text.segments.get().length>0}},{key:"hasIconData",value:function(){return this.icon.segments.get().length>0}},{key:"hasDebugData",value:function(){return this.textCollisionBox&&this.iconCollisionBox}},{key:"hasTextCollisionBoxData",value:function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}},{key:"hasIconCollisionBoxData",value:function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}},{key:"addIndicesForPlacedSymbol",value:function(e,t){for(var n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs,i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}},{key:"getSortedSymbolIndexes",value:function(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var t=Math.sin(e),n=Math.cos(e),r=[],i=[],a=[],o=0;o<this.symbolInstances.length;++o){a.push(o);var s=this.symbolInstances.get(o);r.push(0|Math.round(t*s.tileAnchorX+n*s.tileAnchorY)),i.push(s.featureIndex)}return a.sort((function(e,t){return r[e]-r[t]||i[t]-i[e]})),a}},{key:"addToSortKeyRanges",value:function(e,t){var n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}},{key:"sortFeatures",value:function(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];var t,n=f(this.symbolInstanceIndexes);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this.symbolInstances.get(r);this.featureSortOrder.push(i.featureIndex);var a=i.rightJustifiedTextSymbolIndex,o=i.centerJustifiedTextSymbolIndex,s=i.leftJustifiedTextSymbolIndex,l=i.verticalPlacedTextSymbolIndex,u=i.placedIconSymbolIndex,c=i.verticalPlacedIconSymbolIndex;a>=0&&this.addIndicesForPlacedSymbol(this.text,a),o>=0&&o!==a&&this.addIndicesForPlacedSymbol(this.text,o),s>=0&&s!==o&&s!==a&&this.addIndicesForPlacedSymbol(this.text,s),l>=0&&this.addIndicesForPlacedSymbol(this.text,l),u>=0&&this.addIndicesForPlacedSymbol(this.icon,u),c>=0&&this.addIndicesForPlacedSymbol(this.icon,c)}}catch(h){n.e(h)}finally{n.f()}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}]),e}();ua(yp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),yp.MAX_GLYPHS=65535,yp.addDynamicAttributes=pp;var _p=new Ga({"symbol-placement":new Ha(pt.layout_symbol["symbol-placement"]),"symbol-spacing":new Ha(pt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ha(pt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Wa(pt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ha(pt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ha(pt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ha(pt.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ha(pt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ha(pt.layout_symbol["icon-rotation-alignment"]),"icon-size":new Wa(pt.layout_symbol["icon-size"]),"icon-text-fit":new Ha(pt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ha(pt.layout_symbol["icon-text-fit-padding"]),"icon-image":new Wa(pt.layout_symbol["icon-image"]),"icon-rotate":new Wa(pt.layout_symbol["icon-rotate"]),"icon-padding":new Ha(pt.layout_symbol["icon-padding"]),"icon-keep-upright":new Ha(pt.layout_symbol["icon-keep-upright"]),"icon-offset":new Wa(pt.layout_symbol["icon-offset"]),"icon-anchor":new Wa(pt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ha(pt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ha(pt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ha(pt.layout_symbol["text-rotation-alignment"]),"text-field":new Wa(pt.layout_symbol["text-field"]),"text-font":new Wa(pt.layout_symbol["text-font"]),"text-size":new Wa(pt.layout_symbol["text-size"]),"text-max-width":new Wa(pt.layout_symbol["text-max-width"]),"text-line-height":new Wa(pt.layout_symbol["text-line-height"]),"text-letter-spacing":new Wa(pt.layout_symbol["text-letter-spacing"]),"text-justify":new Wa(pt.layout_symbol["text-justify"]),"text-radial-offset":new Wa(pt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ha(pt.layout_symbol["text-variable-anchor"]),"text-anchor":new Wa(pt.layout_symbol["text-anchor"]),"text-max-angle":new Ha(pt.layout_symbol["text-max-angle"]),"text-writing-mode":new Ha(pt.layout_symbol["text-writing-mode"]),"text-rotate":new Wa(pt.layout_symbol["text-rotate"]),"text-padding":new Ha(pt.layout_symbol["text-padding"]),"text-keep-upright":new Ha(pt.layout_symbol["text-keep-upright"]),"text-transform":new Wa(pt.layout_symbol["text-transform"]),"text-offset":new Wa(pt.layout_symbol["text-offset"]),"text-allow-overlap":new Ha(pt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ha(pt.layout_symbol["text-ignore-placement"]),"text-optional":new Ha(pt.layout_symbol["text-optional"])}),xp={paint:new Ga({"icon-opacity":new Wa(pt.paint_symbol["icon-opacity"]),"icon-color":new Wa(pt.paint_symbol["icon-color"]),"icon-halo-color":new Wa(pt.paint_symbol["icon-halo-color"]),"icon-halo-width":new Wa(pt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Wa(pt.paint_symbol["icon-halo-blur"]),"icon-translate":new Ha(pt.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ha(pt.paint_symbol["icon-translate-anchor"]),"text-opacity":new Wa(pt.paint_symbol["text-opacity"]),"text-color":new Wa(pt.paint_symbol["text-color"],{runtimeType:Tt,getOverride:function(e){return e.textColor},hasOverride:function(e){return!!e.textColor}}),"text-halo-color":new Wa(pt.paint_symbol["text-halo-color"]),"text-halo-width":new Wa(pt.paint_symbol["text-halo-width"]),"text-halo-blur":new Wa(pt.paint_symbol["text-halo-blur"]),"text-translate":new Ha(pt.paint_symbol["text-translate"]),"text-translate-anchor":new Ha(pt.paint_symbol["text-translate-anchor"])}),layout:_p},bp=function(){function e(t){d(this,e),this.type=t.property.overrides?t.property.overrides.runtimeType:wt,this.defaultValue=t}return p(e,[{key:"evaluate",value:function(e){if(e.formattedSection){var t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}},{key:"eachChild",value:function(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}},{key:"outputDefined",value:function(){return!1}},{key:"serialize",value:function(){return null}}]),e}();ua(bp,"FormatSectionOverride",{omit:["defaultValue"]});var wp=function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,xp)}return p(n,[{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));var r=this.layout.get("text-writing-mode");if(r){var i,a=[],l=f(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;a.indexOf(u)<0&&a.push(u)}}catch(c){l.e(c)}finally{l.f()}this.layout._values["text-writing-mode"]=a}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}},{key:"getValueAndResolveTokens",value:function(e,t,n,r){var i=this.layout.get(e).evaluate(t,{},n,r),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||ui(a.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,(function(t,n){return n in e?String(e[n]):""}))}(t.properties,i)}},{key:"createBucket",value:function(e){return new yp(e)}},{key:"queryRadius",value:function(){return 0}},{key:"queryIntersectsFeature",value:function(){return!1}},{key:"_setPaintOverrides",value:function(){var e,t=f(xp.paint.overridableProperties);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(n.hasPaintOverride(this.layout,r)){var i=this.paint.get(r),a=new bp(i),o=new li(a,i.property.specification),s=null;s="constant"===i.value.kind||"source"===i.value.kind?new hi("source",o):new fi("composite",o,i.value.zoomStops,i.value._interpolationType),this.paint._values[r]=new Ua(i.property,s,i.parameters)}}}catch(l){t.e(l)}finally{t.f()}}},{key:"_handleOverridablePaintPropertyUpdate",value:function(e,t,r){return!(!this.layout||t.isDataDriven()||r.isDataDriven())&&n.hasPaintOverride(this.layout,e)}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}}],[{key:"hasPaintOverride",value:function(e,t){var n=e.get("text-field"),r=xp.paint.properties[t],i=!1,a=function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(r.overrides&&r.overrides.hasOverride(a))return void(i=!0)}}catch(o){n.e(o)}finally{n.f()}};if("constant"===n.value.kind&&n.value.value instanceof Gt)a(n.value.value.sections);else if("source"===n.value.kind){var o=function e(t){i||(t instanceof tn&&Jt(t.value)===Pt?a(t.value.sections):t instanceof sn?a(t.sections):t.eachChild(e))},s=n.value;s._styleExpression&&o(s._styleExpression.expression)}return i}}]),n}(ys),kp={paint:new Ga({"background-color":new Ha(pt.paint_background["background-color"]),"background-pattern":new Ha(pt.paint_background["background-pattern"]),"background-opacity":new Ha(pt.paint_background["background-opacity"])})},Ep={paint:new Ga({"raster-opacity":new Ha(pt.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ha(pt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ha(pt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ha(pt.paint_raster["raster-brightness-max"]),"raster-saturation":new Ha(pt.paint_raster["raster-saturation"]),"raster-contrast":new Ha(pt.paint_raster["raster-contrast"]),"raster-resampling":new Ha(pt.paint_raster["raster-resampling"]),"raster-fade-duration":new Ha(pt.paint_raster["raster-fade-duration"])})},Sp=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e,{})).implementation=e,r}return p(n,[{key:"is3D",value:function(){return"3d"===this.implementation.renderingMode}},{key:"hasOffscreenPass",value:function(){return void 0!==this.implementation.prerender}},{key:"isLayerDraped",value:function(){return void 0!==this.implementation.renderToTile}},{key:"shouldRedrape",value:function(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}},{key:"recalculate",value:function(){}},{key:"updateTransitions",value:function(){}},{key:"hasTransition",value:function(){return!1}},{key:"serialize",value:function(){}},{key:"onAdd",value:function(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}},{key:"onRemove",value:function(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}]),n}(ys),Tp={paint:new Ga({"sky-type":new Ha(pt.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ha(pt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ha(pt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ha(pt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ha(pt.paint_sky["sky-gradient-radius"]),"sky-gradient":new qa(pt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ha(pt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ha(pt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ha(pt.paint_sky["sky-opacity"])})};function Cp(e,t,n){var r=[0,0,1],i=ll([]);return cl(i,i,n?-R(e)+Math.PI:R(e)),ul(i,i,-R(t)),Qs(r,r,i),Xs(r,r)}for(var Mp={circle:function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,Vu)}return p(n,[{key:"createBucket",value:function(e){return new Eu(e)}},{key:"queryRadius",value:function(e){var t=e;return ju("circle-radius",this,t)+ju("circle-stroke-width",this,t)+Nu(this.paint.get("circle-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var l=Fu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return Uu(e,r,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,u)}},{key:"getProgramIds",value:function(){return["circle"]}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}}]),n}(ys),heatmap:function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e,ec))._updateColorRamp(),r}return p(n,[{key:"createBucket",value:function(e){return new Gu(e)}},{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"heatmap-color"===e&&this._updateColorRamp()}},{key:"_updateColorRamp",value:function(){this.colorRamp=tc({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}},{key:"resize",value:function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}},{key:"queryRadius",value:function(e){return ju("heatmap-radius",this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s){var l=this.paint.get("heatmap-radius").evaluate(t,n);return Uu(e,r,a,o,s,!0,!0,new z(0,0),l)}},{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["heatmap","heatmapTexture"]}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}}]),n}(ys),hillshade:function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,nc)}return p(n,[{key:"hasOffscreenPass",value:function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}},{key:"getProgramIds",value:function(){return["hillshade","hillshadePrepare"]}}]),n}(ys),fill:function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,Vc)}return p(n,[{key:"getProgramIds",value:function(){var e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t);var r=this.paint._values["fill-outline-color"];"constant"===r.value.kind&&void 0===r.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}},{key:"createBucket",value:function(e){return new Fc(e)}},{key:"queryRadius",value:function(){return Nu(this.paint.get("fill-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){return!e.queryGeometry.isAboveHorizon&&Cu(Bu(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),r)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ys),"fill-extrusion":function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,kh)}return p(n,[{key:"createBucket",value:function(e){return new dh(e)}},{key:"queryRadius",value:function(){return Nu(this.paint.get("fill-extrusion-translate"))}},{key:"is3D",value:function(){return!0}},{key:"getProgramIds",value:function(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a,o,s,l){var u=Fu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],m=s&&a.elevation,v=a.elevation?a.elevation.exaggeration():1,g=e.tile.getBucket(this);if(m&&g instanceof dh){var y=g.centroidVertexArray,_=l+1;_<y.length&&(p[0]=y.geta_centroid_pos0(_),p[1]=y.geta_centroid_pos1(_))}if(0===p[0]&&1===p[1])return!1;"globe"===a.projection.name&&(r=bh([r],[new z(0,0),new z(ws,ws)],e.tileID.canonical).map((function(e){return e.polygon})).flat());var x=function(e,t,n,r,i,a,o,s,l,u,c){return"globe"===e.projection.name?function(e,t,n,r,i,a,o,s,l,u,c){var h=[],d=[],p=e.projection.upVectorScale(c,e.center.lat,e.worldSize).metersToTile,m=[0,0,0,1],v=[0,0,0,1],g=function(e,t,n,r){e[0]=t,e[1]=n,e[2]=r,e[3]=1},y=xh();n>0&&(n+=y),r+=y;var _,x=f(t);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=[],E=[],S=f(w);try{for(S.s();!(b=S.n()).done;){var T=b.value,C=T.x+i.x,M=T.y+i.y,A=e.projection.projectTilePoint(C,M,c),P=e.projection.upVector(c,T.x,T.y),I=n,z=r;if(o){var L=zh(C,M,n,r,o,s,l,u);I+=L.base,z+=L.top}0!==n?g(m,A.x+P[0]*p*I,A.y+P[1]*p*I,A.z+P[2]*p*I):g(m,A.x,A.y,A.z),g(v,A.x+P[0]*p*z,A.y+P[1]*p*z,A.z+P[2]*p*z),Js(m,m,a),Js(v,v,a),k.push(new Ah(m[0],m[1],m[2])),E.push(new Ah(v[0],v[1],v[2]))}}catch(D){S.e(D)}finally{S.f()}h.push(k),d.push(E)}}catch(D){x.e(D)}finally{x.f()}return[h,d]}(e,t,n,r,i,a,o,s,l,u,c):o?function(e,t,n,r,i,a,o,s,l){var u,c=[],h=[],d=[0,0,0,1],p=f(e);try{for(p.s();!(u=p.n()).done;){var m,v=u.value,g=[],y=[],_=f(v);try{for(_.s();!(m=_.n()).done;){var x=m.value,b=x.x+r.x,w=x.y+r.y,k=zh(b,w,t,n,a,o,s,l);d[0]=b,d[1]=w,d[2]=k.base,d[3]=1,ol(d,d,i),d[3]=Math.max(d[3],1e-5);var E=new Ah(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=b,d[1]=w,d[2]=k.top,d[3]=1,ol(d,d,i),d[3]=Math.max(d[3],1e-5);var S=new Ah(d[0]/d[3],d[1]/d[3],d[2]/d[3]);g.push(E),y.push(S)}}catch(T){_.e(T)}finally{_.f()}c.push(g),h.push(y)}}catch(T){p.e(T)}finally{p.f()}return[c,h]}(t,n,r,i,a,o,s,l,u):function(e,t,n,r,i){var a,o=[],s=[],l=i[8]*t,u=i[9]*t,c=i[10]*t,h=i[11]*t,d=i[8]*n,p=i[9]*n,m=i[10]*n,v=i[11]*n,g=f(e);try{for(g.s();!(a=g.n()).done;){var y,_=a.value,x=[],b=[],w=f(_);try{for(w.s();!(y=w.n()).done;){var k=y.value,E=k.x+r.x,S=k.y+r.y,T=i[0]*E+i[4]*S+i[12],C=i[1]*E+i[5]*S+i[13],M=i[2]*E+i[6]*S+i[14],A=i[3]*E+i[7]*S+i[15],P=T+l,I=C+u,z=M+c,L=Math.max(A+h,1e-5),D=T+d,R=C+p,O=M+m,j=Math.max(A+v,1e-5);x.push(new Ah(P/L,I/L,z/L)),b.push(new Ah(D/j,R/j,O/j))}}catch(N){w.e(N)}finally{w.f()}o.push(x),s.push(b)}}catch(N){g.e(N)}finally{g.f()}return[o,s]}(t,n,r,i,a)}(a,r,d,c,u,o,m?s:null,p,v,a.center.lat,e.tileID.canonical),b=h(x,2),w=b[0],k=b[1],E=e.queryGeometry;return function(e,t,n){var r=1/0;Cu(n,t)&&(r=Ih(n,t[0]));for(var i=0;i<t.length;i++)for(var a=t[i],o=e[i],s=0;s<a.length-1;s++){var l=a[s],u=[l,a[s+1],o[s+1],o[s],l];Su(n,u)&&(r=Math.min(r,Ih(n,u)))}return r!==1/0&&r}(w,k,E.isPointQuery()?E.screenBounds:E.screenGeometry)}}]),n}(ys),line:function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e,Bh)).gradientVersion=0,r}return p(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){if("line-gradient"===e){var t=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=t._styleExpression&&t._styleExpression.expression instanceof Hn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}},{key:"gradientExpression",value:function(){return this._transitionablePaint._values["line-gradient"].value.expression}},{key:"widthExpression",value:function(){return this._transitionablePaint._values["line-width"].value.expression}},{key:"recalculate",value:function(e,t){o(s(n.prototype),"recalculate",this).call(this,e,t),this.paint._values["line-floorwidth"]=Fh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}},{key:"createBucket",value:function(e){return new jh(e)}},{key:"getProgramIds",value:function(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}},{key:"getProgramConfiguration",value:function(e){return new cs(this,e)}},{key:"queryRadius",value:function(e){var t=e,n=$h(ju("line-width",this,t),ju("line-gap-width",this,t)),r=ju("line-offset",this,t);return n/2+Math.abs(r)+Nu(this.paint.get("line-translate"))}},{key:"queryIntersectsFeature",value:function(e,t,n,r,i,a){if(e.queryGeometry.isAboveHorizon)return!1;var o=Bu(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*$h(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(r=function(e,t){for(var n=[],r=new z(0,0),i=0;i<e.length;i++){for(var a=e[i],o=[],s=0;s<a.length;s++){var l=a[s],u=a[s+1],c=0===s?r:l.sub(a[s-1])._unit()._perp(),h=s===a.length-1?r:u.sub(l)._unit()._perp(),f=c._add(h)._unit();f._mult(1/(f.x*h.x+f.y*h.y)),o.push(f._mult(t)._add(l))}n.push(o)}return n}(r,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];if(e.length>=3)for(var a=0;a<i.length;a++)if(Du(e,i[a]))return!0;if(Mu(e,i,n))return!0}return!1}(o,r,s)}},{key:"isTileClipped",value:function(){return!0}}]),n}(ys),symbol:wp,background:function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,kp)}return p(n,[{key:"getProgramIds",value:function(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}}]),n}(ys),raster:function(e){m(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e,Ep)}return p(n,[{key:"getProgramIds",value:function(){return["raster"]}}]),n}(ys),sky:function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e,Tp))._updateColorRamp(),r}return p(n,[{key:"_handleSpecialPaintPropertyUpdate",value:function(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}},{key:"_updateColorRamp",value:function(){this.colorRamp=tc({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}},{key:"needsSkyboxCapture",value:function(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){var t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}},{key:"getCenter",value:function(e,t){if("atmosphere"===this.paint.get("sky-type")){var n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,a=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&ie("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Cp(a.azimuthal,90-a.polar,t):Cp(n[0],90-n[1],t)}var o=this.paint.get("sky-gradient-center");return Cp(o[0],90-o[1],t)}},{key:"is3D",value:function(){return!1}},{key:"isSky",value:function(){return!0}},{key:"markSkyboxValid",value:function(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}},{key:"hasOffscreenPass",value:function(){return!0}},{key:"getProgramIds",value:function(){var e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}]),n}(ys)},Ap=function(){function e(t,n,r,i){d(this,e),this.context=t,this.format=r,this.texture=t.gl.createTexture(),this.update(n,i)}return p(e,[{key:"update",value:function(e,t,n){var r=e.width,i=e.height,a=this.context,o=a.gl,s=y.HTMLImageElement,l=y.HTMLCanvasElement,u=y.HTMLVideoElement,c=y.ImageData,h=y.ImageBitmap;if(o.bindTexture(o.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA&&(!t||!1!==t.premultiply)),n||this.size&&this.size[0]===r&&this.size[1]===i){var f=n||{x:0,y:0},d=f.x,p=f.y;e instanceof s||e instanceof l||e instanceof u||e instanceof c||h&&e instanceof h?o.texSubImage2D(o.TEXTURE_2D,0,d,p,o.RGBA,o.UNSIGNED_BYTE,e):o.texSubImage2D(o.TEXTURE_2D,0,d,p,r,i,o.RGBA,o.UNSIGNED_BYTE,e.data)}else this.size=[r,i],e instanceof s||e instanceof l||e instanceof u||e instanceof c||h&&e instanceof h?o.texImage2D(o.TEXTURE_2D,0,this.format,this.format,o.UNSIGNED_BYTE,e):o.texImage2D(o.TEXTURE_2D,0,this.format,r,i,0,this.format,o.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}},{key:"bind",value:function(e,t){var n=this.context.gl;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.filter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrap=t)}},{key:"isSizePowerOfTwo",value:function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}},{key:"destroy",value:function(){this.context.gl.deleteTexture(this.texture),this.texture=null}}]),e}(),Pp=function(){function e(t){var n=this;d(this,e),this._callback=t,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){n._triggered=!1,n._callback()})}return p(e,[{key:"trigger",value:function(){var e=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){e._triggered=!1,e._callback()}),0))}},{key:"remove",value:function(){this._channel=void 0,this._callback=function(){}}}]),e}(),Ip=function(){function e(){d(this,e),this.tasks={},this.taskQueue=[],J(["process"],this),this.invoker=new Pp(this.process),this.nextId=0}return p(e,[{key:"add",value:function(e,t){var n=this,r=this.nextId++,i=function(e){var t=e.type,n=e.isSymbolTile,r=e.zoom;return r=r||0,"message"===t?0:"maybePrepare"!==t||n?"parseTile"!==t||n?"parseTile"===t&&n?300-r:"maybePrepare"===t&&n?400-r:500:200-r:100-r}(t);if(0===i){se();try{e()}finally{}return{cancel:function(){}}}return this.tasks[r]={fn:e,metadata:t,priority:i,id:r},this.taskQueue.push(r),this.invoker.trigger(),{cancel:function(){delete n.tasks[r]}}}},{key:"process",value:function(){var e=this;se();try{if(this.taskQueue=this.taskQueue.filter((function(t){return!!e.tasks[t]})),!this.taskQueue.length)return;var t=this.pick();if(null===t)return;var n=this.tasks[t];if(delete this.tasks[t],this.taskQueue.length&&this.invoker.trigger(),!n)return;n.fn()}finally{}}},{key:"pick",value:function(){for(var e=null,t=1/0,n=0;n<this.taskQueue.length;n++){var r=this.tasks[this.taskQueue[n]];r.priority<t&&(t=r.priority,e=n)}if(null===e)return null;var i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}},{key:"remove",value:function(){this.invoker.remove()}}]),e}(),zp=function(){function e(t){d(this,e),this._stringToNumber={},this._numberToString=[];for(var n=0;n<t.length;n++){var r=t[n];this._stringToNumber[r]=n,this._numberToString[n]=r}}return p(e,[{key:"encode",value:function(e){return this._stringToNumber[e]}},{key:"decode",value:function(e){return this._numberToString[e]}}]),e}(),Lp=["tile","layer","source","sourceLayer","state"],Dp=function(){function e(t,n,r,i,a){d(this,e),this.type="Feature",this._vectorTileFeature=t,this._z=n,this._x=r,this._y=i,this.properties=t.properties,this.id=a}return p(e,[{key:"geometry",get:function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry},set:function(e){this._geometry=e}},{key:"toJSON",value:function(){var e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(var t=0,n=Lp;t<n.length;t++){var r=n[t];void 0!==this[r]&&(e[r]=this[r])}return e}}]),e}(),Rp=32,Op=33,jp=new Uint16Array(8184),Np=0;Np<2046;Np++){var Bp=Np+2,Fp=0,$p=0,Vp=0,Up=0,Zp=0,Hp=0;for(1&Bp?Vp=Up=Zp=Rp:Fp=$p=Hp=Rp;(Bp>>=1)>1;){var Wp=Fp+Vp>>1,qp=$p+Up>>1;1&Bp?(Vp=Fp,Up=$p,Fp=Zp,$p=Hp):(Fp=Vp,$p=Up,Vp=Zp,Up=Hp),Zp=Wp,Hp=qp}var Gp=4*Np;jp[Gp+0]=Fp,jp[Gp+1]=$p,jp[Gp+2]=Vp,jp[Gp+3]=Up}var Xp=new Uint16Array(2178),Kp=new Uint8Array(1089),Yp=new Uint16Array(1089);function Jp(e){return 0===e?-.03125:32===e?.03125:0}var Qp=Qa([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),em={type:2,extent:ws,loadGeometry:function(){return[[new z(0,0),new z(ws+1,0),new z(ws+1,ws+1),new z(0,ws+1),new z(0,0)]]}},tm=function(){function e(t,n,r,i,a){d(this,e),this.tileID=t,this.uid=G(),this.uses=0,this.tileSize=n,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=a,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}return p(e,[{key:"registerFadeDuration",value:function(e){var t=e+this.timeAdded;t<lt.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}},{key:"wasRequested",value:function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}},{key:"tileTransform",get:function(){return this._tileTransform||(this._tileTransform=Vd(this.tileID.canonical,this.projection)),this._tileTransform}},{key:"loadVectorData",value:function(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){for(var r in e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){var n={};if(!t)return n;var r,i=f(e);try{var a=function(){var e=r.value,i=e.layerIds.map((function(e){return t.getLayer(e)})).filter(Boolean);if(0!==i.length){e.layers=i,e.stateDependentLayerIds&&(e.stateDependentLayers=e.stateDependentLayerIds.map((function(e){return i.filter((function(t){return t.id===e}))[0]})));var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;n[s.id]=e}}catch(l){o.e(l)}finally{o.f()}}};for(i.s();!(r=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1,this.buckets){var i=this.buckets[r];if(i instanceof yp){if(this.hasSymbolBuckets=!0,!n)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var a in this.buckets){var o=this.buckets[a];if(o instanceof yp&&o.hasRTLText){this.hasRTLText=!0,Ra.isLoading()||Ra.isLoaded()||"deferred"!==La()||Da();break}}for(var s in this.queryPadding=0,this.buckets){var l=this.buckets[s];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(s).queryRadius(l))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Mo}},{key:"unloadVectorData",value:function(){if(this.hasData()){for(var e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}},{key:"getBucket",value:function(e){return this.buckets[e.id]}},{key:"upload",value:function(e){for(var t in this.buckets){var n=this.buckets[t];n.uploadPending()&&n.upload(e)}var r=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ap(e,this.imageAtlas.image,r.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ap(e,this.glyphAtlasImage,r.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Ap(e,this.lineAtlas.image,r.ALPHA),this.lineAtlas.uploaded=!0)}},{key:"prepare",value:function(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}},{key:"queryRenderedFeatures",value:function(e,t,n,r,i,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:o,transform:a,params:i,tileTransform:this.tileTransform},e,t,n):{}}},{key:"querySourceFeatures",value:function(e,t){var n=this.latestFeatureIndex;if(n&&n.rawTileData){var r=n.loadVTLayers(),i=t?t.sourceLayer:"",a=r._geojsonTileLayer||r[i];if(a)for(var o=Si(t&&t.filter),s=this.tileID.canonical,l=s.z,u=s.x,c=s.y,h={z:l,x:u,y:c},f=0;f<a.length;f++){var d=a.feature(f);if(o.needGeometry){var p=bu(d,!0);if(!o.filter(new Oa(this.tileID.overscaledZ),p,this.tileID.canonical))continue}else if(!o.filter(new Oa(this.tileID.overscaledZ),d))continue;var m=n.getId(d,i),v=new Dp(d,l,u,c,m);v.tile=h,e.push(v)}}}},{key:"hasData",value:function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}},{key:"patternsLoaded",value:function(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}},{key:"setExpiryData",value:function(e){var t=this.expirationTime;if(e.cacheControl){var n=le(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var r=Date.now(),i=!1;if(this.expirationTime>r)i=!1;else if(t)if(this.expirationTime<t)i=!0;else{var a=this.expirationTime-t;a?this.expirationTime=r+Math.max(a,3e4):i=!0}else i=!0;i?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}},{key:"getExpiryTimeout",value:function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}},{key:"setFeatureState",value:function(e,t){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(e).length&&t){var n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(var i in this.buckets)if(t.style.hasLayer(i)){var a=this.buckets[i],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],l=e[o];if(s&&l&&0!==Object.keys(l).length){if(a.update(l,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof jh||a instanceof Fc){var u=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&u&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(u.id,this.tileID)}var c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}}}},{key:"holdingForFade",value:function(){return void 0!==this.symbolFadeHoldUntil}},{key:"symbolFadeFinished",value:function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<lt.now()}},{key:"clearFadeHold",value:function(){this.symbolFadeHoldUntil=void 0}},{key:"setHoldDuration",value:function(e){this.symbolFadeHoldUntil=lt.now()+e}},{key:"setTexture",value:function(e,t){var n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Ap(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE))}},{key:"setDependencies",value:function(e,t){var n,r={},i=f(t);try{for(i.s();!(n=i.n()).done;)r[n.value]=!0}catch(a){i.e(a)}finally{i.f()}this.dependencies[e]=r}},{key:"hasDependency",value:function(e,t){var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,a=this.dependencies[i];if(a){var o,s=f(t);try{for(s.s();!(o=s.n()).done;)if(a[o.value])return!0}catch(l){s.e(l)}finally{s.f()}}}}catch(l){r.e(l)}finally{r.f()}return!1}},{key:"clearQueryDebugViz",value:function(){}},{key:"_makeDebugTileBoundsBuffers",value:function(e,t){if(t&&"mercator"!==t.name&&!this._tileDebugBuffer){for(var n=xu(em,this.tileID.canonical,this.tileTransform)[0],r=new to,i=new So,a=0;a<n.length;a++){var o=n[a],s=o.x,l=o.y;r.emplaceBack(s,l),i.emplaceBack(a)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,pl.members),this._tileDebugSegments=bs.simpleSegment(0,0,r.length,i.length)}}},{key:"_makeTileBoundsBuffers",value:function(e,t){if(!this._tileBoundsBuffer&&t&&"mercator"!==t.name){var n,r,i=xu(em,this.tileID.canonical,this.tileTransform)[0];if(this.isRaster){var a=function(e,t){for(var n=Vd(e,t),r=Math.pow(2,e.z),i=0;i<Op;i++)for(var a=0;a<Op;a++){var o=su((e.x+(a+Jp(a))/Rp)/r),s=lu((e.y+(i+Jp(i))/Rp)/r),l=t.project(o,s),u=i*Op+a;Xp[2*u+0]=Math.round((l.x*n.scale-n.x)*ws),Xp[2*u+1]=Math.round((l.y*n.scale-n.y)*ws)}Kp.fill(0),Yp.fill(0);for(var c=2045;c>=0;c--){var h=4*c,f=jp[h+0],d=jp[h+1],p=jp[h+2],m=jp[h+3],v=f+p>>1,g=d+m>>1,y=v+g-d,_=g+f-v,x=d*Op+f,b=m*Op+p,w=g*Op+v,k=Math.hypot((Xp[2*x+0]+Xp[2*b+0])/2-Xp[2*w+0],(Xp[2*x+1]+Xp[2*b+1])/2-Xp[2*w+1])>=16;Kp[w]=Kp[w]||(k?1:0),c<1022&&(Kp[w]=Kp[w]||Kp[(d+_>>1)*Op+(f+y>>1)]||Kp[(m+_>>1)*Op+(p+y>>1)])}var E=new ro,S=new yo,T=0;function C(e,t){var n=t*Op+e;return 0===Yp[n]&&(E.emplaceBack(Xp[2*n+0],Xp[2*n+1],e*ws/Rp,t*ws/Rp),Yp[n]=++T),Yp[n]-1}function M(e,t,n,r,i,a){var o=e+n>>1,s=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Kp[s*Op+o])M(i,a,e,t,o,s),M(n,r,i,a,o,s);else{var l=C(e,t),u=C(n,r),c=C(i,a);S.emplaceBack(l,u,c)}}return M(0,0,Rp,Rp,Rp,0),M(Rp,Rp,0,0,0,Rp),{vertices:E,indices:S}}(this.tileID.canonical,t);n=a.vertices,r=a.indices}else{n=new ro,r=new yo;var o,s=f(i);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=l.x,c=l.y;n.emplaceBack(u,c,0,0)}}catch(p){s.e(p)}finally{s.f()}for(var h=Ic(n.int16,void 0,4),d=0;d<h.length;d+=3)r.emplaceBack(h[d],h[d+1],h[d+2])}this._tileBoundsBuffer=e.createVertexBuffer(n,Qp.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(r),this._tileBoundsSegments=bs.simpleSegment(0,0,n.length,r.length)}}},{key:"_makeGlobeTileDebugBuffers",value:function(e,t){var n=t.projection;if(n&&"globe"===n.name&&!t.freezeTileCoverage){var r,i=this.tileID.canonical,a=Zl(Dl(i,t)),o=ql(t.zoom);o>0&&(r=As(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,a,r,o),this._makeGlobeTileDebugTextBuffer(e,i,t,a,r,o)}}},{key:"_globePoint",value:function(e,t,n,r,i,a,o){var s=$l(e,t,n);if(a){var l=1<<n.z,u=iu(r.center.lng),c=au(r.center.lat),h=(n.x+.5)/l-u,f=0;h>.5?f=-1:h<-.5&&(f=1);var d=(e/ws+n.x)/l+f,p=(t/ws+n.y)/l;d=(d-u)*r._pixelsPerMercatorPixel+u,p=(p-c)*r._pixelsPerMercatorPixel+c;var m=[d*r.worldSize,p*r.worldSize,0];Js(m,m,a),s=Ll(s,m,o)}return Js(s,s,i)}},{key:"_makeGlobeTileDebugBorderBuffer",value:function(e,t,n,r,i,a){var o=this,s=new to,l=new So,u=new no,c=function(e,c,h,f,d){for(var p=(h-e)/(d-1),m=(f-c)/(d-1),v=s.length,g=0;g<d;g++){var y=e+g*p,_=c+g*m;s.emplaceBack(y,_);var x=o._globePoint(y,_,t,n,r,i,a);u.emplaceBack(x[0],x[1],x[2]),l.emplaceBack(v+g)}},h=ws;c(0,0,h,0,16),c(h,0,h,h,16),c(h,h,0,h,16),c(0,h,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(l),this._tileDebugBuffer=e.createVertexBuffer(s,pl.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(u,dl.members),this._tileDebugSegments=bs.simpleSegment(0,0,s.length,l.length)}},{key:"_makeGlobeTileDebugTextBuffer",value:function(e,t,n,r,i,a){var o=ws/4,s=new to,l=new yo,u=new no,c=25;l.reserve(32),s.reserve(c),u.reserve(c);for(var h=function(e,t){return c*e+t},f=0;f<c;f++)for(var d=f*o,p=0;p<c;p++){var m=p*o;s.emplaceBack(m,d);var v=this._globePoint(m,d,t,n,r,i,a);u.emplaceBack(v[0],v[1],v[2])}for(var g=0;g<4;g++)for(var y=0;y<4;y++){var _=h(g,y),x=h(g,y+1),b=h(g+1,y),w=h(g+1,y+1);l.emplaceBack(_,x,b),l.emplaceBack(b,x,w)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(l),this._tileDebugTextBuffer=e.createVertexBuffer(s,pl.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,dl.members),this._tileDebugTextSegments=bs.simpleSegment(0,0,c,32)}}]),e}(),nm=function(){function e(){d(this,e),this.state={},this.stateChanges={},this.deletedStates={}}return p(e,[{key:"updateState",value:function(e,t,n){var r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},W(this.stateChanges[e][r],n),null===this.deletedStates[e])for(var i in this.deletedStates[e]={},this.state[e])i!==r&&(this.deletedStates[e][i]=null);else if(this.deletedStates[e]&&null===this.deletedStates[e][r])for(var a in this.deletedStates[e][r]={},this.state[e][r])n[a]||(this.deletedStates[e][r][a]=null);else for(var o in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][o]&&delete this.deletedStates[e][r][o]}},{key:"removeFeatureState",value:function(e,t,n){if(null!==this.deletedStates[e]){var r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}}},{key:"getState",value:function(e,t){var n=String(t),r=W({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){var i=this.deletedStates[e][t];if(null===i)return{};for(var a in i)delete r[a]}return r}},{key:"initializeTileState",value:function(e,t){e.setFeatureState(this.state,t)}},{key:"coalesceChanges",value:function(e,t){var n={};for(var r in this.stateChanges){this.state[r]=this.state[r]||{};var i={};for(var a in this.stateChanges[r])this.state[r][a]||(this.state[r][a]={}),W(this.state[r][a],this.stateChanges[r][a]),i[a]=this.state[r][a];n[r]=i}for(var o in this.deletedStates){this.state[o]=this.state[o]||{};var s={};if(null===this.deletedStates[o])for(var l in this.state[o])s[l]={},this.state[o][l]={};else for(var u in this.deletedStates[o]){if(null===this.deletedStates[o][u])this.state[o][u]={};else if(this.state[o][u])for(var c=0,h=Object.keys(this.deletedStates[o][u]);c<h.length;c++){var f=h[c];delete this.state[o][u][f]}s[u]=this.state[o][u]}n[o]=n[o]||{},W(n[o],s)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(var d in e)e[d].setFeatureState(n,t)}}]),e}(),rm=function(){function e(t){d(this,e),this.size=t,this.minimums=[],this.maximums=[],this.leaves=[]}return p(e,[{key:"getElevation",value:function(e,t){var n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}},{key:"isLeaf",value:function(e,t){return this.leaves[this.toIdx(e,t)]}},{key:"toIdx",value:function(e,t){return t*this.size+e}}]),e}();function im(e,t,n,r){for(var i=0,a=Number.MAX_VALUE,o=0;o<3;o++)if(Math.abs(r[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{var s=1/r[o],l=(e[o]-n[o])*s,u=(t[o]-n[o])*s;if(l>u){var c=l;l=u,u=c}if(l>i&&(i=l),u<a&&(a=u),i>a)return null}return i}function am(e,t,n,r,i,a,o,s,l,u,c){var h=r-e,f=i-t,d=a-n,p=o-e,m=s-t,v=l-n,g=c[1]*v-c[2]*m,y=c[2]*p-c[0]*v,_=c[0]*m-c[1]*p,x=h*g+f*y+d*_;if(Math.abs(x)<1e-15)return null;var b=1/x,w=u[0]-e,k=u[1]-t,E=u[2]-n,S=(w*g+k*y+E*_)*b;if(S<0||S>1)return null;var T=k*d-E*f,C=E*h-w*d,M=w*f-k*h,A=(c[0]*T+c[1]*C+c[2]*M)*b;return A<0||S+A>1?null:(p*T+m*C+v*M)*b}function om(e,t,n){return(e-t)/(n-t)}function sm(e,t,n,r,i,a,o,s,l){var u=1<<n,c=a-r,h=o-i,f=(e+1)/u*c+r,d=(t+0)/u*h+i,p=(t+1)/u*h+i;s[0]=(e+0)/u*c+r,s[1]=d,l[0]=f,l[1]=p}var lm=function(){function e(t){if(d(this,e),this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=t,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],this.dem){var n=function(e){for(var t=Math.ceil(Math.log2(e.dim/8)),n=[],r=Math.ceil(Math.pow(2,t)),i=1/r,a=function(e,t,n,r,i){var a=r?1:0,o=(e+1)*n-a,s=t*n,l=(t+1)*n-a;i[0]=e*n,i[1]=s,i[2]=o,i[3]=l},o=new rm(r),s=[],l=0;l<r*r;l++){a(l%r,Math.floor(l/r),i,!1,s);var u=cm(s[0],s[1],e),c=cm(s[2],s[1],e),h=cm(s[2],s[3],e),f=cm(s[0],s[3],e);o.minimums.push(Math.min(u,c,h,f)),o.maximums.push(Math.max(u,c,h,f)),o.leaves.push(1)}for(n.push(o),r/=2;r>=1;r/=2){var d=n[n.length-1];o=new rm(r);for(var p=0;p<r*r;p++){a(p%r,Math.floor(p/r),2,!0,s);var m=d.getElevation(s[0],s[1]),v=d.getElevation(s[2],s[1]),g=d.getElevation(s[2],s[3]),y=d.getElevation(s[0],s[3]),_=d.isLeaf(s[0],s[1]),x=d.isLeaf(s[2],s[1]),b=d.isLeaf(s[2],s[3]),w=d.isLeaf(s[0],s[3]),k=Math.min(m.min,v.min,g.min,y.min),E=Math.max(m.max,v.max,g.max,y.max),S=_&&x&&b&&w;o.maximums.push(E),o.minimums.push(k),o.leaves.push(E-k<=5&&S?1:0)}n.push(o)}return n}(this.dem),r=n.length-1,i=n[r];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(n,0,0,r,0)}}return p(e,[{key:"raycastRoot",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return im([e,t,-100],[n,r,this.maximums[0]*o],i,a)}},{key:"raycast",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;var s=this.raycastRoot(e,t,n,r,i,a,o);if(null==s)return null;for(var l=[],u=[],c=[],h=[],f=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];f.length>0;){var d=f.pop(),p=d.idx,m=d.t,v=d.nodex,g=d.nodey,y=d.depth;if(this.leaves[p]){sm(v,g,y,e,t,n,r,c,h);var _=1<<y,x=(v+0)/_,b=(v+1)/_,w=(g+0)/_,k=(g+1)/_,E=cm(x,w,this.dem)*o,S=cm(b,w,this.dem)*o,T=cm(b,k,this.dem)*o,C=cm(x,k,this.dem)*o,M=am(c[0],c[1],E,h[0],c[1],S,h[0],h[1],T,i,a),A=am(h[0],h[1],T,c[0],h[1],C,c[0],c[1],E,i,a),P=Math.min(null!==M?M:Number.MAX_VALUE,null!==A?A:Number.MAX_VALUE);if(P!==Number.MAX_VALUE)return P;var I=Gs([],i,a,m);if(um(E,S,C,T,om(I[0],c[0],h[0]),om(I[1],c[1],h[1]))>=I[2])return m}else{for(var z=0,L=0;L<this._siblingOffset.length;L++){sm((v<<1)+this._siblingOffset[L][0],(g<<1)+this._siblingOffset[L][1],y+1,e,t,n,r,c,h),c[2]=-100,h[2]=this.maximums[this.childOffsets[p]+L]*o;var D=im(c,h,i,a);if(null!=D){var R=D;l[L]=R;for(var O=!1,j=0;j<z&&!O;j++)R>=l[u[j]]&&(u.splice(j,0,L),O=!0);O||(u[z]=L),z++}}for(var N=0;N<z;N++){var B=u[N];f.push({idx:this.childOffsets[p]+B,t:l[B],nodex:(v<<1)+this._siblingOffset[B][0],nodey:(g<<1)+this._siblingOffset[B][1],depth:y+1})}}}return null}},{key:"_addNode",value:function(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}},{key:"_construct",value:function(e,t,n,r,i){if(1!==e[r].isLeaf(t,n)){this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);for(var a=r-1,o=e[a],s=0,l=0,u=0;u<this._siblingOffset.length;u++){var c=2*t+this._siblingOffset[u][0],h=2*n+this._siblingOffset[u][1],f=o.getElevation(c,h),d=o.isLeaf(c,h),p=this._addNode(f.min,f.max,d);d&&(s|=1<<u),l||(l=p)}for(var m=0;m<this._siblingOffset.length;m++)s&1<<m||this._construct(e,2*t+this._siblingOffset[m][0],2*n+this._siblingOffset[m][1],a,l+m)}}}]),e}();function um(e,t,n,r,i,a){return Wn(Wn(e,n,a),Wn(t,r,a),i)}function cm(e,t,n){var r=n.dim,i=$(e*r-.5,0,r-1),a=$(t*r-.5,0,r-1),o=Math.floor(i),s=Math.floor(a),l=Math.min(o+1,r-1),u=Math.min(s+1,r-1);return um(n.get(o,s),n.get(l,s),n.get(o,u),n.get(l,u),i-o,a-s)}var hm={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function fm(e,t,n){return(256*e*256+256*t+n)/10-1e4}function dm(e,t,n){return 256*e+t+n/256-32768}var pm=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d(this,e),this.uid=t,n.height!==n.width)throw new RangeError("DEM tiles must be square");if(r&&"mapbox"!==r&&"terrarium"!==r)return ie('"'.concat(r,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=n.height;var o=this.dim=n.height-2,s=new Uint32Array(n.data.buffer);if(this.pixels=new Uint8Array(n.data.buffer),this.encoding=r||"mapbox",this.borderReady=i,!i){for(var l=0;l<o;l++)s[this._idx(-1,l)]=s[this._idx(0,l)],s[this._idx(o,l)]=s[this._idx(o-1,l)],s[this._idx(l,-1)]=s[this._idx(l,0)],s[this._idx(l,o)]=s[this._idx(l,o-1)];s[this._idx(-1,-1)]=s[this._idx(0,0)],s[this._idx(o,-1)]=s[this._idx(o-1,0)],s[this._idx(-1,o)]=s[this._idx(0,o-1)],s[this._idx(o,o)]=s[this._idx(o-1,o-1)],a&&this._buildQuadTree()}}return p(e,[{key:"tree",get:function(){return this._tree||this._buildQuadTree(),this._tree}},{key:"_buildQuadTree",value:function(){this._tree=new lm(this)}},{key:"get",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=$(e,-1,this.dim),t=$(t,-1,this.dim));var n=4*this._idx(e,t);return("terrarium"===this.encoding?dm:fm)(this.pixels[n],this.pixels[n+1],this.pixels[n+2])}},{key:"unpackVector",get:function(){return hm[this.encoding]}},{key:"_idx",value:function(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}},{key:"getPixels",value:function(){return new Qu({width:this.stride,height:this.stride},this.pixels)}},{key:"backfillBorder",value:function(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");var r=t*this.dim,i=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}for(var s=-t*this.dim,l=-n*this.dim,u=a;u<o;u++)for(var c=r;c<i;c++){var h=4*this._idx(c,u),f=4*this._idx(c+s,u+l);this.pixels[h+0]=e.pixels[f+0],this.pixels[h+1]=e.pixels[f+1],this.pixels[h+2]=e.pixels[f+2],this.pixels[h+3]=e.pixels[f+3]}}},{key:"onDeserialize",value:function(){this._tree&&(this._tree.dem=this)}}],[{key:"getUnpackVector",value:function(e){return hm[e]}},{key:"pack",value:function(t,n){var r=[0,0,0,0],i=e.getUnpackVector(n),a=Math.floor((t+i[3])/i[2]);return r[2]=a%256,a=Math.floor(a/256),r[1]=a%256,a=Math.floor(a/256),r[0]=a,r}}]),e}();ua(pm,"DEMData"),ua(lm,"DemMinMaxQuadTree",{omit:["dem"]});var mm=function(){function e(t,n){d(this,e),this.max=t,this.onRemove=n,this.reset()}return p(e,[{key:"reset",value:function(){for(var e in this.data){var t,n=f(this.data[e]);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.timeout&&clearTimeout(r.timeout),this.onRemove(r.value)}}catch(i){n.e(i)}finally{n.f()}}return this.data={},this.order=[],this}},{key:"add",value:function(e,t,n){var r=this,i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);var a={value:t,timeout:void 0};if(void 0!==n&&(a.timeout=setTimeout((function(){r.remove(e,a)}),n)),this.data[i].push(a),this.order.push(i),this.order.length>this.max){var o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}},{key:"has",value:function(e){return e.wrapped().key in this.data}},{key:"getAndRemove",value:function(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}},{key:"_getAndRemoveByKey",value:function(e){var t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}},{key:"getByKey",value:function(e){var t=this.data[e];return t?t[0].value:null}},{key:"get",value:function(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}},{key:"remove",value:function(e,t){if(!this.has(e))return this;var n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}},{key:"setMaxSize",value:function(e){for(this.max=e;this.order.length>this.max;){var t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}},{key:"filter",value:function(e){var t=[];for(var n in this.data){var r,i=f(this.data[n]);try{for(i.s();!(r=i.n()).done;){var a=r.value;e(a.value)||t.push(a)}}catch(u){i.e(u)}finally{i.f()}}for(var o=0,s=t;o<s.length;o++){var l=s[o];this.remove(l.value.tileID,l)}}}]),e}(),vm=p((function e(t,n,r){d(this,e),this.func=t,this.mask=n,this.range=r}));vm.ReadOnly=!1,vm.ReadWrite=!0,vm.disabled=new vm(519,vm.ReadOnly,[0,1]);var gm=7680,ym=p((function e(t,n,r,i,a,o){d(this,e),this.test=t,this.ref=n,this.mask=r,this.fail=i,this.depthFail=a,this.pass=o}));ym.disabled=new ym({func:519,mask:0},0,0,gm,gm,gm);var _m=p((function e(t,n,r){d(this,e),this.blendFunction=t,this.blendColor=n,this.mask=r}));_m.Replace=[1,0],_m.disabled=new _m(_m.Replace,Ht.transparent,[!1,!1,!1,!1]),_m.unblended=new _m(_m.Replace,Ht.transparent,[!0,!0,!0,!0]),_m.alphaBlended=new _m([1,771],Ht.transparent,[!0,!0,!0,!0]);var xm=1029,bm=2305,wm=p((function e(t,n,r){d(this,e),this.enable=t,this.mode=n,this.frontFace=r}));wm.disabled=new wm(!1,xm,bm),wm.backCCW=new wm(!0,xm,bm),wm.backCW=new wm(!0,xm,2304),wm.frontCW=new wm(!0,1028,2304),wm.frontCCW=new wm(!0,1028,bm);var km=function(e){m(n,e);var t=v(n);function n(e,r,a){var o;return d(this,n),(o=t.call(this)).id=e,o._onlySymbols=a,r.on("data",(function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))})),r.on("error",(function(){o._sourceErrored=!0})),o._source=r,o._tiles={},o._cache=new mm(0,o._unloadTile.bind(i(o))),o._timers={},o._cacheTimers={},o._minTileCacheSize=r.minTileCacheSize,o._maxTileCacheSize=r.maxTileCacheSize,o._loadedParentTiles={},o._coveredTiles={},o._state=new nm,o._isRaster="raster"===o._source.type||"raster-dem"===o._source.type||"custom"===o._source.type&&"raster"===o._source._dataType,o}return p(n,[{key:"onAdd",value:function(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}},{key:"loaded",value:function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(var e in this._tiles){var t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}},{key:"getSource",value:function(){return this._source}},{key:"pause",value:function(){this._paused=!0}},{key:"resume",value:function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}}},{key:"_loadTile",value:function(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}},{key:"_unloadTile",value:function(e){if(this._source.unloadTile)return this._source.unloadTile(e,(function(){}))}},{key:"_abortTile",value:function(e){if(this._source.abortTile)return this._source.abortTile(e,(function(){}))}},{key:"serialize",value:function(){return this._source.serialize()}},{key:"prepare",value:function(e){for(var t in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}},{key:"getIds",value:function(){return H(this._tiles).map((function(e){return e.tileID})).sort(Em).map((function(e){return e.key}))}},{key:"getRenderableIds",value:function(e){var t=this,n=[];for(var r in this._tiles)this._isIdRenderable(+r,e)&&n.push(this._tiles[r]);return e?n.sort((function(e,n){var r=e.tileID,i=n.tileID,a=new z(r.canonical.x,r.canonical.y)._rotate(t.transform.angle),o=new z(i.canonical.x,i.canonical.y)._rotate(t.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x})).map((function(e){return e.tileID.key})):n.map((function(e){return e.tileID})).sort(Em).map((function(e){return e.key}))}},{key:"hasRenderableParent",value:function(e){var t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}},{key:"_isIdRenderable",value:function(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}},{key:"reload",value:function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var e in this._cache.reset(),this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}},{key:"_reloadTile",value:function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}},{key:"_tileLoaded",value:function(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new ft(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){var i=this.map.painter.terrain;this.update(this.transform,i.getScaledDemTileSize(),!0),i.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=lt.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new ht("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}},{key:"_backfillDEM",value:function(e){for(var t=this.getRenderableIds(),n=0;n<t.length;n++){var r=t[n];if(e.neighboringTiles&&e.neighboringTiles[r]){var i=this.getTileByID(r);a(e,i),a(i,e)}}function a(e,t){if(e.dem&&!e.dem.borderReady){e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}}},{key:"getTile",value:function(e){return this.getTileByID(e.key)}},{key:"getTileByID",value:function(e){return this._tiles[e]}},{key:"_retainLoadedChildren",value:function(e,t,n,r){for(var i in this._tiles){var a=this._tiles[i];if(!(r[i]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)){for(var o=a.tileID;a&&a.tileID.overscaledZ>t+1;){var s=a.tileID.scaledTo(a.tileID.overscaledZ-1);(a=this._tiles[s.key])&&a.hasData()&&(o=s)}for(var l=o;l.overscaledZ>t;)if(e[(l=l.scaledTo(l.overscaledZ-1)).key]){r[o.key]=o;break}}}}},{key:"findLoadedParent",value:function(e,t){if(e.key in this._loadedParentTiles){var n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(var r=e.overscaledZ-1;r>=t;r--){var i=e.scaledTo(r),a=this._getLoadedTile(i);if(a)return a}}},{key:"_getLoadedTile",value:function(e){var t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}},{key:"updateCacheSize",value:function(e,t){t=t||this._source.tileSize;var n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}},{key:"handleWrapJump",value:function(e){var t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){var n={};for(var r in this._tiles){var i=this._tiles[r];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),n[i.tileID.key]=i}for(var a in this._tiles=n,this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(var o in this._tiles)this._setTileReloadTimer(+o,this._tiles[o])}}},{key:"update",value:function(e,t,r){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused&&!this.transform.freezeTileCoverage&&(!this.usedForTerrain||r)){var a;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?a=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(e){return new Ch(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)})):(a=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(a=a.filter((function(e){return i._source.hasTile(e)})))):a=[];var o=this._updateRetainedTiles(a);if(Sm(this._source.type)&&0!==a.length){for(var s={},l={},u=0,c=Object.keys(o);u<c.length;u++){var h=c[u],d=o[h],p=this._tiles[h];if(p&&!(p.fadeEndTime&&p.fadeEndTime<=lt.now())){var m=this.findLoadedParent(d,Math.max(d.overscaledZ-n.maxOverzooming,this._source.minzoom));m&&(this._addTile(m.tileID),s[m.tileID.key]=m.tileID),l[h]=d}}var v=a[a.length-1].overscaledZ;for(var g in this._tiles){var y=this._tiles[g];if(!o[g]&&y.hasData())for(var _=y.tileID;_.overscaledZ>v;){_=_.scaledTo(_.overscaledZ-1);var x=this._tiles[_.key];if(x&&x.hasData()&&l[_.key]){o[g]=y.tileID;break}}}for(var b in s)o[b]||(this._coveredTiles[b]=!0,o[b]=s[b])}for(var w in o)this._tiles[w].clearFadeHold();var k,E=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n}(this._tiles,o),S=f(E);try{for(S.s();!(k=S.n()).done;){var T=k.value,C=this._tiles[T];C.hasSymbolBuckets&&!C.holdingForFade()?C.setHoldDuration(this.map._fadeDuration):C.hasSymbolBuckets&&!C.symbolFadeFinished()||this._removeTile(+T)}}catch(M){S.e(M)}finally{S.f()}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}}},{key:"releaseSymbolFadeTiles",value:function(){for(var e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}},{key:"_updateRetainedTiles",value:function(e){var t={};if(0===e.length)return t;var r,i={},a=e.reduce((function(e,t){return Math.min(e,t.overscaledZ)}),1/0),o=e[0].overscaledZ,s=Math.max(o-n.maxOverzooming,this._source.minzoom),l=Math.max(o+n.maxUnderzooming,this._source.minzoom),u={},c=f(e);try{for(c.s();!(r=c.n()).done;){var h=r.value,d=this._addTile(h);t[h.key]=h,d.hasData()||a<this._source.maxzoom&&(u[h.key]=h)}}catch(E){c.e(E)}finally{c.f()}this._retainLoadedChildren(u,a,l,t);var p,m=f(e);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=this._tiles[v.key];if(!g.hasData()){if(v.canonical.z>=this._source.maxzoom){var y=v.children(this._source.maxzoom)[0],_=this.getTile(y);if(_&&_.hasData()){t[y.key]=y;continue}}else{var x=v.children(this._source.maxzoom);if(t[x[0].key]&&t[x[1].key]&&t[x[2].key]&&t[x[3].key])continue}for(var b=g.wasRequested(),w=v.overscaledZ-1;w>=s;--w){var k=v.scaledTo(w);if(i[k.key])break;if(i[k.key]=!0,!(g=this.getTile(k))&&b&&(g=this._addTile(k)),g&&(t[k.key]=k,b=g.wasRequested(),g.hasData()))break}}}}catch(E){m.e(E)}finally{m.f()}return t}},{key:"_updateLoadedParentTileCache",value:function(){for(var e in this._loadedParentTiles={},this._tiles){for(var t=[],n=void 0,r=this._tiles[e].tileID;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);var i=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(i))break;r=i}for(var a=0,o=t;a<o.length;a++){var s=o[a];this._loadedParentTiles[s]=n}}}},{key:"_addTile",value:function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e))&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));var n=Boolean(t);if(!n){var r=this.map?this.map.painter:null;t=new tm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,r,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new ht("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}},{key:"_setTileReloadTimer",value:function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout((function(){n._reloadTile(e,"expired"),delete n._timers[e]}),r))}},{key:"_removeTile",value:function(e){var t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}},{key:"clearTiles",value:function(){for(var e in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}},{key:"tilesIn",value:function(e,t,n){var r=[],i=this.transform;if(!i)return r;var a="globe"===i.projection.name,o=iu(i.center.lng);for(var s in this._tiles){var l=this._tiles[s];if(n&&l.clearQueryDebugViz(),!l.holdingForFade()){var u=void 0;if(a){var h=l.tileID.canonical;if(0===h.z){var d=[Math.abs($.apply(void 0,[o].concat(c(Tm(h,-1))))-o),Math.abs($.apply(void 0,[o].concat(c(Tm(h,1))))-o)];u=[0,2*d.indexOf(Math.min.apply(Math,d))-1]}else{var p=[Math.abs($.apply(void 0,[o].concat(c(Tm(h,-1))))-o),Math.abs($.apply(void 0,[o].concat(c(Tm(h,0))))-o),Math.abs($.apply(void 0,[o].concat(c(Tm(h,1))))-o)];u=[p.indexOf(Math.min.apply(Math,p))-1]}}else u=[0];var m,v=f(u);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=e.containsTile(l,i,t,g);y&&r.push(y)}}catch(_){v.e(_)}finally{v.f()}}}return r}},{key:"getVisibleCoordinates",value:function(e){var t,n=this,r=this.getRenderableIds(e).map((function(e){return n._tiles[e].tileID})),i=f(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.projMatrix=this.transform.calculateProjMatrix(a.toUnwrapped())}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"hasTransition",value:function(){if(this._source.hasTransition())return!0;if(Sm(this._source.type))for(var e in this._tiles){var t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=lt.now())return!0}return!1}},{key:"setFeatureState",value:function(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}},{key:"removeFeatureState",value:function(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}},{key:"getFeatureState",value:function(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}},{key:"setDependencies",value:function(e,t,n){var r=this._tiles[e];r&&r.setDependencies(t,n)}},{key:"reloadTilesForDependencies",value:function(e,t){for(var n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((function(n){return!n.hasDependency(e,t)}))}},{key:"_preloadTiles",value:function(e,t){var n=this;if(this._sourceLoaded){var r,i=new Map,a=Array.isArray(e)?e:[e],o=this.map.painter.terrain,s=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize,l=f(a);try{for(l.s();!(r=l.n()).done;){var u,c=r.value,h=c.coveringTiles({tileSize:s,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),d=f(h);try{for(d.s();!(u=d.n()).done;){var p=u.value;i.set(p.key,p)}}catch(v){d.e(v)}finally{d.f()}this.usedForTerrain&&c.updateElevation(!1)}}catch(v){l.e(v)}finally{l.f()}Z(Array.from(i.values()),(function(e,t){var r=new tm(e,n._source.tileSize*e.overscaleFactor(),n.transform.tileZoom,n.map.painter,n._isRaster);n._loadTile(r,(function(e){"raster-dem"===n._source.type&&r.dem&&n._backfillDEM(r),t(e,r)}))}),t)}else{var m=function r(){n._sourceLoaded&&(n._source.off("data",r),n._preloadTiles(e,t))};this._source.on("data",m)}}}]),n}(dt);function Em(e,t){var n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function Sm(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function Tm(e,t){var n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}km.maxOverzooming=10,km.maxUnderzooming=3;var Cm=function(){function e(t,n,r){d(this,e),this._demTile=t,this._dem=this._demTile.dem,this._scale=n,this._offset=r}return p(e,[{key:"tileCoordToPixel",value:function(e,t){var n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new z(r,i)}},{key:"getElevationAt",value:function(e,t,n,r){var i=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(i),s=Math.floor(a),l=this._dem;return r=!!r,n?Wn(Wn(l.get(o,s,r),l.get(o,s+1,r),a-s),Wn(l.get(o+1,s,r),l.get(o+1,s+1,r),a-s),i-o):l.get(o,s,r)}},{key:"getElevationAtPixel",value:function(e,t,n){return this._dem.get(e,t,!!n)}},{key:"getMeterToDEM",value:function(e){return(1<<this._demTile.tileID.canonical.z)*ou(1,e)*this._dem.stride}}],[{key:"create",value:function(t,n,r){var i=r||t.findDEMTileFor(n);if(i&&i.dem){var a=i.dem,o=i.tileID,s=1<<n.canonical.z-o.canonical.z;return new e(i,i.tileSize/ws/s,[(n.canonical.x/s-o.canonical.x)*a.dim,(n.canonical.y/s-o.canonical.y)*a.dim])}}}]),e}(),Mm=function(){function e(t,n){d(this,e),this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new sa(ws,16,0),this.featureIndexArray=new Oo,this.promoteId=n}return p(e,[{key:"insert",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,a);for(var s=this.grid,l=0;l<t.length;l++){for(var u=t[l],c=[1/0,1/0,-1/0,-1/0],h=0;h<u.length;h++){var f=u[h];c[0]=Math.min(c[0],f.x),c[1]=Math.min(c[1],f.y),c[2]=Math.max(c[2],f.x),c[3]=Math.max(c[3],f.y)}c[0]<ws&&c[1]<ws&&c[2]>=0&&c[3]>=0&&s.insert(o,c[0],c[1],c[2],c[3])}}},{key:"loadVTLayers",value:function(){if(!this.vtLayers)for(var e in this.vtLayers=new ah(new Mf(this.rawTileData)).layers,this.sourceLayerCoder=new zp(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={},this.vtLayers)this.vtFeatures[e]=[];return this.vtLayers}},{key:"query",value:function(e,t,n,r){var i=this;this.loadVTLayers();var a=e.params||{},o=Si(a.filter),s=e.tileResult,l=e.transform,u=s.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,(function(e,t,n,r){return Ru(s.bufferedTilespaceGeometry,e,t,n,r)}));c.sort(Pm);var h=null;l.elevation&&c.length>0&&(h=Cm.create(l.elevation,this.tileID));for(var f,d={},p=function(){var l=c[m];if(l===f)return"continue";f=l;var u=i.featureIndexArray.get(l),p=null;i.loadMatchingFeature(d,u,o,a.layers,a.availableImages,t,n,r,(function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return p||(p=xu(t,i.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(s,t,r,p,i.z,e.transform,e.pixelPosMatrix,h,a)}))},m=0;m<c.length;m++)p();return d}},{key:"loadMatchingFeature",value:function(e,t,n,r,i,a,o,s,l){var u=t.featureIndex,c=t.bucketIndex,h=t.sourceLayerIndex,f=t.layoutVertexArrayOffset,d=this.bucketLayerIDs[c];if(!r||function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,d)){var p=this.sourceLayerCoder.decode(h),m=this.vtLayers[p].feature(u);if(n.needGeometry){var v=bu(m,!0);if(!n.filter(new Oa(this.tileID.overscaledZ),v,this.tileID.canonical))return}else if(!n.filter(new Oa(this.tileID.overscaledZ),m))return;for(var g=this.getId(m,p),y=0;y<d.length;y++){var _=d[y];if(!(r&&r.indexOf(_)<0)){var x=a[_];if(x){var b={};void 0!==g&&s&&(b=s.getState(x.sourceLayer||"_geojsonTileLayer",g));var w=W({},o[_]);w.paint=Am(w.paint,x.paint,m,b,i),w.layout=Am(w.layout,x.layout,m,b,i);var k=!l||l(m,x,b,f);if(k){var E=new Dp(m,this.z,this.x,this.y,g);E.layer=w;var S=e[_];void 0===S&&(S=e[_]=[]),S.push({featureIndex:u,feature:E,intersectionZ:k})}}}}}}},{key:"lookupSymbolFeatures",value:function(e,t,n,r,i,a,o,s){var l={};this.loadVTLayers();var u,c=Si(i),h=f(e);try{for(h.s();!(u=h.n()).done;){var d=u.value;this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:r,featureIndex:d,layoutVertexArrayOffset:0},c,a,o,s,t)}}catch(p){h.e(p)}finally{h.f()}return l}},{key:"loadFeature",value:function(e){var t=e.featureIndex,n=e.sourceLayerIndex;this.loadVTLayers();var r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];var a=this.vtLayers[r].feature(t);return i[t]=a,a}},{key:"hasLayer",value:function(e){var t,n=f(this.bucketLayerIDs);try{for(n.s();!(t=n.n()).done;){var r,i=t.value,a=f(i);try{for(a.s();!(r=a.n()).done;)if(e===r.value)return!0}catch(o){a.e(o)}finally{a.f()}}}catch(o){n.e(o)}finally{n.f()}return!1}},{key:"getId",value:function(e,t){var n=e.id;if(this.promoteId){var r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}]),e}();function Am(e,t,n,r,i){return ee(e,(function(e,a){var o=t instanceof Za?t.get(a):null;return o&&o.evaluate?o.evaluate(n,r,i):o}))}function Pm(e,t){return t-e}ua(Mm,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});var Im=function(){function e(t,n){d(this,e),this.width=t,this.height=n,this.nextRow=0,this.image=new Ju({width:t,height:n}),this.positions={},this.uploaded=!1}return p(e,[{key:"getDash",value:function(e,t){var n=this.getKey(e,t);return this.positions[n]}},{key:"trim",value:function(){var e=this.width,t=this.height=K(this.nextRow);this.image.resize({width:e,height:t})}},{key:"getKey",value:function(e,t){return e.join(",")+t}},{key:"getDashRanges",value:function(e,t,n){var r=[],i=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;r.push({left:i,right:a,isDash:o,zeroLength:0===e[0]});for(var s=e[0],l=1;l<e.length;l++){o=!o;var u=e[l];i=s*n,a=(s+=u)*n,r.push({left:i,right:a,isDash:o,zeroLength:0===u})}return r}},{key:"addRoundDash",value:function(e,t,n){for(var r=t/2,i=-n;i<=n;i++)for(var a=this.width*(this.nextRow+n+i),o=0,s=e[o],l=0;l<this.width;l++){l/s.right>1&&(s=e[++o]);var u=Math.abs(l-s.left),c=Math.abs(l-s.right),h=Math.min(u,c),f=void 0,d=i/n*(r+1);if(s.isDash){var p=r-Math.abs(d);f=Math.sqrt(h*h+p*p)}else f=r-Math.sqrt(h*h+d*d);this.image.data[a+l]=Math.max(0,Math.min(255,f+128))}}},{key:"addRegularDash",value:function(e,t){for(var n=e.length-1;n>=0;--n){var r=e[n],i=e[n+1];r.zeroLength?e.splice(n,1):i&&i.isDash===r.isDash&&(i.left=r.left,e.splice(n,1))}var a=e[0],o=e[e.length-1];a.isDash===o.isDash&&(a.left=o.left-this.width,o.right=a.right+this.width);for(var s=this.width*this.nextRow,l=0,u=e[l],c=0;c<this.width;c++){c/u.right>1&&(u=e[++l]);var h=Math.abs(c-u.left),f=Math.abs(c-u.right),d=Math.min(h,f);this.image.data[s+c]=Math.max(0,Math.min(255,(u.isDash?d:-d)+t+128))}}},{key:"addDash",value:function(e,t){var n=this.getKey(e,t);if(this.positions[n])return this.positions[n];var r="round"===t,i=r?7:0,a=2*i+1;if(this.nextRow+a>this.height)return ie("LineAtlas out of space"),null;0===e.length&&e.push(1);for(var o=0,s=0;s<e.length;s++)e[s]<0&&(ie("Negative value is found in line dasharray, replacing values with 0"),e[s]=0),o+=e[s];if(0!==o){var l=this.width/o,u=this.getDashRanges(e,this.width,l);r?this.addRoundDash(u,l,i):this.addRegularDash(u,"square"===t?.5*l:0)}var c=this.nextRow+i;this.nextRow+=a;var h={tl:[c,i],br:[o,0]};return this.positions[n]=h,h}}]),e}();ua(Im,"LineAtlas");var zm=1*fd,Lm=p((function e(t){d(this,e);var n={},r=[];for(var i in t){var a=t[i],o=n[i]={};for(var s in a.glyphs){var l=a.glyphs[+s];if(l&&0!==l.bitmap.width&&0!==l.bitmap.height){var u=l.metrics.localGlyph?zm:1,c={x:0,y:0,w:l.bitmap.width+2*u,h:l.bitmap.height+2*u};r.push(c),o[s]=c}}}var h=Df(r),f=h.w,p=h.h,m=new Ju({width:f||1,height:p||1});for(var v in t){var g=t[v];for(var y in g.glyphs){var _=g.glyphs[+y];if(_&&0!==_.bitmap.width&&0!==_.bitmap.height){var x=n[v][y],b=_.metrics.localGlyph?zm:1;Ju.copy(_.bitmap,m,{x:0,y:0},{x:x.x+b,y:x.y+b},_.bitmap)}}}this.image=m,this.positions=n}));ua(Lm,"GlyphAtlas");var Dm=function(){function e(t){d(this,e),this.tileID=new Ch(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.collectResourceTiming,this.returnDependencies=!!t.returnDependencies,this.promoteId=t.promoteId,this.enableTerrain=!!t.enableTerrain,this.isSymbolTile=t.isSymbolTile,this.tileTransform=Vd(t.tileID.canonical,t.projection),this.projection=t.projection}return p(e,[{key:"parse",value:function(e,t,n,r,i){var a=this;this.status="parsing",this.data=e,this.collisionBoxArray=new Mo;var o=new zp(Object.keys(e.layers).sort()),s=new Mm(this.tileID,this.promoteId);s.bucketLayerIDs=[];var l,u,c,h,d={},p=new Im(256,256),m={featureIndex:s,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:p,availableImages:n},v=t.familiesBySource[this.source];for(var g in v){var y=e.layers[g];if(y){var _,x=!1,b=!1,w=f(v[g]);try{for(w.s();!(_=w.n()).done;)"symbol"===_.value[0].type?x=!0:b=!0}catch(j){w.e(j)}finally{w.f()}if((!0!==this.isSymbolTile||x)&&(!1!==this.isSymbolTile||b)){1===y.version&&ie('Vector tile source "'.concat(this.source,'" layer "').concat(g,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));for(var k=o.encode(g),E=[],S=0;S<y.length;S++){var T=y.feature(S),C=s.getId(T,g);E.push({feature:T,id:C,index:S,sourceLayerIndex:k})}var M,A=f(v[g]);try{for(A.s();!(M=A.n()).done;){var P=M.value,I=P[0];void 0!==this.isSymbolTile&&"symbol"===I.type!==this.isSymbolTile||I.minzoom&&this.zoom<Math.floor(I.minzoom)||I.maxzoom&&this.zoom>=I.maxzoom||"none"!==I.visibility&&(Rm(P,this.zoom,n),(d[I.id]=I.createBucket({index:s.bucketLayerIDs.length,layers:P,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:k,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(E,m,this.tileID.canonical,this.tileTransform),s.bucketLayerIDs.push(P.map((function(e){return e.id}))))}}catch(j){A.e(j)}finally{A.f()}}}}p.trim();var z={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},L=function(){if(l)return i(l);if(u&&c&&h){var e=new Lm(u),t=new jf(c,h);for(var r in d){var o=d[r];o instanceof yp?(Rm(o.layers,a.zoom,n),Id(o,u,e.positions,c,t.iconPositions,a.showCollisionBoxes,n,a.tileID.canonical,a.tileZoom,a.projection)):o.hasPattern&&(o instanceof jh||o instanceof Fc||o instanceof dh)&&(Rm(o.layers,a.zoom,n),o.addFeatures(m,a.tileID.canonical,t.patternPositions,n,a.tileTransform))}a.status="done",i(null,{buckets:H(d).filter((function(e){return!e.isEmpty()})),featureIndex:s,collisionBoxArray:a.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:p,imageAtlas:t,glyphMap:a.returnDependencies?u:null,iconMap:a.returnDependencies?c:null,glyphPositions:a.returnDependencies?e.positions:null})}},D=ee(m.glyphDependencies,(function(e){return Object.keys(e).map(Number)}));Object.keys(D).length?r.send("getGlyphs",{uid:this.uid,stacks:D},(function(e,t){l||(l=e,u=t,L())}),void 0,!1,z):u={};var R=Object.keys(m.iconDependencies);R.length?r.send("getImages",{icons:R,source:this.source,tileID:this.tileID,type:"icons"},(function(e,t){l||(l=e,c=t,L())}),void 0,!1,z):c={};var O=Object.keys(m.patternDependencies);O.length?r.send("getImages",{icons:O,source:this.source,tileID:this.tileID,type:"patterns"},(function(e,t){l||(l=e,h=t,L())}),void 0,!1,z):h={},L()}}]),e}();function Rm(e,t,n){var r,i=new Oa(t),a=f(e);try{for(a.s();!(r=a.n()).done;)r.value.recalculate(i,n)}catch(o){a.e(o)}finally{a.f()}}var Om=function(){function e(t){d(this,e),this.entries={},this.scheduler=t}return p(e,[{key:"request",value:function(e,t,n,r){var i=this,a=this.entries[e]=this.entries[e]||{callbacks:[]};if(a.result){var o=h(a.result,2),s=o[0],l=o[1];return this.scheduler?this.scheduler.add((function(){r(s,l)}),t):r(s,l),function(){}}return a.callbacks.push(r),a.cancel||(a.cancel=n((function(n,r){a.result=[n,r];var o,s=f(a.callbacks);try{var l=function(){var e=o.value;i.scheduler?i.scheduler.add((function(){e(n,r)}),t):e(n,r)};for(s.s();!(o=s.n()).done;)l()}catch(u){s.e(u)}finally{s.f()}setTimeout((function(){return delete i.entries[e]}),3e3)}))),function(){a.result||(a.callbacks=a.callbacks.filter((function(e){return e!==r})),a.callbacks.length||(a.cancel(),delete i.entries[e]))}}}]),e}();function jm(e,t,n){var r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(function(t){var r=Te(e.request,(function(e,r,i,a){e?t(e):r&&t(null,{vectorTile:n?void 0:new ah(new Mf(r)),rawData:r,cacheControl:i,expires:a})}));return function(){r.cancel(),t()}}),t)}var Nm=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Bm=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,i=arguments.length>3?arguments[3]:void 0;if(d(this,e),isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=r,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var a=Nm.indexOf(this.ArrayType),o=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,l=(8-s%8)%8;if(a<0)throw new Error("Unexpected typed array class: ".concat(r,"."));i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+l,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+l),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+l,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}return p(e,[{key:"add",value:function(e,t){var n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}},{key:"finish",value:function(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Fm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var i=this.ids,a=this.coords,o=this.nodeSize,s=[0,i.length-1,0],l=[];s.length;){var u=s.pop()||0,c=s.pop()||0,h=s.pop()||0;if(c-h<=o)for(var f=h;f<=c;f++){var d=a[2*f],p=a[2*f+1];d>=e&&d<=n&&p>=t&&p<=r&&l.push(i[f])}else{var m=h+c>>1,v=a[2*m],g=a[2*m+1];v>=e&&v<=n&&g>=t&&g<=r&&l.push(i[m]),(0===u?e<=v:t<=g)&&(s.push(h),s.push(m-1),s.push(1-u)),(0===u?n>=v:r>=g)&&(s.push(m+1),s.push(c),s.push(1-u))}}return l}},{key:"within",value:function(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var r=this.ids,i=this.coords,a=this.nodeSize,o=[0,r.length-1,0],s=[],l=n*n;o.length;){var u=o.pop()||0,c=o.pop()||0,h=o.pop()||0;if(c-h<=a)for(var f=h;f<=c;f++)Zm(i[2*f],i[2*f+1],e,t)<=l&&s.push(r[f]);else{var d=h+c>>1,p=i[2*d],m=i[2*d+1];Zm(p,m,e,t)<=l&&s.push(r[d]),(0===u?e-n<=p:t-n<=m)&&(o.push(h),o.push(d-1),o.push(1-u)),(0===u?e+n>=p:t+n>=m)&&(o.push(d+1),o.push(c),o.push(1-u))}}return s}}],[{key:"from",value:function(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var n=new Uint8Array(t,0,2),r=h(n,2),i=r[0],a=r[1];if(219!==i)throw new Error("Data does not appear to be in a KDBush format.");var o=a>>4;if(1!==o)throw new Error("Got v".concat(o," data when expected v1."));var s=Nm[15&a];if(!s)throw new Error("Unrecognized array type.");var l=new Uint16Array(t,2,1),u=h(l,1)[0],c=new Uint32Array(t,4,1);return new e(h(c,1)[0],u,s,t)}}]),e}();function Fm(e,t,n,r,i,a){if(!(i-r<=n)){var o=r+i>>1;$m(e,t,o,r,i,a),Fm(e,t,n,r,o-1,1-a),Fm(e,t,n,o+1,i,1-a)}}function $m(e,t,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);$m(e,t,n,Math.max(r,Math.floor(n-s*u/o+c)),Math.min(i,Math.floor(n+(o-s)*u/o+c)),a)}var h=t[2*n+a],f=r,d=i;for(Vm(e,t,r,n),t[2*i+a]>h&&Vm(e,t,r,i);f<d;){for(Vm(e,t,f,d),f++,d--;t[2*f+a]<h;)f++;for(;t[2*d+a]>h;)d--}t[2*r+a]===h?Vm(e,t,r,d):Vm(e,t,++d,i),d<=n&&(r=d+1),n<=d&&(i=d-1)}}function Vm(e,t,n,r){Um(e,n,r),Um(t,2*n,2*r),Um(t,2*n+1,2*r+1)}function Um(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Zm(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}e.ARRAY_TYPE=Ss,e.AUTH_ERR_MSG=ze,e.Aabb=yl,e.Actor=function(){function e(t,n,r){d(this,e),this.target=t,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},J(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=se()?t:y,this.scheduler=new Ip}return p(e,[{key:"send",value:function(e,t,n,r){var i=this,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0,s=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[s]=n);var l=ce(this.globalScope)?void 0:[];return this.target.postMessage({id:s,type:e,hasCallback:!!n,targetMapId:r,mustQueue:a,sourceMapId:this.mapId,data:da(t,l)},l),{cancel:function(){n&&delete i.callbacks[s],i.target.postMessage({id:s,type:"<cancel>",targetMapId:r,sourceMapId:i.mapId})}}}},{key:"receive",value:function(e){var t=this,n=e.data,r=n.id;if(r&&(!n.targetMapId||this.mapId===n.targetMapId))if("<cancel>"===n.type){var i=this.cancelCallbacks[r];delete this.cancelCallbacks[r],i&&i.cancel()}else if(n.mustQueue||se()){var a=this.callbacks[r];this.cancelCallbacks[r]=this.scheduler.add((function(){return t.processTask(r,n)}),a&&a.metadata||{type:"message"})}else this.processTask(r,n)}},{key:"processTask",value:function(e,t){var n=this;if("<response>"===t.type){var r=this.callbacks[e];delete this.callbacks[e],r&&(t.error?r(pa(t.error)):r(null,pa(t.data)))}else{var i=ce(this.globalScope)?void 0:[],a=t.hasCallback?function(t,r){delete n.cancelCallbacks[e],n.target.postMessage({id:e,type:"<response>",sourceMapId:n.mapId,error:t?da(t):null,data:da(r,i)},i)}:function(e){},o=pa(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,o,a);else if(this.parent.getWorkerSource){var s=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,s[0],o.source)[s[1]](o,a)}else a(new Error("Could not find function ".concat(t.type)))}}},{key:"remove",value:function(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}]),e}(),e.CanonicalTileID=Sh,e.Color=Ht,e.ColorMode=_m,e.CullFaceMode=wm,e.DEMData=pm,e.DataConstantProperty=Ha,e.DedupedRequest=Om,e.DepthMode=vm,e.EXTENT=ws,e.Elevation=function(){function e(){d(this,e)}return p(e,[{key:"isDataAvailableAtPoint",value:function(e){var t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;var n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),a=Math.floor((e.x-i)*r),o=Math.floor(e.y*r),s=this.findDEMTileFor(new Ch(n,i,n,a,o));return!(!s||!s.dem)}},{key:"getAtPointOrZero",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}},{key:"getAtPoint",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);var r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;var i=r.getSource().maxzoom,a=1<<i,o=Math.floor(e.x),s=e.x-o,l=new Ch(i,o,i,Math.floor(s*a),Math.floor(e.y*a)),u=this.findDEMTileFor(l);if(!u||!u.dem)return t;var c=u.dem,h=1<<u.tileID.canonical.z,f=(s*h-u.tileID.canonical.x)*c.dim,d=(e.y*h-u.tileID.canonical.y)*c.dim,p=Math.floor(f),m=Math.floor(d);return(n?this.exaggeration():1)*Wn(Wn(c.get(p,m),c.get(p,m+1),d-m),Wn(c.get(p+1,m),c.get(p+1,m+1),d-m),f-p)}},{key:"getAtTileOffset",value:function(e,t,n){var r=1<<e.canonical.z;return this.getAtPointOrZero(new fu(e.wrap+(e.canonical.x+t/ws)/r,(e.canonical.y+n/ws)/r))}},{key:"getAtTileOffsetFunc",value:function(e,t,n,r){var i=this;return function(a){var o=i.getAtTileOffset(e,a.x,a.y),s=r.upVector(e.canonical,a.x,a.y);return qs(s,s,o*r.upVectorScale(e.canonical,t,n).metersToTile),s}}},{key:"getForTilePoints",value:function(e,t,n,r){var i=this;if(this.isUsingMockSource())return!1;var a=Cm.create(this,e,r);return!!a&&(t.forEach((function(e){e[2]=i.exaggeration()*a.getElevationAt(e[0],e[1],n)})),!0)}},{key:"getMinMaxForTile",value:function(e){if(this.isUsingMockSource())return null;var t=this.findDEMTileFor(e);if(!t||!t.dem)return null;for(var n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z,a=e.canonical.x/i-r.canonical.x,o=e.canonical.y/i-r.canonical.y,s=0,l=0;l<e.canonical.z-r.canonical.z&&!n.leaves[s];l++){a*=2,o*=2;var u=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+u,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}},{key:"getMinElevationBelowMSL",value:function(){throw new Error("Pure virtual method called.")}},{key:"raycast",value:function(e,t,n){throw new Error("Pure virtual method called.")}},{key:"pointCoordinate",value:function(e){throw new Error("Pure virtual method called.")}},{key:"_source",value:function(){throw new Error("Pure virtual method called.")}},{key:"isUsingMockSource",value:function(){throw new Error("Pure virtual method called.")}},{key:"exaggeration",value:function(){throw new Error("Pure virtual method called.")}},{key:"findDEMTileFor",value:function(e){throw new Error("Pure virtual method called.")}},{key:"visibleDemTiles",get:function(){throw new Error("Getter must be implemented in subclass.")}}]),e}(),e.ErrorEvent=ft,e.EvaluationParameters=Oa,e.Event=ht,e.Evented=dt,e.FillExtrusionBucket=dh,e.Frustum=gl,e.FrustumCorners=vl,e.GLOBE_RADIUS=bl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=xl,e.GLOBE_ZOOM_THRESHOLD_MIN=_l,e.GlobeSharedBuffers=function(){function e(t){d(this,e),this._createGrid(t),this._createPoles(t)}return p(e,[{key:"destroy",value:function(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();var e,t=f(this._poleSegments);try{for(t.s();!(e=t.n()).done;)e.value.destroy()}catch(s){t.e(s)}finally{t.f()}var n,r=f(this._gridSegments);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.withSkirts.destroy(),i.withoutSkirts.destroy()}}catch(s){r.e(s)}finally{r.f()}if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();var a,o=f(this._wireframeSegments);try{for(o.s();!(a=o.n()).done;)a.value.destroy()}catch(s){o.e(s)}finally{o.f()}}}},{key:"_fillGridMeshWithLods",value:function(e,t){for(var n=new to,r=new yo,i=[],a=e+1+2,o=t[0]+1,s=t[0]+1+(1+t.length),l=function(e,t,n){var r=e===a-1?e-2:0===e?e:e-1;return[r+=n?24575:0,t]},u=0;u<a;++u)n.emplaceBack.apply(n,c(l(u,0,!0)));for(var h=0;h<o;++h)for(var f=0;f<a;++f)n.emplaceBack.apply(n,c(l(f,h,(0===f||f===a-1)&&!0)));for(var d=0;d<t.length;++d)for(var p=t[d],m=0;m<a;++m)n.emplaceBack.apply(n,c(l(m,p,!0)));for(var v=0;v<t.length;++v){for(var g=r.length,y=t[v]+1+2,_=new yo,x=0;x<y-1;x++)for(var b=x===y-2,w=b?a*(s-t.length+v-x):a,k=0;k<a-1;k++){var E=x*a+k;0===x||b||0===k||k===a-2?(_.emplaceBack(E+1,E,E+w),_.emplaceBack(E+w,E+w+1,E+1)):(r.emplaceBack(E+1,E,E+w),r.emplaceBack(E+w,E+w+1,E+1))}for(var S=bs.simpleSegment(0,g,n.length,r.length-g),T=0;T<_.uint16.length;T+=3)r.emplaceBack(_.uint16[T],_.uint16[T+1],_.uint16[T+2]);var C=bs.simpleSegment(0,g,n.length,r.length-g);i.push({withoutSkirts:S,withSkirts:C})}return{vertices:n,indices:r,segments:i}}},{key:"_createGrid",value:function(e){var t=this._fillGridMeshWithLods(kl,El);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,pl.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}},{key:"_createPoles",value:function(e){for(var t=new yo,n=0;n<=kl;n++)t.emplaceBack(0,n+1,n+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);var r=new wo,i=new wo;this._poleSegments=[];for(var a=0,o=0;a<_l;a++){var s=360/(1<<a);r.emplaceBack(0,-bl,0,.5,0),i.emplaceBack(0,-bl,0,.5,1);for(var l=0;l<=kl;l++){var u=l/kl,c=Wn(0,s,u),f=Bl(Yl,Jl,c,bl),d=h(f,3),p=d[0],m=d[1],v=d[2];r.emplaceBack(p,m,v,u,0),i.emplaceBack(p,m,v,u,1)}this._poleSegments.push(bs.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(r,fl,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,fl,!1)}},{key:"getGridBuffers",value:function(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}},{key:"getPoleBuffers",value:function(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},{key:"getWirefameBuffers",value:function(e,t){if(!this._wireframeSegments){var n=new Eo,r=kl,i=r+1+2,a=1;this._wireframeSegments=[];for(var o=0,s=0;o<El.length;o++){for(var l=El[o],u=a;u<l+a;u++)for(var c=a;c<r+a;c++){var h=u*i+c;n.emplaceBack(h,h+1),n.emplaceBack(h,h+i),n.emplaceBack(h,h+i+1)}var f=l*r*3;this._wireframeSegments.push(bs.simpleSegment(0,s,(l+1)*i,f)),s+=f}this._wireframeIndexBuffer=e.createIndexBuffer(n)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}}]),e}(),e.GlyphManager=pd,e.ImagePosition=Of,e.KDBush=Bm,e.LivePerformanceUtils=et,e.LngLat=nu,e.LngLatBounds=ks,e.LocalGlyphMode=dd,e.MAX_MERCATOR_LATITUDE=cu,e.MercatorCoordinate=fu,e.ONE_EM=Xh,e.OverscaledTileID=Ch,e.PerformanceMarkers=Qe,e.Point=z,e.Properties=Ga,e.RGBAImage=Qu,e.Ray=ml,e.RequestManager=function(){function e(t,n,r){d(this,e),this._transformRequestFn=t,this._customAccessToken=n,this._silenceAuthErrors=!!r,this._createSkuToken()}return p(e,[{key:"_createSkuToken",value:function(){var e=function(){for(var e="",t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",S,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}},{key:"_isSkuTokenExpired",value:function(){return Date.now()>this._skuTokenExpiresAt}},{key:"transformRequest",value:function(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}},{key:"normalizeStyleURL",value:function(e,t){if(!Le(e))return e;var n=Be(e);return n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeGlyphsURL",value:function(e,t){if(!Le(e))return e;var n=Be(e);return n.path="/fonts/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||t)}},{key:"normalizeSourceURL",value:function(e,t,n,r){if(!Le(e))return e;var i=Be(e);return i.path="/v4/".concat(i.authority,".json"),i.params.push("secure"),n&&i.params.push("language=".concat(n)),r&&i.params.push("worldview=".concat(r)),this._makeAPIURL(i,this._customAccessToken||t)}},{key:"normalizeSpriteURL",value:function(e,t,n,r){var i=Be(e);return Le(e)?(i.path="/styles/v1".concat(i.path,"/sprite").concat(t).concat(n),this._makeAPIURL(i,this._customAccessToken||r)):(i.path+="".concat(t).concat(n),Fe(i))}},{key:"normalizeTileURL",value:function(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!Le(e))return e;var r=Be(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(t||n&&"raster"!==r.authority&&512===n?"@2x":"").concat(b.supported?".webp":"$1")),"raster"===r.authority?r.path="/".concat(x.RASTER_URL_PREFIX).concat(r.path):(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path="/".concat(x.TILE_URL_VERSION).concat(r.path));var i=this._customAccessToken||function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value.match(/^access_token=(.*)$/);if(r)return r[1]}}catch(i){n.e(i)}finally{n.f()}return null}(r.params)||x.ACCESS_TOKEN;return x.REQUIRE_ACCESS_TOKEN&&i&&this._skuToken&&r.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(r,i)}},{key:"canonicalizeTileURL",value:function(e,t){var n=Be(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;var r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+="raster/".concat(n.path.replace("/".concat(x.RASTER_URL_PREFIX,"/"),"")):r+="tiles/".concat(n.path.replace("/".concat(x.TILE_URL_VERSION,"/"),""));var i=n.params;return t&&(i=i.filter((function(e){return!e.match(/^access_token=/)}))),i.length&&(r+="?".concat(i.join("&"))),r}},{key:"canonicalizeTileset",value:function(e,t){var n,r=!!t&&Le(t),i=[],a=f(e.tiles||[]);try{for(a.s();!(n=a.n()).done;){var o=n.value;De(o)?i.push(this.canonicalizeTileURL(o,r)):i.push(o)}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"_makeAPIURL",value:function(e,t){var n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=Be(x.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){var i=e.params.indexOf("secure");i>=0&&e.params.splice(i,1)}if("/"!==r.path&&(e.path="".concat(r.path).concat(e.path)),!x.REQUIRE_ACCESS_TOKEN)return Fe(e);if(t=t||x.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. ".concat(n));if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(n))}return e.params=e.params.filter((function(e){return-1===e.indexOf("access_token")})),e.params.push("access_token=".concat(t||"")),Fe(e)}}]),e}(),e.ResourceType=we,e.SegmentVector=bs,e.SourceCache=km,e.StencilMode=ym,e.StructArrayLayout1ui2=So,e.StructArrayLayout2f1f2i16=mo,e.StructArrayLayout2i4=to,e.StructArrayLayout2ui4=Eo,e.StructArrayLayout3f12=go,e.StructArrayLayout3ui6=yo,e.StructArrayLayout4i8=ro,e.StructArrayLayout5f20=wo,e.Texture=Ap,e.Tile=tm,e.Transitionable=Ba,e.Uniform1f=Jo,e.Uniform1i=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=0,r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}}]),n}(Yo),e.Uniform2f=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=[0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}}]),n}(Yo),e.Uniform3f=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=[0,0,0],r}return p(n,[{key:"set",value:function(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}}]),n}(Yo),e.Uniform4f=Qo,e.UniformColor=es,e.UniformMatrix2f=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=rs,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}}]),n}(Yo),e.UniformMatrix3f=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=ns,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t))for(var r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}}]),n}(Yo),e.UniformMatrix4f=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).current=ts,r}return p(n,[{key:"set",value:function(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(var r=1;r<16;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}}]),n}(Yo),e.UnwrappedTileID=Th,e.ValidationError=vi,e.VectorTileFeature=oh,e.VectorTileWorkerSource=function(e){m(n,e);var t=v(n);function n(e,r,i,a,o){var s;return d(this,n),(s=t.call(this)).actor=e,s.layerIndex=r,s.availableImages=i,s.loadVectorData=o||jm,s.loading={},s.loaded={},s.deduped=new Om(e.scheduler),s.isSpriteLoaded=a,s.scheduler=e.scheduler,s}return p(n,[{key:"loadTile",value:function(e,t){var n=this,r=e.uid,i=e&&e.request,a=i&&i.collectResourceTiming,o=this.loading[r]=new Dm(e);o.abort=this.loadVectorData(e,(function(s,l){var u=!n.loading[r];if(delete n.loading[r],u||s||!l)return o.status="done",u||(n.loaded[r]=o),t(s);var c=l.rawData,h={};l.expires&&(h.expires=l.expires),l.cacheControl&&(h.cacheControl=l.cacheControl),o.vectorTile=l.vectorTile||new ah(new Mf(c));var f=function(){o.parse(o.vectorTile,n.layerIndex,n.availableImages,n.actor,(function(e,n){if(e||!n)return t(e);var r={};if(a){var o=st(i);o.length>0&&(r.resourceTiming=JSON.parse(JSON.stringify(o)))}t(null,W({rawTileData:c.slice(0)},n,h,r))}))};n.isSpriteLoaded?f():n.once("isSpriteLoaded",(function(){n.scheduler?n.scheduler.add(f,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):f()})),n.loaded=n.loaded||{},n.loaded[r]=o}))}},{key:"reloadTile",value:function(e,t){var n=this,r=this.loaded,i=e.uid,a=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Vd(e.tileID.canonical,e.projection);var s=function(e,r){var i=o.reloadCallback;i&&(delete o.reloadCallback,o.parse(o.vectorTile,a.layerIndex,n.availableImages,a.actor,i)),t(e,r)};"parsing"===o.status?o.reloadCallback=s:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,s):s())}}},{key:"abortTile",value:function(e,t){var n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}},{key:"removeTile",value:function(e,t){var n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}}]),n}(dt),e.WritingMode=Nf,e.ZoomDependentExpression=fi,e.add=Vs,e.addDynamicAttributes=pp,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8];return e[0]=o*c-s*u,e[1]=i*u-r*c,e[2]=r*s-i*o,e[3]=s*l-a*c,e[4]=n*c-i*l,e[5]=i*a-n*s,e[6]=a*u-o*l,e[7]=r*l-n*u,e[8]=n*o-r*a,e},e.asyncAll=Z,e.bezier=B,e.bindAll=J,e.boundsAttributes=Qp,e.bufferConvexPolygon=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=U(r-1,-1,e.length-1),a=U(r+1,-1,e.length-1),o=e[r],s=e[a],l=e[i].sub(o).unit(),u=s.sub(o).unit(),c=u.angleWithSep(l.x,l.y),h=l.add(u).unit().mult(-1*t/Math.sin(c/2));n.push(o.add(h))}return n},e.cacheEntryPossiblyAdded=function(e){++be>ge&&(e.getActor().send("enforceCacheSizeLimit",ve),be=0)},e.calculateGlobeLabelMatrix=function(e,t){var n=e.point,r=Wl(n.x,n.y,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Ps(r,r,Hl(zl(t)))},e.calculateGlobeMatrix=function(e){var t=e.point,n=t.x,r=t.y,i=e._center,a=i.lng,o=i.lat;return Wl(n,r,e.worldSize,a,o)},e.calculateGlobeMercatorMatrix=function(e){var t=e.pixelsPerMeter,n=t/ou(1,e.center.lat),r=Ms(new Float64Array(16));return Is(r,r,[e.point.x,e.point.y,0]),zs(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=ru,e.clamp=$,e.clearTileCache=function(e){if(ye()){var t=y.caches.delete(me);e&&t.catch(e).then((function(){return e()}))}},e.clipLine=ld,e.clone=function(e){var t=new Ss(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=ne,e.collisionCircleLayout=Gh,e.config=x,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Ss(16);return Ss!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Ts,e.createExpression=ci,e.createLayout=Qa,e.createStyleLayer=function(e){return"custom"===e.type?new Sp(e):new Mp[e.type](e)},e.cross=Ys,e.degToRad=R,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=Ks,e.earthRadius=Ql,e.ease=F,e.easeCubicInOut=N,e.ecefToLatLng=function(e){var t=h(e,3),n=t[0],r=t[1],i=t[2],a=Math.hypot(n,r,i),o=Math.atan2(n,i),s=.5*Math.PI-Math.acos(-r/a);return new nu(O(o),O(s))},e.emitValidationErrors=ra,e.endsWith=Q,e.enforceCacheSizeLimit=function(e){_e(),de&&de.then((function(t){t.keys().then((function(n){for(var r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=Jh,e.evaluateSizeForZoom=Qh,e.evaluateVariableOffset=Pd,e.evented=za,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=lt,e.exported$1=b,e.extend=W,e.extend$1=mt,e.fillExtrusionHeightLift=xh,e.filterObject=te,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,h=r*s,f=i*o,d=i*s,p=i*l,m=a*o,v=a*s,g=a*l;return e[0]=1-h-p,e[1]=c+g,e[2]=f-v,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+m,e[7]=0,e[8]=f+v,e[9]=d-m,e[10]=1-u-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=Rs,e.furthestTileCorner=function(e){var t=Math.round((e+45+360)%360/90)%4;return j[t]},e.getAABBPointSquareDist=function(e,t,n){for(var r=0,i=0;i<2;++i){var a=n?n[i]:0;e[i]>a&&(r+=(e[i]-a)*(e[i]-a)),t[i]<a&&(r+=(a-t[i])*(a-t[i]))}return r},e.getAnchorAlignment=Kf,e.getAnchorJustification=zd,e.getBounds=function(e){var t,n=1/0,r=1/0,i=-1/0,a=-1/0,o=f(e);try{for(o.s();!(t=o.n()).done;){var s=t.value;n=Math.min(n,s.x),r=Math.min(r,s.y),i=Math.max(i,s.x),a=Math.max(a,s.y)}}catch(l){o.e(l)}finally{o.f()}return{min:new z(n,r),max:new z(i,a)}},e.getColumn=fe,e.getDefaultExportFromCjs=T,e.getGridMatrix=function(e,t,n,r){var i=t.getNorth(),a=t.getSouth(),o=t.getWest(),s=t.getEast(),l=1<<e.z,u=s-o,c=i-a,h=u/kl,f=-c/El[n],d=[0,h,0,f,0,0,i,o,0];if(e.z>0){var p=180/r;Cs(d,d,[p/u+1,0,0,0,p/c+1,0,-.5*p/h,.5*p/f,1])}return d[2]=l,d[5]=e.x,d[8]=e.y,d},e.getImage=Ie,e.getJSON=function(e,t){return Se(W(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){var t=cu-5;e=$(e,-t,t)/t*90;var n=Math.pow(Math.abs(Math.sin(R(e))),3);return Math.round(n*(El.length-1))},e.getMapSessionAPI=Ye,e.getPerformanceMeasurement=st,e.getProjection=up,e.getRTLTextPluginStatus=La,e.getReferrer=Ee,e.getTilePoint=function(e,t){var n=t.x,r=t.y;return new z(((n-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*ws,(r*e.scale-e.y)*ws)},e.getTileVec3=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $s(((t.x-n)*e.scale-e.x)*ws,(t.y*e.scale-e.y)*ws,uu(t.z,t.y))},e.getVideo=function(e,t){var n=y.document.createElement("video");n.muted=!0,n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var i=y.document.createElement("source");Ce(e[r])||(n.crossOrigin="Anonymous"),i.src=e[r],n.appendChild(i)}return{cancel:function(){}}},e.globeCenterToScreenPoint=function(e){var t=[0,0,0],n=Ms(new Float64Array(16));return Ps(n,e.pixelMatrix,e.globeMatrix),Js(t,t,n),new z(t[0],t[1])},e.globeDenormalizeECEF=Hl,e.globeECEFOrigin=function(e,t){var n=[0,0,0];return Js(n,n,Zl(zl(t.canonical))),Js(n,n,e),n},e.globeMetersToEcef=Ml,e.globeNormalizeECEF=Zl,e.globePixelsToTileUnits=function(e,t){return ws/(512*Math.pow(2,e))*Vl(zl(t))},e.globePoleMatrixForTile=function(e,t,n){var r=Ms(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return Ds(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=zl,e.globeTiltAtLngLat=Gl,e.globeToMercatorTransition=ql,e.globeUseCustomAntiAliasing=function(e,t,n){var r=ql(n.zoom),i=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!o&&a},e.identity=Ms,e.identity$1=ll,e.invert=As,e.isFullscreen=function(){return!!y.document.fullscreenElement||!!y.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Xl,e.isMapAuthenticated=function(e){return Je.has(e)},e.isMapboxURL=Le,e.isSafariWithAntialiasingBug=function(e){var t=e.navigator?e.navigator.userAgent:null;return!!ce(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=lu,e.latLngToECEF=Fl,e.len=rl,e.length=Fs,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=su,e.loadVectorTile=jm,e.makeRequest=Se,e.mapValue=function(e,t,n,r,i){return $((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=hu,e.mercatorXfromLng=iu,e.mercatorYfromLat=au,e.mercatorZfromAltitude=ou,e.mul=js,e.mul$1=nl,e.multiply=Ps,e.multiply$1=Cs,e.multiply$2=Zs,e.nextPowerOfTwo=K,e.normalize=Xs,e.normalize$1=hl,e.normalize$2=al,e.number=Wn,e.ortho=function(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e},e.pbf=of,e.perspective=function(e,t,n,r,i){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(a=1/(r-i)),e[14]=2*i*r*a):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Ra,e.pointGeometry=P,e.polesInViewport=function(e){var t=Ms(new Float64Array(16));Ps(t,e.pixelMatrix,e.globeMatrix);var n=[0,Sl,0],r=[0,Tl,0];return Js(n,n,t),Js(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Xl(e,new nu(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Xl(e,new nu(e.center.lat,-90))]},e.polygonContainsPoint=Du,e.polygonIntersectsBox=Ru,e.polygonIntersectsPolygon=Su,e.polygonizeBounds=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=new z(n,n),a=e.sub(i),o=t.add(i),s=[a,new z(o.x,a.y),o,new z(a.x,o.y)];return r&&s.push(a.clone()),s},e.posAttributes=pl,e.postMapLoadEvent=qe,e.postPerformanceEvent=Xe,e.postTurnstileEvent=He,e.potpack=Df,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=O,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Ma,pluginURL:Aa}),za.on("pluginStateChange",e),e},e.removeAuthState=function(e){Je.delete(e)},e.renderColorRamp=tc,e.resample=pu,e.rotateX=Ls,e.rotateX$1=ul,e.rotateY=Ds,e.rotateY$1=cl,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],h=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+h*r,e[3]=l*i+f*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=h*i-s*r,e[7]=f*i-l*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=zs,e.scale$1=il,e.scale$2=qs,e.scaleAndAdd=Gs,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){ve=e,ge=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ma===Ea||Ma===Sa||Ma===Ta)throw new Error("setRTLTextPlugin cannot be called multiple times.");Aa=lt.resolveURL(e),Ma=Ea,Ca=t,Ia(),n||Da()},e.smoothstep=V,e.spec=pt,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?Je.add(e):Je.delete(e)},e.sub=tl,e.subtract=Us,e.symbolSize=ef,e.tileAABB=function(e,t,n,r,i,a,o,s,l){if("globe"===l.name)return Ol(e,t,new Sh(n,r,i));var u=Vd({z:n,x:r,y:i},l);return new yl([(a+u.x/u.scale)*t,t*(u.y/u.scale),o],[(a+u.x2/u.scale)*t,t*(u.y2/u.scale),s])},e.tileCornersToBounds=jl,e.tileTransform=Vd,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e},e.transformMat4=Js,e.transformMat4$1=ol,e.transformQuat=Qs,e.transitionTileAABBinECEF=Dl,e.translate=Is,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Pa,e.uniqueId=G,e.updateGlobeVertexNormal=function(e,t,n,r,i){var a=5*t+2;e.float32[a+0]=n,e.float32[a+1]=r,e.float32[a+2]=i},e.validateCustomStyleLayer=function(e){var t=[],n=e.id;return void 0===n&&t.push({message:"layers.".concat(n,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(n,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(n,': property "renderingMode" must be either "2d" or "3d"')}),t},e.validateFilter=function(e){return na(ji(e))},e.validateFog=function(e){return na(Xi(e))},e.validateLayer=function(e){return na(Vi(e))},e.validateLight=function(e){return na(qi(e))},e.validateSource=function(e){return na(Hi(e))},e.validateStyle=Qi,e.validateTerrain=function(e){return na(Gi(e))},e.values=H,e.vectorTile=qc,e.version=_,e.warnOnce=ie,e.window=y,e.wrap=U})),y(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){var n,r="[",i=f(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;r+="".concat(t(a),",")}}catch(c){i.e(c)}finally{i.f()}return"".concat(r,"]")}var o,s="{",l=f(Object.keys(e).sort());try{for(l.s();!(o=l.n()).done;){var u=o.value;s+="".concat(u,":").concat(t(e[u]),",")}}catch(c){l.e(c)}finally{l.f()}return"".concat(s,"}")}function n(n){var r,i="",a=f(e.refProperties);try{for(a.s();!(r=a.n()).done;){var o=r.value;i+="/".concat(t(n[o]))}}catch(s){a.e(s)}finally{a.f()}return i}var r=function(){function t(e){d(this,t),this.keyCache={},e&&this.replace(e)}return p(t,[{key:"replace",value:function(e){this._layerConfigs={},this._layers={},this.update(e,[])}},{key:"update",value:function(t,r){var i,a=this,o=f(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;this._layerConfigs[s.id]=s,(this._layers[s.id]=e.createStyleLayer(s)).compileFilter(),this.keyCache[s.id]&&delete this.keyCache[s.id]}}catch(b){o.e(b)}finally{o.f()}var l,u=f(r);try{for(u.s();!(l=u.n()).done;){var c=l.value;delete this.keyCache[c],delete this._layerConfigs[c],delete this._layers[c]}}catch(b){u.e(b)}finally{u.f()}this.familiesBySource={};var h,d=function(e,t){for(var r={},i=0;i<e.length;i++){var a=t&&t[e[i].id]||n(e[i]);t&&(t[e[i].id]=a);var o=r[a];o||(o=r[a]=[]),o.push(e[i])}var s=[];for(var l in r)s.push(r[l]);return s}(e.values(this._layerConfigs),this.keyCache),p=f(d);try{for(p.s();!(h=p.n()).done;){var m=h.value.map((function(e){return a._layers[e.id]})),v=m[0];if("none"!==v.visibility){var g=v.source||"",y=this.familiesBySource[g];y||(y=this.familiesBySource[g]={});var _=v.sourceLayer||"_geojsonTileLayer",x=y[_];x||(x=y[_]=[]),x.push(m)}}}catch(b){p.e(b)}finally{p.f()}}}]),t}(),i=function(){function t(){d(this,t)}return p(t,[{key:"loadTile",value:function(t,n){var r=t.uid,i=t.encoding,a=t.rawImageData,o=t.padding,s=t.buildQuadTree,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;n(null,new e.DEMData(r,l,i,o<1,s))}},{key:"getImageData",value:function(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);var n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}]),t}();function a(e,t){if(0!==e.length){l(e[0],t);for(var n=1;n<e.length;n++)l(e[n],!t)}}function l(e,t){for(var n=0,r=0,i=0,a=e.length,o=a-1;i<a;o=i++){var s=(e[i][0]-e[o][0])*(e[o][1]+e[i][1]),l=n+s;r+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+r>=0!=!!t&&e.reverse()}var u=e.getDefaultExportFromCjs((function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)a(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)a(t.coordinates[r],n);return t})),c=e.VectorTileFeature.prototype.toGeoJSON,g={exports:{}},y=e.pointGeometry,_=e.vectorTile.VectorTileFeature,x=b;function b(e,t){this.options=t||{},this.features=e,this.length=e.length}function w(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}b.prototype.feature=function(e){return new w(this.features[e],this.options.extent)},w.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new y(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},w.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},w.prototype.toGeoJSON=_.prototype.toGeoJSON;var k=e.pbf,E=x;function S(e){var t=new k;return function(e,t){for(var n in e.layers)t.writeMessage(3,T,e.layers[n])}(e,t),t.finish()}function T(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,C,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,z,a[n])}function C(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,M,e),t.writeVarintField(3,n.type),t.writeMessage(4,I,n)}function M(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=n.properties[s],u=a[s];if(null!==l){void 0===u&&(r.push(s),a[s]=u=r.length-1),t.writeVarint(u);var c=typeof l;"string"!==c&&"boolean"!==c&&"number"!==c&&(l=JSON.stringify(l));var h=c+":"+l,f=o[h];void 0===f&&(i.push(l),o[h]=f=i.length-1),t.writeVarint(f)}}}function A(e,t){return(t<<3)+(7&e)}function P(e){return e<<1^e>>31}function I(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],u=1;1===r&&(u=l.length),t.writeVarint(A(1,u));for(var c=3===r?l.length-1:l.length,h=0;h<c;h++){1===h&&1!==r&&t.writeVarint(A(2,c-1));var f=l[h].x-i,d=l[h].y-a;t.writeVarint(P(f)),t.writeVarint(P(d)),i+=f,a+=d}3===r&&t.writeVarint(A(7,1))}}function z(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}g.exports=S,g.exports.fromVectorTileJs=S,g.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new E(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return S({layers:n})},g.exports.GeoJSONWrapper=E;var L,D=e.getDefaultExportFromCjs(g.exports),R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},O=Math.fround||(L=new Float32Array(1),function(e){return L[0]=+e,L[0]}),j=3,N=5,B=6,F=function(){function t(e){d(this,t),this.options=Object.assign(Object.create(R),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}return p(t,[{key:"load",value:function(e){var t=this.options,n=t.log,r=t.minZoom,i=t.maxZoom;n&&console.time("total time");var a="prepare ".concat(e.length," points");n&&console.time(a),this.points=e;for(var o=[],s=0;s<e.length;s++){var l=e[s];if(l.geometry){var u=h(l.geometry.coordinates,2),c=u[0],f=u[1],d=O(U(c)),p=O(Z(f));o.push(d,p,1/0,s,-1,1),this.options.reduce&&o.push(0)}}var m=this.trees[i+1]=this._createTree(o);n&&console.timeEnd(a);for(var v=i;v>=r;v--){var g=+Date.now();m=this.trees[v]=this._createTree(this._cluster(m,v)),n&&console.log("z%d: %d clusters in %dms",v,m.numItems,+Date.now()-g)}return n&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var n=((e[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,e[1])),i=180===e[2]?180:((e[2]+180)%360+360)%360-180,a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){var o=this.getClusters([n,r,180,a],t),s=this.getClusters([-180,r,i,a],t);return o.concat(s)}var l,u=this.trees[this._limitZoom(t)],c=u.range(U(n),Z(a),U(i),Z(r)),h=u.data,d=[],p=f(c);try{for(p.s();!(l=p.n()).done;){var m=l.value,v=this.stride*m;d.push(h[v+N]>1?$(h,v,this.clusterProps):this.points[h[v+j]])}}catch(g){p.e(g)}finally{p.f()}return d}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);var a=i.data;if(t*this.stride>=a.length)throw new Error(r);var o,s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),l=i.within(a[t*this.stride],a[t*this.stride+1],s),u=[],c=f(l);try{for(c.s();!(o=c.n()).done;){var h=o.value*this.stride;a[h+4]===e&&u.push(a[h+N]>1?$(a,h,this.clusterProps):this.points[a[h+j]])}}catch(d){c.e(d)}finally{c.f()}if(0===u.length)throw new Error(r);return u}},{key:"getLeaves",value:function(e,t,n){var r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}},{key:"getTile",value:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options,o=a.extent,s=a.radius/o,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,u),r.data,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.data,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.data,-1,n,i,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,n,r,i){var a,o=this.getChildren(t),s=f(o);try{for(s.s();!(a=s.n()).done;){var l=a.value,u=l.properties;if(u&&u.cluster?i+u.point_count<=r?i+=u.point_count:i=this._appendLeaves(e,u.cluster_id,n,r,i):i<r?i++:e.push(l),e.length===n)break}}catch(c){s.e(c)}finally{s.f()}return i}},{key:"_createTree",value:function(t){for(var n=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<t.length;r+=this.stride)n.add(t[r],t[r+1]);return n.finish(),n.data=t,n}},{key:"_addTileFeatures",value:function(e,t,n,r,i,a){var o,s=f(e);try{for(s.s();!(o=s.n()).done;){var l=o.value*this.stride,u=t[l+N]>1,c=void 0,d=void 0,p=void 0;if(u)c=V(t,l,this.clusterProps),d=t[l],p=t[l+1];else{var m=this.points[t[l+j]];c=m.properties;var v=h(m.geometry.coordinates,2),g=v[0],y=v[1];d=U(g),p=Z(y)}var _={type:1,geometry:[[Math.round(this.options.extent*(d*i-n)),Math.round(this.options.extent*(p*i-r))]],tags:c},x=void 0;void 0!==(x=u||this.options.generateId?t[l+j]:this.points[t[l+j]].id)&&(_.id=x),a.features.push(_)}}catch(b){s.e(b)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var n=this.options,r=n.radius,i=n.extent,a=n.reduce,o=n.minPoints,s=r/(i*Math.pow(2,t)),l=e.data,u=[],c=this.stride,h=0;h<l.length;h+=c)if(!(l[h+2]<=t)){l[h+2]=t;var d,p=l[h],m=l[h+1],v=e.within(l[h],l[h+1],s),g=l[h+N],y=g,_=f(v);try{for(_.s();!(d=_.n()).done;){var x=d.value*c;l[x+2]>t&&(y+=l[x+N])}}catch(R){_.e(R)}finally{_.f()}if(y>g&&y>=o){var b,w=void 0,k=p*g,E=m*g,S=-1,T=((h/c|0)<<5)+(t+1)+this.points.length,C=f(v);try{for(C.s();!(b=C.n()).done;){var M=b.value*c;if(!(l[M+2]<=t)){l[M+2]=t;var A=l[M+N];k+=l[M]*A,E+=l[M+1]*A,l[M+4]=T,a&&(w||(w=this._map(l,h,!0),S=this.clusterProps.length,this.clusterProps.push(w)),a(w,this._map(l,M)))}}}catch(R){C.e(R)}finally{C.f()}l[h+4]=T,u.push(k/y,E/y,1/0,T,-1,y),a&&u.push(S)}else{for(var P=0;P<c;P++)u.push(l[h+P]);if(y>1){var I,z=f(v);try{for(z.s();!(I=z.n()).done;){var L=I.value*c;if(!(l[L+2]<=t)){l[L+2]=t;for(var D=0;D<c;D++)u.push(l[L+D])}}}catch(R){z.e(R)}finally{z.f()}}}}return u}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t,n){if(e[t+N]>1){var r=this.clusterProps[e[t+B]];return n?Object.assign({},r):r}var i=this.points[e[t+j]].properties,a=this.options.map(i);return n&&a===i?Object.assign({},a):a}}]),t}();function $(e,t,n){return{type:"Feature",id:e[t+j],properties:V(e,t,n),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),H(e[t+1])]}};var r}function V(e,t,n){var r=e[t+N],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,a=e[t+B],o=-1===a?{}:Object.assign({},n[a]);return Object.assign(o,{cluster:!0,cluster_id:e[t+j],point_count:r,point_count_abbreviated:i})}function U(e){return e/360+.5}function Z(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function H(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function W(e,t,n,r){for(var i,a=r,o=n-t>>1,s=n-t,l=e[t],u=e[t+1],c=e[n],h=e[n+1],f=t+3;f<n;f+=3){var d=q(e[f],e[f+1],l,u,c,h);if(d>a)i=f,a=d;else if(d===a){var p=Math.abs(f-o);p<s&&(i=f,s=p)}}a>r&&(i-t>3&&W(e,t,i,r),e[i+2]=a,n-i>3&&W(e,i,n,r))}function q(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var l=((e-n)*o+(t-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return(o=e-n)*o+(s=t-r)*s}function G(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)X(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)X(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)X(e,t[r][i])}(i),i}function X(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function K(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=r||0),"Point"===a)Y(i,s);else if("MultiPoint"===a)for(var u=0;u<i.length;u++)Y(i[u],s);else if("LineString"===a)J(i,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(u=0;u<i.length;u++)J(i[u],s=[],o,!1),e.push(G(l,"LineString",s,t.properties));return}Q(i,s,o,!1)}else if("Polygon"===a)Q(i,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(u=0;u<t.geometry.geometries.length;u++)K(e,{id:l,geometry:t.geometry.geometries[u],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(u=0;u<i.length;u++){var c=[];Q(i[u],c,o,!0),s.push(c)}}e.push(G(l,a,s,t.properties))}}function Y(e,t){t.push(ee(e[0])),t.push(te(e[1])),t.push(0)}function J(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var l=ee(e[s][0]),u=te(e[s][1]);t.push(l),t.push(u),t.push(0),s>0&&(o+=r?(i*u-l*a)/2:Math.sqrt(Math.pow(l-i,2)+Math.pow(u-a,2))),i=l,a=u}var c=t.length-3;t[2]=1,W(t,0,c,n),t[c+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function Q(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];J(e[i],a,n,r),t.push(a)}}function ee(e){return e/360+.5}function te(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ne(e,t,n,r,i,a,o,s){if(r/=t,a>=(n/=t)&&o<r)return e;if(o<n||a>=r)return null;for(var l=[],u=0;u<e.length;u++){var c=e[u],h=c.geometry,f=c.type,d=0===i?c.minX:c.minY,p=0===i?c.maxX:c.maxY;if(d>=n&&p<r)l.push(c);else if(!(p<n||d>=r)){var m=[];if("Point"===f||"MultiPoint"===f)re(h,m,n,r,i);else if("LineString"===f)ie(h,m,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===f)oe(h,m,n,r,i,!1);else if("Polygon"===f)oe(h,m,n,r,i,!0);else if("MultiPolygon"===f)for(var v=0;v<h.length;v++){var g=[];oe(h[v],g,n,r,i,!0),g.length&&m.push(g)}if(m.length){if(s.lineMetrics&&"LineString"===f){for(v=0;v<m.length;v++)l.push(G(c.id,f,m[v],c.tags));continue}"LineString"!==f&&"MultiLineString"!==f||(1===m.length?(f="LineString",m=m[0]):f="MultiLineString"),"Point"!==f&&"MultiPoint"!==f||(f=3===m.length?"Point":"MultiPoint"),l.push(G(c.id,f,m,c.tags))}}}return l.length?l:null}function re(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function ie(e,t,n,r,i,a,o){for(var s,l,u=ae(e),c=0===i?le:ue,h=e.start,f=0;f<e.length-3;f+=3){var d=e[f],p=e[f+1],m=e[f+2],v=e[f+3],g=e[f+4],y=0===i?d:p,_=0===i?v:g,x=!1;o&&(s=Math.sqrt(Math.pow(d-v,2)+Math.pow(p-g,2))),y<n?_>n&&(l=c(u,d,p,v,g,n),o&&(u.start=h+s*l)):y>r?_<r&&(l=c(u,d,p,v,g,r),o&&(u.start=h+s*l)):se(u,d,p,m),_<n&&y>=n&&(l=c(u,d,p,v,g,n),x=!0),_>r&&y<=r&&(l=c(u,d,p,v,g,r),x=!0),!a&&x&&(o&&(u.end=h+s*l),t.push(u),u=ae(e)),o&&(h+=s)}var b=e.length-3;d=e[b],p=e[b+1],m=e[b+2],(y=0===i?d:p)>=n&&y<=r&&se(u,d,p,m),b=u.length-3,a&&b>=3&&(u[b]!==u[0]||u[b+1]!==u[1])&&se(u,u[0],u[1],u[2]),u.length&&t.push(u)}function ae(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function oe(e,t,n,r,i,a){for(var o=0;o<e.length;o++)ie(e[o],t,n,r,i,a,!1)}function se(e,t,n,r){e.push(t),e.push(n),e.push(r)}function le(e,t,n,r,i,a){var o=(a-t)/(r-t);return e.push(a),e.push(n+(i-n)*o),e.push(1),o}function ue(e,t,n,r,i,a){var o=(a-n)/(i-n);return e.push(t+(r-t)*o),e.push(a),e.push(1),o}function ce(e,t){for(var n=[],r=0;r<e.length;r++){var i,a=e[r],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)i=he(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){i=[];for(var s=0;s<a.geometry.length;s++)i.push(he(a.geometry[s],t))}else if("MultiPolygon"===o)for(i=[],s=0;s<a.geometry.length;s++){for(var l=[],u=0;u<a.geometry[s].length;u++)l.push(he(a.geometry[s][u],t));i.push(l)}n.push(G(a.id,o,i,a.tags))}return n}function he(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function fe(e,t){if(e.transformed)return e;var n,r,i,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],u=l.geometry,c=l.type;if(l.geometry=[],1===c)for(r=0;r<u.length;r+=2)l.geometry.push(de(u[r],u[r+1],t,a,o,s));else for(r=0;r<u.length;r++){var h=[];for(i=0;i<u[r].length;i+=2)h.push(de(u[r][i],u[r][i+1],t,a,o,s));l.geometry.push(h)}}return e.transformed=!0,e}function de(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}function pe(e,t,n,r,i){for(var a=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,me(o,e[s],a,i);var l=e[s].minX,u=e[s].minY,c=e[s].maxX,h=e[s].maxY;l<o.minX&&(o.minX=l),u<o.minY&&(o.minY=u),c>o.maxX&&(o.maxX=c),h>o.maxY&&(o.maxY=h)}return o}function me(e,t,n,r){var i=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<i.length;s+=3)o.push(i[s]),o.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)ve(o,i,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<i.length;s++)ve(o,i[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<i.length;l++){var u=i[l];for(s=0;s<u.length;s++)ve(o,u[s],e,n,!0,0===s)}if(o.length){var c=t.tags||null;if("LineString"===a&&r.lineMetrics){for(var h in c={},t.tags)c[h]=t.tags[h];c.mapbox_clip_start=i.start/i.size,c.mapbox_clip_end=i.end/i.size}var f={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:c};null!==t.id&&(f.id=t.id),e.features.push(f)}}function ve(e,t,n,r,i,a){var o=r*r;if(r>0&&t.size<(i?o:r))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===r||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}(s,a),e.push(s)}}function ge(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)K(n,e.features[r],t,r);else K(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=ne(e,1,-1-n,n,0,-1,2,t),a=ne(e,1,1-n,2+n,0,-1,2,t);return(i||a)&&(r=ne(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=ce(i,1).concat(r)),a&&(r=r.concat(ce(a,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function ye(e,t,n){return 32*((1<<e)*n+t)+e}function _e(t,n){var r=t.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);var i=this._geoJSONIndex.getTile(r.z,r.x,r.y);if(!i)return n(null,null);var a=new(function(){function t(n){d(this,t),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=n.length,this._features=n}return p(t,[{key:"feature",value:function(t){return new(function(){function t(n){d(this,t),this._feature=n,this.extent=e.EXTENT,this.type=n.type,this.properties=n.tags,"id"in n&&!isNaN(n.id)&&(this.id=parseInt(n.id,10))}return p(t,[{key:"loadGeometry",value:function(){if(1===this._feature.type){var t,n=[],r=f(this._feature.geometry);try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push([new e.Point(i[0],i[1])])}}catch(p){r.e(p)}finally{r.f()}return n}var a,o=[],s=f(this._feature.geometry);try{for(s.s();!(a=s.n()).done;){var l,u=a.value,c=[],h=f(u);try{for(h.s();!(l=h.n()).done;){var d=l.value;c.push(new e.Point(d[0],d[1]))}}catch(p){h.e(p)}finally{h.f()}o.push(c)}}catch(p){s.e(p)}finally{s.f()}return o}},{key:"toGeoJSON",value:function(e,t,n){return c.call(this,e,t,n)}}]),t}())(this._features[t])}}]),t}())(i.features),o=D(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),n(null,{vectorTile:a,rawData:o.buffer})}ge.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ge.prototype.splitTile=function(e,t,n,r,i,a,o){for(var s=[e,t,n,r],l=this.options,u=l.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var c=1<<t,h=ye(t,n,r),f=this.tiles[h];if(!f&&(u>1&&console.time("creation"),f=this.tiles[h]=pe(e,t,n,r,l),this.tileCoords.push({z:t,x:n,y:r}),u)){u>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,f.numFeatures,f.numPoints,f.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(f.source=e,i){if(t===l.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(a/p)||r!==Math.floor(o/p))continue}else if(t===l.indexMaxZoom||f.numPoints<=l.indexMaxPoints)continue;if(f.source=null,0!==e.length){u>1&&console.time("clipping");var m,v,g,y,_,x,b=.5*l.buffer/l.extent,w=.5-b,k=.5+b,E=1+b;m=v=g=y=null,_=ne(e,c,n-b,n+k,0,f.minX,f.maxX,l),x=ne(e,c,n+w,n+E,0,f.minX,f.maxX,l),e=null,_&&(m=ne(_,c,r-b,r+k,1,f.minY,f.maxY,l),v=ne(_,c,r+w,r+E,1,f.minY,f.maxY,l),_=null),x&&(g=ne(x,c,r-b,r+k,1,f.minY,f.maxY,l),y=ne(x,c,r+w,r+E,1,f.minY,f.maxY,l),x=null),u>1&&console.timeEnd("clipping"),s.push(m||[],t+1,2*n,2*r),s.push(v||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(y||[],t+1,2*n+1,2*r+1)}}},ge.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,a=r.debug;if(e<0||e>24)return null;var o=1<<e,s=ye(e,t=(t%o+o)%o,n);if(this.tiles[s])return fe(this.tiles[s],i);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,u=e,c=t,h=n;!l&&u>0;)u--,c=Math.floor(c/2),h=Math.floor(h/2),l=this.tiles[ye(u,c,h)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",u,c,h),a>1&&console.time("drilling down"),this.splitTile(l.source,u,c,h,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?fe(this.tiles[s],i):null):null};var xe=function(t){m(r,t);var n=v(r);function r(e,t,i,a,o){var s;return d(this,r),s=n.call(this,e,t,i,a,_e),o&&(s.loadGeoJSON=o),s}return p(r,[{key:"loadData",value:function(t,n){var r=this,i=t&&t.request,a=i&&i.collectResourceTiming;this.loadGeoJSON(t,(function(o,s){if(o||!s)return n(o);if("object"!=typeof s)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));u(s,!0);try{if(t.filter){var l=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===l.result)throw new Error(l.value.map((function(e){return"".concat(e.key,": ").concat(e.message)})).join(", "));var c=s.features.filter((function(e){return l.value.evaluate({zoom:0},e)}));s={type:"FeatureCollection",features:c}}r._geoJSONIndex=t.cluster?new F(function(t){var n=t.superclusterOptions,r=t.clusterProperties;if(!r||!n)return n;for(var i={},a={},o={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r),u=0,c=l;u<c.length;u++){var f=c[u],d=h(r[f],2),p=d[0],m=d[1],v=e.createExpression(m),g=e.createExpression("string"==typeof p?[p,["accumulated"],["get",f]]:p);i[f]=v.value,a[f]=g.value}return n.map=function(e){s.properties=e;for(var t={},n=0,r=l;n<r.length;n++){var a=r[n];t[a]=i[a].evaluate(o,s)}return t},n.reduce=function(e,t){s.properties=t;for(var n=0,r=l;n<r.length;n++){var i=r[n];o.accumulated=e[i],e[i]=a[i].evaluate(o,s)}},n}(t)).load(s.features):function(e,t){return new ge(e,t)}(s,t.geojsonVtOptions)}catch(o){return n(o)}r.loaded={};var f={};if(a){var d=e.getPerformanceMeasurement(i);d&&(f.resourceTiming={},f.resourceTiming[t.source]=JSON.parse(JSON.stringify(d)))}n(null,f)}))}},{key:"reloadTile",value:function(e,t){var n=this.loaded;return n&&n[e.uid]?o(s(r.prototype),"reloadTile",this).call(this,e,t):this.loadTile(e,t)}},{key:"loadGeoJSON",value:function(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}},{key:"getClusterExpansionZoom",value:function(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}},{key:"getClusterChildren",value:function(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}},{key:"getClusterLeaves",value:function(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}]),r}(e.VectorTileWorkerSource),be=function(){function t(n){var r=this;d(this,t),this.self=n,this.actor=new e.Actor(n,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:xe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,t){if(r.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));r.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=function(t){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}return p(t,[{key:"clearCaches",value:function(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}},{key:"checkIfReady",value:function(e,t,n){n()}},{key:"setReferrer",value:function(e,t){this.referrer=t}},{key:"spriteLoaded",value:function(t,n){for(var r in this.isSpriteLoaded[t]=n,this.workerSources[t]){var i=this.workerSources[t][r];for(var a in i)i[a]instanceof e.VectorTileWorkerSource&&(i[a].isSpriteLoaded=n,i[a].fire(new e.Event("isSpriteLoaded")))}}},{key:"setImages",value:function(e,t,n){for(var r in this.availableImages[e]=t,this.workerSources[e]){var i=this.workerSources[e][r];for(var a in i)i[a].availableImages=t}n()}},{key:"enableTerrain",value:function(e,t,n){this.terrain=t,n()}},{key:"setProjection",value:function(t,n){this.projections[t]=e.getProjection(n)}},{key:"setLayers",value:function(e,t,n){this.getLayerIndex(e).replace(t),n()}},{key:"updateLayers",value:function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}},{key:"loadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}},{key:"loadDEMTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}},{key:"reloadTile",value:function(t,n,r){var i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}},{key:"abortTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}},{key:"removeTile",value:function(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}},{key:"removeSource",value:function(e,t,n){if(this.workerSources[e]&&this.workerSources[e][t.type]&&this.workerSources[e][t.type][t.source]){var r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}}},{key:"loadWorkerSource",value:function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}},{key:"syncRTLPluginState",value:function(t,n,r){try{e.plugin.setState(n);var i=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=i){this.self.importScripts(i);var a=e.plugin.isParsed();r(a?void 0:new Error("RTL Text Plugin failed to import scripts from ".concat(i)),a)}}catch(e){r(e.toString())}}},{key:"getAvailableImages",value:function(e){var t=this.availableImages[e];return t||(t=[]),t}},{key:"getLayerIndex",value:function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}},{key:"getWorkerSource",value:function(e,t,n){var r=this;if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){var i={send:function(t,n,i,a,o,s){r.actor.send(t,n,i,e,o,s)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}},{key:"getDEMWorkerSource",value:function(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}},{key:"enforceCacheSizeLimit",value:function(t,n){e.enforceCacheSizeLimit(n)}},{key:"getWorkerPerformanceMetrics",value:function(e,t,n){n(void 0,void 0)}}]),t}();return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new be(self)),be})),y(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(var i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=u;function u(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===g[t=e&&e.failIfMajorPerformanceCaveat]&&(g[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(u.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),g[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var g={};function y(t,n,r){var i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function _(t,n,r){for(var i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t),a=0,o=Object.keys(n);a<o.length;a++){var s=o[a];i.setAttributeNS(null,s,n[s])}return r&&r.appendChild(i),i}u.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};var x,b=e.window.document&&e.window.document.documentElement.style,w=b&&void 0!==b.userSelect?"userSelect":"WebkitUserSelect";function k(){b&&w&&(x=b[w],b[w]="none")}function E(){b&&w&&(b[w]=x)}function S(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",S,!0)}function T(){e.window.addEventListener("click",S,!0),e.window.setTimeout((function(){e.window.removeEventListener("click",S,!0)}),0)}function C(e,t){var n=e.getBoundingClientRect();return P(e,n,t)}function M(e,t){for(var n=e.getBoundingClientRect(),r=[],i=0;i<t.length;i++)r.push(P(e,n,t[i]));return r}function A(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function P(t,n,r){var i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.Point((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function I(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(e[0]=a*(o=1/o),e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function z(e){var t=e.userImage;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}var L=function(t){m(r,t);var n=v(r);function r(){var t;return d(this,r),(t=n.call(this)).images={},t.updatedImages={},t.callbackDispatchedThisFrame={},t.loaded=!1,t.requestors=[],t.patterns={},t.atlasImage=new e.RGBAImage({width:1,height:1}),t.dirty=!0,t}return p(r,[{key:"isLoaded",value:function(){return this.loaded}},{key:"setLoaded",value:function(e){if(this.loaded!==e&&(this.loaded=e,e)){var t,n=f(this.requestors);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.ids,a=r.callback;this._notify(i,a)}}catch(o){n.e(o)}finally{n.f()}this.requestors=[]}}},{key:"hasImage",value:function(e){return!!this.getImage(e)}},{key:"getImage",value:function(e){return this.images[e]}},{key:"addImage",value:function(e,t){this._validate(e,t)&&(this.images[e]=t)}},{key:"_validate",value:function(t,n){var r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "stretchY" value')))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error('Image "'.concat(t,'" has invalid "content" value')))),r=!1),r}},{key:"_validateStretch",value:function(e,t){if(!e)return!0;var n,r=0,i=f(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a[0]<r||a[1]<a[0]||t<a[1])return!1;r=a[1]}}catch(o){i.e(o)}finally{i.f()}return!0}},{key:"_validateContent",value:function(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}},{key:"updateImage",value:function(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}},{key:"removeImage",value:function(e){var t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}},{key:"listImages",value:function(){return Object.keys(this.images)}},{key:"getImages",value:function(e,t){var n=!0;if(!this.isLoaded()){var r,i=f(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.images[a]||(n=!1)}}catch(o){i.e(o)}finally{i.f()}}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}},{key:"_notify",value:function(t,n){var r,i={},a=f(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.images[o]||this.fire(new e.Event("styleimagemissing",{id:o}));var s=this.images[o];s?i[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf,version:s.version,stretchX:s.stretchX,stretchY:s.stretchY,content:s.content,hasRenderCallback:Boolean(s.userImage&&s.userImage.render)}:e.warnOnce('Image "'.concat(o,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'))}}catch(l){a.e(l)}finally{a.f()}n(null,i)}},{key:"getPixelSize",value:function(){var e=this.atlasImage;return{width:e.width,height:e.height}}},{key:"getPattern",value:function(t){var n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{var i={w:r.data.width+2,h:r.data.height+2,x:0,y:0},a=new e.ImagePosition(i,r);this.patterns[t]={bin:i,position:a}}return this._updatePatternAtlas(),this.patterns[t].position}},{key:"bind",value:function(t){var n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}},{key:"_updatePatternAtlas",value:function(){var t=[];for(var n in this.patterns)t.push(this.patterns[n].bin);var r=e.potpack(t),i=r.w,a=r.h,o=this.atlasImage;for(var s in o.resize({width:i||1,height:a||1}),this.patterns){var l=this.patterns[s].bin,u=l.x+1,c=l.y+1,h=this.images[s].data,f=h.width,d=h.height;e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c},{width:f,height:d}),e.RGBAImage.copy(h,o,{x:0,y:d-1},{x:u,y:c-1},{width:f,height:1}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u,y:c+d},{width:f,height:1}),e.RGBAImage.copy(h,o,{x:f-1,y:0},{x:u-1,y:c},{width:1,height:d}),e.RGBAImage.copy(h,o,{x:0,y:0},{x:u+f,y:c},{width:1,height:d})}this.dirty=!0}},{key:"beginFrame",value:function(){this.callbackDispatchedThisFrame={}}},{key:"dispatchRenderCallbacks",value:function(e){var t,n=f(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!this.callbackDispatchedThisFrame[r]){this.callbackDispatchedThisFrame[r]=!0;var i=this.images[r];z(i)&&this.updateImage(r,i)}}}catch(a){n.e(a)}finally{n.f()}}}]),r}(e.Evented),D=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new(function(){function t(){d(this,t),this.specification=e.spec.light.position}return p(t,[{key:"possiblyEvaluate",value:function(t,n){return function(t){var n=h(t,3),r=n[0],i=n[1],a=n[2],o=e.degToRad(i+90),s=e.degToRad(a);return{x:r*Math.cos(o)*Math.sin(s),y:r*Math.sin(o)*Math.sin(s),z:r*Math.cos(s),azimuthal:i,polar:a}}(t.expression.evaluate(n))}},{key:"interpolate",value:function(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}}]),t}()),color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),R=function(t){m(r,t);var n=v(r);function r(t){var i;return d(this,r),(i=n.call(this))._transitionable=new e.Transitionable(D),i.setLight(t),i._transitioning=i._transitionable.untransitioned(),i}return p(r,[{key:"getLight",value:function(){return this._transitionable.serialize()}},{key:"setLight",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateLight,t,n))for(var r in t){var i=t[r];e.endsWith(r,"-transition")?this._transitionable.setTransition(r.slice(0,-11),i):this._transitionable.setValue(r,i)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),O=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),j=function(t){m(r,t);var n=v(r);function r(t,i){var a;return d(this,r),(a=n.call(this))._transitionable=new e.Transitionable(O),a.set(t),a._transitioning=a._transitionable.untransitioned(),a.drapeRenderMode=i,a}return p(r,[{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){for(var n in t){var r=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),r):this._transitionable.setValue(n,r)}}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}}]),r}(e.Evented);function N(t,n,r,i){var a=e.smoothstep(45,65,r),o=B(t,i),s=h(o,2),l=s[0],u=s[1],c=e.length(n),f=1-Math.min(1,Math.exp((c-l)/(u-l)*-6));return f*=f*f,(f=Math.min(1,1.00747*f))*a*t.alpha}function B(e,t){var n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}var F=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),$=function(t){m(r,t);var n=v(r);function r(t,i){var a;return d(this,r),(a=n.call(this))._transitionable=new e.Transitionable(F),a.set(t),a._transitioning=a._transitionable.untransitioned(),a._transform=i,a}return p(r,[{key:"state",get:function(){var t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),a=[.5,3];return{range:n?[e.number(a[0],i[0],r),e.number(a[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}},{key:"get",value:function(){return this._transitionable.serialize()}},{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._validate(e.validateFog,t,n)){for(var r=0,i=Object.keys(e.spec.fog);r<i.length;r++){var a=i[r];t&&void 0===t[a]&&(t[a]=e.spec.fog[a].default)}for(var o in t){var s=t[o];e.endsWith(o,"-transition")?this._transitionable.setTransition(o.slice(0,-11),s):this._transitionable.setValue(o,s)}}}},{key:"getOpacity",value:function(t){if(!this._transform.projection.supportsFog)return 0;var n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}},{key:"getOpacityAtLatLng",value:function(t,n){return this._transform.projection.supportsFog?function(t,n,r){var i=e.MercatorCoordinate.fromLngLat(n),a=r.elevation?r.elevation.getAtPointOrZero(i):0,o=[i.x,i.y,a];return e.transformMat4(o,o,r.mercatorFogMatrix),N(t,o,r.pitch,r._fov)}(this.state,t,n):0}},{key:"getFovAdjustedRange",value:function(e){return this._transform.projection.supportsFog?B(this.state,e):[0,1]}},{key:"updateTransitions",value:function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}},{key:"hasTransition",value:function(){return this._transitioning.hasTransition()}},{key:"recalculate",value:function(e){this.properties=this._transitioning.possiblyEvaluate(e)}},{key:"_validate",value:function(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}]),r}(e.Evented),V=function(){function t(n,r){var i=this;d(this,t),this.workerPool=n,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=new t.Actor(a[o],r,this.id);s.name="Worker ".concat(o),this.actors.push(s)}this.ready=!1,this.broadcast("checkIfReady",null,(function(){i.ready=!0}))}return p(t,[{key:"broadcast",value:function(t,n,r){e.asyncAll(this.actors,(function(e,r){e.send(t,n,r)}),r=r||function(){})}},{key:"getActor",value:function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}},{key:"remove",value:function(){this.actors.forEach((function(e){e.remove()})),this.actors=[],this.workerPool.release(this.id)}}]),t}();function U(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}V.Actor=e.Actor;var Z=function(){function t(e,n,r,i){d(this,t),this.screenBounds=e,this.cameraPoint=n,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=r,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}return p(t,[{key:"isPointQuery",value:function(){return 1===this.screenBounds.length}},{key:"bufferedScreenGeometry",value:function(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}},{key:"bufferedCameraGeometry",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}},{key:"bufferedCameraGeometryGlobe",value:function(t){var n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),a=this.cameraPoint.clone();switch(3*((a.y>n.y)+(a.y>r.y))+((a.x>n.x)+(a.x>r.x))){case 0:i[0]=a,i[4]=a.clone();break;case 1:i.splice(1,0,a);break;case 2:i[1]=a;break;case 3:i.splice(4,0,a);break;case 5:i.splice(2,0,a);break;case 6:i[3]=a;break;case 7:i.splice(3,0,a);break;case 8:i[2]=a}return i}},{key:"containsTile",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.queryPadding/n._pixelsPerMercatorPixel+1,o=r?this._bufferedCameraMercator(a,n):this._bufferedScreenMercator(a,n),s=t.tileID.wrap+(o.unwrapped?i:0),l=o.polygon.map((function(n){return e.getTilePoint(t.tileTransform,n,s)}));if(e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT)){s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);var u,c=this.screenGeometryMercator.polygon.map((function(n){return e.getTileVec3(t.tileTransform,n,s)})),h=c.map((function(t){return new e.Point(t[0],t[1])})),f=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),d=e.getTileVec3(t.tileTransform,f,s),p=c.map((function(t){var n=e.sub(t,t,d);return e.normalize(n,n),new e.Ray(d,n)})),m=U(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:h,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(u=e.getBounds(l),u.min.x=e.clamp(u.min.x,0,e.EXTENT),u.min.y=e.clamp(u.min.y,0,e.EXTENT),u.max.x=e.clamp(u.max.x,0,e.EXTENT),u.max.y=e.clamp(u.max.y,0,e.EXTENT),u),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:m}}}},{key:"_bufferedScreenMercator",value:function(e,t){var n,r=q(e);return this._screenRaycastCache[r]?this._screenRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._screenRaycastCache[r]=n,n)}},{key:"_bufferedCameraMercator",value:function(e,t){var n,r=q(e);return this._cameraRaycastCache[r]?this._cameraRaycastCache[r]:(n="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((function(e){return t.pointCoordinate3D(e)})),unwrapped:!0},this._cameraRaycastCache[r]=n,n)}},{key:"_projectAndResample",value:function(t,n){var r=function(t,n){var r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(a,a,r),e.transformMat4$1(o,o,r);var s=new e.Point(i[0]/i[3],i[1]/i[3]),l=new e.Point(a[0]/a[3],a[1]/a[3]),u=e.polygonContainsPoint(t,s)&&i[3]<o[3],h=e.polygonContainsPoint(t,l)&&a[3]<o[3];if(!u&&!h)return null;var f=function(e,t,n){for(var r=1;r<e.length;r++){var i=W(t.pointCoordinate3D(e[r-1]).x),a=W(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<a)return{idx:r,t:-i/(a-1-i)}}else if(a<i)return{idx:r,t:(1-i)/(a+1-i)}}return null}(t,n,u?-1:1);if(!f)return null;var d=f.idx,p=f.t,m=d>1?H(t.slice(0,d),n):[],v=d<t.length?H(t.slice(d),n):[];m=m.map((function(t){return new e.Point(W(t.x),t.y)})),v=v.map((function(t){return new e.Point(W(t.x),t.y)}));var g=c(m);0===g.length&&g.push(v[v.length-1]);var y,_=e.number(g[g.length-1].y,(0===v.length?m[0]:v[0]).y,p);return y=u?[new e.Point(0,_),new e.Point(0,0),new e.Point(1,0),new e.Point(1,_)]:[new e.Point(1,_),new e.Point(1,1),new e.Point(0,1),new e.Point(0,_)],g.push.apply(g,c(y)),0===v.length?g.push(m[0]):g.push.apply(g,c(v)),{polygon:g.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:!1}}(t,n);if(r)return r;var i=function(t,n){for(var r=!1,i=-1/0,a=0,o=0;o<t.length-1;o++)t[o].x>i&&(i=t[o].x,a=o);for(var s=0;s<t.length-1;s++){var l=(a+s)%(t.length-1),u=t[l],c=t[l+1];Math.abs(u.x-c.x)>.5&&(u.x<c.x?(u.x+=1,0===l&&(t[t.length-1].x+=1)):(c.x+=1,l+1===t.length-1&&(t[0].x+=1)),r=!0)}var h=e.mercatorXfromLng(n.center.lng);return r&&h<Math.abs(h-1)&&t.forEach((function(e){e.x-=1})),{polygon:t,unwrapped:r}}(H(t,n).map((function(t){return new e.Point(W(t.x),t.y)})),n);return{polygon:i.polygon.map((function(t){return new e.MercatorCoordinate(t.x,t.y)})),unwrapped:i.unwrapped}}}],[{key:"createFromScreenPoints",value:function(n,r){var i,a;if(n instanceof e.Point||"number"==typeof n[0]){var o=e.Point.convert(n);i=[o],a=r.isPointAboveHorizon(o)}else{var s=e.Point.convert(n[0]),l=e.Point.convert(n[1]);i=[s,l],a=e.polygonizeBounds(s,l).every((function(e){return r.isPointAboveHorizon(e)}))}return new t(i,r.getCameraPoint(),a,r)}}]),t}();function H(t,n){return e.resample(t,(function(e){var t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function W(e){return e<0?1+e%1:e%1}function q(e){return 100*e|0}function G(t,n,r,i,a){var o=function(r,i){if(r)return a(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;var o=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(o.vectorLayers=i.vector_layers,o.vectorLayerIds=o.vectorLayers.map((function(e){return e.id}))),o.tiles=n.canonicalizeTileset(o,t.url),a(null,o)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),o):e.exported.frame((function(){return o(null,t)}))}var X,K=function(){function t(n,r,i){d(this,t),this.bounds=e.LngLatBounds.convert(this.validateBounds(n)),this.minzoom=r||0,this.maxzoom=i||24}return p(t,[{key:"validateBounds",value:function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}},{key:"contains",value:function(t){var n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<a&&t.y>=i&&t.y<o}}]),t}(),Y=function(){function e(t,n,r){d(this,e),this.context=t;var i=t.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(r),this.context.unbindVAO(),t.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||n.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindElementBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),J={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Q=function(){function e(t,n,r,i){d(this,e),this.length=n.length,this.attributes=r,this.itemSize=n.bytesPerElement,this.dynamicDraw=i,this.context=t;var a=t.gl;this.buffer=a.createBuffer(),t.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,n.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n.destroy()}return p(e,[{key:"bind",value:function(){this.context.bindVertexBuffer.set(this.buffer)}},{key:"updateData",value:function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}},{key:"enableAttributes",value:function(e,t){for(var n=0;n<this.attributes.length;n++){var r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}},{key:"setVertexAttribPointers",value:function(e,t,n){for(var r=0;r<this.attributes.length;r++){var i=this.attributes[r],a=t.attributes[i.name];void 0!==a&&e.vertexAttribPointer(a,i.components,e[J[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}},{key:"destroy",value:function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}]),e}(),ee=function(){function e(t){d(this,e),this.gl=t.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}return p(e,[{key:"get",value:function(){return this.current}},{key:"set",value:function(e){}},{key:"getDefault",value:function(){return this.default}},{key:"setDefault",value:function(){this.set(this.default)}}]),e}(),te=function(t){m(r,t);var n=v(r);function r(){return d(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(ee),ne=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 1}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}]),n}(ee),re=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}]),n}(ee),ie=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[!0,!0,!0,!0]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(ee),ae=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}]),n}(ee),oe=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 255}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}]),n}(ee),se=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return{func:this.gl.ALWAYS,ref:0,mask:255}}},{key:"set",value:function(e){var t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}]),n}(ee),le=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}]),n}(ee),ue=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}}]),n}(ee),ce=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return[0,1]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(ee),he=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}}]),n}(ee),fe=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.LESS}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}]),n}(ee),de=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}}]),n}(ee),pe=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[e.ONE,e.ZERO]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}]),n}(ee),me=function(t){m(r,t);var n=v(r);function r(){return d(this,r),n.apply(this,arguments)}return p(r,[{key:"getDefault",value:function(){return e.Color.transparent}},{key:"set",value:function(e){var t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}]),r}(ee),ve=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.FUNC_ADD}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}]),n}(ee),ge=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}}]),n}(ee),ye=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.BACK}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}]),n}(ee),_e=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.CCW}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}]),n}(ee),xe=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}]),n}(ee),be=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return this.gl.TEXTURE0}},{key:"set",value:function(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}]),n}(ee),we=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){var e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}},{key:"set",value:function(e){var t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}]),n}(ee),ke=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ee),Ee=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ee),Se=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}}]),n}(ee),Te=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ee),Ce=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){var t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}]),n}(ee),Me=function(e){m(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).vao=e.extVertexArrayObject,r}return p(n,[{key:"getDefault",value:function(){return null}},{key:"set",value:function(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}]),n}(ee),Ae=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return 4}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}}]),n}(ee),Pe=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(ee),Ie=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"getDefault",value:function(){return!1}},{key:"set",value:function(e){if(e!==this.current||this.dirty){var t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}}]),n}(ee),ze=function(e){m(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).context=e,i.parent=r,i}return p(n,[{key:"getDefault",value:function(){return null}}]),n}(ee),Le=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"setDirty",value:function(){this.dirty=!0}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}}]),n}(ze),De=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"attachment",value:function(){return this.gl.DEPTH_ATTACHMENT}},{key:"set",value:function(e){if(e!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}}]),n}(ze),Re=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"attachment",value:function(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}]),n}(De),Oe=function(){function e(t,n,r,i){d(this,e),this.context=t,this.width=n,this.height=r;var a=this.framebuffer=t.gl.createFramebuffer();this.colorAttachment=new Le(t,a),i&&(this.depthAttachment=new De(t,a))}return p(e,[{key:"destroy",value:function(){var e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n)}e.deleteFramebuffer(this.framebuffer)}}]),e}(),je=function(){function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(d(this,n),this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){var r=e;this.extVertexArrayObject={createVertexArrayOES:r.createVertexArray.bind(e),deleteVertexArrayOES:r.deleteVertexArray.bind(e),bindVertexArrayOES:r.bindVertexArray.bind(e)}}this.clearColor=new te(this),this.clearDepth=new ne(this),this.clearStencil=new re(this),this.colorMask=new ie(this),this.depthMask=new ae(this),this.stencilMask=new oe(this),this.stencilFunc=new se(this),this.stencilOp=new le(this),this.stencilTest=new ue(this),this.depthRange=new ce(this),this.depthTest=new he(this),this.depthFunc=new fe(this),this.blend=new de(this),this.blendFunc=new pe(this),this.blendColor=new me(this),this.blendEquation=new ve(this),this.cullFace=new ge(this),this.cullFaceSide=new ye(this),this.frontFace=new _e(this),this.program=new xe(this),this.activeTexture=new be(this),this.viewport=new we(this),this.bindFramebuffer=new ke(this),this.bindRenderbuffer=new Ee(this),this.bindTexture=new Se(this),this.bindVertexBuffer=new Te(this),this.bindElementBuffer=new Ce(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Me(this),this.pixelStoreUnpack=new Ae(this),this.pixelStoreUnpackPremultiplyAlpha=new Pe(this),this.pixelStoreUnpackFlipY=new Ie(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}return p(n,[{key:"setDefault",value:function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}},{key:"setDirty",value:function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}},{key:"createIndexBuffer",value:function(e,t){return new Y(this,e,t)}},{key:"createVertexBuffer",value:function(e,t,n){return new Q(this,e,t,n)}},{key:"createRenderbuffer",value:function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}},{key:"createFramebuffer",value:function(e,t,n){return new Oe(this,e,t,n)}},{key:"clear",value:function(e){var t=e.color,n=e.depth,r=e.stencil,i=this.gl,a=0;t&&(a|=i.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(a|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(n),this.depthMask.set(!0)),void 0!==r&&(a|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),i.clear(a)}},{key:"setCullFace",value:function(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}},{key:"setDepthMode",value:function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}},{key:"setStencilMode",value:function(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}},{key:"setColorMode",value:function(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}},{key:"unbindVAO",value:function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}]),n}(),Ne=function(t){m(r,t);var n=v(r);function r(t,a,o,s){var u;if(d(this,r),(u=n.call(this)).id=t,u.dispatcher=o,u.type="vector",u.minzoom=0,u.maxzoom=22,u.scheme="xyz",u.tileSize=512,u.reparseOverscaled=!0,u.isTileClipped=!0,u._loaded=!1,e.extend(i(u),e.pick(a,["url","scheme","tileSize","promoteId"])),u._options=e.extend({type:"vector"},a),u._collectResourceTiming=a.collectResourceTiming,512!==u.tileSize)throw new Error("vector tile sources must have a tileSize of 512");return u.setEventedParent(s),u._tileWorkers={},u._deduped=new e.DedupedRequest,l(u)}return p(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));var r=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=G(this._options,this.map._requestManager,r,i,(function(a,o){n._tileJSONRequest=null,n._loaded=!0,a?(r&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(r)),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(i)),n.fire(new e.ErrorEvent(a))):o&&(e.extend(n,o),o.bounds&&(n.tileBounds=new K(o.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(o.tiles,n.map._requestManager._customAccessToken),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(a)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"loadTile",value:function(t,n){var r=this,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),a={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(a.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",a,s.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",a,s.bind(this),void 0,!0);else{var o=e.loadVectorTile.call({deduped:this._deduped},a,(function(e,n){e||!n?s.call(r,e):(a.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",a,s.bind(r),void 0,!0))}),!0);t.request={cancel:o}}function s(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"unloadTile",value:function(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"hasTransition",value:function(){return!1}},{key:"afterUpdate",value:function(){this._tileWorkers={}}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}]),r}(e.Evented),Be=function(t){m(r,t);var n=v(r);function r(t,a,o,s){var l;return d(this,r),(l=n.call(this)).id=t,l.dispatcher=o,l.setEventedParent(s),l.type="raster",l.minzoom=0,l.maxzoom=22,l.roundZoom=!0,l.scheme="xyz",l.tileSize=512,l._loaded=!1,l._options=e.extend({type:"raster"},a),e.extend(i(l),e.pick(a,["url","scheme","tileSize"])),l}return p(r,[{key:"load",value:function(t){var n=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=G(this._options,this.map._requestManager,null,null,(function(r,i){n._tileJSONRequest=null,n._loaded=!0,r?n.fire(new e.ErrorEvent(r)):i&&(e.extend(n,i),i.bounds&&(n.tileBounds=new K(i.bounds,n.minzoom,n.maxzoom)),e.postTurnstileEvent(i.tiles),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),n.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"reload",value:function(){var e=this;this.cancelTileJSONRequest(),this.load((function(){return e.map.style._clearSource(e.id)}))}},{key:"setTiles",value:function(e){return this._options.tiles=e,this.reload(),this}},{key:"setUrl",value:function(e){return this.url=e,this._options.url=e,this.reload(),this}},{key:"onRemove",value:function(){this.cancelTileJSONRequest()}},{key:"serialize",value:function(){return e.extend({},this._options)}},{key:"hasTile",value:function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=this,i=e.exported.devicePixelRatio>=2,a=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(a,e.ResourceType.Tile),(function(i,a,o,s){return delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):a?(r.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s}),t.setTexture(a,r.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(r.dispatcher),void n(null)):n(null)}))}},{key:"abortTile",value:function(e,t){e.request&&(e.request.cancel(),delete e.request),t()}},{key:"unloadTile",value:function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}},{key:"hasTransition",value:function(){return!1}},{key:"cancelTileJSONRequest",value:function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}],[{key:"loadTileData",value:function(e,t,n){e.setTexture(t,n)}},{key:"unloadTileData",value:function(e,t){e.texture&&t.saveTileTexture(e.texture)}}]),r}(e.Evented);function Fe(t,n,r,i,a,o,s,l){var u=[t,r,a,n,i,o,1,1,1],c=[s,l,1],f=e.adjoint([],u),d=e.transformMat3(c,c,e.transpose(f,f)),p=h(d,3),m=p[0],v=p[1],g=p[2];return e.multiply$1(u,[m,0,0,0,v,0,0,0,g],u)}var $e=function(t){m(r,t);var n=v(r);function r(e,t,i,a){var o;return d(this,r),(o=n.call(this)).id=e,o.dispatcher=i,o.coordinates=t.coordinates,o.type="image",o.minzoom=0,o.maxzoom=22,o.tileSize=512,o.tiles={},o._loaded=!1,o.setEventedParent(a),o.options=t,o._dirty=!1,o}return p(r,[{key:"load",value:function(t,n){var r=this;this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(function(n,i){if(r._imageRequest=null,r._loaded=!0,n)r.fire(new e.ErrorEvent(n));else if(i){var a=e.window.HTMLImageElement;r.image=i instanceof a?e.exported.getImageData(i):i,r._dirty=!0,r.width=r.image.width,r.height=r.image.height,t&&(r.coordinates=t),r._finishLoading()}}))}},{key:"loaded",value:function(){return this._loaded}},{key:"updateImage",value:function(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}},{key:"_finishLoading",value:function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}},{key:"onAdd",value:function(e){this.map=e,this.load()}},{key:"onRemove",value:function(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}},{key:"setCoordinates",value:function(t){this.coordinates=t,this._boundsArray=void 0;var n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){var n,r=1/0,i=1/0,a=-1/0,o=-1/0,s=f(t);try{for(s.s();!(n=s.n()).done;){var l=n.value;r=Math.min(r,l.x),i=Math.min(i,l.y),a=Math.max(a,l.x),o=Math.max(o,l.y)}}catch(d){s.e(d)}finally{s.f()}var u=Math.max(a-r,o-i),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2)),h=Math.pow(2,c);return new e.CanonicalTileID(c,Math.floor((r+a)/2*h),Math.floor((i+o)/2*h))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}},{key:"_clear",value:function(){this._boundsArray=void 0}},{key:"_prepareData",value:function(t){for(var n in this.tiles){var r=this.tiles[n];"loaded"!==r.state&&(r.state="loaded",r.texture=this.texture)}if(!this._boundsArray){var i=e.tileTransform(this.tileID,this.map.transform.projection),a=this.coordinates.map((function(t){var n=i.projection.project(t[0],t[1]);return e.getTilePoint(i,n)._round()})),o=h(a,4),s=o[0],l=o[1],u=o[2],c=o[3];this.perspectiveTransform=function(t,n,r,i,a,o,s,l,u,c){var h=Fe(0,0,t,0,0,n,t,n),f=Fe(r,i,a,o,s,l,u,c);return e.multiply$1(f,e.adjoint(h,h),f),[f[6]/f[8]*t/e.EXTENT,f[7]/f[8]*n/e.EXTENT]}(this.width,this.height,s.x,s.y,l.x,l.y,c.x,c.y,u.x,u.y);var f=this._boundsArray=new e.StructArrayLayout4i8;f.emplaceBack(s.x,s.y,0,0),f.emplaceBack(l.x,l.y,e.EXTENT,0),f.emplaceBack(c.x,c.y,0,e.EXTENT),f.emplaceBack(u.x,u.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(f,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}}},{key:"prepare",value:function(){if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}}},{key:"loadTile",value:function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}},{key:"serialize",value:function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),Ve={vector:Ne,raster:Be,"raster-dem":function(t){m(r,t);var n=v(r);function r(t,i,a,o){var s;return d(this,r),(s=n.call(this,t,i,a,o)).type="raster-dem",s.maxzoom=22,s._options=e.extend({type:"raster-dem"},i),s.encoding=i.encoding||"mapbox",s}return p(r,[{key:"loadTile",value:function(t,n){var r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});var l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==X&&(X=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),X),u=1-(a.width-e.prevPowerOfTwo(a.width))/2;u<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));var c=l?a:e.exported.getImageData(a,u),h={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:c,encoding:this.encoding,padding:u};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",h,i.bind(this),void 0,!0))}}.bind(this))}},{key:"_getNeighboringTiles",value:function(t){var n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<r&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,i,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}},{key:"unloadTile",value:function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}}]),r}(Be),geojson:function(t){m(r,t);var n=v(r);function r(t,i,a,o){var s;d(this,r),(s=n.call(this)).id=t,s.type="geojson",s.minzoom=0,s.maxzoom=18,s.tileSize=512,s.isTileClipped=!0,s.reparseOverscaled=!0,s._loaded=!1,s.actor=a.getActor(),s.setEventedParent(o),s._data=i.data,s._options=e.extend({},i),s._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(s.maxzoom=i.maxzoom),i.type&&(s.type=i.type),i.attribution&&(s.attribution=i.attribution),s.promoteId=i.promoteId;var l=e.EXTENT/s.tileSize;return s.workerOptions=e.extend({source:s.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*l,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*l,extent:e.EXTENT,maxZoom:s.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:s.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*l,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter},i.workerOptions),s}return p(r,[{key:"onAdd",value:function(e){this.map=e,this.setData(this._data)}},{key:"setData",value:function(e){return this._data=e,this._updateWorkerData(),this}},{key:"getClusterExpansionZoom",value:function(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}},{key:"getClusterChildren",value:function(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}},{key:"getClusterLeaves",value:function(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}},{key:"_updateWorkerData",value:function(){var t=this;if(this._pendingLoad)this._coalesce=!0;else{this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;var n=e.extend({},this.workerOptions),r=this._data;"string"==typeof r?(n.request=this.map._requestManager.transformRequest(e.exported.resolveURL(r),e.ResourceType.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),n,(function(n,r){if(t._loaded=!0,t._pendingLoad=null,n)t.fire(new e.ErrorEvent(n));else{var i={dataType:"source",sourceDataType:t._metadataFired?"content":"metadata"};t._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[t.id]&&(i.resourceTiming=r.resourceTiming[t.id]),t.fire(new e.Event("data",i)),t._metadataFired=!0}t._coalesce&&(t._updateWorkerData(),t._coalesce=!1)}))}}},{key:"loaded",value:function(){return this._loaded}},{key:"loadTile",value:function(t,n){var r=this,i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(e,a){return delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(a,r.map.painter,"reloadTile"===i),n(null))}),void 0,"loadTile"===i)}},{key:"abortTile",value:function(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}},{key:"unloadTile",value:function(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}},{key:"onRemove",value:function(){this._pendingLoad&&this._pendingLoad.cancel()}},{key:"serialize",value:function(){return e.extend({},this._options,{type:this.type,data:this._data})}},{key:"hasTransition",value:function(){return!1}}]),r}(e.Evented),video:function(t){m(r,t);var n=v(r);function r(e,t,i,a){var o;return d(this,r),(o=n.call(this,e,t,i,a)).roundZoom=!0,o.type="video",o.options=t,o}return p(r,[{key:"load",value:function(){var t=this;this._loaded=!1;var n=this.options;this.urls=[];var r,i=f(n.urls);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.urls.push(this.map._requestManager.transformRequest(a,e.ResourceType.Source).url)}}catch(o){i.e(o)}finally{i.f()}e.getVideo(this.urls,(function(n,r){t._loaded=!0,n?t.fire(new e.ErrorEvent(n)):r&&(t.video=r,t.video.loop=!0,t.video.setAttribute("playsinline",""),t.video.addEventListener("playing",(function(){t.map.triggerRepaint()})),t.map&&t.video.play(),t._finishLoading())}))}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"play",value:function(){this.video&&this.video.play()}},{key:"seek",value:function(t){if(this.video){var n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(n.start(0)," and ").concat(n.end(0),"-second mark.")))):this.video.currentTime=t}}},{key:"getVideo",value:function(){return this.video}},{key:"onAdd",value:function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}},{key:"prepare",value:function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}}},{key:"serialize",value:function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this.video&&!this.video.paused}}]),r}($e),image:$e,canvas:function(t){m(r,t);var n=v(r);function r(t,i,a,o){var s;return d(this,r),s=n.call(this,t,i,a,o),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some((function(e){return!Array.isArray(e)||2!==e.length||e.some((function(e){return"number"!=typeof e}))}))||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof e.window.HTMLCanvasElement||s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):s.fire(new e.ErrorEvent(new e.ValidationError("sources.".concat(t),null,'missing required property "canvas"'))),s.options=i,s.animate=void 0===i.animate||i.animate,s}return p(r,[{key:"load",value:function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}},{key:"getCanvas",value:function(){return this.canvas}},{key:"onAdd",value:function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}},{key:"onRemove",value:function(){this.pause()}},{key:"prepare",value:function(){var t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}}},{key:"serialize",value:function(){return{type:"canvas",coordinates:this.coordinates}}},{key:"hasTransition",value:function(){return this._playing}},{key:"_hasInvalidDimensions",value:function(){for(var e=0,t=[this.canvas.width,this.canvas.height];e<t.length;e++){var n=t[e];if(isNaN(n)||n<=0)return!0}return!1}}]),r}($e),custom:function(t){m(r,t);var n=v(r);function r(t,a,o,s){var l;return d(this,r),(l=n.call(this)).id=t,l.type="custom",l._dataType="raster",l._dispatcher=o,l._implementation=a,l.setEventedParent(s),l.scheme="xyz",l.minzoom=0,l.maxzoom=22,l.tileSize=512,l._loaded=!1,l.roundZoom=!0,l._implementation||l.fire(new e.ErrorEvent(new Error("Missing implementation for ".concat(l.id," custom source")))),l._implementation.loadTile||l.fire(new e.ErrorEvent(new Error("Missing loadTile implementation for ".concat(l.id," custom source")))),l._implementation.bounds&&(l.tileBounds=new K(l._implementation.bounds,l.minzoom,l.maxzoom)),a.update=l._update.bind(i(l)),a.clearTiles=l._clearTiles.bind(i(l)),a.coveringTiles=l._coveringTiles.bind(i(l)),e.extend(i(l),e.pick(a,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"])),l}return p(r,[{key:"serialize",value:function(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}},{key:"load",value:function(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}},{key:"loaded",value:function(){return this._loaded}},{key:"onAdd",value:function(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}},{key:"onRemove",value:function(e){this._implementation.onRemove&&this._implementation.onRemove(e)}},{key:"hasTile",value:function(e){if(this._implementation.hasTile){var t=e.canonical,n=t.x,r=t.y,i=t.z;return this._implementation.hasTile({x:n,y:r,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}},{key:"loadTile",value:function(t,n){var r=t.tileID.canonical,i=r.x,a=r.y,o=r.z,s=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:a,z:o},{signal:s.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch((function(e){20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=function(){return s.abort()}}},{key:"loadTileData",value:function(e,t){Be.loadTileData(e,t,this._map.painter)}},{key:"unloadTileData",value:function(e){Be.unloadTileData(e,this._map.painter)}},{key:"unloadTile",value:function(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){var n=e.tileID.canonical,r=n.x,i=n.y,a=n.z;this._implementation.unloadTile({x:r,y:i,z:a})}t()}},{key:"abortTile",value:function(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}},{key:"hasTransition",value:function(){return!1}},{key:"_coveringTiles",value:function(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((function(e){return{x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}}))}},{key:"_clearTiles",value:function(){this._map.style._clearSource(this.id)}},{key:"_update",value:function(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}]),r}(e.Evented)},Ue=function(t,n,r,i){var a=new Ve[n.type](t,n,r,i);if(a.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(a.id));return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function Ze(t,n){var r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function He(e,t,n,r,i,a,o){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=e.tilesIn(r,o,s);l.sort(qe);var u,c=[],h=f(l);try{for(h.s();!(u=h.n()).done;){var d=u.value;c.push({wrappedTileID:d.tile.tileID.wrapped().key,queryResults:d.tile.queryRenderedFeatures(t,n,e._state,d,i,a,Ze(e.transform,d.tile.tileID),s)})}}catch(v){h.e(v)}finally{h.f()}var p=function(e){var t,n={},r={},i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=a.queryResults,s=a.wrappedTileID,l=r[s]=r[s]||{};for(var u in o){var c,h=o[u],d=l[u]=l[u]||{},p=n[u]=n[u]||[],m=f(h);try{for(m.s();!(c=m.n()).done;){var g=c.value;d[g.featureIndex]||(d[g.featureIndex]=!0,p.push(g))}}catch(v){m.e(v)}finally{m.f()}}}}catch(v){i.e(v)}finally{i.f()}return n}(c);for(var m in p)p[m].forEach((function(t){var n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return p}function We(e,t){for(var n=e.getRenderableIds().map((function(t){return e.getTileByID(t)})),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}function qe(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Ge(){return null!=Ea.workerClass?new Ea.workerClass:new e.window.Worker(Ea.workerUrl)}var Xe,Ke="mapboxgl_preloaded_worker_pool",Ye=function(){function e(){d(this,e),this.active={}}return p(e,[{key:"acquire",value:function(t){if(!this.workers)for(this.workers=[];this.workers.length<e.workerCount;)this.workers.push(new Ge);return this.active[t]=!0,this.workers.slice()}},{key:"release",value:function(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((function(e){e.terminate()})),this.workers=null)}},{key:"isPreloaded",value:function(){return!!this.active[Ke]}},{key:"numActive",value:function(){return Object.keys(this.active).length}}]),e}();function Je(){return Xe||(Xe=new Ye),Xe}function Qe(t,n){var r={};for(var i in t)"ref"!==i&&(r[i]=t[i]);return e.refProperties.forEach((function(e){e in n&&(r[e]=n[e])})),r}function et(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var r=0;r<e.length;r++)"ref"in e[r]&&(e[r]=Qe(e[r],t[e[r].ref]));return e}Ye.workerCount=2;var tt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function nt(e,t,n){n.push({command:tt.addSource,args:[e,t[e]]})}function rt(e,t,n){t.push({command:tt.removeSource,args:[e]}),n[e]=!0}function it(e,t,n,r){rt(e,n,r),nt(e,t,n)}function at(e,n,r){var i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function ot(e,n,r,i,a,o){var s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:o,args:[i,s,n[s],a]}))}function st(e){return e.id}function lt(e,t){return e[t.id]=t,e}var ut=function(){function t(e,n){d(this,t),this.reset(e,n)}return p(t,[{key:"reset",value:function(e,t){this.points=e||[],this._distances=[0];for(var n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}},{key:"lerp",value:function(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);for(var n=1,r=this._distances[n],i=t*this.paddedLength+this.padding;r<i&&n<this._distances.length;)r=this._distances[++n];var a=n-1,o=this._distances[a],s=r-o,l=s>0?(i-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}]),t}(),ct=function(){function e(t,n,r){d(this,e);var i=this.boxCells=[],a=this.circleCells=[];this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var o=0;o<this.xCellCount*this.yCellCount;o++)i.push([]),a.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0,this.circleUid=0}return p(e,[{key:"keysLength",value:function(){return this.boxKeys.length+this.circleKeys.length}},{key:"insert",value:function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}},{key:"insertCircle",value:function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}},{key:"_insertBoxCell",value:function(e,t,n,r,i,a){this.boxCells[i].push(a)}},{key:"_insertCircleCell",value:function(e,t,n,r,i,a){this.circleCells[i].push(a)}},{key:"_query",value:function(e,t,n,r,i,a){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(var s=0;s<this.boxKeys.length;s++)o.push({key:this.boxKeys[s],x1:this.bboxes[4*s],y1:this.bboxes[4*s+1],x2:this.bboxes[4*s+2],y2:this.bboxes[4*s+3]});for(var l=0;l<this.circleKeys.length;l++){var u=this.circles[3*l],c=this.circles[3*l+1],h=this.circles[3*l+2];o.push({key:this.circleKeys[l],x1:u-h,y1:c-h,x2:u+h,y2:c+h})}return a?o.filter(a):o}return this._forEachCell(e,t,n,r,this._queryCell,o,{hitTest:i,seenUids:{box:{},circle:{}}},a),i?o.length>0:o}},{key:"_queryCircle",value:function(e,t,n,r,i){var a=e-n,o=e+n,s=t-n,l=t+n;if(o<0||a>this.width||l<0||s>this.height)return!r&&[];var u=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,u,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?u.length>0:u}},{key:"query",value:function(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}},{key:"hitTest",value:function(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}},{key:"hitTestCircle",value:function(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}},{key:"_queryCell",value:function(e,t,n,r,i,a,o,s){var l=o.seenUids,u=this.boxCells[i];if(null!==u){var c,h=this.bboxes,d=f(u);try{for(d.s();!(c=d.n()).done;){var p=c.value;if(!l.box[p]){l.box[p]=!0;var m=4*p;if(e<=h[m+2]&&t<=h[m+3]&&n>=h[m+0]&&r>=h[m+1]&&(!s||s(this.boxKeys[p]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[p],x1:h[m],y1:h[m+1],x2:h[m+2],y2:h[m+3]})}}}}catch(S){d.e(S)}finally{d.f()}}var v=this.circleCells[i];if(null!==v){var g,y=this.circles,_=f(v);try{for(_.s();!(g=_.n()).done;){var x=g.value;if(!l.circle[x]){l.circle[x]=!0;var b=3*x;if(this._circleAndRectCollide(y[b],y[b+1],y[b+2],e,t,n,r)&&(!s||s(this.circleKeys[x]))){if(o.hitTest)return a.push(!0),!0;var w=y[b],k=y[b+1],E=y[b+2];a.push({key:this.circleKeys[x],x1:w-E,y1:k-E,x2:w+E,y2:k+E})}}}}catch(S){_.e(S)}finally{_.f()}}}},{key:"_queryCellCircle",value:function(e,t,n,r,i,a,o,s){var l=o.circle,u=o.seenUids,c=this.boxCells[i];if(null!==c){var h,d=this.bboxes,p=f(c);try{for(p.s();!(h=p.n()).done;){var m=h.value;if(!u.box[m]){u.box[m]=!0;var v=4*m;if(this._circleAndRectCollide(l.x,l.y,l.radius,d[v+0],d[v+1],d[v+2],d[v+3])&&(!s||s(this.boxKeys[m])))return a.push(!0),!0}}}catch(k){p.e(k)}finally{p.f()}}var g=this.circleCells[i];if(null!==g){var y,_=this.circles,x=f(g);try{for(x.s();!(y=x.n()).done;){var b=y.value;if(!u.circle[b]){u.circle[b]=!0;var w=3*b;if(this._circlesCollide(_[w],_[w+1],_[w+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[b])))return a.push(!0),!0}}}catch(k){x.e(k)}finally{x.f()}}}},{key:"_forEachCell",value:function(e,t,n,r,i,a,o,s){for(var l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),h=this._convertToYCellCoord(r),f=l;f<=c;f++)for(var d=u;d<=h;d++)if(i.call(this,e,t,n,r,this.xCellCount*d+f,a,o,s))return}},{key:"_convertToXCellCoord",value:function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}},{key:"_convertToYCellCoord",value:function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}},{key:"_circlesCollide",value:function(e,t,n,r,i,a){var o=r-e,s=i-t,l=n+a;return l*l>o*o+s*s}},{key:"_circleAndRectCollide",value:function(e,t,n,r,i,a,o){var s=(a-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;var u=(o-i)/2,c=Math.abs(t-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var h=l-s,f=c-u;return h*h+f*f<=n*n}}]),e}(),ht={unknown:0,flipRequired:1,flipNotRequired:2},ft=Math.tan(85*Math.PI/180);function dt(t,n,r,i,a,o,s){var l=e.create();if(r)if("globe"===o.name){var u=e.calculateGlobeLabelMatrix(a,n);e.multiply(l,l,u)}else{var c=I([],s);l[0]=c[0],l[1]=c[1],l[4]=c[2],l[5]=c[3],i||e.rotateZ(l,l,a.angle)}else e.multiply(l,a.labelPlaneMatrix,t);return l}function pt(e,t,n,r,i,a,o){var s=dt(e,t,n,r,i,a,o);return"globe"===a.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function mt(t,n,r,i,a,o,s){if(r){if("globe"===o.name){var l=dt(t,n,r,i,a,o,s);return e.invert(l,l),e.multiply(l,t,l),l}var u=e.clone(t),c=e.identity([]);return c[0]=s[0],c[1]=s[1],c[4]=s[2],c[5]=s[3],e.multiply(u,u,c),i||e.rotateZ(u,u,-a.angle),u}return a.glCoordMatrix}function vt(t,n,r,i){var a=[t,n,r,1];r?e.transformMat4$1(a,a,i):Ct(a,a,i);var o=a[3];return a[0]/=o,a[1]/=o,a[2]/=o,a}function gt(e,t){return Math.min(.5+e/t*.5,1.5)}function yt(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function _t(t,n,r,i,a,o,s,l,u,c){var f=r.transform,d=i?t.textSizeData:t.iconSizeData,p=e.evaluateSizeForZoom(d,r.transform.zoom),m="globe"===f.projection.name,v=[256/r.width*2+1,256/r.height*2+1],g=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();var y=null;m&&(y=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);for(var _,x=t.lineVertexArray,b=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,w=r.transform.width/r.transform.height,k=!1,E=0;E<b.length;E++){var S=b.get(E),T=S.numGlyphs,C=S.writingMode;if(C!==e.WritingMode.vertical||k||_===e.WritingMode.horizontal||(k=!0),_=C,!S.hidden&&C!==e.WritingMode.vertical||k){k=!1;var M=new e.Point(S.tileAnchorX,S.tileAnchorY),A=f.projection.projectTilePoint(M.x,M.y,c.canonical),P=A.x,I=A.y,z=A.z;if(u){var L=u(M),D=h(L,3);P+=D[0],I+=D[1],z+=D[2]}var R=[P,I,z,1];if(e.transformMat4$1(R,R,n),yt(R,v)){var O=gt(r.transform.cameraToCenterDistance,R[3]),j=e.evaluateSizeForFeature(d,p,S),N=s?j/O:j*O,B=vt(P,I,z,a);if(B[3]<=0)Tt(T,g);else{var F={},$=s?null:u,V=wt(S,N,!1,l,n,a,o,t.glyphOffsetArray,x,g,y,B,M,F,w,$,f.projection,c,s);k=V.useVertical,$&&V.needsFlipping&&(F={}),(V.notEnoughRoom||k||V.needsFlipping&&wt(S,N,!0,l,n,a,o,t.glyphOffsetArray,x,g,y,B,M,F,w,$,f.projection,c,s).notEnoughRoom)&&Tt(T,g)}}else Tt(T,g)}else Tt(T,g)}i?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function xt(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m){var v=s.lineStartIndex,g=s.glyphStartIndex,y=s.segment,_=g+s.numGlyphs,x=v+s.lineLength,b=t.getoffsetX(g),w=t.getoffsetX(_-1),k=St(e*b,n,r,i,a,o,y,v,x,l,u,c,h,f,!0,d,p,m);if(!k)return null;var E=St(e*w,n,r,i,a,o,y,v,x,l,u,c,h,f,!0,d,p,m);return E?{first:k,last:E}:null}function bt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:n!==ht.unknown&&function(e,t){return 0===e||Math.abs(t/e)>ft}(r,i)?n===ht.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function wt(t,n,r,i,a,o,s,l,u,c,f,d,p,m,v,g,y,_,x){var b=n/24,w=t.lineOffsetX*b,k=t.lineOffsetY*b,E=t.lineStartIndex,S=t.glyphStartIndex,T=t.numGlyphs,C=t.segment,M=t.writingMode,A=t.flipState,P=E+t.lineLength,I=function(t){if(f){var n=h(t.up,3),r=n[0],i=n[1],a=n[2],o=c.length;e.updateGlobeVertexNormal(f,o+0,r,i,a),e.updateGlobeVertexNormal(f,o+1,r,i,a),e.updateGlobeVertexNormal(f,o+2,r,i,a),e.updateGlobeVertexNormal(f,o+3,r,i,a)}var s=h(t.point,3),l=s[0],u=s[1],d=s[2];e.addDynamicAttributes(c,l,u,d,t.angle)};if(T>1){var z=xt(b,l,w,k,r,d,p,t,u,o,m,g,!1,y,_,x);if(!z)return{notEnoughRoom:!0};if(i&&!r){var L,D,R,O,j=h(z.first.point,3),N=j[0],B=j[1],F=j[2],$=h(z.last.point,3),V=$[0],U=$[1],Z=$[2];L=vt(N,B,F,s),N=(D=h(L,2))[0],B=D[1],R=vt(V,U,Z,s);var H=bt(M,A,((V=(O=h(R,2))[0])-N)*v,(U=O[1])-B);if(t.flipState=H&&H.needsFlipping?ht.flipRequired:ht.flipNotRequired,H)return H}I(z.first);for(var W=S+1;W<S+T-1;W++){var q=St(b*l.getoffsetX(W),w,k,r,d,p,C,E,P,u,o,m,g,!1,!1,y,_,x);if(!q)return c.length-=4*(W-S),{notEnoughRoom:!0};I(q)}I(z.last)}else{if(i&&!r){var G=vt(p.x,p.y,0,a),X=E+C+1,K=new e.Point(u.getx(X),u.gety(X)),Y=vt(K.x,K.y,0,a),J=Y[3]>0?Y:Et(p,K,G,1,a,void 0,y,_.canonical),Q=bt(M,A,(J[0]-G[0])*v,J[1]-G[1]);if(t.flipState=Q&&Q.needsFlipping?ht.flipRequired:ht.flipNotRequired,Q)return Q}var ee=St(b*l.getoffsetX(S),w,k,r,d,p,C,E,P,u,o,m,g,!1,!1,y,_,x);if(!ee)return{notEnoughRoom:!0};I(ee)}return{}}function kt(e,t,n,r,i){var a=r.projectTilePoint(e.x,e.y,t),o=a.x,s=a.y,l=a.z;if(!i)return vt(o,s,l,n);var u=i(e),c=h(u,3);return vt(o+c[0],s+c[1],l+c[2],n)}function Et(t,n,r,i,a,o,s,l){var u=kt(t.sub(n)._unit()._add(t),l,a,s,o);return e.sub(u,r,u),e.normalize(u,u),e.scaleAndAdd(u,r,u,i)}function St(t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y){var _=i?t-n:t+n,x=_>0?1:-1,b=0;i&&(x*=-1,b=Math.PI),x<0&&(b+=Math.PI);for(var w=l+s+(x>0?0:1)|0,k=a,E=a,S=0,T=0,C=Math.abs(_),M=[],A=[],P=o,I=P,z=function(){return Et(I,P,E,C-S+1,h,d,v,g.canonical)};S+T<=C;){if((w+=x)<l||w>=u)return null;if(E=k,I=P,M.push(E),p&&A.push(I),P=new e.Point(c.getx(w),c.gety(w)),!(k=f[w])){var L=kt(P,g.canonical,h,v,d);k=L[3]>0?f[w]=L:z()}S+=T,T=e.distance(E,k)}m&&d&&(f[w]&&(k=z(),T=e.distance(E,k)),f[w]=k);var D=(C-S)/T,R=P.sub(I)._mult(D)._add(I),O=e.sub([],k,E),j=e.scaleAndAdd([],E,O,D),N=[0,0,1],B=O[0],F=O[1];if(y&&(0!==(N=v.upVector(g.canonical,R.x,R.y))[0]||0!==N[1]||1!==N[2])){var $=[N[2],0,-N[0]],V=e.cross([],N,$);e.normalize($,$),e.normalize(V,V),B=e.dot(O,$),F=e.dot(O,V)}if(r){var U=e.cross([],N,O);e.normalize(U,U),e.scaleAndAdd(j,j,U,r*x)}var Z=b+Math.atan2(F,B);return M.push(j),p&&A.push(R),{point:j,angle:Z,path:M,tilePath:A,up:N}}function Tt(e,t){var n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function Ct(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var Mt=100,At=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ct(e.width+200,e.height+200,25),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ct(e.width+200,e.height+200,25);d(this,t),this.transform=e,this.grid=r,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+Mt,this.screenBottomBoundary=e.height+Mt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=n}return p(t,[{key:"placeCollisionBox",value:function(e,t,n,r,i,a,o,s){var l=n.projectedAnchorX,u=n.projectedAnchorY,c=n.projectedAnchorZ,f=n.elevation,d=n.tileID,p=e.getProjection();if(f&&d){var m=p.upVector(d.canonical,n.tileAnchorX,n.tileAnchorY),v=h(m,3),g=v[0],y=v[1],_=v[2],x=p.upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=g*f*x,u+=y*f*x,c+=_*f*x}var b=this.projectAndGetPerspectiveRatio(o,l,u,c,n.tileID,"globe"===p.name||!!f||this.transform.pitch>0,p),w=a*b.perspectiveRatio,k=(n.x1*t+r.x-n.padding)*w+b.point.x,E=(n.y1*t+r.y-n.padding)*w+b.point.y,S=(n.x2*t+r.x+n.padding)*w+b.point.x,T=(n.y2*t+r.y+n.padding)*w+b.point.y,C=b.perspectiveRatio<=.55||b.occluded;return!this.isInsideGrid(k,E,S,T)||!i&&this.grid.hitTest(k,E,S,T,s)||C?{box:[],offscreen:!1,occluded:b.occluded}:{box:[k,E,S,T],offscreen:this.isOffscreen(k,E,S,T),occluded:!1}}},{key:"placeCollisionCircles",value:function(t,n,r,i,a,o,s,l,u,c,d,p,m,v,g){var y=[],_=this.transform.elevation,x=t.getProjection(),b=_?_.getAtTileOffsetFunc(g,this.transform.center.lat,this.transform.worldSize,x):null,w=new e.Point(r.tileAnchorX,r.tileAnchorY),k=x.projectTilePoint(w.x,w.y,g.canonical),E=k.x,S=k.y,T=k.z;if(b){var C=b(w),M=h(C,3);E+=M[0],S+=M[1],T+=M[2]}var A="globe"===x.name,P=this.projectAndGetPerspectiveRatio(s,E,S,T,g,A||!!_||this.transform.pitch>0,x),I=P.perspectiveRatio,z=(d?o/I:o*I)/e.ONE_EM,L=vt(E,S,T,l),D=P.signedDistanceFromCamera>0?xt(z,a,r.lineOffsetX*z,r.lineOffsetY*z,!1,L,w,r,i,l,{},_&&!d?b:null,d&&!!_,x,g,d):null,R=!1,O=!1,j=!0;if(D&&!P.occluded){for(var N=.5*m*I+v,B=new e.Point(-100,-100),F=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),$=new ut,V=D.first,U=D.last,Z=V.path.length,H=[],W=Z-1;W>=1;W--)H.push(V.path[W]);for(var q=1;q<U.path.length;q++)H.push(U.path[q]);var G=2.5*N;u&&(H=H.map((function(e,t){var n=h(e,3),r=n[0],i=n[1],a=n[2];return b&&!A&&(a=b(t<Z-1?V.tilePath[Z-1-t]:U.tilePath[t-Z+2])[2]),vt(r,i,a,u)})),H.some((function(e){return e[3]<=0}))&&(H=[]));var X=[];if(H.length>0){var K,Y=1/0,J=-1/0,Q=1/0,ee=-1/0,te=f(H);try{for(te.s();!(K=te.n()).done;){var ne=K.value;Y=Math.min(Y,ne[0]),Q=Math.min(Q,ne[1]),J=Math.max(J,ne[0]),ee=Math.max(ee,ne[1])}}catch(ve){te.e(ve)}finally{te.f()}J>=B.x&&Y<=F.x&&ee>=B.y&&Q<=F.y&&(X=[H.map((function(t){return new e.Point(t[0],t[1])}))],(Y<B.x||J>F.x||Q<B.y||ee>F.y)&&(X=e.clipLine(X,B.x,B.y,F.x,F.y)))}var re,ie=f(X);try{for(ie.s();!(re=ie.n()).done;){var ae=re.value;$.reset(ae,.25*N);var oe=0;oe=$.length<=.5*N?1:Math.ceil($.paddedLength/G)+1;for(var se=0;se<oe;se++){var le=se/Math.max(oe-1,1),ue=$.lerp(le),ce=ue.x+Mt,he=ue.y+Mt;y.push(ce,he,N,0);var fe=ce-N,de=he-N,pe=ce+N,me=he+N;if(j=j&&this.isOffscreen(fe,de,pe,me),O=O||this.isInsideGrid(fe,de,pe,me),!n&&this.grid.hitTestCircle(ce,he,N,p)&&(R=!0,!c))return{circles:[],offscreen:!1,collisionDetected:R,occluded:!1}}}}catch(ve){ie.e(ve)}finally{ie.f()}}return{circles:!c&&R||!O?[]:y,offscreen:j,collisionDetected:R,occluded:P.occluded}}},{key:"queryRenderedSymbols",value:function(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};var n,r=[],i=1/0,a=1/0,o=-1/0,s=-1/0,l=f(t);try{for(l.s();!(n=l.n()).done;){var u=n.value,c=new e.Point(u.x+Mt,u.y+Mt);i=Math.min(i,c.x),a=Math.min(a,c.y),o=Math.max(o,c.x),s=Math.max(s,c.y),r.push(c)}}catch(x){l.e(x)}finally{l.f()}var h,d=this.grid.query(i,a,o,s).concat(this.ignoredGrid.query(i,a,o,s)),p={},m={},v=f(d);try{for(v.s();!(h=v.n()).done;){var g=h.value,y=g.key;if(void 0===p[y.bucketInstanceId]&&(p[y.bucketInstanceId]={}),!p[y.bucketInstanceId][y.featureIndex]){var _=[new e.Point(g.x1,g.y1),new e.Point(g.x2,g.y1),new e.Point(g.x2,g.y2),new e.Point(g.x1,g.y2)];e.polygonIntersectsPolygon(r,_)&&(p[y.bucketInstanceId][y.featureIndex]=!0,void 0===m[y.bucketInstanceId]&&(m[y.bucketInstanceId]=[]),m[y.bucketInstanceId].push(y.featureIndex))}}}catch(x){v.e(x)}finally{v.f()}return m}},{key:"insertCollisionBox",value:function(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}},{key:"insertCollisionCircles",value:function(e,t,n,r,i){for(var a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:r,collisionGroupID:i},s=0;s<e.length;s+=4)a.insertCircle(o,e[s],e[s+1],e[s+2])}},{key:"projectAndGetPerspectiveRatio",value:function(t,n,r,i,a,o,s){var l=[n,r,i,1],u=!1;if(i||this.transform.pitch>0){if(e.transformMat4$1(l,l,t),this.fogState&&a&&"globe"!==s.name){var c=function(t,n,r,i,a,o){var s=o.calculateFogTileMatrix(a),l=[n,r,i];return e.transformMat4(l,l,s),N(t,l,o.pitch,o._fov)}(this.fogState,n,r,i,a.toUnwrapped(),this.transform);u=c>.9}}else Ct(l,l,t);var h=l[3];return{point:new e.Point((l[0]/h+1)/2*this.transform.width+Mt,(-l[1]/h+1)/2*this.transform.height+Mt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/h*.5,1.5),signedDistanceFromCamera:h,occluded:o&&l[2]>h||u}}},{key:"isOffscreen",value:function(e,t,n,r){return n<Mt||e>=this.screenRightBoundary||r<Mt||t>this.screenBottomBoundary}},{key:"isInsideGrid",value:function(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}},{key:"getViewportMatrix",value:function(){var t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}]),t}();function Pt(t,n,r){var i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function It(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;var r=n.clone();return r.setProjection(t.projection),Pt(r,t.getProjection(),e)}function zt(e,t,n){return t.name===n.projection.name?e.projMatrix:Pt(n,t,e)}var Lt=function(){function e(t,n,r,i){d(this,e),this.opacity=t?Math.max(0,Math.min(1,t.opacity+(t.placed?n:-n))):i&&r?1:0,this.placed=r}return p(e,[{key:"isHidden",value:function(){return 0===this.opacity&&!this.placed}}]),e}(),Dt=function(){function e(t,n,r,i,a){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];d(this,e),this.text=new Lt(t?t.text:null,n,r,a),this.icon=new Lt(t?t.icon:null,n,i,a),this.clipped=o}return p(e,[{key:"isHidden",value:function(){return this.text.isHidden()&&this.icon.isHidden()}}]),e}(),Rt=p((function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];d(this,e),this.text=t,this.icon=n,this.skipFade=r,this.clipped=i})),Ot=p((function t(){d(this,t),this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]})),jt=p((function e(t,n,r,i,a){d(this,e),this.bucketInstanceId=t,this.featureIndex=n,this.sourceLayerIndex=r,this.bucketIndex=i,this.tileID=a})),Nt=function(){function e(t){d(this,e),this.crossSourceCollisions=t,this.maxGroupID=0,this.collisionGroups={}}return p(e,[{key:"get",value:function(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){var t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:function(e){return e.collisionGroupID===t}}}return this.collisionGroups[e]}}]),e}();function Bt(t,n,r,i,a){var o=e.getAnchorAlignment(t),s=-(o.horizontalAlign-.5)*n,l=-(o.verticalAlign-.5)*r,u=e.evaluateVariableOffset(t,i);return new e.Point(s+u[0]*a,l+u[1]*a)}function Ft(t,n,r,i,a){var o=new e.Point(t,n);return r&&o._rotate(i?a:-a),o}var $t=function(){function t(e,n,r,i,a){d(this,t),this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new At(this.transform,a),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=n,this.retainedQueryData={},this.collisionGroups=new Nt(r),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}return p(t,[{key:"getBucketParts",value:function(t,n,r,i){var a=r.getBucket(n),o=r.latestFeatureIndex;if(a&&o&&n.id===a.layerIds[0]){var s=a.layers[0].layout,l=r.collisionBoxArray,u=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),c=r.tileSize/e.EXTENT,h=r.tileID.toUnwrapped();this.transform.setProjection(a.projection);var d,p,m,v=(d=r.tileID,p=a.getProjection(),m=this.transform,p.name===this.projection?m.calculateProjMatrix(d.toUnwrapped()):Pt(m,p,d)),g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();var _=n.dynamicFilter(),x=n.dynamicFilterNeedsFeature(),b=this.transform.calculatePixelsToTileUnitsMatrix(r),w=pt(v,r.tileID.canonical,g,y,this.transform,a.getProjection(),b),k=null;if(g){var E=mt(v,r.tileID.canonical,g,y,this.transform,a.getProjection(),b);k=e.multiply([],this.transform.labelPlaneMatrix,E)}var S=null;_&&r.latestFeatureIndex&&(S={unwrappedTileID:h,dynamicFilter:_,dynamicFilterNeedsFeature:x,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new jt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,r.tileID);var T={bucket:a,layout:s,posMatrix:v,textLabelPlaneMatrix:w,labelToScreenMatrix:k,clippingData:S,scale:u,textPixelRatio:c,holdingForFade:r.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(i){var C,M=f(a.sortKeyRanges);try{for(M.s();!(C=M.n()).done;){var A=C.value,P=A.sortKey,I=A.symbolInstanceStart,z=A.symbolInstanceEnd;t.push({sortKey:P,symbolInstanceStart:I,symbolInstanceEnd:z,parameters:T})}}catch(L){M.e(L)}finally{M.f()}}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:T})}}},{key:"attemptAnchorPlacement",value:function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g){var y,_=h.textOffset0,x=h.textOffset1,b=h.crossTileID,w=[_,x],k=Bt(e,n,r,w,i),E=this.collisionIndex.placeCollisionBox(d,i,t,Ft(k.x,k.y,a,o,this.transform.angle),c,s,l,u.predicate);if(m){var S=d.getSymbolInstanceIconSize(g,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,S,m,Ft(k.x,k.y,a,o,this.transform.angle),c,s,l,u.predicate).box.length)return}if(E.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[b]&&this.prevPlacement.placements[b]&&this.prevPlacement.placements[b].text&&(y=this.prevPlacement.variableOffsets[b].anchor),this.variableOffsets[b]={textOffset:w,width:n,height:r,anchor:e,textScale:i,prevAnchor:y},this.markUsedJustification(d,e,h,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,h),this.placedOrientations[b]=p),{shift:k,placedGlyphBoxes:E}}},{key:"placeLayerBucketPart",value:function(t,n,r,i){var a=this,o=t.parameters,s=o.bucket,l=o.layout,u=o.posMatrix,c=o.textLabelPlaneMatrix,h=o.labelToScreenMatrix,d=o.clippingData,p=o.textPixelRatio,m=o.holdingForFade,v=o.collisionBoxArray,g=o.partiallyEvaluatedTextSize,y=o.partiallyEvaluatedIconSize,_=o.collisionGroup,x=l.get("text-optional"),b=l.get("icon-optional"),w=l.get("text-allow-overlap"),k=l.get("icon-allow-overlap"),E="map"===l.get("text-rotation-alignment"),S="map"===l.get("text-pitch-alignment"),T="none"!==l.get("icon-text-fit"),C="viewport-y"===l.get("symbol-z-order");this.transform.setProjection(s.projection);var M=w&&(k||!s.hasIconData()||b),A=k&&(w||!s.hasTextData()||x);!s.collisionArrays&&v&&s.deserializeCollisionBoxes(v),r&&i&&s.updateCollisionDebugBuffers(this.transform.zoom,v);var P=function(t,i,o){var v=t.crossTileID,C=t.numVerticalGlyphVertices;if(d){var P={zoom:a.transform.zoom,pitch:a.transform.pitch},I=null;if(d.dynamicFilterNeedsFeature){var z=a.retainedQueryData[s.bucketInstanceId];I=d.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:z.bucketIndex,sourceLayerIndex:z.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,d.dynamicFilter)(P,I,a.retainedQueryData[s.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),a.transform.calculateDistanceTileData(d.unwrappedTileID)))return a.placements[v]=new Rt(!1,!1,!1,!0),void n.add(v)}if(!n.has(v))if(m)a.placements[v]=new Rt(!1,!1,!1);else{var L=!1,D=!1,R=!0,O=!1,j=!1,N=null,B={box:null,offscreen:null,occluded:null},F={box:null,offscreen:null,occluded:null},$=null,V=null,U=null,Z=0,H=0,W=0;o.textFeatureIndex?Z=o.textFeatureIndex:t.useRuntimeCollisionCircles&&(Z=t.featureIndex),o.verticalTextFeatureIndex&&(H=o.verticalTextFeatureIndex);var q=function(e){e.tileID=a.retainedQueryData[s.bucketInstanceId].tileID;var t=a.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},G=o.textBox;if(G){q(G);var X=function(n){var r=e.WritingMode.horizontal;if(s.allowVerticalPlacement&&!n&&a.prevPlacement){var i=a.prevPlacement.placedOrientations[v];i&&(a.placedOrientations[v]=i,r=i,a.markUsedOrientation(s,r,t))}return r},K=function(t,n){if(s.allowVerticalPlacement&&C>0&&o.verticalTextBox){var r,i=f(s.writingModes);try{for(i.s();!(r=i.n()).done&&(r.value===e.WritingMode.vertical?(B=n(),F=B):B=t(),!(B&&B.box&&B.box.length)););}catch(a){i.e(a)}finally{i.f()}}else B=t()};if(l.get("text-variable-anchor")){var Y=l.get("text-variable-anchor");if(a.prevPlacement&&a.prevPlacement.variableOffsets[v]){var J=a.prevPlacement.variableOffsets[v];Y.indexOf(J.anchor)>0&&(Y=Y.filter((function(e){return e!==J.anchor})),Y.unshift(J.anchor))}var Q=function(e,n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=(e.x2-e.x1)*o+2*e.padding,c=(e.y2-e.y1)*o+2*e.padding,h=T&&!k?n:null;h&&q(h);for(var f={box:[],offscreen:!1,occluded:!1},d=w?2*Y.length:Y.length,m=0;m<d;++m){var v=a.attemptAnchorPlacement(Y[m%Y.length],e,l,c,o,E,S,p,u,_,m>=Y.length,t,i,s,r,h,g,y);if(v&&(f=v.placedGlyphBoxes)&&f.box&&f.box.length){L=!0,N=v.shift;break}}return f};K((function(){return Q(G,o.iconBox,e.WritingMode.horizontal)}),(function(){var t=o.verticalTextBox;return t&&q(t),s.allowVerticalPlacement&&!(B&&B.box&&B.box.length)&&C>0&&t?Q(t,o.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),B&&(L=B.box,R=B.offscreen,O=B.occluded);var ee=X(!(!B||!B.box));if(!L&&a.prevPlacement){var te=a.prevPlacement.variableOffsets[v];te&&(a.variableOffsets[v]=te,a.markUsedJustification(s,te.anchor,t,ee))}}else{var ne=function(n,r){var o=s.getSymbolInstanceTextSize(g,t,a.transform.zoom,i),l=a.collisionIndex.placeCollisionBox(s,o,n,new e.Point(0,0),w,p,u,_.predicate);return l&&l.box&&l.box.length&&(a.markUsedOrientation(s,r,t),a.placedOrientations[v]=r),l};K((function(){return ne(G,e.WritingMode.horizontal)}),(function(){var t=o.verticalTextBox;return s.allowVerticalPlacement&&C>0&&t?(q(t),ne(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),X(!!(B&&B.box&&B.box.length))}}if(L=($=B)&&$.box&&$.box.length>0,R=$&&$.offscreen,O=$&&$.occluded,t.useRuntimeCollisionCircles){var re=s.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),ie=e.evaluateSizeForFeature(s.textSizeData,g,re),ae=l.get("text-padding");V=a.collisionIndex.placeCollisionCircles(s,w,re,s.lineVertexArray,s.glyphOffsetArray,ie,u,c,h,r,S,_.predicate,t.collisionCircleDiameter*ie/e.ONE_EM,ae,a.retainedQueryData[s.bucketInstanceId].tileID),L=w||V.circles.length>0&&!V.collisionDetected,R=R&&V.offscreen,O=V.occluded}if(o.iconFeatureIndex&&(W=o.iconFeatureIndex),o.iconBox){var oe=function(n){q(n);var r=T&&N?Ft(N.x,N.y,E,S,a.transform.angle):new e.Point(0,0),i=s.getSymbolInstanceIconSize(y,a.transform.zoom,t.placedIconSymbolIndex);return a.collisionIndex.placeCollisionBox(s,i,n,r,k,p,u,_.predicate)};D=F&&F.box&&F.box.length&&o.verticalIconBox?(U=oe(o.verticalIconBox)).box.length>0:(U=oe(o.iconBox)).box.length>0,R=R&&U.offscreen,j=U.occluded}var se=x||0===t.numHorizontalGlyphVertices&&0===C,le=b||0===t.numIconVertices;if(se||le?le?se||(D=D&&L):L=D&&L:D=L=D&&L,L&&$&&$.box&&a.collisionIndex.insertCollisionBox($.box,l.get("text-ignore-placement"),s.bucketInstanceId,F&&F.box&&H?H:Z,_.ID),D&&U&&a.collisionIndex.insertCollisionBox(U.box,l.get("icon-ignore-placement"),s.bucketInstanceId,W,_.ID),V&&(L&&a.collisionIndex.insertCollisionCircles(V.circles,l.get("text-ignore-placement"),s.bucketInstanceId,Z,_.ID),r)){var ue=s.bucketInstanceId,ce=a.collisionCircleArrays[ue];void 0===ce&&(ce=a.collisionCircleArrays[ue]=new Ot);for(var he=0;he<V.circles.length;he+=4)ce.circles.push(V.circles[he+0]),ce.circles.push(V.circles[he+1]),ce.circles.push(V.circles[he+2]),ce.circles.push(V.collisionDetected?1:0)}var fe="globe"!==s.projection.name;M=M&&(fe||!O),A=A&&(fe||!j),a.placements[v]=new Rt(L||M,D||A,R||s.justReloaded),n.add(v)}};if(C)for(var I=s.getSortedSymbolIndexes(this.transform.angle),z=I.length-1;z>=0;--z){var L=I[z];P(s.symbolInstances.get(L),L,s.collisionArrays[L])}else for(var D=t.symbolInstanceStart;D<t.symbolInstanceEnd;D++)P(s.symbolInstances.get(D),D,s.collisionArrays[D]);if(r&&s.bucketInstanceId in this.collisionCircleArrays){var R=this.collisionCircleArrays[s.bucketInstanceId];e.invert(R.invProjMatrix,u),R.viewportMatrix=this.collisionIndex.getViewportMatrix()}s.justReloaded=!1}},{key:"markUsedJustification",value:function(t,n,r,i){var a=r.leftJustifiedTextSymbolIndex,o=r.centerJustifiedTextSymbolIndex,s=r.rightJustifiedTextSymbolIndex,l=r.verticalPlacedTextSymbolIndex,u=r.crossTileID,c=e.getAnchorJustification(n),h=i===e.WritingMode.vertical?l:"left"===c?a:"center"===c?o:"right"===c?s:-1;a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:u),o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:u),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:u),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:u)}},{key:"markUsedOrientation",value:function(t,n,r){var i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,o=r.leftJustifiedTextSymbolIndex,s=r.centerJustifiedTextSymbolIndex,l=r.rightJustifiedTextSymbolIndex,u=r.verticalPlacedTextSymbolIndex,c=t.text.placedSymbolArray;o>=0&&(c.get(o).placedOrientation=i),s>=0&&(c.get(s).placedOrientation=i),l>=0&&(c.get(l).placedOrientation=i),u>=0&&(c.get(u).placedOrientation=a)}},{key:"commit",value:function(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;var t=this.prevPlacement,n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;var r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(var s in this.placements){var l=this.placements[s],u=i[s];u?(this.opacities[s]=new Dt(u,r,l.text,l.icon,null,l.clipped),n=n||l.text!==u.text.placed||l.icon!==u.icon.placed):(this.opacities[s]=new Dt(null,r,l.text,l.icon,l.skipFade,l.clipped),n=n||l.text||l.icon)}for(var c in i){var h=i[c];if(!this.opacities[c]){var f=new Dt(h,r,!1,!1);f.isHidden()||(this.opacities[c]=f,n=n||h.text.placed||h.icon.placed)}}for(var d in a)this.variableOffsets[d]||!this.opacities[d]||this.opacities[d].isHidden()||(this.variableOffsets[d]=a[d]);for(var p in o)this.placedOrientations[p]||!this.opacities[p]||this.opacities[p].isHidden()||(this.placedOrientations[p]=o[p]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}},{key:"updateLayerOpacities",value:function(e,t){var n,r=new Set,i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=a.getBucket(e);o&&a.latestFeatureIndex&&e.id===o.layerIds[0]&&this.updateBucketOpacities(o,r,a.collisionBoxArray)}}catch(s){i.e(s)}finally{i.f()}}},{key:"updateBucketOpacities",value:function(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();var i=t.layers[0].layout,a=!!t.layers[0].dynamicFilter(),o=new Dt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),l=i.get("icon-allow-overlap"),u=i.get("text-variable-anchor"),c="map"===i.get("text-rotation-alignment"),h="map"===i.get("text-pitch-alignment"),f="none"!==i.get("icon-text-fit"),d=new Dt(null,0,s&&(l||!t.hasIconData()||i.get("icon-optional")),l&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);for(var p=function(e,t,n){for(var r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)},m=0,v=0;v<t.symbolInstances.length;v++){var g=t.symbolInstances.get(v),y=g.numHorizontalGlyphVertices,_=g.numVerticalGlyphVertices,x=g.crossTileID,b=g.numIconVertices,w=n.has(x),k=this.opacities[x];w?k=o:k||(k=d,this.opacities[x]=k),n.add(x);var E=y>0||_>0,S=b>0,T=this.placedOrientations[x],C=T===e.WritingMode.vertical,M=T===e.WritingMode.horizontal||T===e.WritingMode.horizontalOnly;if(!E&&!S||k.isHidden()||m++,E){var A=Kt(k.text);p(t.text,y,C?Yt:A),p(t.text,_,M?Yt:A);var P=k.text.isHidden(),I=g.leftJustifiedTextSymbolIndex,z=g.centerJustifiedTextSymbolIndex,L=g.rightJustifiedTextSymbolIndex,D=g.verticalPlacedTextSymbolIndex,R=t.text.placedSymbolArray,O=P||C?1:0;I>=0&&(R.get(I).hidden=O),z>=0&&(R.get(z).hidden=O),L>=0&&(R.get(L).hidden=O),D>=0&&(R.get(D).hidden=P||M?1:0);var j=this.variableOffsets[x];j&&this.markUsedJustification(t,j.anchor,g,T);var N=this.placedOrientations[x];N&&(this.markUsedJustification(t,"left",g,N),this.markUsedOrientation(t,N,g))}if(S){var B=Kt(k.icon),F=g.placedIconSymbolIndex,$=g.verticalPlacedIconSymbolIndex,V=t.icon.placedSymbolArray,U=k.icon.isHidden()?1:0;F>=0&&(p(t.icon,b,C?Yt:B),V.get(F).hidden=U),$>=0&&(p(t.icon,g.numVerticalIconVertices,M?Yt:B),V.get($).hidden=U)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){var Z=t.collisionArrays[v];if(Z){var H=new e.Point(0,0),W=!0;if(Z.textBox||Z.verticalTextBox){if(u){var q=this.variableOffsets[x];q?(H=Bt(q.anchor,q.width,q.height,q.textOffset,q.textScale),c&&H._rotate(h?this.transform.angle:-this.transform.angle)):W=!1}a&&(W=!k.clipped),Z.textBox&&Vt(t.textCollisionBox.collisionVertexArray,k.text.placed,!W||C,H.x,H.y),Z.verticalTextBox&&Vt(t.textCollisionBox.collisionVertexArray,k.text.placed,!W||M,H.x,H.y)}var G=W&&Boolean(!M&&Z.verticalIconBox);Z.iconBox&&Vt(t.iconCollisionBox.collisionVertexArray,k.icon.placed,G,f?H.x:0,f?H.y:0),Z.verticalIconBox&&Vt(t.iconCollisionBox.collisionVertexArray,k.icon.placed,!G,f?H.x:0,f?H.y:0)}}}if(t.fullyClipped=0===m,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){var X=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=X.invProjMatrix,t.placementViewportMatrix=X.viewportMatrix,t.collisionCircleArray=X.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}},{key:"symbolFadeChange",value:function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}},{key:"zoomAdjustment",value:function(e){return Math.max(0,(this.transform.zoom-e)/1.5)}},{key:"hasTransitions",value:function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}},{key:"stillRecent",value:function(e,t){var n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}},{key:"setStale",value:function(){this.stale=!0}}]),t}();function Vt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}var Ut=Math.pow(2,25),Zt=Math.pow(2,24),Ht=Math.pow(2,17),Wt=Math.pow(2,16),qt=Math.pow(2,9),Gt=Math.pow(2,8),Xt=Math.pow(2,1);function Kt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ut+t*Zt+n*Ht+t*Wt+n*qt+t*Gt+n*Xt+t}var Yt=0,Jt=function(){function e(t){d(this,e),this._sortAcrossTiles="viewport-y"!==t.layout.get("symbol-z-order")&&void 0!==t.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}return p(e,[{key:"continuePlacement",value:function(e,t,n,r,i){for(var a=this._bucketParts;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((function(e,t){return e.sortKey-t.sortKey})));this._currentPartIndex<a.length;){var o=a[this._currentPartIndex];if(t.placeLayerBucketPart(o,this._seenCrossTileIDs,n,0===o.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}]),e}(),Qt=function(){function t(e,n,r,i,a,o,s,l){d(this,t),this.placement=new $t(e,a,o,s,l),this._currentPlacementIndex=n.length-1,this._forceFullPlacement=r,this._showCollisionBoxes=i,this._done=!1}return p(t,[{key:"isDone",value:function(){return this._done}},{key:"continuePlacement",value:function(t,n,r){for(var i=this,a=e.exported.now(),o=function(){var t=e.exported.now()-a;return!i._forceFullPlacement&&t>2};this._currentPlacementIndex>=0;){var s=n[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===s.type&&(!s.minzoom||s.minzoom<=l)&&(!s.maxzoom||s.maxzoom>l)){if(this._inProgressLayer||(this._inProgressLayer=new Jt(s)),this._inProgressLayer.continuePlacement(r[s.source],this.placement,this._showCollisionBoxes,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}},{key:"commit",value:function(e){return this.placement.commit(e),this.placement}}]),t}(),en=512/e.EXTENT/2,tn=function(){function t(n,r,i){d(this,t),this.tileID=n,this.bucketInstanceId=i,this.index=new e.KDBush(r.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];for(var a=n.canonical.x*e.EXTENT,o=n.canonical.y*e.EXTENT,s=0;s<r.length;s++){var l=r.get(s),u=l.key,c=l.crossTileID,h=l.tileAnchorX,f=l.tileAnchorY,p=Math.floor((a+h)*en),m=Math.floor((o+f)*en);this.index.add(p,m),this.keys.push(u),this.crossTileIDs.push(c)}this.index.finish()}return p(t,[{key:"findMatches",value:function(t,n,r){for(var i=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),a=en/Math.pow(2,n.canonical.z-this.tileID.canonical.z),o=n.canonical.x*e.EXTENT,s=n.canonical.y*e.EXTENT,l=0;l<t.length;l++){var u=t.get(l);if(!u.crossTileID){var c,h=u.key,d=u.tileAnchorX,p=u.tileAnchorY,m=Math.floor((o+d)*a),v=Math.floor((s+p)*a),g=this.index.range(m-i,v-i,m+i,v+i),y=f(g);try{for(y.s();!(c=y.n()).done;){var _=c.value,x=this.crossTileIDs[_];if(this.keys[_]===h&&!r.has(x)){r.add(x),u.crossTileID=x;break}}}catch(b){y.e(b)}finally{y.f()}}}}}]),t}(),nn=function(){function e(){d(this,e),this.maxCrossTileID=0}return p(e,[{key:"generate",value:function(){return++this.maxCrossTileID}}]),e}(),rn=function(){function e(){d(this,e),this.indexes={},this.usedCrossTileIDs={},this.lng=0}return p(e,[{key:"handleWrapJump",value:function(e){var t=Math.round((e-this.lng)/360);if(0!==t)for(var n in this.indexes){var r=this.indexes[n],i={};for(var a in r){var o=r[a];o.tileID=o.tileID.unwrapTo(o.tileID.wrap+t),i[o.tileID.key]=o}this.indexes[n]=i}this.lng=e}},{key:"addBucket",value:function(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var r=0;r<t.symbolInstances.length;r++)t.symbolInstances.get(r).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);var i=this.usedCrossTileIDs[e.overscaledZ];for(var a in this.indexes){var o=this.indexes[a];if(Number(a)>e.overscaledZ)for(var s in o){var l=o[s];l.tileID.isChildOf(e)&&l.findMatches(t.symbolInstances,e,i)}else{var u=o[e.scaledTo(Number(a)).key];u&&u.findMatches(t.symbolInstances,e,i)}}for(var c=0;c<t.symbolInstances.length;c++){var h=t.symbolInstances.get(c);h.crossTileID||(h.crossTileID=n.generate(),i.add(h.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new tn(e,t.symbolInstances,t.bucketInstanceId),!0}},{key:"removeBucketCrossTileIDs",value:function(e,t){var n,r=f(t.crossTileIDs);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.usedCrossTileIDs[e].delete(i)}}catch(a){r.e(a)}finally{r.f()}}},{key:"removeStaleBuckets",value:function(e){var t=!1;for(var n in this.indexes){var r=this.indexes[n];for(var i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}]),e}(),an=function(){function e(){d(this,e),this.layerIndexes={},this.crossTileIDs=new nn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}return p(e,[{key:"addLayer",value:function(e,t,n,r){var i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new rn);var a=!1,o={};"globe"!==r.name&&i.handleWrapJump(n);var s,l=f(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.getBucket(e);c&&e.id===c.layerIds[0]&&(c.bucketInstanceId||(c.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(u.tileID,c,this.crossTileIDs)&&(a=!0),o[c.bucketInstanceId]=!0)}}catch(h){l.e(h)}finally{l.f()}return i.removeStaleBuckets(o)&&(a=!0),a}},{key:"pruneUnusedLayers",value:function(e){var t={};for(var n in e.forEach((function(e){t[e]=!0})),this.layerIndexes)t[n]||delete this.layerIndexes[n]}}]),e}(),on=function(t,n){return e.emitValidationErrors(t,n&&n.filter((function(e){return"source.canvas"!==e.identifier})))},sn=e.pick(tt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),ln=e.pick(tt,["setCenter","setZoom","setBearing","setPitch"]),un={version:8,layers:[],sources:{}},cn={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0},hn=function(n){m(a,n);var r=v(a);function a(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d(this,a),(n=r.call(this)).map=t,n.dispatcher=new V(Je(),i(n)),n.imageManager=new L,n.imageManager.setEventedParent(i(n)),n.glyphManager=new e.GlyphManager(t._requestManager,o.localFontFamily?e.LocalGlyphMode.all:o.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,o.localFontFamily||o.localIdeographFontFamily),n.crossTileSymbolIndex=new an,n._layers={},n._num3DLayers=0,n._numSymbolLayers=0,n._numCircleLayers=0,n._serializedLayers={},n._sourceCaches={},n._otherSourceCaches={},n._symbolSourceCaches={},n._loaded=!1,n._availableImages=[],n._order=[],n._drapedFirstOrder=[],n._markersNeedUpdate=!1,n._resetUpdates(),n.dispatcher.broadcast("setReferrer",e.getReferrer());var s=i(n);return n._rtlTextPluginCallback=a.registerForPluginStateChange((function(t){s.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(function(t,n){if(e.triggerPluginCompletionEvent(t),n&&n.every((function(e){return e})))for(var r in s._sourceCaches){var i=s._sourceCaches[r],a=i.getSource().type;"vector"!==a&&"geojson"!==a||i.reload()}}))})),n.on("data",(function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(var r in n._layers){var i=n._layers[r];i.source===t.id&&n._validateLayer(i)}}})),n}return p(a,[{key:"loadURL",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"}));var i="boolean"==typeof r.validate?r.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,r.accessToken);var a=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(a,(function(t,r){n._request=null,t?n.fire(new e.ErrorEvent(t)):r&&n._load(r,i)}))}},{key:"loadJSON",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((function(){n._request=null,n._load(t,!1!==r.validate)}))}},{key:"loadEmpty",value:function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(un,!1)}},{key:"_updateLayerCount",value:function(e,t){var n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}},{key:"_load",value:function(t,n){if(!n||!on(this,e.validateStyle(t))){for(var r in this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection(),t.sources)this.addSource(r,t.sources[r],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);var i=et(this.stylesheet.layers);this._order=i.map((function(e){return e.id})),this._layers={},this._serializedLayers={};var a,o=f(i);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=e.createStyleLayer(s);l.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=l,this._serializedLayers[l.id]=l.serialize(),this._updateLayerCount(l,!0)}}catch(u){o.e(u)}finally{o.f()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new R(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}}},{key:"terrainSetForDrapingOnly",value:function(){return!!this.terrain&&0===this.terrain.drapeRenderMode}},{key:"setProjection",value:function(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}},{key:"applyProjectionUpdate",value:function(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}},{key:"_updateMapProjection",value:function(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}},{key:"_loadSprite",value:function(t){var n=this;this._spriteRequest=function(t,n,r){var i,a,o,s=e.exported.devicePixelRatio>1?"@2x":"",l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(function(e,t){l=null,o||(o=e,i=t,c())})),u=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(function(e,t){u=null,o||(o=e,a=t,c())}));function c(){if(o)r(o);else if(i&&a){var t=e.exported.getImageData(a),n={};for(var s in i){var l=i[s],u=l.width,c=l.height,h=l.x,f=l.y,d=l.sdf,p=l.pixelRatio,m=l.stretchX,v=l.stretchY,g=l.content,y=new e.RGBAImage({width:u,height:c});e.RGBAImage.copy(t,y,{x:h,y:f},{x:0,y:0},{width:u,height:c}),n[s]={data:y,pixelRatio:p,sdf:d,stretchX:m,stretchY:v,content:g}}r(null,n)}}return{cancel:function(){l&&(l.cancel(),l=null),u&&(u.cancel(),u=null)}}}(t,this.map._requestManager,(function(t,r){if(n._spriteRequest=null,t)n.fire(new e.ErrorEvent(t));else if(r)for(var i in r)n.imageManager.addImage(i,r[i]);n.imageManager.setLoaded(!0),n._availableImages=n.imageManager.listImages(),n.dispatcher.broadcast("setImages",n._availableImages),n.dispatcher.broadcast("spriteLoaded",!0),n.fire(new e.Event("data",{dataType:"style"}))}))}},{key:"_validateLayer",value:function(t){var n=this.getSource(t.source);if(n){var r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(n.id,'" as specified by style layer "').concat(t.id,'"'))))}}},{key:"loaded",value:function(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}},{key:"_serializeLayers",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=this._layers[i];"custom"!==a.type&&n.push(a.serialize())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"hasTransitions",value:function(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(var e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(var t in this._layers)if(this._layers[t].hasTransition())return!0;return!1}},{key:"order",get:function(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}},{key:"isLayerDraped",value:function(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():cn[e.type])}},{key:"_checkLoaded",value:function(){if(!this._loaded)throw new Error("Style is not done loading")}},{key:"update",value:function(t){if(this._loaded){var n=this._changed;if(this._changed){var r=Object.keys(this._updatedLayers),i=Object.keys(this._removedLayers);for(var a in(r.length||i.length)&&this._updateWorkerLayers(r,i),this._updatedSources){var o=this._updatedSources[a];"reload"===o?this._reloadSource(a):"clear"===o&&this._clearSource(a)}for(var s in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[s].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}var l={};for(var u in this._sourceCaches){var c=this._sourceCaches[u];l[u]=c.used,c.used=!1}var h,d=f(this._order);try{for(d.s();!(h=d.n()).done;){var p=h.value,m=this._layers[p];if(m.recalculate(t,this._availableImages),!m.isHidden(t.zoom)){var v=this._getLayerSourceCache(m);v&&(v.used=!0)}var g=this.map.painter;if(g){var y=m.getProgramIds();if(!y)continue;var _,x=m.getProgramConfiguration(t.zoom),b=f(y);try{for(b.s();!(_=b.n()).done;){var w=_.value;g.useProgram(w,x)}}catch(S){b.e(S)}finally{b.f()}}}}catch(S){d.e(S)}finally{d.f()}for(var k in l){var E=this._sourceCaches[k];l[k]!==E.used&&E.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:E.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}}},{key:"_updateTilesForChangedImages",value:function(){var e=Object.keys(this._changedImages);if(e.length){for(var t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}},{key:"_updateWorkerLayers",value:function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}},{key:"_resetUpdates",value:function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}},{key:"setState",value:function(n){var r=this;if(this._checkLoaded(),on(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=et(n.layers);var i=function(e,n){if(!e)return[{command:tt.setStyle,args:[n]}];var r=[];try{if(!t(e.version,n.version))return[{command:tt.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:tt.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:tt.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:tt.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:tt.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:tt.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:tt.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:tt.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:tt.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:tt.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:tt.setProjection,args:[n.projection]});var i={},a=[];!function(e,n,r,i){var a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||rt(a,r,i));for(a in n)if(n.hasOwnProperty(a)){var o=n[a];e.hasOwnProperty(a)?t(e[a],o)||("geojson"===e[a].type&&"geojson"===o.type&&at(e,n,a)?r.push({command:tt.setGeoJSONSourceData,args:[a,o.data]}):it(a,n,r,i)):nt(a,n,r)}}(e.sources,n.sources,a,i);var o=[];e.layers&&e.layers.forEach((function(e){e.source&&i[e.source]?r.push({command:tt.removeLayer,args:[e.id]}):o.push(e)}));var s=e.terrain;s&&i[s.source]&&(r.push({command:tt.setTerrain,args:[void 0]}),s=void 0),r=r.concat(a),t(s,n.terrain)||r.push({command:tt.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];var i,a,o,s,l,u,c,h=(e=e||[]).map(st),f=n.map(st),d=e.reduce(lt,{}),p=n.reduce(lt,{}),m=h.slice(),v=Object.create(null);for(i=0,a=0;i<h.length;i++)o=h[i],p.hasOwnProperty(o)?a++:(r.push({command:tt.removeLayer,args:[o]}),m.splice(m.indexOf(o,a),1));for(i=0,a=0;i<f.length;i++)o=f[f.length-1-i],m[m.length-1-i]!==o&&(d.hasOwnProperty(o)?(r.push({command:tt.removeLayer,args:[o]}),m.splice(m.lastIndexOf(o,m.length-a),1)):a++,u=m[m.length-i],r.push({command:tt.addLayer,args:[p[o],u]}),m.splice(m.length-i,0,o),v[o]=!0);for(i=0;i<f.length;i++)if(s=d[o=f[i]],l=p[o],!v[o]&&!t(s,l))if(t(s.source,l.source)&&t(s["source-layer"],l["source-layer"])&&t(s.type,l.type)){for(c in ot(s.layout,l.layout,r,o,null,tt.setLayoutProperty),ot(s.paint,l.paint,r,o,null,tt.setPaintProperty),t(s.filter,l.filter)||r.push({command:tt.setFilter,args:[o,l.filter]}),t(s.minzoom,l.minzoom)&&t(s.maxzoom,l.maxzoom)||r.push({command:tt.setLayerZoomRange,args:[o,l.minzoom,l.maxzoom]}),s)s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ot(s[c],l[c],r,o,c.slice(6),tt.setPaintProperty):t(s[c],l[c])||r.push({command:tt.setLayerProperty,args:[o,c,l[c]]}));for(c in l)l.hasOwnProperty(c)&&!s.hasOwnProperty(c)&&"layout"!==c&&"paint"!==c&&"filter"!==c&&"metadata"!==c&&"minzoom"!==c&&"maxzoom"!==c&&(0===c.indexOf("paint.")?ot(s[c],l[c],r,o,c.slice(6),tt.setPaintProperty):t(s[c],l[c])||r.push({command:tt.setLayerProperty,args:[o,c,l[c]]}))}else r.push({command:tt.removeLayer,args:[o]}),u=m[m.lastIndexOf(o)+1],r.push({command:tt.addLayer,args:[l,u]})}(o,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:tt.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((function(e){return!(e.command in ln)}));if(0===i.length)return!1;var a=i.filter((function(e){return!(e.command in sn)}));if(a.length>0)throw new Error("Unimplemented: ".concat(a.map((function(e){return e.command})).join(", "),"."));return i.forEach((function(e){"setTransition"!==e.command&&"setProjection"!==e.command&&r[e.command].apply(r,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}},{key:"addImage",value:function(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}},{key:"updateImage",value:function(e,t){this.imageManager.updateImage(e,t)}},{key:"getImage",value:function(e){return this.imageManager.getImage(e)}},{key:"removeImage",value:function(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}},{key:"_afterImageUpdated",value:function(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}},{key:"listImages",value:function(){return this._checkLoaded(),this._availableImages.slice()}},{key:"addSource",value:function(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(n).join(", "),"."));if(!(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources.".concat(t),n,null,i))){this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);var a=Ue(t,n,this.dispatcher,this);a.setEventedParent(this,(function(){return{isSourceLoaded:r._isSourceCacheLoaded(t),source:a.serialize(),sourceId:t}}));var o=function(n){var i=(n?"symbol:":"other:")+t,o=r._sourceCaches[i]=new e.SourceCache(i,a,n);(n?r._symbolSourceCaches:r._otherSourceCaches)[t]=o,o.style=r,o.onAdd(r.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),a.onAdd&&a.onAdd(this.map),this._changed=!0}}},{key:"removeSource",value:function(t){this._checkLoaded();var n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(var r in this._layers)if(this._layers[r].source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(r,'" is using it.'))));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));var i,a=this._getSourceCaches(t),o=f(a);try{for(o.s();!(i=o.n()).done;){var s=i.value;delete this._sourceCaches[s.id],delete this._updatedSources[s.id],s.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:s.getSource().id})),s.setEventedParent(null),s.clearTiles()}}catch(l){o.e(l)}finally{o.f()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}},{key:"setGeoJSONSourceData",value:function(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}},{key:"getSource",value:function(e){var t=this._getSourceCache(e);return t&&t.getSource()}},{key:"_getSources",value:function(){var e=[];for(var t in this._otherSourceCaches){var n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}},{key:"addLayer",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var i=t.id;if(this.getLayer(i))this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(i,'" already exists on this map'))));else{var a;if("custom"===t.type){if(on(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,"layers.".concat(i),t,{arrayIndex:-1},r))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}var o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.'))));else{this._order.splice(o,0,i),this._layerOrderChanged=!0,this._layers[i]=a;var s=this._getLayerSourceCache(a);if(this._removedLayers[i]&&a.source&&s&&"custom"!==a.type){var l=this._removedLayers[i];delete this._removedLayers[i],l.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}}}},{key:"moveLayer",value:function(t,n){if(this._checkLoaded(),this._changed=!0,this._layers[t]){if(t!==n){var r=this._order.indexOf(t);this._order.splice(r,1);var i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error('Layer with id "'.concat(n,'" does not exist on this map.')))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be moved."))))}},{key:"removeLayer",value:function(t){this._checkLoaded();var n=this._layers[t];if(n){n.setEventedParent(null),this._updateLayerCount(n,!1);var r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be removed."))))}},{key:"getLayer",value:function(e){return this._layers[e]}},{key:"hasLayer",value:function(e){return e in this._layers}},{key:"hasLayerType",value:function(e){for(var t in this._layers)if(this._layers[t].type===e)return!0;return!1}},{key:"setLayerZoomRange",value:function(t,n,r){this._checkLoaded();var i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot have zoom extent."))))}},{key:"setFilter",value:function(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();var a=this.getLayer(n);if(a){if(!t(a.filter,r))return null==r?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,"layers.".concat(a.id,".filter"),r,{layerType:a.type},i)||(a.filter=e.clone$1(r),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be filtered."))))}},{key:"getFilter",value:function(t){var n=this.getLayer(t);return n&&e.clone$1(n.filter)}},{key:"setLayoutProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getLayoutProperty(r),i)||(o.setLayoutProperty(r,i,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getLayoutProperty",value:function(t,n){var r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}},{key:"setPaintProperty",value:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();var o=this.getLayer(n);o?t(o.getPaintProperty(r),i)||(o.setPaintProperty(r,i,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error("The layer '".concat(n,"' does not exist in the map's style and cannot be styled."))))}},{key:"getPaintProperty",value:function(e,t){var n=this.getLayer(e);return n&&n.getPaintProperty(t)}},{key:"setFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=t.sourceLayer,a=this.getSource(r);if(a){var o=a.type;if("geojson"===o&&i)this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));else if("vector"!==o||i){void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));var s,l=this._getSourceCaches(r),u=f(l);try{for(u.s();!(s=u.n()).done;)s.value.setFeatureState(i,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"removeFeatureState",value:function(t,n){this._checkLoaded();var r=t.source,i=this.getSource(r);if(i){var a=i.type,o="vector"===a?t.sourceLayer:void 0;if("vector"!==a||o)if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));else{var s,l=this._getSourceCaches(r),u=f(l);try{for(u.s();!(s=u.n()).done;)s.value.removeFeatureState(o,t.id,n)}catch(c){u.e(c)}finally{u.f()}}else this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(r,"' does not exist in the map's style."))))}},{key:"getFeatureState",value:function(t){this._checkLoaded();var n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '".concat(n,"' does not exist in the map's style."))))}},{key:"getTransition",value:function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}},{key:"serialize",value:function(){var t={};for(var n in this._sourceCaches){var r=this._sourceCaches[n].getSource();t[r.id]||(t[r.id]=r.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(function(e){return void 0!==e}))}},{key:"_updateLayer",value:function(e){this._updatedLayers[e.id]=!0;var t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}},{key:"_flattenAndSortRenderedFeatures",value:function(e){for(var t=this,n=function(e){return"fill-extrusion"===t._layers[e].type},r={},i=[],a=this._order.length-1;a>=0;a--){var o=this._order[a];if(n(o)){r[o]=a;var s,l=f(e);try{for(l.s();!(s=l.n()).done;){var u=s.value[o];if(u){var c,h=f(u);try{for(h.s();!(c=h.n()).done;){var d=c.value;i.push(d)}}catch(S){h.e(S)}finally{h.f()}}}}catch(S){l.e(S)}finally{l.f()}}}i.sort((function(e,t){return t.intersectionZ-e.intersectionZ}));for(var p=[],m=this._order.length-1;m>=0;m--){var v=this._order[m];if(n(v))for(var g=i.length-1;g>=0;g--){var y=i[g].feature;if(r[y.layer.id]<m)break;p.push(y),i.pop()}else{var _,x=f(e);try{for(x.s();!(_=x.n()).done;){var b=_.value[v];if(b){var w,k=f(b);try{for(k.s();!(w=k.n()).done;){var E=w.value;p.push(E.feature)}}catch(S){k.e(S)}finally{k.f()}}}}catch(S){x.e(S)}finally{x.f()}}}return p}},{key:"queryRenderedFeatures",value:function(t,n,r){var i=this;n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);var a={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];var o,s=f(n.layers);try{for(s.s();!(o=s.n()).done;){var l=o.value,u=this._layers[l];if(!u)return this.fire(new e.ErrorEvent(new Error("The layer '".concat(l,"' does not exist in the map's style and cannot be queried for features.")))),[];a[u.source]=!0}}catch(v){s.e(v)}finally{s.f()}}var c=[];n.availableImages=this._availableImages;var h=n&&n.layers?n.layers.some((function(e){var t=i.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),d=Z.createFromScreenPoints(t,r);for(var p in this._sourceCaches){var m=this._sourceCaches[p].getSource().id;n.layers&&!a[m]||c.push(He(this._sourceCaches[p],this._layers,this._serializedLayers,d,n,r,h,!!this.map._showQueryGeometry))}return this.placement&&c.push(function(e,t,n,r,i,a,o){var s,l={},u=a.queryRenderedSymbols(r),c=[],h=f(Object.keys(u).map(Number));try{for(h.s();!(s=h.n()).done;){var d=s.value;c.push(o[d])}}catch(v){h.e(v)}finally{h.f()}c.sort(qe);for(var p=function(){var n=g[m],r=n.featureIndex.lookupSymbolFeatures(u[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(var a in r){var o=l[a]=l[a]||[],s=r[a];s.sort((function(e,t){var r=n.featureSortOrder;if(r){var i=r.indexOf(e.featureIndex);return r.indexOf(t.featureIndex)-i}return t.featureIndex-e.featureIndex}));var c,h=f(s);try{for(h.s();!(c=h.n()).done;){var d=c.value;o.push(d)}}catch(v){h.e(v)}finally{h.f()}}},m=0,g=c;m<g.length;m++)p();var y=function(t){l[t].forEach((function(r){var i=r.feature,a=n(e[t]);if(a){var o=a.getFeatureState(i.layer["source-layer"],i.id);i.source=i.layer.source,i.layer["source-layer"]&&(i.sourceLayer=i.layer["source-layer"]),i.state=o}}))};for(var _ in l)y(_);return l}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),d.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(c)}},{key:"querySourceFeatures",value:function(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);var r,i=this._getSourceCaches(t),a=[],o=f(i);try{for(o.s();!(r=o.n()).done;){var s=r.value;a=a.concat(We(s,n))}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"addSourceType",value:function(e,t,n){return a.getSourceType(e)?n(new Error('A source type called "'.concat(e,'" already exists.'))):(a.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}},{key:"getLight",value:function(){return this.light.getLight()}},{key:"setLight",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkLoaded();var r=this.light.getLight(),i=!1;for(var a in e)if(!t(e[a],r[a])){i=!0;break}if(i){var o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}}},{key:"getTerrain",value:function(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}},{key:"setTerrainForDraping",value:function(){this.setTerrain({source:"",exaggeration:0},0)}},{key:"setTerrain",value:function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);var i=n;if(1===r){if("object"==typeof i.source){var a="terrain-dem-src";this.addSource(a,i.source),i=e.clone$1(i),i=e.extend(i,{source:a})}if(this._validate(e.validateTerrain,"terrain",i))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode){if(!i)return;this._createTerrain(i,r)}else{for(var o=this.terrain,s=o.get(),l=0,u=Object.keys(e.spec.terrain);l<u.length;l++){var c=u[l];!i.hasOwnProperty(c)&&e.spec.terrain[c].default&&(i[c]=e.spec.terrain[c].default)}for(var h in i)if(!t(i[h],s[h])){o.set(i),this.stylesheet.terrain=i;var f=this._setTransitionParameters({duration:0});o.updateTransitions(f);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}},{key:"_createFog",value:function(e){var t=this.fog=new $(e,this.map.transform);this.stylesheet.fog=e;var n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}},{key:"_updateMarkersOpacity",value:function(){var e=this;0!==this.map._markers.length&&this.map._requestDomTask((function(){var t,n=f(e.map._markers);try{for(n.s();!(t=n.n()).done;)t.value._evaluateOpacity()}catch(r){n.e(r)}finally{n.f()}}))}},{key:"getFog",value:function(){return this.fog?this.fog.get():null}},{key:"setFog",value:function(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){var n=this.fog,r=n.get();for(var i in 0===Object.keys(e).length&&n.set(e),e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;var a=this._setTransitionParameters({duration:0});n.updateTransitions(a);break}}else this._createFog(e);this._markersNeedUpdate=!0}},{key:"_setTransitionParameters",value:function(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}},{key:"_updateDrapeFirstLayers",value:function(){var e,t,n=this;if(this.map._optimizeForTerrain&&this.terrain){var r=this._order.filter((function(e){return n.isLayerDraped(n._layers[e])})),i=this._order.filter((function(e){return!n.isLayerDraped(n._layers[e])}));this._drapedFirstOrder=[],(e=this._drapedFirstOrder).push.apply(e,c(r)),(t=this._drapedFirstOrder).push.apply(t,c(i))}}},{key:"_createTerrain",value:function(e,t){var n=this.terrain=new j(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();var r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}},{key:"_force3DLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}},{key:"_forceSymbolLayerUpdate",value:function(){for(var e in this._layers){var t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}},{key:"_validate",value:function(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(!a||!1!==a.validate)&&on(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}},{key:"_remove",value:function(){for(var t in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[t].setEventedParent(null);for(var n in this._sourceCaches)this._sourceCaches[n].clearTiles(),this._sourceCaches[n].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}},{key:"_clearSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;)t.value.clearTiles()}catch(i){r.e(i)}finally{r.f()}}},{key:"_reloadSource",value:function(e){var t,n=this._getSourceCaches(e),r=f(n);try{for(r.s();!(t=r.n()).done;){var i=t.value;i.resume(),i.reload()}}catch(a){r.e(a)}finally{r.f()}}},{key:"_reloadSources",value:function(){var e,t=f(this._getSources());try{for(t.s();!(e=t.n()).done;){var n=e.value;n.reload&&n.reload()}}catch(r){t.e(r)}finally{t.f()}}},{key:"_updateSources",value:function(e){for(var t in this._sourceCaches)this._sourceCaches[t].update(e)}},{key:"_generateCollisionBoxes",value:function(){for(var e in this._sourceCaches){var t=this._sourceCaches[e];t.resume(),t.reload()}}},{key:"_updatePlacement",value:function(t,n,r,i){var a,o=this,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=!1,u=!1,c={},h=f(this._order);try{var d=function(){var e=a.value,n=o._layers[e];if("symbol"!==n.type)return"continue";if(!c[n.source]){var r=o._getLayerSourceCache(n);if(!r)return"continue";c[n.source]=r.getRenderableIds(!0).map((function(e){return r.getTileByID(e)})).sort((function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)}))}var i=o.crossTileSymbolIndex.addLayer(n,c[n.source],t.center.lng,t.projection);l=l||i};for(h.s();!(a=h.n()).done;)d()}catch(y){h.e(y)}finally{h.f()}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),s=s||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Qt(t,this._order,s,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),u=!0),l&&this.pauseablePlacement.placement.setStale()),u||l){var p,m=f(this._order);try{for(m.s();!(p=m.n()).done;){var v=p.value,g=this._layers[v];"symbol"===g.type&&this.placement.updateLayerOpacities(g,c[g.source])}}catch(y){m.e(y)}finally{m.f()}}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}},{key:"_releaseSymbolFadeTiles",value:function(){for(var e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}},{key:"getImages",value:function(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();var r=function(e){e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}},{key:"getGlyphs",value:function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}},{key:"getResource",value:function(t,n,r){return e.makeRequest(n,r)}},{key:"_getSourceCache",value:function(e){return this._otherSourceCaches[e]}},{key:"_getLayerSourceCache",value:function(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}},{key:"_getSourceCaches",value:function(e){var t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}},{key:"_isSourceCacheLoaded",value:function(t){var n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error("There is no source with ID '".concat(t,"'")))),!1):n.every((function(e){return e.loaded()}))}},{key:"has3DLayers",value:function(){return this._num3DLayers>0}},{key:"hasSymbolLayers",value:function(){return this._numSymbolLayers>0}},{key:"hasCircleLayers",value:function(){return this._numCircleLayers>0}},{key:"_clearWorkerCaches",value:function(){this.dispatcher.broadcast("clearCaches")}},{key:"destroy",value:function(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}]),a}(e.Evented);hn.getSourceType=function(e){return Ve[e]},hn.setSourceType=function(e,t){Ve[e]=t},hn.registerForPluginStateChange=e.registerForPluginStateChange;var fn="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",dn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",pn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",mn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",vn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",gn={},yn={},_n=[];En(fn,_n),En(pn,_n),En(mn,_n),En(vn,_n),gn=Sn("",pn),yn=Sn(vn,mn);var xn=Sn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),bn=fn,wn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",kn={background:Sn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:Sn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:Sn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:Sn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Sn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:Sn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Sn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Sn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Sn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:Sn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:Sn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:Sn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:Sn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Sn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:Sn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:Sn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:Sn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:Sn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:Sn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:Sn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:Sn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:Sn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",dn),skyboxGradient:Sn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",dn),skyboxCapture:Sn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Sn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:Sn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function En(e,t){var n,r=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n"),i=f(r);try{for(i.s();!(n=i.n()).done;){var a=n.value;if("#"===(a=a.trim())[0]&&a.includes("if")&&!a.includes("endif")){var o,s=(a=a.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim()).split(" "),l=f(s);try{for(l.s();!(o=l.n()).done;){var u=o.value;t.includes(u)||t.push(u)}}catch(c){l.e(c)}finally{l.f()}}}}catch(c){i.e(c)}finally{i.f()}}function Sn(e,t){var n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},a=[].concat(_n);return En(e,a),En(t,a),{fragmentSource:e=e.replace(n,(function(e,t,n,r,a){return i[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"\n#ifdef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),vertexSource:t=t.replace(n,(function(e,t,n,r,a){var o="float"===r?"vec2":"vec4",s=a.match(/color/)?"color":o;return i[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\nvarying ").concat(n," ").concat(r," ").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\nuniform lowp float u_").concat(a,"_t;\nattribute ").concat(n," ").concat(o," a_").concat(a,";\n#else\nuniform ").concat(n," ").concat(r," u_").concat(a,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = a_").concat(a,";\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(a,"\n    ").concat(n," ").concat(r," ").concat(a," = unpack_mix_").concat(s,"(a_").concat(a,", u_").concat(a,"_t);\n#else\n    ").concat(n," ").concat(r," ").concat(a," = u_").concat(a,";\n#endif\n")})),staticAttributes:r,usedDefines:a}}var Tn=function(){function e(){d(this,e),this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}return p(e,[{key:"bind",value:function(e,t,n,r,i,a,o){this.context=e;for(var s=this.boundPaintVertexBuffers.length!==r.length,l=0;!s&&l<r.length;l++)this.boundPaintVertexBuffers[l]!==r[l]&&(s=!0);for(var u=this.boundDynamicVertexBuffers.length!==o.length,c=0;!u&&c<o.length;c++)this.boundDynamicVertexBuffers[c]!==o[c]&&(u=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==a)this.freshBind(t,n,r,i,a,o);else{e.bindVertexArrayOES.set(this.vao);var h,d=f(o);try{for(d.s();!(h=d.n()).done;){var p=h.value;p&&p.bind()}}catch(m){d.e(m)}finally{d.f()}i&&i.dynamicDraw&&i.bind()}}},{key:"freshBind",value:function(e,t,n,r,i,a){var o,s=e.numAttributes,l=this.context,u=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=a;else{o=l.currentNumAttributes||0;for(var c=s;c<o;c++)u.disableVertexAttribArray(c)}t.enableAttributes(u,e),t.bind(),t.setVertexAttribPointers(u,e,i);var h,d=f(n);try{for(d.s();!(h=d.n()).done;){var p=h.value;p.enableAttributes(u,e),p.bind(),p.setVertexAttribPointers(u,e,i)}}catch(y){d.e(y)}finally{d.f()}var m,v=f(a);try{for(v.s();!(m=v.n()).done;){var g=m.value;g&&(g.enableAttributes(u,e),g.bind(),g.setVertexAttribPointers(u,e,i))}}catch(y){v.e(y)}finally{v.f()}r&&r.bind(),l.currentNumAttributes=s}},{key:"destroy",value:function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}]),e}();function Cn(t,n){var r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function Mn(t,n,r,i,a,o,s){var l=t.context,u=l.gl,c=r.fbo;if(c){t.prepareDrawTile();var h=t.useProgram("hillshade");l.activeTexture.set(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c.colorAttachment.get());var f=function(e,t,n,r){var i=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color"),s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);var l=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:Cn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:a,u_accent:o}}(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,h,n.toUnwrapped());var d=t.getTileBoundsBuffers(r),p=d.tileBoundsBuffer,m=d.tileBoundsIndexBuffer,v=d.tileBoundsSegments;h.draw(l,u.TRIANGLES,a,o,s,e.CullFaceMode.disabled,f,i.id,p,m,v)}}function An(t,n,r){if(n.needsDEMTextureUpload){var i=t.context,a=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);var o=r.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new e.Texture(i,o,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}}function Pn(t,n,r,i,a,o){var s=t.context,l=s.gl;if(n.dem){var u=n.dem;if(s.activeTexture.set(l.TEXTURE1),An(t,n,u),n.demTexture){n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);var c=u.dim;s.activeTexture.set(l.TEXTURE0);var h=n.fbo;if(!h){var f=new e.Texture(s,{width:c,height:c,data:null},l.RGBA);f.bind(l.LINEAR,l.CLAMP_TO_EDGE),(h=n.fbo=s.createFramebuffer(c,c,!0)).colorAttachment.set(f.texture)}s.bindFramebuffer.set(h.framebuffer),s.viewport.set([0,0,c,c]);var d=t.getMercatorTileBoundsBuffers(),p=d.tileBoundsBuffer,m=d.tileBoundsIndexBuffer,v=d.tileBoundsSegments;t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,i,a,o,e.CullFaceMode.disabled,function(t,n){var r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}}(n.tileID,u),r.id,p,m,v),n.needsHillshadePrepare=!1}}}var In=function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}},zn=function(e,t){return{u_matrix:e,u_image0:0,u_skirt_height:t}},Ln=function(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p){return{u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:h,u_viewport:f,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:d}};function Dn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}var Rn=new(function(){function e(){d(this,e),this.operations={}}return p(e,[{key:"newMorphing",value:function(e,t,n,r,i){if(e in this.operations){var a=this.operations[e];a.to.tileID.key!==n.tileID.key&&(a.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}},{key:"getMorphValuesForProxy",value:function(e){if(!(e in this.operations))return null;var t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}},{key:"update",value:function(e){for(var t in this.operations){var n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}},{key:"_nextOp",value:function(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}},{key:"_validOp",value:function(e){return e.from.hasData()&&e.to.hasData()}}]),e}()),On={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function jn(e){return 6*Math.pow(1.5,22-e)}function Nn(e,t){var n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}var Bn=function(e){return{u_matrix:e}};function Fn(t,n,r,i,a){if(a>0){var o=e.exported.now(),s=(o-t.timeAdded)/a,l=n?(o-n.timeAdded)/a:-1,u=r.getSource(),c=i.coveringZoomLevel({tileSize:u.tileSize,roundZoom:u.roundZoom}),h=!n||Math.abs(n.tileID.overscaledZ-c)>Math.abs(t.tileID.overscaledZ-c),f=h&&t.refreshedUponExpiration?1:e.clamp(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-f}:{opacity:f,mix:0}}return{opacity:1,mix:0}}var $n=function(e){m(n,e);var t=v(n);function n(e){var r;d(this,n);var a={type:"raster-dem",maxzoom:e.transform.maxZoom},o=new V(Je(),null),s=Ue("mock-dem",a,o,e.style);return r=t.call(this,"mock-dem",s,!1),s.setEventedParent(i(r)),r._sourceLoaded=!0,r}return p(n,[{key:"_loadTile",value:function(e,t){e.state="loaded",t(null)}}]),n}(e.SourceCache),Vn=function(t){m(r,t);var n=v(r);function r(e){var t;d(this,r);var a=Ue("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new V(Je(),null),e.style);return t=n.call(this,"proxy",a,!1),a.setEventedParent(i(t)),t.map=t.getSource().map=e,t.used=t._sourceLoaded=!0,t.renderCache=[],t.renderCachePool=[],t.proxyCachedFBO={},t}return p(r,[{key:"update",value:function(t,n,r){var i=this;if(!t.freezeTileCoverage){this.transform=t;var a=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((function(n,r){if(n[r.key]="",!i._tiles[r.key]){var a=new e.Tile(r,i._source.tileSize*r.overscaleFactor(),t.tileZoom);a.state="loaded",i._tiles[r.key]=a}return n}),{});for(var o in this._tiles)o in a||(this.freeFBO(o),this._tiles[o].unloadVectorData(),delete this._tiles[o])}}},{key:"freeFBO",value:function(e){var t=this.proxyCachedFBO[e];if(void 0!==t){var n,r=Object.values(t);(n=this.renderCachePool).push.apply(n,r),delete this.proxyCachedFBO[e]}}},{key:"deallocRenderCache",value:function(){this.renderCache.forEach((function(e){return e.fb.destroy()})),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}]),r}(e.SourceCache),Un=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)).proxyTileKey=r,a.projMatrix=i,a}return p(n)}(e.OverscaledTileID),Zn=function(t){m(r,t);var n=v(r);function r(t,i){var a;d(this,r),(a=n.call(this)).painter=t,a.terrainTileForTile={},a.prevTerrainTileForTile={};var o=function(t){var n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);for(var a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a,l=-a;l<s;l+=a)for(var u=-a;u<s;u+=a){var c=u<0||u>o||l<0||l>o?24575:0,h=e.clamp(Math.round(u),0,e.EXTENT),f=e.clamp(Math.round(l),0,e.EXTENT);n.emplaceBack(h+c,f)}for(var d=function(e,t){var n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)},p=1;p<129;p++)for(var m=1;m<129;m++)d(m,p);return[0,129].forEach((function(e){for(var t=0;t<130;t++)d(t,e),d(e,t)})),[n,r,32768]}(),s=h(o,3),l=s[0],u=s[1],c=s[2],f=t.context;a.gridBuffer=f.createVertexBuffer(l,e.posAttributes.members),a.gridIndexBuffer=f.createIndexBuffer(u),a.gridSegments=e.SegmentVector.simpleSegment(0,0,l.length,u.length),a.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,l.length,c),a.proxyCoords=[],a.proxiedCoords={},a._visibleDemTiles=[],a._drapedRenderBatches=[],a._sourceTilesOverlap={},a.proxySourceCache=new Vn(i.map),a.orthoMatrix=e.create(),e.ortho(a.orthoMatrix,"globe"===a.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);var p=f.gl;return a._overlapStencilMode=new e.StencilMode({func:p.GEQUAL,mask:255},0,255,p.KEEP,p.KEEP,p.REPLACE),a._previousZoom=t.transform.zoom,a.pool=[],a._findCoveringTileCache={},a._tilesDirty={},a.style=i,a._useVertexMorphing=!0,a._exaggeration=1,a._mockSourceCache=new $n(i.map),a}return p(r,[{key:"style",set:function(e){var t=this;e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(function(){t._clearLineLayersFromRenderCache()}))}},{key:"update",value:function(t,n,r){var i=this;if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;var a=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(a.get("source")),this._exaggeration=a.get("exaggeration");var o=function(){i.sourceCache.used&&e.warnOnce("Raster DEM source '".concat(i.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));var t=i.getScaledDemTileSize();i.sourceCache.update(n,t,!0),i.resetTileLookupCache(i.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}},{key:"resetTileLookupCache",value:function(e){this._findCoveringTileCache[e]={}}},{key:"getScaledDemTileSize",value:function(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}},{key:"_checkRenderCacheEfficiency",value:function(){var t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce("Terrain render cache efficiency is not optimal (".concat(t.efficiency,"%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '").concat(t.firstUndrapedLayer,"' or create a map using optimizeForTerrain: true option."))}},{key:"_onStyleDataEvent",value:function(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}},{key:"_disable",value:function(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(var e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}},{key:"destroy",value:function(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((function(e){return e.fb.destroy()})),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}},{key:"_source",value:function(){return this.enabled?this.sourceCache:null}},{key:"isUsingMockSource",value:function(){return this.sourceCache===this._mockSourceCache}},{key:"exaggeration",value:function(){return this._exaggeration}},{key:"visibleDemTiles",get:function(){return this._visibleDemTiles}},{key:"drapeBufferSize",get:function(){var e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}},{key:"useVertexMorphing",set:function(e){this._useVertexMorphing=e}},{key:"updateTileBinding",value:function(t){var n=this;if(this.enabled){this.prevTerrainTileForTile=this.terrainTileForTile;var r=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);var a=this.proxyCoords=r.getIds().map((function(e){var t=r.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){var r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.Point(r.x,r.y);t.sort((function(t,n){if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;var r=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=i.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(r)-o.distSqr(a)}))}(a,this.painter),this._previousZoom=i.zoom;var o=this.proxyToSource||{};this.proxyToSource={},a.forEach((function(e){n.proxyToSource[e.key]={}})),this.terrainTileForTile={};var s=this._style._sourceCaches;for(var l in s){var u=s[l];if(u.used&&(u!==this.sourceCache&&this.resetTileLookupCache(u.id),this._setupProxiedCoordsForOrtho(u,t[l],o),!u.usedForTerrain)){var c=t[l];u.getSource().reparseOverscaled&&this._assignTerrainTiles(c)}}this.proxiedCoords[r.id]=a.map((function(e){return new Un(e,e.key,n.orthoMatrix)})),this._assignTerrainTiles(a),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();var h={};this._visibleDemTiles=[];var d,p=f(this.proxyCoords);try{for(p.s();!(d=p.n()).done;){var m=d.value,v=this.terrainTileForTile[m.key];if(v){var g=v.tileID.key;g in h||(this._visibleDemTiles.push(v),h[g]=g)}}}catch(y){p.e(y)}finally{p.f()}}}},{key:"_assignTerrainTiles",value:function(e){var t=this;this._initializing||e.forEach((function(e){if(!t.terrainTileForTile[e.key]){var n=t._findTileCoveringTileID(e,t.sourceCache);n&&(t.terrainTileForTile[e.key]=n)}}))}},{key:"_prepareDEMTextures",value:function(){var e=this.painter.context,t=e.gl;for(var n in this.terrainTileForTile){var r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),An(this.painter,r,i))}}},{key:"_prepareDemTileUniforms",value:function(e,t,n,r){if(!t||null==t.demTexture)return!1;var i=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-i.z),o=r||"";return n["u_dem_tl".concat(o)]=[i.x*a%1,i.y*a%1],n["u_dem_scale".concat(o)]=a,!0}},{key:"emptyDEMTexture",get:function(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}},{key:"emptyDepthBufferTexture",get:function(){var t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){var r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}},{key:"_getLoadedAreaMinimum",value:function(){var e=0,t=this._visibleDemTiles.reduce((function(t,n){if(!n.dem)return t;var r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}},{key:"_updateEmptyDEMTexture",value:function(){var t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);var r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;var a=this._emptyDEMTexture;return a?a.update(i,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),a}},{key:"setupElevationDraw",value:function(t,n,r){var i,a=this.painter.context,o=a.gl,s=(i=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(i),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});s.u_dem_size=this.sourceCache.getSource().tileSize,s.u_exaggeration=this.exaggeration();var l=null,u=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){var h=r.morphing.srcDemTile,f=r.morphing.dstDemTile;c=r.morphing.phase,h&&f&&(this._prepareDemTileUniforms(t,h,s,"_prev")&&(u=h),this._prepareDemTileUniforms(t,f,s)&&(l=f))}if(u&&l?(a.activeTexture.set(o.TEXTURE2),l.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.activeTexture.set(o.TEXTURE4),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),s.u_dem_lerp=c):(l=this.terrainTileForTile[t.tileID.key],a.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,l,s)?l.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),a.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(s.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&l){var d=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;s.u_meter_to_dem=d}if(r&&r.labelPlaneMatrixInv&&(s.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(a,s),"globe"===this.painter.transform.projection.name){var p=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(a,p)}}},{key:"globeUniformValues",value:function(t,n,r){var i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}},{key:"renderToBackBuffer",value:function(t){var n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,a){if("globe"===t.transform.projection.name)!function(t,n,r,i,a){var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,d=t.transform,p=e.globeUseCustomAntiAliasing(t,l,d),m=function(e,n){if(s!==e){var r=[On[e],"PROJECTION_GLOBE_VIEW"];p&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(On[c]),o=t.useProgram("globeRaster",null,r),s=e}},v=t.colorModeForRenderPass(),g=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Rn.update(a);var y=e.calculateGlobeMercatorMatrix(d),_=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],x=c?[!1,!0]:[!1],b=t.globeSharedBuffers,w=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],k=Float32Array.from(d.globeMatrix),E={useDenormalizedUpVectorScale:!0};if(x.forEach((function(c){var d=t.transform,p=jn(d.zoom)*n.exaggeration();s=-1;var x,S=c?u.LINES:u.TRIANGLES,T=f(i);try{for(T.s();!(x=T.n()).done;){var C=x.value,M=r.getTile(C),A=e.StencilMode.disabled,P=n.prevTerrainTileForTile[C.key],I=n.terrainTileForTile[C.key];Dn(P,I)&&Rn.newMorphing(C.key,P,I,a,250),l.activeTexture.set(u.TEXTURE0),M.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var z=Rn.getMorphValuesForProxy(C.key),L=z?1:0;z&&e.extend$1(E,{morphing:{srcDemTile:z.from,dstDemTile:z.to,phase:e.easeCubicInOut(z.phase)}});var D=e.tileCornersToBounds(C.canonical),R=e.getLatitudinalLod(D.getCenter().lat),O=e.getGridMatrix(C.canonical,D,R,d.worldSize/d._pixelsPerMercatorPixel),j=e.globeNormalizeECEF(e.globeTileBounds(C.canonical)),N=Ln(d.projMatrix,k,y,j,e.globeToMercatorTransition(d.zoom),_,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,w,p,O);if(m(L,c),n.setupElevationDraw(M,o,E),t.prepareDrawProgram(l,o,C.toUnwrapped()),b){var B=c?b.getWirefameBuffers(t.context,R):b.getGridBuffers(R,0!==p),F=h(B,3),$=F[0],V=F[1],U=F[2];o.draw(l,S,g,A,v,e.CullFaceMode.backCCW,N,"globe_raster",$,V,U)}}}catch(Z){T.e(Z)}finally{T.f()}})),b){var S=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&S.push("CUSTOM_ANTIALIASING"),o=t.useProgram("globeRaster",null,S);var T,C=f(i);try{var M=function(){var i=T.value,a=i.canonical,s=a.x,c=a.y,f=a.z,p=0===c,m=c===(1<<f)-1,y=b.getPoleBuffers(f),x=h(y,4),k=x[0],S=x[1],C=x[2],M=x[3];if(M&&(p||m)){var A=r.getTile(i);l.activeTexture.set(u.TEXTURE0),A.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE);var P=e.globePoleMatrixForTile(f,s,d),I=e.globeNormalizeECEF(e.globeTileBounds(i.canonical)),z=function(t,n){return t.draw(l,u.TRIANGLES,g,e.StencilMode.disabled,v,e.CullFaceMode.disabled,Ln(d.projMatrix,P,P,I,0,_,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,w,0),"globe_pole_raster",n,C,M)};n.setupElevationDraw(A,o,E),t.prepareDrawProgram(l,o,i.toUnwrapped()),p&&z(o,k),m&&(P=e.scale(e.create(),P,[1,-1,1]),z(o,S))}};for(C.s();!(T=C.n()).done;)M()}catch(A){C.e(A)}finally{C.f()}}}(t,n,r,i,a);else{var o,s,l=t.context,u=l.gl,c=t.options.showTerrainWireframe?2:0,d=function(e,n){if(s!==e){var r=[On[e]];n&&r.push(On[c]),o=t.useProgram("terrainRaster",null,r),s=e}},p=t.colorModeForRenderPass(),m=new e.DepthMode(u.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);Rn.update(a);var v=t.transform,g=jn(v.zoom)*n.exaggeration();(c?[!1,!0]:[!1]).forEach((function(c){s=-1;var y,_=c?u.LINES:u.TRIANGLES,x=c?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments],b=h(x,2),w=b[0],k=b[1],E=f(i);try{for(E.s();!(y=E.n()).done;){var S=y.value,T=r.getTile(S),C=e.StencilMode.disabled,M=n.prevTerrainTileForTile[S.key],A=n.terrainTileForTile[S.key];Dn(M,A)&&Rn.newMorphing(S.key,M,A,a,250),l.activeTexture.set(u.TEXTURE0),T.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE,u.LINEAR_MIPMAP_NEAREST);var P=Rn.getMorphValuesForProxy(S.key),I=P?1:0,z=void 0;P&&(z={morphing:{srcDemTile:P.from,dstDemTile:P.to,phase:e.easeCubicInOut(P.phase)}});var L=zn(S.projMatrix,Nn(S.canonical,v.renderWorldCopies)?g/10:g);d(I,c),n.setupElevationDraw(T,o,z),t.prepareDrawProgram(l,o,S.toUnwrapped()),o.draw(l,_,m,C,p,e.CullFaceMode.backCCW,L,"terrain_raster",n.gridBuffer,w,k)}}catch(D){E.e(D)}finally{E.f()}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}},{key:"renderBatch",value:function(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;var n,r=this.painter,i=this.painter.context,a=this.proxySourceCache,o=this.proxiedCoords[a.id],s=this._drapedRenderBatches.shift(),l=[],u=r.style.order,c=0,h=f(o);try{for(h.s();!(n=h.n()).done;){var d=n.value,p=a.getTileByID(d.proxyTileKey),m=a.proxyCachedFBO[d.key]?a.proxyCachedFBO[d.key][t]:void 0,v=void 0!==m?a.renderCache[m]:this.pool[c++],g=void 0!==m;if(p.texture=v.tex,!g||v.dirty){var y=void 0;i.bindFramebuffer.set(v.fb.framebuffer),this.renderedToTile=!1,v.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),v.dirty=!1);for(var _=s.start;_<=s.end;++_){var x=r.style._layers[u[_]];if(!x.isHidden(r.transform.zoom)){var b=r.style._getLayerSourceCache(x),w=b?this.proxyToSource[d.key][b.id]:[d];if(w){var k=w;i.viewport.set([0,0,v.fb.width,v.fb.height]),y!==(b?b.id:null)&&(this._setupStencil(v,w,x,b),y=b?b.id:null),r.renderLayer(r,b,x,k)}}}this.renderedToTile?(v.dirty=!0,l.push(p.tileID)):g||--c,5===c&&(c=0,this.renderToBackBuffer(l))}else l.push(p.tileID)}}catch(E){h.e(E)}finally{h.f()}return this.renderToBackBuffer(l),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,r.width,r.height]),s.end+1}},{key:"postRender",value:function(){}},{key:"renderCacheEfficiency",value:function(e){var t=e.order.length;if(0===t)return{efficiency:100};for(var n,r=0,i=0,a=!1,o=0;o<t;++o){var s=e._layers[e.order[o]];this._style.isLayerDraped(s)?(a&&++r,++i):a||(a=!0,n=s.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}},{key:"getMinElevationBelowMSL",value:function(){var e=0;return this._visibleDemTiles.filter((function(e){return e.dem})).forEach((function(t){e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}},{key:"raycast",value:function(e,t,n){if(!this._visibleDemTiles)return null;var r=this._visibleDemTiles.filter((function(e){return e.dem})).map((function(r){var i=r.tileID,a=1<<i.overscaledZ,o=i.canonical,s=o.x,l=o.y,u=s/a,c=(s+1)/a,h=l/a,f=(l+1)/a;return{minx:u,miny:h,maxx:c,maxy:f,t:r.dem.tree.raycastRoot(u,h,c,f,e,t,n),tile:r}}));r.sort((function(e,t){return(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)}));var i,a=f(r);try{for(a.s();!(i=a.n()).done;){var o=i.value;if(null==o.t)return null;var s=o.tile.dem.tree.raycast(o.minx,o.miny,o.maxx,o.maxy,e,t,n);if(null!=s)return s}}catch(l){a.e(l)}finally{a.f()}return null}},{key:"_createFBO",value:function(){var t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);var i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);var a=t.createFramebuffer(r[0],r[1],!1);return a.colorAttachment.set(i.texture),a.depthAttachment=new Re(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:i,dirty:!1}}},{key:"_initFBOPool",value:function(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}},{key:"_shouldDisableRenderCache",value:function(){var e=this;if(this._style.light&&this._style.light.hasTransition())return!0;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t].hasTransition())return!0;return this._style.order.some((function(t){var n=e._style._layers[t],r=n.isHidden(e.painter.transform.zoom);return"custom"===n.type?!r&&n.shouldRedrape():!r&&n.hasTransition()}))}},{key:"_clearLineLayersFromRenderCache",value:function(){var t,n=!1,r=f(this._style._getSources());try{for(r.s();!(t=r.n()).done;)if(t.value instanceof Ne){n=!0;break}}catch(v){r.e(v)}finally{r.f()}if(n)for(var i={},a=0;a<this._style.order.length;++a){var o=this._style._layers[this._style.order[a]],s=this._style._getLayerSourceCache(o);if(s&&!i[s.id]&&!o.isHidden(this.painter.transform.zoom)&&"line"===o.type&&o.widthExpression()instanceof e.ZoomDependentExpression){i[s.id]=!0;var l,u=f(this.proxyCoords);try{for(u.s();!(l=u.n()).done;){var c=l.value,h=this.proxyToSource[c.key][s.id];if(h){var d,p=f(h);try{for(p.s();!(d=p.n()).done;){var m=d.value;this._clearRenderCacheForTile(s.id,m)}}catch(v){p.e(v)}finally{p.f()}}}}catch(v){u.e(v)}finally{u.f()}}}}},{key:"_clearRasterLayersFromRenderCache",value:function(){var e=!1;for(var t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Be){e=!0;break}if(e)for(var n={},r=0;r<this._style.order.length;++r){var i=this._style._layers[this._style.order[r]],a=this._style._getLayerSourceCache(i);if(a&&!n[a.id]&&!i.isHidden(this.painter.transform.zoom)&&"raster"===i.type){var o,s=i.paint.get("raster-fade-duration"),l=f(this.proxyCoords);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=this.proxyToSource[u.key][a.id];if(c){var h,d=f(c);try{for(d.s();!(h=d.n()).done;){var p=h.value,m=Fn(a.getTile(p),a.findLoadedParent(p,0),a,this.painter.transform,s);(1!==m.opacity||0!==m.mix)&&this._clearRenderCacheForTile(a.id,p)}}catch(v){d.e(v)}finally{d.f()}}}}catch(v){l.e(v)}finally{l.f()}}}}},{key:"_setupDrapedRenderBatches",value:function(){var e=this._style.order,t=e.length;if(0!==t){for(var n,r=[],i=0,a=this._style._layers[e[i]];!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++i<t;)a=this._style._layers[e[i]];for(;i<t;++i){var o=this._style._layers[e[i]];o.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(o)?void 0===n&&(n=i):void 0!==n&&(r.push({start:n,end:i-1}),n=void 0))}void 0!==n&&r.push({start:n,end:i-1}),this._drapedRenderBatches=r}}},{key:"_setupRenderCache",value:function(e){var t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){var n=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(var r=0;r<n.length;++r){var i,a=Object.values(n[r]);(i=t.renderCachePool).push.apply(i,a)}}}else{this._clearRasterLayersFromRenderCache();for(var o=this.proxyCoords,s=this._tilesDirty,l=o.length-1;l>=0;l--){var u=o[l];if(t.getTileByID(u.key),void 0!==t.proxyCachedFBO[u.key]){var h=e[u.key],d=this.proxyToSource[u.key],p=0,m=function(e){var t=d[e],n=h[e];if(!n||n.length!==t.length||t.some((function(t,r){return t!==n[r]||s[e]&&s[e].hasOwnProperty(t.key)})))return p=-1,"break";++p};for(var v in d)if("break"===m(v))break;for(var g in t.proxyCachedFBO[u.key])t.renderCache[t.proxyCachedFBO[u.key][g]].dirty=p<0||p!==Object.values(h).length}}var y=c(this._drapedRenderBatches);y.sort((function(e,t){return t.end-t.start-(e.end-e.start)}));var _,x=f(y);try{for(x.s();!(_=x.n()).done;){var b,w=_.value,k=f(o);try{for(k.s();!(b=k.n()).done;){var E=b.value;if(!t.proxyCachedFBO[E.key]){var S=t.renderCachePool.pop();void 0===S&&t.renderCache.length<50&&(S=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==S&&(t.proxyCachedFBO[E.key]={},t.proxyCachedFBO[E.key][w.start]=S,t.renderCache[S].dirty=!0)}}}catch(T){k.e(T)}finally{k.f()}}}catch(T){x.e(T)}finally{x.f()}this._tilesDirty={}}}},{key:"_setupStencil",value:function(e,t,n,r){if(r&&this._sourceTilesOverlap[r.id]){var i=this.painter.context,a=i.gl;if(t.length<=1)this._overlapStencilType=!1;else{var o;if(n.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}}else this._overlapStencilType&&(this._overlapStencilType=!1)}},{key:"clipOrMaskOverlapStencilType",value:function(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}},{key:"stencilModeForRTTOverlap",value:function(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}},{key:"_renderTileClippingMasks",value:function(t,n){var r=this.painter,i=this.painter.context,a=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);var o,s=r.useProgram("clippingMask"),l=f(t);try{for(l.s();!(o=l.n()).done;){var u=o.value,c=r._tileClippingMaskIDs[u.key]=--n;s.draw(i,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},c,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Bn(u.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}catch(h){l.e(h)}finally{l.f()}}},{key:"pointCoordinate",value:function(t){var n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;var r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;var i=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),o=[i[0],i[1],i[2]/a,0],s=e.subtract([],r.slice(0,3),o);e.normalize(s,s);var l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}},{key:"drawDepth",value:function(){var t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){var o=n.gl,s=n.createFramebuffer(i,a,!0);n.activeTexture.set(o.TEXTURE0);var l=new e.Texture(n,{width:i,height:a,data:null},o.RGBA);l.bind(o.NEAREST,o.CLAMP_TO_EDGE),s.colorAttachment.set(l.texture);var u=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,a);s.depthAttachment.set(u),this._depthFBO=s,this._depthTexture=l}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,a]),function(t,n,r,i){if("globe"!==t.transform.projection.name){var a=t.context,o=a.gl;a.clear({depth:1});var s,l=t.useProgram("terrainDepth"),u=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D),c=f(i);try{for(c.s();!(s=c.n()).done;){var h=s.value,d=r.getTile(h),p=zn(h.projMatrix,0);n.setupElevationDraw(d,l),l.draw(a,o.TRIANGLES,u,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,p,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}catch(m){c.e(m)}finally{c.f()}}}(t,this,r,this.proxyCoords)}},{key:"_setupProxiedCoordsForOrtho",value:function(e,t,n){if(e.getSource()instanceof $e)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};for(var r=this.proxiedCoords[e.id]=[],i=this.proxyCoords,a=0;a<i.length;a++){var o=i[a],s=this._findTileCoveringTileID(o,e);if(s){var l=this._createProxiedId(o,s,n[o.key]&&n[o.key][e.id]);r.push(l),this.proxyToSource[o.key][e.id]=[l]}}for(var u=!1,c=0;c<t.length;c++){var h=e.getTile(t[c]);if(h&&h.hasData()){var f=this._findTileCoveringTileID(h.tileID,this.proxySourceCache);if(f&&f.tileID.canonical.z!==h.tileID.canonical.z){var d=this.proxyToSource[f.tileID.key][e.id],p=this._createProxiedId(f.tileID,h,n[f.tileID.key]&&n[f.tileID.key][e.id]);d?d.splice(d.length-1,0,p):this.proxyToSource[f.tileID.key][e.id]=[p],r.push(p),u=!0}}}this._sourceTilesOverlap[e.id]=u}},{key:"_setupProxiedCoordsForImageSource",value:function(t,n,r){if(t.getSource().loaded())for(var i=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.Point(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((function(e,t){return e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e}),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=function(t,n){var r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+a<o+l.min.x||r>o+l.max.x||i+a<s+l.min.y||i>s+l.max.y},c=0;c<a.length;c++)for(var h=a[c],f=0;f<n.length;f++){var d=t.getTile(n[f]);if(d&&d.hasData()&&!u(h,d.tileID)){var p=this._createProxiedId(h,d,r[h.key]&&r[h.key][t.id]),m=this.proxyToSource[h.key][t.id];m?m.push(p):this.proxyToSource[h.key][t.id]=[p],i.push(p)}}}},{key:"_createProxiedId",value:function(t,n,r){var i=this.orthoMatrix;if(r){var a=r.find((function(e){return e.key===n.tileID.key}));if(a)return a}if(n.tileID.key!==t.key){var o,s,l,u=t.canonical.z-n.tileID.canonical.z;i=e.create();var c=n.tileID.wrap-t.wrap<<t.overscaledZ;u>0?(s=(o=e.EXTENT>>u)*((n.tileID.canonical.x<<u)-t.canonical.x+c),l=o*((n.tileID.canonical.y<<u)-t.canonical.y)):(o=e.EXTENT<<-u,s=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+c<<-u)),l=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-u))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[s,l,0])}return new Un(n.tileID,t.key,i)}},{key:"_findTileCoveringTileID",value:function(t,n){var r=n.getTile(t);if(r&&r.hasData())return r;var i=this._findCoveringTileCache[n.id],a=i[t.key];if((r=a?n.getTileByID(a):null)&&r.hasData()||null===a)return r;var o=r?r.tileID:t,s=o.overscaledZ,l=n.getSource().minzoom,u=[];if(!a){var c=n.getSource().maxzoom;if(t.canonical.z>=c){var h=t.canonical.z-c;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h)):0!==h&&(s=c,o=new e.OverscaledTileID(s,t.wrap,c,t.canonical.x>>h,t.canonical.y>>h))}o.key!==t.key&&(u.push(o.key),r=n.getTile(o))}var f=function(e){u.forEach((function(t){i[t]=e})),u.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&f(r.tileID.key);var d=o.calculateScaledKey(s);if((r=n.getTileByID(d))&&r.hasData())break;var p=i[d];if(null===p)break;void 0===p?u.push(d):r=n.getTileByID(p)}return f(r?r.tileID.key:null),r&&r.hasData()?r:null}},{key:"findDEMTileFor",value:function(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}},{key:"prepareDrawTile",value:function(){this.renderedToTile=!0}},{key:"_clearRenderCacheForTile",value:function(e,t){var n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}},{key:"getWirefameBuffer",value:function(){if(!this.wireframeSegments){var t=function(t){for(var n=0,r=new e.StructArrayLayout2ui4,i=131,a=1;a<129;a++){for(var o=1;o<129;o++)n=a*i+o,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===a&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}]),r}(e.Elevation),Hn=function(){function t(n,r,i,a,o,s){d(this,t);var l=n.gl;this.program=l.createProgram();var u=function(e){for(var t=[],n=0;n<e.length;n++)if(null!==e[n]){var r=e[n].split(" ");t.push(r.pop())}return t}(i.staticAttributes),c=a?a.getBinderAttributes():[],h=u.concat(c),f=a?a.defines():[];f=f.concat(s.map((function(e){return"#define ".concat(e)})));var p=n.isWebGL2?"#version 300 es\n":"",m=p+f.concat(n.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(wn):wn,wn,bn,xn.fragmentSource,yn.fragmentSource,i.fragmentSource).join("\n"),v=p+f.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",bn,xn.vertexSource,yn.vertexSource,gn.vertexSource,i.vertexSource).join("\n"),g=l.createShader(l.FRAGMENT_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(g,m),l.compileShader(g),l.attachShader(this.program,g);var y=l.createShader(l.VERTEX_SHADER);if(l.isContextLost())this.failedToCreate=!0;else{l.shaderSource(y,v),l.compileShader(y),l.attachShader(this.program,y),this.attributes={},this.numAttributes=h.length;for(var _=0;_<this.numAttributes;_++)h[_]&&(l.bindAttribLocation(this.program,_,h[_]),this.attributes[h[_]]=_);l.linkProgram(this.program),l.deleteShader(y),l.deleteShader(g),this.fixedUniforms=o(n),this.binderUniforms=a?a.getUniforms(n):[],s.includes("TERRAIN")&&(this.terrainUniforms=function(t){return{u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}}(n)),s.includes("GLOBE")&&(this.globeUniforms=function(t){return{u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}}(n)),s.includes("FOG")&&(this.fogUniforms=function(t){return{u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}}(n))}}}return p(t,[{key:"setTerrainUniformValues",value:function(e,t){if(this.terrainUniforms){var n=this.terrainUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setGlobeUniformValues",value:function(e,t){if(this.globeUniforms){var n=this.globeUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r]&&n[r].set(this.program,r,t[r])}}},{key:"setFogUniformValues",value:function(e,t){if(this.fogUniforms){var n=this.fogUniforms;if(!this.failedToCreate)for(var r in e.program.set(this.program),t)n[r].set(this.program,r,t[r])}}},{key:"draw",value:function(e,t,n,i,a,o,s,l,u,c,h,d,p,m,v){var g,y=e.gl;if(!this.failedToCreate){e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(a),e.setCullFace(o);for(var _=0,x=Object.keys(this.fixedUniforms);_<x.length;_++){var b=x[_];this.fixedUniforms[b].set(this.program,b,s[b])}m&&m.setUniforms(this.program,e,this.binderUniforms,d,{zoom:p});var w,k=(g={},r(g,y.LINES,2),r(g,y.TRIANGLES,3),r(g,y.LINE_STRIP,1),g)[t],E=f(h.get());try{for(E.s();!(w=E.n()).done;){var S=w.value,T=S.vaos||(S.vaos={});(T[l]||(T[l]=new Tn)).bind(e,this,u,m?m.getPaintVertexBuffers():[],c,S.vertexOffset,v||[]),y.drawElements(t,S.primitiveLength*k,y.UNSIGNED_SHORT,S.primitiveOffset*k*2)}}catch(C){E.e(C)}finally{E.f()}}}}],[{key:"cacheKey",value:function(e,t,n,r){var i,a="".concat(t).concat(r?r.cacheKey:""),o=f(n);try{for(o.s();!(i=o.n()).done;){var s=i.value;e.usedDefines.includes(s)&&(a+="/".concat(s))}}catch(l){o.e(l)}finally{o.f()}return a}}]),t}();function Wn(e,t){var n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),a=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/U(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,a>>16],u_pixel_coord_lower:[65535&i,65535&a]}}var qn=e.create(),Gn=function(t,n,r,i,a,o,s,l,u,c,h){var f=n.style.light,d=f.properties.get("position"),p=[d.x,d.y,d.z],m=e.create$1();"viewport"===f.properties.get("anchor")&&(e.fromRotation(m,-n.transform.angle),e.transformMat3(p,p,m));var v=f.properties.get("color"),g=n.transform,y={u_matrix:t,u_lightpos:p,u_lightintensity:f.properties.get("intensity"),u_lightcolor:[v.r,v.g,v.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:qn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===g.projection.name&&(y.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],y.u_zoom_transition=u,y.u_inv_rot_matrix=h,y.u_merc_center=c,y.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),c[0]*e.EXTENT,c[1]*e.EXTENT),y.u_height_lift=l),y},Xn=function(t,n,r,i,a,o,s,l,u,c,h,f){var d=Gn(t,n,r,i,a,o,s,u,c,h,f),p={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(d,Wn(n,l),p)},Kn=function(e){return{u_matrix:e}},Yn=function(t,n,r){return e.extend(Kn(t),Wn(n,r))},Jn=function(e,t){return{u_matrix:e,u_world:t}},Qn=function(t,n,r,i){return e.extend(Yn(t,n,r),{u_world:i})},er=e.create(),tr=function(t,n,r,i,a,o){var s,l=t.transform,u="globe"===l.projection.name;if("map"===o.paint.get("circle-pitch-alignment"))if(u){var c=e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel;s=Float32Array.from([c,0,0,c])}else s=l.calculatePixelsToTileUnitsMatrix(r);else s=new Float32Array([l.pixelsToGLUnits[0],0,0,l.pixelsToGLUnits[1]]);var h={u_camera_to_center_distance:l.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:s,u_inv_rot_matrix:er,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var f=a[0]*e.EXTENT,d=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),f,d)}return h},nr=function(e){var t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},rr=function(t,n,r,i){var a=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/a,n.pixelsToGLUnits[1]/a]}},ir=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},ar=e.create(),or=function(t,n,r,i,a,o,s){var l=t.transform,u="globe"===l.projection.name,c=u?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:U(r,1,o),h={u_matrix:n.projMatrix,u_extrude_scale:c,u_intensity:s,u_inv_rot_matrix:ar,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){h.u_inv_rot_matrix=i,h.u_merc_center=a,h.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],h.u_zoom_transition=e.globeToMercatorTransition(l.zoom);var f=a[0]*e.EXTENT,d=a[1]*e.EXTENT;h.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),f,d)}return h},sr=function(e,t,n,r,i,a,o){var s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:cr(e,t,n,r),u_pixels_to_tile_units:l,u_device_pixel_ratio:a,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:hr(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:ur(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},lr=function(e,t,n,r,i){var a=e.transform;return{u_matrix:cr(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:ur(t,a),u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function ur(e,t){return 1/U(e,1,t.tileZoom)}function cr(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function hr(e){var t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}var fr=function(e,t,n,r,i,a){return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=i.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:dr(i.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function dr(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}var pr,mr=e.create(),vr=function(t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v){var g=a.transform,y={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:g.width/g.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_pitch_with_map:+i,u_texsize:c,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:mr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:mr,u_up_vector:[0,-1,0]};return"globe"===v.name&&(y.u_tile_id=[h.canonical.x,h.canonical.y,1<<h.canonical.z],y.u_zoom_transition=f,y.u_inv_rot_matrix=p,y.u_merc_center=d,y.u_camera_forward=g._camera.forward(),y.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,h.toUnwrapped()),y.u_tile_matrix=Float32Array.from(g.globeMatrix),y.u_up_vector=m),y},gr=function(t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g){return e.extend(vr(t,n,r,i,a,o,s,l,u,c,f,d,p,m,v,g),{u_gamma_scale:i?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+h})},yr=function(t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v){return e.extend(gr(t,n,r,i,a,o,s,l,!0,u,!0,h,f,d,p,m,v),{u_texsize_icon:c,u_texture_icon:1})},_r=function(e,t,n){return{u_matrix:e,u_opacity:t,u_color:n}},xr=function(t,n,r,i,a){return e.extend(function(e,t,n){var r=t.imageManager.getPattern(e.toString()),i=t.imageManager.getPixelSize(),a=i.width,o=i.height,s=Math.pow(2,n.tileID.overscaledZ),l=n.tileSize*Math.pow(2,t.transform.tileZoom)/s,u=l*(n.tileID.canonical.x+n.tileID.wrap*s),c=l*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[a,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/U(n,1,t.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(i,r,a),{u_matrix:t,u_opacity:n})},br={fillExtrusion:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}},fillExtrusionPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}},fill:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},fillPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},fillOutline:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}},fillOutlinePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},circle:function(t){return{u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},collisionBox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}},collisionCircle:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}},debug:function(t){return{u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}},clippingMask:function(t){return{u_matrix:new e.UniformMatrix4f(t)}},heatmap:function(t){return{u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}},heatmapTexture:function(t){return{u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}},hillshade:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}},hillshadePrepare:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}},line:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}},linePattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}},raster:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}},symbolIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}},symbolSDF:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}},symbolTextAndIcon:function(t){return{u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}},background:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}},backgroundPattern:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}},terrainRaster:In,terrainDepth:In,skybox:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxGradient:function(t){return{u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}},skyboxCapture:function(t){return{u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}},globeRaster:function(t){return{u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}},globeAtmosphere:function(t){return{u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)}}};function wr(t,n,r,i,a,o,s){for(var l=t.context,u=l.gl,c=t.transform,h=t.useProgram("collisionBox"),f=[],d=0,p=0,m=0;m<i.length;m++){var v=i[m],g=n.getTile(v),y=g.getBucket(r);if(y){var _=It(v,y,c),x=_;0===a[0]&&0===a[1]||(x=t.translatePosMatrix(_,g,a,o));var b=s?y.textCollisionBox:y.iconCollisionBox,w=y.collisionCircleArray;if(w.length>0){var k=e.create(),E=x;e.mul(k,y.placementInvProjMatrix,c.glCoordMatrix),e.mul(k,k,y.placementViewportMatrix),f.push({circleArray:w,circleOffset:p,transform:E,invTransform:k,projection:y.getProjection()}),p=d+=w.length/4}b&&(t.terrain&&t.terrain.setupElevationDraw(g,h),h.draw(l,u.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,rr(x,c,g,y.getProjection()),r.id,b.layoutVertexBuffer,b.indexBuffer,b.segments,null,c.zoom,null,[b.collisionVertexBuffer,b.collisionVertexBufferExt]))}}if(s&&f.length){var S=t.useProgram("collisionCircle"),T=new e.StructArrayLayout2f1f2i16;T.resize(4*d),T._trim();for(var C=0,M=0,A=f;M<A.length;M++)for(var P=A[M],I=0;I<P.circleArray.length/4;I++){var z=4*I,L=P.circleArray[z+0],D=P.circleArray[z+1],R=P.circleArray[z+2],O=P.circleArray[z+3];T.emplace(C++,L,D,R,O,0),T.emplace(C++,L,D,R,O,1),T.emplace(C++,L,D,R,O,2),T.emplace(C++,L,D,R,O,3)}(!pr||pr.length<2*d)&&(pr=function(t){var n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(var i=0;i<n;i++){var a=6*i;r.uint16[a+0]=4*i+0,r.uint16[a+1]=4*i+1,r.uint16[a+2]=4*i+2,r.uint16[a+3]=4*i+2,r.uint16[a+4]=4*i+3,r.uint16[a+5]=4*i+0}return r}(d));for(var j,N=l.createIndexBuffer(pr,!0),B=l.createVertexBuffer(T,e.collisionCircleLayout.members,!0),F=0,$=f;F<$.length;F++){var V=$[F],U={u_matrix:V.transform,u_inv_matrix:V.invTransform,u_camera_to_center_distance:(j=c).getCameraToCenterDistance(V.projection),u_viewport_size:[j.width,j.height]};S.draw(l,u.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,U,r.id,B,N,e.SegmentVector.simpleSegment(0,2*V.circleOffset,V.circleArray.length,V.circleArray.length/2),null,c.zoom)}B.destroy(),N.destroy()}}var kr=e.create();function Er(t,n){var r=t.width,i=t.height,a=t.anchor,o=t.textOffset,s=t.textScale,l=e.getAnchorAlignment(a),u=-(l.horizontalAlign-.5)*r,c=-(l.verticalAlign-.5)*i,h=e.evaluateVariableOffset(a,o);return new e.Point((u/s+h[0])*n,(c/s+h[1])*n)}function Sr(t,n,r,i,a,o,s,l,u,c,f){var d=t.text.placedSymbolArray,p=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,v={},g=t.getProjection(),y=zt(l,g,o),_=o.elevation,x=g.upVectorScale(l.canonical,o.center.lat,o.worldSize).metersToTile;p.clear();for(var b=0;b<d.length;b++){var w=d.get(b),k=w.tileAnchorX,E=w.tileAnchorY,S=w.numGlyphs,T=w.hidden||!w.crossTileID||t.allowVerticalPlacement&&!w.placedOrientation?null:i[w.crossTileID];if(T){var C,M,A,P=0,I=0,z=0;if(_){var L=_?_.getAtTileOffset(l,k,E):0,D=g.upVector(l.canonical,k,E),R=h(D,3);P=L*R[0]*x,I=L*R[1]*x,z=L*R[2]*x}var O=vt(w.projectedAnchorX+P,w.projectedAnchorY+I,w.projectedAnchorZ+z,r?y:s),j=h(O,4),N=j[0],B=j[1],F=j[2],$=j[3],V=gt(o.getCameraToCenterDistance(g),$),U=a.evaluateSizeForFeature(t.textSizeData,c,w)*V/e.ONE_EM;r&&(U*=t.tilePixelRatio/u);var Z=Er(T,U);r?(M=vt((N=(C=g.projectTilePoint(k+Z.x,E+Z.y,l.canonical)).x)+P,(B=C.y)+I,(F=C.z)+z,s),N=(A=h(M,3))[0],B=A[1],F=A[2]):(n&&Z._rotate(-o.angle),N+=Z.x,B+=Z.y,F=0);for(var H=t.allowVerticalPlacement&&w.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,W=0;W<S;W++)e.addDynamicAttributes(p,N,B,F,H);f&&w.associatedIconIndex>=0&&(v[w.associatedIconIndex]={x:N,y:B,z:F,angle:H})}else Tt(S,p)}if(f){m.clear();for(var q=t.icon.placedSymbolArray,G=0;G<q.length;G++){var X=q.get(G),K=X.numGlyphs,Y=v[G];if(X.hidden||!Y)Tt(K,m);else for(var J=Y.x,Q=Y.y,ee=Y.z,te=Y.angle,ne=0;ne<K;ne++)e.addDynamicAttributes(m,J,Q,ee,te)}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(p)}function Tr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function Cr(t,n,r,i,a,o,s,l,u,c,h,d){var p=t.context,m=p.gl,v=t.transform,g="map"===l,y="map"===u,_=g&&"point"!==r.layout.get("symbol-placement"),x=g&&!y&&!_,b=void 0!==r.layout.get("symbol-sort-key").constantOr(1),w=!1,k=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),E=[e.mercatorXfromLng(v.center.lng),e.mercatorYfromLat(v.center.lat)],S=r.layout.get("text-variable-anchor"),T="globe"===v.projection.name,C=[],M=[0,-1,0],A=M;!T&&!v.mercatorFromTransition||g||(A=function(t){var n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);var i=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,r),i[0]=a[0],i[1]=a[1],i[2]=a[2],e.normalize(i,i),i}(v));var P,I=f(i);try{for(I.s();!(P=I.n()).done;){var z=P.value,L=n.getTile(z),D=L.getBucket(r);if(D&&("mercator"!==D.projection.name||!T)){var R=a?D.text:D.icon;if(R&&!D.fullyClipped&&R.segments.get().length){var O=R.programConfigurations.get(r.id),j=a||D.sdfIcons,N=a?D.textSizeData:D.iconSizeData,B=y||0!==v.pitch,F=e.evaluateSizeForZoom(N,v.zoom),$=void 0,V=void 0,U=void 0,Z=void 0,H=[0,0],W=null;if(a)V=L.glyphAtlasTexture,U=m.LINEAR,$=L.glyphAtlasTexture.size,D.iconsInText&&(H=L.imageAtlasTexture.size,W=L.imageAtlasTexture,Z=B||t.options.rotating||t.options.zooming||"composite"===N.kind||"camera"===N.kind?m.LINEAR:m.NEAREST);else{var q=1!==r.layout.get("icon-size").constantOr(0)||D.iconsNeedLinear;V=L.imageAtlasTexture,U=j||t.options.rotating||t.options.zooming||q||B?m.LINEAR:m.NEAREST,$=L.imageAtlasTexture.size}var G="globe"===D.projection.name,X=G?A:M,K=G?e.globeToMercatorTransition(v.zoom):0,Y=zt(z,D.getProjection(),v),J=v.calculatePixelsToTileUnitsMatrix(L),Q=dt(Y,L.tileID.canonical,y,g,v,D.getProjection(),J),ee=t.terrain&&y&&_?e.invert(e.create(),Q):kr,te=mt(Y,L.tileID.canonical,y,g,v,D.getProjection(),J),ne=S&&D.hasTextData(),re="none"!==r.layout.get("icon-text-fit")&&ne&&D.hasIconData();if(_){var ie=v.elevation,ae=ie?ie.getAtTileOffsetFunc(z,v.center.lat,v.worldSize,D.getProjection()):null,oe=pt(Y,L.tileID.canonical,y,g,v,D.getProjection(),J);_t(D,Y,t,a,oe,te,y,c,ae,z)}var se=_||a&&S||re,le=t.translatePosMatrix(Y,L,o,s),ue=se?kr:Q,ce=t.translatePosMatrix(te,L,o,s,!0),he=D.getProjection().createInversionMatrix(v,z.canonical),fe=[];t.terrainRenderModeElevated()&&y&&fe.push("PITCH_WITH_MAP_TERRAIN"),G&&fe.push("PROJECTION_GLOBE_VIEW"),se&&fe.push("PROJECTED_POS_ON_VIEWPORT");var de=j&&0!==r.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),pe=void 0;pe=j?D.iconsInText?yr(N.kind,F,x,y,t,le,ue,ce,$,H,z,K,E,he,X,D.getProjection()):gr(N.kind,F,x,y,t,le,ue,ce,a,$,!0,z,K,E,he,X,D.getProjection()):vr(N.kind,F,x,y,t,le,ue,ce,a,$,z,K,E,he,X,D.getProjection());var me={program:t.useProgram(Tr(j,a,D),O,fe),buffers:R,uniformValues:pe,atlasTexture:V,atlasTextureIcon:W,atlasInterpolation:U,atlasInterpolationIcon:Z,isSDF:j,hasHalo:de,tile:L,labelPlaneMatrixInv:ee};if(b&&D.canOverlap){w=!0;var ve,ge=R.segments.get(),ye=f(ge);try{for(ye.s();!(ve=ye.n()).done;){var _e=ve.value;C.push({segments:new e.SegmentVector([_e]),sortKey:_e.sortKey,state:me})}}catch(Se){ye.e(Se)}finally{ye.f()}}else C.push({segments:R.segments,sortKey:0,state:me})}}}}catch(Se){I.e(Se)}finally{I.f()}w&&C.sort((function(e,t){return e.sortKey-t.sortKey}));for(var xe=0,be=C;xe<be.length;xe++){var we=be[xe],ke=we.state;if(t.terrain&&t.terrain.setupElevationDraw(ke.tile,ke.program,{useDepthForOcclusion:!T,labelPlaneMatrixInv:ke.labelPlaneMatrixInv}),p.activeTexture.set(m.TEXTURE0),ke.atlasTexture.bind(ke.atlasInterpolation,m.CLAMP_TO_EDGE),ke.atlasTextureIcon&&(p.activeTexture.set(m.TEXTURE1),ke.atlasTextureIcon&&ke.atlasTextureIcon.bind(ke.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),ke.isSDF){var Ee=ke.uniformValues;ke.hasHalo&&(Ee.u_is_halo=1,Mr(ke.buffers,we.segments,r,t,ke.program,k,h,d,Ee)),Ee.u_is_halo=0}Mr(ke.buffers,we.segments,r,t,ke.program,k,h,d,ke.uniformValues)}}function Mr(t,n,r,i,a,o,s,l,u){var c=i.context,h=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(c,c.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,u,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),h)}function Ar(t,n,r,i,a,o,s){var l,u,c,h,d,p=t.context.gl,m=r.paint.get("fill-pattern"),v=m&&m.constantOr(1);s?(u=v&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",l=p.LINES):(u=v?"fillPattern":"fill",l=p.TRIANGLES);var g,y=f(i);try{for(y.s();!(g=y.n()).done;){var _=g.value,x=n.getTile(_);if(!v||x.patternsLoaded()){var b=x.getBucket(r);if(b){t.prepareDrawTile();var w=b.programConfigurations.get(r.id),k=t.useProgram(u,w);v&&(t.context.activeTexture.set(p.TEXTURE0),x.imageAtlasTexture.bind(p.LINEAR,p.CLAMP_TO_EDGE),w.updatePaintBuffers());var E=m.constantOr(null);if(E&&x.imageAtlas){var S=x.imageAtlas.patternPositions[E.toString()];S&&w.setConstantPatternPositions(S)}var T=t.translatePosMatrix(_.projMatrix,x,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){h=b.indexBuffer2,d=b.segments2;var C=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[p.drawingBufferWidth,p.drawingBufferHeight];c="fillOutlinePattern"===u&&v?Qn(T,t,x,C):Jn(T,C)}else h=b.indexBuffer,d=b.segments,c=v?Yn(T,t,x):Kn(T);t.prepareDrawProgram(t.context,k,_.toUnwrapped()),k.draw(t.context,l,a,t.stencilModeForClipping(_),o,e.CullFaceMode.disabled,c,r.id,b.layoutVertexBuffer,h,d,r.paint,t.transform.zoom,w)}}}}catch(M){y.e(M)}finally{y.f()}}function Pr(t,n,r,i,a,o,s){var l=t.context,u=l.gl,c=t.transform,h=r.paint.get("fill-extrusion-pattern"),d=h.constantOr(1),p=r.paint.get("fill-extrusion-opacity"),m=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],v=r.layout.get("fill-extrusion-edge-radius"),g=v>0&&!r.paint.get("fill-extrusion-rounded-roof"),y=g?0:v,_="globe"===c.projection.name?e.fillExtrusionHeightLift():0,x="globe"===c.projection.name,b=x?e.globeToMercatorTransition(c.zoom):0,w=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)],k=[];x&&k.push("PROJECTION_GLOBE_VIEW"),m[0]>0&&k.push("FAUX_AO"),g&&k.push("ZERO_ROOF_RADIUS");var E,S=f(i);try{for(S.s();!(E=S.n()).done;){var T=E.value,C=n.getTile(T),M=C.getBucket(r);if(M&&M.projection.name===c.projection.name){var A=M.programConfigurations.get(r.id),P=t.useProgram(d?"fillExtrusionPattern":"fillExtrusion",A,k);if(t.terrain){var I=t.terrain;if(t.style.terrainSetForDrapingOnly())I.setupElevationDraw(C,P,{useMeterToDem:!0});else{if(!M.enableTerrain)continue;if(I.setupElevationDraw(C,P,{useMeterToDem:!0}),Ir(l,n,T,M,r,I),!M.centroidVertexBuffer){var z=P.attributes.a_centroid_pos;void 0!==z&&u.vertexAttrib2f(z,0,0)}}}d&&(t.context.activeTexture.set(u.TEXTURE0),C.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),A.updatePaintBuffers());var L=h.constantOr(null);if(L&&C.imageAtlas){var D=C.imageAtlas.patternPositions[L.toString()];D&&A.setConstantPatternPositions(D)}var R=t.translatePosMatrix(T.projMatrix,C,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),O=c.projection.createInversionMatrix(c,T.canonical),j=r.paint.get("fill-extrusion-vertical-gradient"),N=d?Xn(R,t,j,p,m,y,T,C,_,b,w,O):Gn(R,t,j,p,m,y,T,_,b,w,O);t.prepareDrawProgram(l,P,T.toUnwrapped());var B=[];t.terrain&&B.push(M.centroidVertexBuffer),x&&B.push(M.layoutVertexExtBuffer),P.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,N,r.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,r.paint,t.transform.zoom,A,B)}}}catch(F){S.e(F)}finally{S.f()}}function Ir(t,n,r,i,a,o){for(var s,l,u,c=[function(t){var n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){var n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1)},function(t){return new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)}],h=function(e){for(var t=n.getSource().minzoom,r=function(e){var t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},i=0,o=[0,-1,1];i<o.length;i++){var s=o[i];if(!(e.overscaledZ+s<t)){var l=r(e.calculateScaledKey(e.overscaledZ+s));if(l)return l}}},d=[0,0,0],p=function(t,n){return d[0]=Math.min(t.min.y,n.min.y),d[1]=Math.max(t.max.y,n.max.y),d[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,d},m=function(t,n){return d[0]=Math.min(t.min.x,n.min.x),d[1]=Math.max(t.max.x,n.max.x),d[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,d},v=[function(e,t){return p(e,t)},function(e,t){return p(t,e)},function(e,t){return m(e,t)},function(e,t){return m(t,e)}],g=new e.Point(0,0),y=function(t,n,i,a,c){var h=[[a?i:t,a?t:i,0],[a?i:n,a?n:i,0]],f=c<0?e.EXTENT+c:c,d=[a?f:(t+n)/2,a?(t+n)/2:f,0];return 0===i&&c<0||0!==i&&c>0?o.getForTilePoints(u,[d],!0,l):h.push(d),o.getForTilePoints(r,h,!0,s),Math.max(h[0][2],h[1][2],d[2])/o.exaggeration()},_=0;_<4;_++){var x=(_<2?1:5)-_,b=i.borders[_];if(0!==b.length){var w=u=c[_](r),k=h(w);if(k&&k instanceof e.FillExtrusionBucket&&k.enableTerrain&&(i.borderDoneWithNeighborZ[_]!==k.canonical.z||k.borderDoneWithNeighborZ[x]!==i.canonical.z)&&(l=o.findDEMTileFor(w))&&l.dem){if(!s){var E=o.findDEMTileFor(r);if(!E||!E.dem)return;s=E}var S=k.borders[x],T=0,C=k.borderDoneWithNeighborZ[x]!==i.canonical.z;if(i.canonical.z===k.canonical.z){for(var M=0;M<b.length;M++){for(var A=i.featuresOnBorder[b[M]],P=A.borders[_],I=void 0;T<S.length&&!((I=k.featuresOnBorder[S[T]]).borders[x][1]>P[0]+3);)C&&k.encodeCentroid(void 0,I,!1),T++;if(I&&T<S.length){for(var z=T,L=0;!(I.borders[x][0]>P[1]-3)&&(L++,++T!==S.length);)I=k.featuresOnBorder[S[T]];if(I=k.featuresOnBorder[S[z]],A.intersectsCount()>1||I.intersectsCount()>1||1!==L){1!==L&&(T=z),i.encodeCentroid(void 0,A,!1),C&&k.encodeCentroid(void 0,I,!1);continue}var D=v[_](A,I),R=_%2?e.EXTENT-1:0;g.x=y(D[0],Math.min(e.EXTENT-1,D[1]),R,_<2,D[2]),g.y=0,i.encodeCentroid(g,A,!1),C&&k.encodeCentroid(g,I,!1)}else i.encodeCentroid(void 0,A,!1)}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0,C&&(k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0)}else{var O,j=f(b);try{for(j.s();!(O=j.n()).done;){var N=O.value;i.encodeCentroid(void 0,i.featuresOnBorder[N],!1)}}catch(V){j.e(V)}finally{j.f()}if(C){var B,F=f(S);try{for(F.s();!(B=F.n()).done;){var $=B.value;k.encodeCentroid(void 0,k.featuresOnBorder[$],!1)}}catch(V){F.e(V)}finally{F.f()}k.borderDoneWithNeighborZ[x]=i.canonical.z,k.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[_]=k.canonical.z,i.needsCentroidUpdate=!0}}}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}var zr=new e.Color(1,0,0,1),Lr=new e.Color(0,1,0,1),Dr=new e.Color(0,0,1,1),Rr=new e.Color(1,0,1,1),Or=new e.Color(0,1,1,1);function jr(t,n,r){var i=t.context,a=t.transform,o=i.gl,s="globe"===a.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null,u=r.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){var c=e.transitionTileAABBinECEF(r.canonical,a),h=e.globeDenormalizeECEF(c);u=e.multiply(new Float32Array(16),a.globeMatrix,h),e.multiply(u,a.projMatrix,u)}var f=t.useProgram("debug",null,l),d=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(d,f);var p=e.DepthMode.disabled,m=e.StencilMode.disabled,v=t.colorModeForRenderPass(),g="$debug";i.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,a):d._makeDebugTileBoundsBuffers(t.context,a.projection);var y=d._tileDebugBuffer||t.debugBuffer,_=d._tileDebugIndexBuffer||t.debugIndexBuffer,x=d._tileDebugSegments||t.debugSegments;f.draw(i,o.LINE_STRIP,p,m,v,e.CullFaceMode.disabled,ir(u,e.Color.red),g,y,_,x,null,null,null,[d._globeTileDebugBorderBuffer]);var b=d.latestRawTileData,w=Math.floor((b&&b.byteLength||0)/1024),k=n.getTile(r).tileSize,E=512/Math.min(k,512)*(r.overscaledZ/a.zoom)*.5,S=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(S+=" => ".concat(r.overscaledZ)),function(e,t){e.initDebugOverlayCanvas();var n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,S+=" ".concat(w,"kb"));var T=d._tileDebugTextBuffer||t.debugBuffer,C=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,M=d._tileDebugTextSegments||t.debugSegments;f.draw(i,o.TRIANGLES,p,m,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,ir(u,e.Color.transparent,E),g,T,C,M,null,null,null,[d._globeTileDebugTextBuffer])}function Nr(e,t,n,r){Fr(e,0,t+n/2,e.transform.width,n,r)}function Br(e,t,n,r){Fr(e,t-n/2,0,n,e.transform.height,r)}function Fr(t,n,r,i,a,o){var s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}var $r=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]).members;function Vr(e,t,n,r){e.emplaceBack(t,n,r)}var Ur=p((function t(n){d(this,t),this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Vr(this.vertexArray,-1,-1,1),Vr(this.vertexArray,1,-1,1),Vr(this.vertexArray,-1,1,1),Vr(this.vertexArray,1,1,1),Vr(this.vertexArray,-1,-1,-1),Vr(this.vertexArray,1,-1,-1),Vr(this.vertexArray,-1,1,-1),Vr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=n.createVertexBuffer(this.vertexArray,$r),this.indexBuffer=n.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}));function Zr(t,n,r,i,a,o){var s=t.gl,l=n.paint.get("sky-atmosphere-color"),u=n.paint.get("sky-atmosphere-halo-color"),c=n.paint.get("sky-atmosphere-sun-intensity"),h=function(e,t,n,r,i){return{u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}}(e.fromMat4(e.create$1(),i),a,c,l,u);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,h,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}var Hr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),Wr=function(){function t(n){d(this,t);var r=new e.StructArrayLayout5f20;r.emplaceBack(-1,1,1,0,0),r.emplaceBack(1,1,1,1,0),r.emplaceBack(1,-1,1,1,1),r.emplaceBack(-1,-1,1,0,1);var i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=n.createVertexBuffer(r,Hr.members),this.indexBuffer=n.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}return p(t,[{key:"destroy",value:function(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}]),t}(),qr={symbol:function(t,n,r,i,a){if("translucent"===t.renderPass){var o=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,a,o,s){var l,u=n.transform,c="map"===a,h="map"===o,d=f(t);try{for(d.s();!(l=d.n()).done;){var p=l.value,m=i.getTile(p),v=m.getBucket(r);if(v&&v.text&&v.text.segments.get().length){var g=e.evaluateSizeForZoom(v.textSizeData,u.zoom),y=zt(p,v.getProjection(),u),_=u.calculatePixelsToTileUnitsMatrix(m),x=dt(y,m.tileID.canonical,h,c,u,v.getProjection(),_),b="none"!==r.layout.get("icon-text-fit")&&v.hasIconData();if(g){var w=Math.pow(2,u.zoom-m.tileID.overscaledZ);Sr(v,c,h,s,e.symbolSize,u,x,p,w,g,b)}}}}catch(k){d.e(k)}finally{d.f()}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),a),0!==r.paint.get("icon-opacity").constantOr(1)&&Cr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),o,s),0!==r.paint.get("text-opacity").constantOr(1)&&Cr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(wr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),wr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))}},circle:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("circle-opacity"),o=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0!==a.constantOr(1)||0!==o.constantOr(1)&&0!==s.constantOr(1)){for(var u=t.context,c=u.gl,h=t.transform,d=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),p=e.StencilMode.disabled,m=t.colorModeForRenderPass(),v="globe"===h.projection.name,g=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],y=[],_=0;_<i.length;_++){var x=i[_],b=n.getTile(x),w=b.getBucket(r);if(w&&w.projection.name===h.projection.name){var k=w.programConfigurations.get(r.id),E=nr(r);v&&E.push("PROJECTION_GLOBE_VIEW");var S=t.useProgram("circle",k,E),T=w.layoutVertexBuffer,C=w.globeExtVertexBuffer,M=w.indexBuffer,A=h.projection.createInversionMatrix(h,x.canonical),P={programConfiguration:k,program:S,layoutVertexBuffer:T,globeExtVertexBuffer:C,indexBuffer:M,uniformValues:tr(t,x,b,A,g,r),tile:b};if(l){var I,z=w.segments.get(),L=f(z);try{for(L.s();!(I=L.n()).done;){var D=I.value;y.push({segments:new e.SegmentVector([D]),sortKey:D.sortKey,state:P})}}catch(G){L.e(G)}finally{L.f()}}else y.push({segments:w.segments,sortKey:0,state:P})}}l&&y.sort((function(e,t){return e.sortKey-t.sortKey}));for(var R={useDepthForOcclusion:!v},O=0,j=y;O<j.length;O++){var N=j[O],B=N.state,F=B.programConfiguration,$=B.program,V=B.layoutVertexBuffer,U=B.globeExtVertexBuffer,Z=B.indexBuffer,H=B.uniformValues,W=B.tile,q=N.segments;t.terrain&&t.terrain.setupElevationDraw(W,$,R),t.prepareDrawProgram(u,$,W.tileID.toUnwrapped()),$.draw(u,c.TRIANGLES,d,p,m,e.CullFaceMode.disabled,H,r.id,V,Z,q,r.paint,h.zoom,F,[U])}}}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){var a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){var i=e.gl,a=t.width*r,o=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,a,o]);var s=n.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();var l=i.createTexture();i.bindTexture(i.TEXTURE_2D,l),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,n,r,i,a){var o=e.gl;o.texImage2D(o.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,i,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?o.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,l,s,a,o)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,r,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});for(var u=t.transform,c="globe"===u.projection.name,h=c?["PROJECTION_GLOBE_VIEW"]:null,f=c?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,d=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],p=0;p<i.length;p++){var m=i[p];if(!n.hasRenderableParent(m)){var v=n.getTile(m),g=v.getBucket(r);if(g&&g.projection.name===u.projection.name){var y=g.programConfigurations.get(r.id),_=t.useProgram("heatmap",y,h),x=t.transform.zoom;t.terrain&&t.terrain.setupElevationDraw(v,_),t.prepareDrawProgram(a,_,m.toUnwrapped());var b=u.projection.createInversionMatrix(u,m.canonical);_.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,f,or(t,m,v,b,d,x,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,y,c?[g.globeExtVertexBuffer]:null)}}}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){var r=t.context,i=r.gl,a=n.heatmapFbo;if(a){r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,a.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);var o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),o.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,function(e,t,n,r){return{u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}}(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}}(t,r))},line:function(t,n,r,i){if("translucent"===t.renderPass){var a=r.paint.get("line-opacity"),o=r.paint.get("line-width");if(0!==a.constantOr(1)&&0!==o.constantOr(1)){var s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,c=r.paint.get("line-dasharray"),d=c.constantOr(1),p=r.layout.get("line-cap"),m=r.paint.get("line-pattern"),v=m.constantOr(1),g=r.paint.get("line-gradient"),y=v?"linePattern":"line",_=t.context,x=_.gl,b=function(e){var t=[];hr(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");var n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");var r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t}(r),w=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(w=!1);var k,E=f(i);try{var S=function(){var i=k.value,a=n.getTile(i);if(v&&!a.patternsLoaded())return"continue";var o=a.getBucket(r);if(!o)return"continue";t.prepareDrawTile();var f=o.programConfigurations.get(r.id),E=t.useProgram(y,f,b),S=m.constantOr(null);if(S&&a.imageAtlas){var T=a.imageAtlas.patternPositions[S.toString()];T&&f.setConstantPatternPositions(T)}var C=c.constantOr(null),M=p.constantOr(null);if(!v&&C&&M&&a.lineAtlas){var A=a.lineAtlas.getDash(C,M);A&&f.setConstantPatternPositions(A)}var P=r.paint.get("line-trim-offset"),I=h(P,2),z=I[0],L=I[1];if("round"===M||"square"===M){var D=1;z!==L&&(0===z&&(z-=D),1===L&&(L+=D))}var R=t.terrain?i.projMatrix:null,O=v?lr(t,a,r,R,u):sr(t,a,r,R,o.lineClipsArray.length,u,[z,L]);if(g){var j=o.gradients[r.id],N=j.texture;if(r.gradientVersion!==j.version){var B=256;if(r.stepInterpolant){var F=n.getSource().maxzoom,$=i.canonical.z===F?Math.ceil(1<<t.transform.maxZoom-i.canonical.z):1;B=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*$),256,_.maxTextureSize)}j.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:B,image:j.gradient||void 0,clips:o.lineClipsArray}),j.texture?j.texture.update(j.gradient):j.texture=new e.Texture(_,j.gradient,x.RGBA),j.version=r.gradientVersion,N=j.texture}_.activeTexture.set(x.TEXTURE1),N.bind(r.stepInterpolant?x.NEAREST:x.LINEAR,x.CLAMP_TO_EDGE)}d&&(_.activeTexture.set(x.TEXTURE0),a.lineAtlasTexture.bind(x.LINEAR,x.REPEAT),f.updatePaintBuffers()),v&&(_.activeTexture.set(x.TEXTURE0),a.imageAtlasTexture.bind(x.LINEAR,x.CLAMP_TO_EDGE),f.updatePaintBuffers()),t.prepareDrawProgram(_,E,i.toUnwrapped());var V=function(n){E.draw(_,x.TRIANGLES,s,n,l,e.CullFaceMode.disabled,O,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,f,[o.layoutVertexBuffer2])};if(w){var U=t.stencilModeForClipping(i).ref;0===U&&t.terrain&&_.clear({stencil:0});var Z={func:x.EQUAL,mask:255};O.u_alpha_discard_threshold=.8,V(new e.StencilMode(Z,U,255,x.KEEP,x.KEEP,x.INVERT)),O.u_alpha_discard_threshold=0,V(new e.StencilMode(Z,U,255,x.KEEP,x.KEEP,x.KEEP))}else V(t.stencilModeForClipping(i))};for(E.s();!(k=E.n()).done;)S()}catch(T){E.e(T)}finally{E.f()}w&&(t.resetStencilClippingMasks(),t.terrain&&_.clear({stencil:0}))}}},fill:function(t,n,r,i){var a=r.paint.get("fill-color"),o=r.paint.get("fill-opacity");if(0!==o.constantOr(1)){var s=t.colorModeForRenderPass(),l=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===u){var c=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);Ar(t,n,r,i,c,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){var h=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);Ar(t,n,r,i,h,s,!0)}}},"fill-extrusion":function(t,n,r,i){var a=r.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){var o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||r.paint.get("fill-extrusion-pattern").constantOr(1))Pr(t,n,r,i,o,e.StencilMode.disabled,e.ColorMode.disabled),Pr(t,n,r,i,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{var s=t.colorModeForRenderPass();Pr(t,n,r,i,o,e.StencilMode.disabled,s)}}},hillshade:function(t,n,r,i){if("offscreen"===t.renderPass||"translucent"===t.renderPass){var a,o=t.context,s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture,c="translucent"!==t.renderPass||u?[{},i]:t.stencilConfigForOverlap(i),d=h(c,2),p=d[0],m=d[1],v=f(m);try{for(v.s();!(a=v.n()).done;){var g=a.value,y=n.getTile(g);if(y.needsHillshadePrepare&&"offscreen"===t.renderPass)Pn(t,y,r,s,e.StencilMode.disabled,l);else if("translucent"===t.renderPass){var _=u&&t.terrain?t.terrain.stencilModeForRTTOverlap(g):p[g.overscaledZ];Mn(t,g,y,r,s,_,l)}}}catch(x){v.e(x)}finally{v.f()}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()}},raster:function(t,n,r,i,a,o){if("translucent"===t.renderPass&&0!==r.paint.get("raster-opacity")&&i.length){var s,l=t.context,u=l.gl,c=n.getSource(),d=t.useProgram("raster"),p=t.colorModeForRenderPass(),m=t.terrain&&t.terrain.renderingToTexture,v=c instanceof $e||m?[{},i]:t.stencilConfigForOverlap(i),g=h(v,2),y=g[0],_=g[1],x=_[_.length-1].overscaledZ,b=!t.options.moving,w=f(_);try{for(w.s();!(s=w.n()).done;){var k=s.value,E=m?e.DepthMode.disabled:t.depthModeForSublayer(k.overscaledZ-x,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,u.LESS),S=k.toUnwrapped(),T=n.getTile(k);if(!m||T&&T.hasData()){var C=m?k.projMatrix:t.transform.calculateProjMatrix(S,b),M=t.terrain&&m?t.terrain.stencilModeForRTTOverlap(k):y[k.overscaledZ],A=o?0:r.paint.get("raster-fade-duration");T.registerFadeDuration(A);var P=n.findLoadedParent(k,0),I=Fn(T,P,n,t.transform,A),z=void 0,L=void 0;t.terrain&&t.terrain.prepareDrawTile();var D="nearest"===r.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;l.activeTexture.set(u.TEXTURE0),T.texture.bind(D,u.CLAMP_TO_EDGE),l.activeTexture.set(u.TEXTURE1),P?(P.texture.bind(D,u.CLAMP_TO_EDGE),z=Math.pow(2,P.tileID.overscaledZ-T.tileID.overscaledZ),L=[T.tileID.canonical.x*z%1,T.tileID.canonical.y*z%1]):T.texture.bind(D,u.CLAMP_TO_EDGE),T.texture.useMipmap&&l.extTextureFilterAnisotropic&&t.transform.pitch>20&&u.texParameterf(u.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax);var R=fr(C,L||[0,0],z||1,I,r,c instanceof $e?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(l,d,S),c instanceof $e)c.boundsBuffer&&c.boundsSegments&&d.draw(l,u.TRIANGLES,E,e.StencilMode.disabled,p,e.CullFaceMode.disabled,R,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{var O=t.getTileBoundsBuffers(T),j=O.tileBoundsBuffer,N=O.tileBoundsIndexBuffer,B=O.tileBoundsSegments;d.draw(l,u.TRIANGLES,E,M,p,e.CullFaceMode.disabled,R,r.id,j,N,B)}}}}catch(F){w.e(F)}finally{w.f()}t.resetStencilClippingMasks()}},background:function(t,n,r,i){var a=r.paint.get("background-color"),o=r.paint.get("background-opacity");if(0!==o){var s=t.context,l=s.gl,u=t.transform,c=u.tileSize,h=r.paint.get("background-pattern");if(!t.isPatternMissing(h)){var d=!h&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass===d){var p,m=e.StencilMode.disabled,v=t.depthModeForSublayer(0,"opaque"===d?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),g=t.colorModeForRenderPass(),y=t.useProgram(h?"backgroundPattern":"background"),_=i;_||(p=t.getBackgroundTiles(),_=Object.values(p).map((function(e){return e.tileID}))),h&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));var x,b=f(_);try{for(b.s();!(x=b.n()).done;){var w=x.value,k=w.toUnwrapped(),E=i?w.projMatrix:t.transform.calculateProjMatrix(k);t.prepareDrawTile();var S=n?n.getTile(w):p?p[w.key]:new e.Tile(w,c,u.zoom,t),T=h?xr(E,o,t,h,{tileID:w,tileSize:c}):_r(E,o,a);t.prepareDrawProgram(s,y,k);var C=t.getTileBoundsBuffers(S),M=C.tileBoundsBuffer,A=C.tileBoundsIndexBuffer,P=C.tileBoundsSegments;y.draw(s,l.TRIANGLES,v,m,g,e.CullFaceMode.disabled,T,r.id,M,A,P)}}catch(I){b.e(I)}finally{b.f()}}}}},sky:function(t,n,r){var i=t.transform,a="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),o=r.paint.get("sky-opacity")*a;if(0!==o){var s=t.context,l=r.paint.get("sky-type"),u=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){var a=t.context,o=a.gl,s=n.skyboxFbo;if(!s){s=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new Ur(a),n.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(var l=0;l<6;++l)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);var u=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),h=new Float64Array(16);e.identity(h),e.rotateY(h,h,.5*-Math.PI),Zr(a,n,c,h,u,0),e.identity(h),e.rotateY(h,h,.5*Math.PI),Zr(a,n,c,h,u,1),e.identity(h),e.rotateX(h,h,.5*-Math.PI),Zr(a,n,c,h,u,2),e.identity(h),e.rotateX(h,h,.5*Math.PI),Zr(a,n,c,h,u,3),e.identity(h),Zr(a,n,c,h,u,4),e.identity(h),e.rotateY(h,h,Math.PI),Zr(a,n,c,h,u,5),a.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);var c=function(e,t,n,r,i){return{u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}}(l.skyboxMatrix,n.getCenter(t,!1),0,i,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,c,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,o,c):"gradient"===l&&"sky"===t.renderPass&&function(t,n,r,i,a){var o=t.context,s=o.gl,l=t.transform,u=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Ur(o)),o.activeTexture.set(s.TEXTURE0);var c=n.colorRampTexture;c||(c=n.colorRampTexture=new e.Texture(o,n.colorRamp,s.RGBA)),c.bind(s.LINEAR,s.CLAMP_TO_EDGE);var h=function(t,n,r,i,a){return{u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:a}}(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,a);t.prepareDrawProgram(o,u),u.draw(o,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,h,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,u,o,c)}},debug:function(e,t,n){for(var r=0;r<n.length;r++)jr(e,t,n[r])},custom:function(t,n,r,i){var a=t.context,o=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){var s=o.prerender;if(s){if(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){var l=t.transform.pointMerc;s.call(o,a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[l.x,l.y],t.transform.pixelsPerMeterRatio)}else s.call(o,a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){var u=o.renderToTile;if(u){var c=i[0].canonical,h=new e.MercatorCoordinate(c.x+i[0].wrap*(1<<c.z),c.y,c.z);a.setDepthMode(e.DepthMode.disabled),a.setStencilMode(e.StencilMode.disabled),a.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),u.call(o,a.gl,h),a.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);var f="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(a.setDepthMode(f),"globe"===t.transform.projection.name){var d=t.transform.pointMerc;o.render(a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[d.x,d.y],t.transform.pixelsPerMeterRatio)}else o.render(a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}},Gr=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,t),this.context=new je(n,i),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}return p(t,[{key:"updateTerrain",value:function(e,t){var n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(n||this._terrain&&this._terrain.enabled){this._terrain||(this._terrain=new Zn(this,e));var r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}}},{key:"_updateFog",value:function(e){var t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)this.transform.fogCullDistSq=null;else{var n=t.getFovAdjustedRange(this.transform._fov),r=h(n,2),i=r[0],a=r[1];if(i>a)this.transform.fogCullDistSq=null;else{var o=i+.78*(a-i);this.transform.fogCullDistSq=o*o}}}},{key:"terrain",get:function(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}},{key:"resize",value:function(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style){var r,i=f(this.style.order);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.style._layers[a].resize()}}catch(o){i.e(o)}finally{i.f()}}}},{key:"setup",value:function(){var t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);for(var s=new e.StructArrayLayout1ui2,l=0,u=[0,1,3,2,0];l<u.length;l++){var c=u[l];s.emplaceBack(c)}this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();var h=this.context.gl;this.stencilClearMode=new e.StencilMode({func:h.ALWAYS,mask:0},0,255,h.ZERO,h.ZERO,h.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Wr(this.context)}},{key:"getMercatorTileBoundsBuffers",value:function(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}},{key:"getTileBoundsBuffers",value:function(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}},{key:"clearStencil",value:function(){var t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Bn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}},{key:"resetStencilClippingMasks",value:function(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}},{key:"_renderTileClippingMasks",value:function(t,n,r){if(n&&this.currentStencilSource!==n.id&&t.isTileClipped()&&r&&0!==r.length){if(this._tileClippingMaskIDs&&!this.terrain){var i,a=!1,o=f(r);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(void 0===this._tileClippingMaskIDs[s.key]){a=!0;break}}}catch(b){o.e(b)}finally{o.f()}if(!a)return}this.currentStencilSource=n.id;var l=this.context,u=l.gl;this.nextStencilID+r.length>256&&this.clearStencil(),l.setColorMode(e.ColorMode.disabled),l.setDepthMode(e.DepthMode.disabled);var c=this.useProgram("clippingMask");this._tileClippingMaskIDs={};var h,d=f(r);try{for(d.s();!(h=d.n()).done;){var p=h.value,m=n.getTile(p),v=this._tileClippingMaskIDs[p.key]=this.nextStencilID++,g=this.getTileBoundsBuffers(m),y=g.tileBoundsBuffer,_=g.tileBoundsIndexBuffer,x=g.tileBoundsSegments;c.draw(l,u.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:u.ALWAYS,mask:0},v,255,u.KEEP,u.KEEP,u.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Bn(p.projMatrix),"$clipping",y,_,x)}}catch(b){d.e(b)}finally{d.f()}}}},{key:"stencilModeFor3D",value:function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilModeForClipping",value:function(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);var n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}},{key:"stencilConfigForOverlap",value:function(t){var n=this.context.gl,i=t.sort((function(e,t){return t.overscaledZ-e.overscaledZ})),a=i[i.length-1].overscaledZ,o=i[0].overscaledZ-a+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();for(var s={},l=0;l<o;l++)s[l+a]=new e.StencilMode({func:n.GEQUAL,mask:255},l+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[s,i]}return[r({},a,e.StencilMode.disabled),i]}},{key:"colorModeForRenderPass",value:function(){var t=this.context.gl;if(this._showOverdrawInspector){var n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}},{key:"depthModeForSublayer",value:function(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;var i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}},{key:"opaquePassEnabledForLayer",value:function(){return this.currentLayer<this.opaquePassCutoff}},{key:"render",value:function(t,n){var r=this;this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();var i=this.style.order,a=this.style._sourceCaches;for(var o in a){var s=a[o];s.used&&s.prepare(this.context)}var l={},u={},c={};for(var h in a){var d=a[h];l[h]=d.getVisibleCoordinates(),u[h]=l[h].slice().reverse(),c[h]=d.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var p=0;p<i.length;p++)if(this.style._layers[i[p]].is3D()){this.opaquePassCutoff=p;break}if(this.terrain&&(this.terrain.updateTileBinding(c),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";var m,v=f(i);try{for(v.s();!(m=v.n()).done;){var g=m.value,y=this.style._layers[g],_=t._getLayerSourceCache(y);if(y.hasOffscreenPass()&&!y.isHidden(this.transform.zoom)){var x=_?u[_.id]:void 0;("custom"===y.type||y.isSky()||x&&x.length)&&this.renderLayer(this,_,y,x)}}}catch(I){v.e(I)}finally{v.f()}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];var b=this.terrain;if(b&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&b.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){var w=this.style._layers[i[this.currentLayer]],k=t._getLayerSourceCache(w);if(!w.isSky()){var E=k?u[k.id]:void 0;this._renderTileClippingMasks(w,k,E),this.renderLayer(this,k,w,E)}}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){var r=t.context,i=r.gl,a=t.transform,o=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(a.zoom),u=n.properties.get("color").toArray01(),c=n.properties.get("high-color").toArray01(),h=n.properties.get("space-color").toArray01PremultipliedAlpha(),f=e.identity$1([]);e.rotateY$1(f,f,-e.degToRad(a._center.lng)),e.rotateX$1(f,f,e.degToRad(a._center.lat)),e.rotateZ$1(f,f,a.angle),e.rotateX$1(f,f,-a._pitch);var d=e.fromQuat(new Float32Array(16),f),p=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),m=5e-4,v=e.mapValue(n.properties.get("horizon-blend"),0,1,m,.25),g=e.globeUseCustomAntiAliasing(t,r,a)&&v===m?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,y=t.frameCounter/1e3%1,_=e.length(a.globeCenterInViewSpace),x=Math.sqrt(Math.pow(_,2)-Math.pow(g,2)),b=Math.acos(x/_),w=function(t,n,r,i,a,o,s,l,u,c,h,f,d,p){return{u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:l,u_high_color:u,u_space_color:c,u_star_intensity:h,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:f,u_horizon_angle:d,u_rotation_matrix:p}}(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,l,v,u,c,h,p,y,b,d);t.prepareDrawProgram(r,s);var k=t.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,w,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){var S=this.style._layers[i[this.currentLayer]],T=t._getLayerSourceCache(S);S.isSky()&&this.renderLayer(this,T,S,T?u[T.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){var C=this.style._layers[i[this.currentLayer]],M=t._getLayerSourceCache(C);if(C.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(C)){if(C.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer)}else{var A=M?("symbol"===C.type?c:u)[M.id]:void 0;this._renderTileClippingMasks(C,M,M?l[M.id]:void 0),this.renderLayer(this,M,C,A),++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){var P=null;e.values(this.style._layers).forEach((function(e){var n=t._getLayerSourceCache(e);n&&!e.isHidden(r.transform.zoom)&&(!P||P.getSource().maxzoom<n.getSource().maxzoom)&&(P=n)})),P&&this.options.showTileBoundaries&&qr.debug(this,P,P.getVisibleCoordinates())}this.options.showPadding&&function(e){var t=e.transform.padding;Nr(e,e.transform.height-(t.top||0),3,zr),Nr(e,t.bottom||0,3,Lr),Br(e,t.left||0,3,Dr),Br(e,e.transform.width-(t.right||0),3,Rr);var n=e.transform.centerPoint;!function(e,t,n,r){Fr(e,t-1,n-10,2,20,r),Fr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Or)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}},{key:"renderLayer",value:function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&qr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}},{key:"gpuTimingStart",value:function(e){if(this.options.gpuTiming){var t=this.context.extTimerQuery,n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}}},{key:"gpuTimingDeferredRenderStart",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}},{key:"gpuTimingDeferredRenderEnd",value:function(){if(this.options.gpuTimingDeferredRender){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"gpuTimingEnd",value:function(){if(this.options.gpuTiming){var e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}}},{key:"collectGpuTimers",value:function(){var e=this.gpuTimers;return this.gpuTimers={},e}},{key:"collectDeferredRenderGpuQueries",value:function(){var e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}},{key:"queryGpuTimers",value:function(e){var t={};for(var n in e){var r=e[n],i=this.context.extTimerQuery,a=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=a}return t}},{key:"queryGpuTimeDeferredRender",value:function(e){if(!this.options.gpuTimingDeferredRender)return 0;var t,n=this.context.extTimerQuery,r=0,i=f(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r+=n.getQueryObjectEXT(a,n.QUERY_RESULT_EXT)/1e6,n.deleteQueryEXT(a)}}catch(o){i.e(o)}finally{i.f()}return r}},{key:"translatePosMatrix",value:function(t,n,r,i,a){if(!r[0]&&!r[1])return t;var o=a?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(o){var s=Math.sin(o),l=Math.cos(o);r=[r[0]*l-r[1]*s,r[0]*s+r[1]*l]}var u=[a?r[0]:U(n,r[0],this.transform.zoom),a?r[1]:U(n,r[1],this.transform.zoom),0],c=new Float32Array(16);return e.translate(c,t,u),c}},{key:"saveTileTexture",value:function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}},{key:"getTileTexture",value:function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null}},{key:"isPatternMissing",value:function(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}},{key:"terrainRenderModeElevated",value:function(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}},{key:"currentGlobalDefines",value:function(){var e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}},{key:"useProgram",value:function(e,t,n){this.cache=this.cache||{};var r=n||[],i=this.currentGlobalDefines().concat(r),a=Hn.cacheKey(kn[e],e,i,t);return this.cache[a]||(this.cache[a]=new Hn(this.context,e,kn[e],t,br[e],i)),this.cache[a]}},{key:"setCustomLayerDefaults",value:function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}},{key:"setBaseState",value:function(){var e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}},{key:"initDebugOverlayCanvas",value:function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}},{key:"destroy",value:function(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}},{key:"prepareDrawTile",value:function(){this.terrain&&this.terrain.prepareDrawTile()}},{key:"prepareDrawProgram",value:function(t,n,r){if(!this.terrain||!this.terrain.renderingToTexture){var i=this.style.fog;if(i){var a=i.getOpacity(this.transform.pitch),o=function(t,n,r,i,a,o,s,l,u,c,h){var f=t.transform,d=n.properties.get("color").toArray01();d[3]=i;var p=t.frameCounter/1e3%1;return{u_fog_matrix:r?f.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(f._fov),u_fog_color:d,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:u,u_globe_radius:c,u_viewport:h,u_globe_transition:e.globeToMercatorTransition(f.zoom),u_is_globe:+("globe"===f.projection.name)}}(this,i,r,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,o)}}}},{key:"setTileLoadedFlag",value:function(e){this.tileLoaded=e}},{key:"saveCanvasCopy",value:function(){var e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}},{key:"canvasCopy",value:function(){var e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}},{key:"getCanvasCopiesAndTimestamps",value:function(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}},{key:"averageElevationNeedsEasing",value:function(){if(!this.transform._elevation)return!1;var e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}},{key:"getBackgroundTiles",value:function(){var t,n=this._backgroundTiles,r=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512}),a=f(i);try{for(a.s();!(t=a.n()).done;){var o=t.value;r[o.key]=n[o.key]||new e.Tile(o,512,this.transform.tileZoom,this)}}catch(s){a.e(s)}finally{a.f()}return r}},{key:"clearBackgroundTiles",value:function(){this._backgroundTiles={}}}]),t}(),Xr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(d(this,t),isNaN(e)||e<0||isNaN(n)||n<0||isNaN(r)||r<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=n,this.left=r,this.right=i}return p(t,[{key:"interpolate",value:function(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}},{key:"getCenter",value:function(t,n){var r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(r,i)}},{key:"equals",value:function(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}},{key:"clone",value:function(){return new t(this.top,this.bottom,this.left,this.right)}},{key:"toJSON",value:function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}]),t}();function Kr(t,n){var r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Yr(t,n){var r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function Jr(t,n){var r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){var a=e.normalize([],r);e.scale$2(i,a,e.dot(i,a)),n[0]=i[0],n[1]=i[1]}var o=e.cross([],n,t);if(e.len(o)<1e-15)return null;var s=Math.atan2(-o[1],o[0]);return Yr(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),s)}var Qr=function(){function t(e,n){d(this,t),this.position=e,this.orientation=n}return p(t,[{key:"position",get:function(){return this._position},set:function(t){if(t){var n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}},{key:"lookAtPoint",value:function(t,n){if(this.orientation=null,this.position){var r=this.position,i=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,a=e.MercatorCoordinate.fromLngLat(t,i),o=[a.x-r.x,a.y-r.y,a.z-r.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Jr(o,n)}}},{key:"setPitchBearing",value:function(t,n){this.orientation=Yr(e.degToRad(t),e.degToRad(-n))}}]),t}(),ei=function(){function t(n,r){d(this,t),this._transform=e.identity([]),this.orientation=r,this.position=n}return p(t,[{key:"mercatorPosition",get:function(){var t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}},{key:"position",get:function(){var t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]},set:function(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t||e.identity$1([]),t&&Kr(this._transform,this._orientation)}},{key:"getPitchBearing",value:function(){var e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}},{key:"setPitchBearing",value:function(e,t){this._orientation=Yr(e,t),Kr(this._transform,this._orientation)}},{key:"forward",value:function(){var t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}},{key:"up",value:function(){var t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}},{key:"right",value:function(){var t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}},{key:"getCameraToWorld",value:function(t,n){var r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}},{key:"getWorldToCameraPosition",value:function(t,n,r){var i=this.position;e.scale$2(i,i,-t);var a=new Float64Array(16);return e.fromScaling(a,[r,r,r]),e.translate(a,a,i),a[10]*=n,a}},{key:"getWorldToCamera",value:function(t,n){var r=new Float64Array(16),i=new Float64Array(4),a=this.position;return e.conjugate(i,this._orientation),e.scale$2(a,a,-t),e.fromQuat(r,i),e.translate(r,r,a),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}},{key:"getCameraToClipPerspective",value:function(t,n,r,i){var a=new Float64Array(16);return e.perspective(a,t,n,r,i),a}},{key:"getDistanceToElevation",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}},{key:"clone",value:function(){return new t(c(this.position),c(this.orientation))}}]),t}();function ti(t,n){var r=ri(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,a){var o=new e.LngLat(r.lng-180*ii,r.lat),s=new e.LngLat(r.lng+180*ii,r.lat),l=t.project(o.lng,o.lat),u=t.project(s.lng,s.lat),c=-Math.atan2(u.y-l.y,u.x-l.x),h=e.MercatorCoordinate.fromLngLat(r);h.y=e.clamp(h.y,-1+ii,1-ii);var f=h.toLngLat(),d=t.project(f.lng,f.lat),p=e.MercatorCoordinate.fromLngLat(f);p.x+=ii;var m=p.toLngLat(),v=t.project(m.lng,m.lat),g=oi(v.x-d.x,v.y-d.y,c),y=e.MercatorCoordinate.fromLngLat(f);y.y+=ii;var _=y.toLngLat(),x=t.project(_.lng,_.lat),b=oi(x.x-d.x,x.y-d.y,c),w=Math.abs(g.x)/Math.abs(b.y),k=e.identity([]);e.rotateZ(k,k,-c*(1-(a?0:i)));var E=e.identity([]);return e.scale(E,E,[1,1-(1-w)*i,1]),E[4]=-b.x/b.y*i,e.rotateZ(E,E,c),e.multiply(E,k,E),E}(t.projection,0,t.center,r,n),a=ni(t);return e.scale(i,i,[a,a,1]),i}function ni(t){var n=t.projection,r=ri(t.projection,t.zoom,t.width,t.height),i=ai(n,t.center),a=ai(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*a)}function ri(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=t.range;if(!o)return 0;var s=Math.min(a,Math.max(r,i)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+l,o[1]+l,n)}var ii=1/4e4;function ai(t,n){var r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*ii,r),a=new e.LngLat(n.lng+180*ii,r),o=t.project(i.lng,r),s=t.project(a.lng,r),l=e.MercatorCoordinate.fromLngLat(i),u=e.MercatorCoordinate.fromLngLat(a),c=s.x-o.x,h=s.y-o.y,f=u.x-l.x,d=u.y-l.y,p=Math.sqrt((f*f+d*d)/(c*c+h*h));return Math.log(p)/Math.LN2}function oi(e,t,n){var r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}var si=function(){function n(t,r,i,a,o,s,l){d(this,n),this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=r||22,this._minPitch=null==i?0:i,this._maxPitch=null==a?60:a,this.setProjection(s),this.setMaxBounds(l),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Xr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new ei,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}return p(n,[{key:"clone",value:function(){var e=new n(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}},{key:"elevation",get:function(){return this._elevation},set:function(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}},{key:"updateElevation",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}},{key:"getProjection",value:function(){return e.pick(this.projection,["name","center","parallels"])}},{key:"setProjection",value:function(n){this.projectionOptions=n||{name:"mercator"};var r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);var i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}},{key:"setMercatorFromTransition",value:function(){var t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});var n=t!==this.projection.name;return n&&this._calcMatrices(),n}},{key:"minZoom",get:function(){return this._minZoom},set:function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}},{key:"maxZoom",get:function(){return this._maxZoom},set:function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}},{key:"minPitch",get:function(){return this._minPitch},set:function(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}},{key:"maxPitch",get:function(){return this._maxPitch},set:function(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}},{key:"renderWorldCopies",get:function(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies},set:function(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}},{key:"worldSize",get:function(){return this.tileSize*this.scale}},{key:"cameraWorldSizeForFog",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"cameraWorldSize",get:function(){var e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}},{key:"pixelsPerMeter",get:function(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}},{key:"cameraPixelsPerMeter",get:function(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}},{key:"centerOffset",get:function(){return this.centerPoint._sub(this.size._div(2))}},{key:"size",get:function(){return new e.Point(this.width,this.height)}},{key:"bearing",get:function(){return e.wrap(this.rotation,-180,180)},set:function(e){this.rotation=e}},{key:"rotation",get:function(){return-this.angle/Math.PI*180},set:function(t){var n,r=-t*Math.PI/180;this.angle!==r&&(this._unmodified=!1,this.angle=r,this._calcMatrices(),this.rotationMatrix=(n=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(n[1]=0,n[2]=0),n[0]=1,n[3]=1,n),function(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}},{key:"pitch",get:function(){return this._pitch/Math.PI*180},set:function(t){var n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}},{key:"aspect",get:function(){return this.width/this.height}},{key:"fov",get:function(){return this._fov/Math.PI*180},set:function(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}},{key:"fovX",get:function(){return this._fov}},{key:"fovY",get:function(){var e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}},{key:"averageElevation",get:function(){return this._averageElevation},set:function(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}},{key:"zoom",get:function(){return this._zoom},set:function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}},{key:"_setZoom",value:function(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}},{key:"_updateCameraOnTerrain",value:function(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);var e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}},{key:"_updateSeaLevelZoom",value:function(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}},{key:"sampleAverageElevation",value:function(){if(!this._elevation)return 0;for(var t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop(),i=0,a=0,o=0;o<n.length;o++){var s=new e.Point(n[o][0]*this.width,r+n[o][1]*(this.height-r)),l=t.pointCoordinate(s);if(l){var u=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);i+=l[3]*u,a+=u}}return 0===a?NaN:i/a}},{key:"center",get:function(){return this._center},set:function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}},{key:"_updateZoomFromElevation",value:function(){if(null!=this._seaLevelZoom&&this._elevation){var e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),a=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(a))}}},{key:"padding",get:function(){return this._edgeInsets.toJSON()},set:function(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}},{key:"computeZoomRelativeTo",value:function(t){var n,r=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));n=t.z<this._camera.position[2]?[r.x,r.y,r.z]:[t.x,t.y,t.z];var i=e.length(e.sub([],this._camera.position,n));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}},{key:"setFreeCameraOptions",value:function(t){if(this.height&&(t.position||t.orientation)){this._updateCameraState();var n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){var r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}}},{key:"getFreeCameraOptions",value:function(){this._updateCameraState();var t=this._camera.position,n=new Qr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}},{key:"_setCameraOrientation",value:function(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);var n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;var i=Jr(n,r);return!!i&&(this._camera.orientation=i,!0)}},{key:"_setCameraPosition",value:function(t){var n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}},{key:"centerPoint",get:function(){return this._edgeInsets.getCenter(this.width,this.height)}},{key:"fovAboveCenter",get:function(){return this._fov*(.5+this.centerOffset.y/this.height)}},{key:"isPaddingEqual",value:function(e){return this._edgeInsets.equals(e)}},{key:"interpolatePadding",value:function(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}},{key:"coveringZoomLevel",value:function(e){var t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}},{key:"getVisibleUnwrappedCoordinates",value:function(t){var n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies)for(var r=this.pointCoordinate(new e.Point(0,0)),i=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(r.x,i.x,a.x,o.x)),l=Math.floor(Math.max(r.x,i.x,a.x,o.x)),u=1,c=s-u;c<=l+u;c++)0!==c&&n.push(new e.UnwrappedTileID(c,t));return n}},{key:"coveringTiles",value:function(t){var n=this,r=this.coveringZoomLevel(t),i=r,a=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&r<t.minzoom)return[];void 0!==t.maxzoom&&r>t.maxzoom&&(r=t.maxzoom);var s=this.locationCoordinate(this.center),l=this.center.lat,u=1<<r,c=[u*s.x,u*s.y,0],h="globe"===this.projection.name,f=!h,d=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,r,f),p=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=u*e.mercatorZfromAltitude(1,this.center.lat),v=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[u*p.x,u*p.y,v*(f?1:m)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),_=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?r:0,x=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,b=t.isTerrainDEM?-x:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?ni(this):1,k=function(t){var r=1/4e4,i=new e.MercatorCoordinate(t.x+r,t.y,t.z),a=new e.MercatorCoordinate(t.x,t.y+r,t.z),o=t.toLngLat(),s=i.toLngLat(),l=a.toLngLat(),u=n.locationCoordinate(o),c=n.locationCoordinate(s),h=n.locationCoordinate(l),f=Math.hypot(c.x-u.x,c.y-u.y),d=Math.hypot(h.x-u.x,h.y-u.y);return Math.sqrt(f*d)*w/r},E=function(t){var r=x,i=b;return{aabb:e.tileAABB(n,u,0,0,0,t,i,r,n.projection),zoom:0,x:0,y:0,minZ:i,maxZ:r,wrap:t,fullyVisible:!1}},S=[],T=[],C=r,M=t.reparseOverscaled?i:r,A=function(e){return e*e},P=A((v-this._centerAltitude)*m),I=function(e){if(n._elevation&&e.tileID&&o){var t=n._elevation.getMinMaxForTile(e.tileID),r=e.aabb;t?(r.min[2]=t.min,r.max[2]=t.max,r.center[2]=(r.min[2]+r.max[2])/2):(e.shouldSplit=z(e),e.shouldSplit||(r.min[2]=r.max[2]=r.center[2]=n._centerAltitude))}},z=function(t){if(t.zoom<_)return!0;if(t.zoom===C)return!1;if(null!=t.shouldSplit)return t.shouldSplit;var r=t.aabb.distanceX(g),o=t.aabb.distanceY(g),s=P,u=1;if(h){s=A(t.aabb.distanceZ(g));var c=Math.pow(2,t.zoom),f=e.latFromMercatorY((t.y+1)/c),d=e.latFromMercatorY(t.y/c),p=Math.min(Math.max(l,f),d),v=e.circumferenceAtLatitude(p)/e.circumferenceAtLatitude(l);if(u=p===l?1/Math.max(1,n._mercatorScaleRatio-.3):Math.min(1,v/n._mercatorScaleRatio),n.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===C-1&&v>=.9)return!0}else if(a&&(s=A(t.aabb.distanceZ(g)*m)),n.projection.isReprojectedInTileSpace&&i<=5){var x=Math.pow(2,t.zoom),b=k(new e.MercatorCoordinate((t.x+.5)/x,(t.y+.5)/x));u=b>.85?1:b}var w=r*r+o*o+s,E=A((1<<C-t.zoom)*y*u*function(e,t){if(t*A(.707)<e)return 1;var n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)}(Math.max(s,P),w));return w<E};if(this.renderWorldCopies)for(var L=1;L<=3;L++)S.push(E(-L)),S.push(E(L));for(S.push(E(0));S.length>0;){var D=S.pop(),R=D.x,O=D.y,j=D.fullyVisible;if(!j){var N=D.aabb.intersects(d);if(0===N)continue;j=2===N}if(D.zoom!==C&&z(D))for(var B=0;B<4;B++){var F=(R<<1)+B%2,$=(O<<1)+(B>>1),V={aabb:o?D.aabb.quadrant(B):e.tileAABB(this,u,D.zoom+1,F,$,D.wrap,D.minZ,D.maxZ,this.projection),zoom:D.zoom+1,x:F,y:$,wrap:D.wrap,fullyVisible:j,tileID:void 0,shouldSplit:void 0,minZ:D.minZ,maxZ:D.maxZ};a&&!h&&(V.tileID=new e.OverscaledTileID(D.zoom+1===C?M:D.zoom+1,D.wrap,D.zoom+1,F,$),I(V)),S.push(V)}else{var U=D.zoom===C?M:D.zoom;if(t.minzoom&&t.minzoom>U)continue;var Z=c[0]-(.5+R+(D.wrap<<D.zoom))*(1<<r-D.zoom),H=c[1]-.5-O,W=D.tileID?D.tileID:new e.OverscaledTileID(U,D.wrap,D.zoom,R,O);T.push({tileID:W,distanceSq:Z*Z+H*H})}}if(this.fogCullDistSq){var q=this.fogCullDistSq,G=this.horizonLineFromTop();T=T.filter((function(r){var i=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],o=n.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(i,i,o),e.transformMat4$1(a,a,o);var s=e.getAABBPointSquareDist(i,a);if(0===s)return!0;var l=!1,u=n._elevation;if(u&&s>q&&0!==G){var c,h=n.calculateProjMatrix(r.tileID.toUnwrapped());t.isTerrainDEM||(c=u.getMinMaxForTile(r.tileID)),c||(c={min:b,max:x});var f=e.furthestTileCorner(n.rotation),d=[f[0]*e.EXTENT,f[1]*e.EXTENT,c.max];e.transformMat4(d,d,h),l=(1-d[1])*n.height*.5<G}return s<q||l}))}return T.sort((function(e,t){return e.distanceSq-t.distanceSq})).map((function(e){return e.tileID}))}},{key:"resize",value:function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}},{key:"unmodified",get:function(){return this._unmodified}},{key:"zoomScale",value:function(e){return Math.pow(2,e)}},{key:"scaleZoom",value:function(e){return Math.log(e)/Math.LN2}},{key:"project",value:function(t){var n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.Point(r.x*this.worldSize,r.y*this.worldSize)}},{key:"unproject",value:function(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}},{key:"point",get:function(){return this.project(this.center)}},{key:"pointMerc",get:function(){return this.point._div(this.worldSize)}},{key:"pixelsPerMeterRatio",get:function(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}},{key:"setLocationAtPoint",value:function(t,n){var r,i,a=this.centerPoint;if("globe"===this.projection.name){var o=this.worldSize;r=(n.x-a.x)/o,i=(n.y-a.y)/o}else{var s=this.pointCoordinate(n),l=this.pointCoordinate(a);r=s.x-l.x,i=s.y-l.y}var u=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(u.x-r,u.y-i))}},{key:"setLocation",value:function(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}},{key:"locationPoint",value:function(e){return this.projection.locationPoint(this,e)}},{key:"locationPoint3D",value:function(e){return this.projection.locationPoint(this,e,!0)}},{key:"pointLocation",value:function(e){return this.coordinateLocation(this.pointCoordinate(e))}},{key:"pointLocation3D",value:function(e){return this.coordinateLocation(this.pointCoordinate3D(e))}},{key:"locationCoordinate",value:function(t,n){var r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}},{key:"coordinateLocation",value:function(e){return this.projection.unproject(e.x,e.y)}},{key:"pointRayIntersection",value:function(t,n){var r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);var o=a[3];e.scale$1(i,i,1/i[3]),e.scale$1(a,a,1/o);var s=i[2],l=a[2];return{p0:i,p1:a,t:s===l?0:(r-s)/(l-s)}}},{key:"screenPointToMercatorRay",value:function(t){var n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}},{key:"rayIntersectionCoordinate",value:function(t){var n=t.p0,r=t.p1,i=t.t,a=e.mercatorZfromAltitude(n[2],this._center.lat),o=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(a,o,i))}},{key:"pointCoordinate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}},{key:"pointCoordinate3D",value:function(t){if(!this.elevation)return this.pointCoordinate(t);var n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);var r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);for(var a=.02*i,o=t.clone(),s=0;s<10&&i-r>a;s++){o.y=e.number(r,i,.66);var l=this.projection.pointCoordinate3D(this,o.x,o.y);l?(i=o.y,n=l):r=o.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}},{key:"isPointAboveHorizon",value:function(e){return this.projection.isPointAboveHorizon(this,e)}},{key:"isPointOnSurface",value:function(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);var n=this.pointCoordinate(t);return n.y>=0&&n.y<=1}},{key:"_coordinatePoint",value:function(t,n){var r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.Point(i[0]/i[3],i[1]/i[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}},{key:"_getBoundsNonRectangular",value:function(){var t=this,n=this._edgeInsets,r=n.top,i=n.left,a=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,s=this.pointLocation3D(new e.Point(i,r)),l=this.pointLocation3D(new e.Point(o,r)),u=this.pointLocation3D(new e.Point(o,a)),c=this.pointLocation3D(new e.Point(i,a)),f=Math.min(s.lng,l.lng,u.lng,c.lng),d=Math.max(s.lng,l.lng,u.lng,c.lng),p=Math.min(s.lat,l.lat,u.lat,c.lat),m=Math.max(s.lat,l.lat,u.lat,c.lat),v=Math.pow(2,-this.zoom)/16*270,g="globe"===this.projection.name?1:4,y=function n(r,i,a,o,s){var l=(r+a)/2,u=(i+o)/2,c=new e.Point(l,u),h=t.pointLocation3D(c),y=h.lng,_=h.lat,x=Math.max(0,f-y,p-_,y-d,_-m);f=Math.min(f,y),d=Math.max(d,y),p=Math.min(p,_),m=Math.max(m,_),(s<g||x>v)&&(n(r,i,l,u,s+1),n(l,u,a,o,s+1))};if(y(i,r,o,r,1),y(o,r,o,a,1),y(o,a,i,a,1),y(i,a,i,r,1),"globe"===this.projection.name){var _=e.polesInViewport(this),x=h(_,2),b=x[0],w=x[1];b?(m=90,d=180,f=-180):w&&(p=-90,d=180,f=-180)}return new e.LngLatBounds(new e.LngLat(f,p),new e.LngLat(d,m))}},{key:"_getBoundsRectangular",value:function(t,n){var r=this._edgeInsets,i=r.top,a=r.left,o=this.height-this._edgeInsets.bottom,s=this.width-this._edgeInsets.right,l=new e.Point(a,i),u=new e.Point(s,i),c=new e.Point(s,o),h=new e.Point(a,o),f=this.pointCoordinate(l,t),d=this.pointCoordinate(u,t),p=this.pointCoordinate(c,n),m=this.pointCoordinate(h,n),v=function(e,t){return(t.y-e.y)/(t.x-e.x)};return f.y>1&&d.y>=0?f=new e.MercatorCoordinate((1-m.y)/v(m,f)+m.x,1):f.y<0&&d.y<=1&&(f=new e.MercatorCoordinate(-m.y/v(m,f)+m.x,0)),d.y>1&&f.y>=0?d=new e.MercatorCoordinate((1-p.y)/v(p,d)+p.x,1):d.y<0&&f.y<=1&&(d=new e.MercatorCoordinate(-p.y/v(p,d)+p.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(m)).extend(this.coordinateLocation(p))}},{key:"_getBoundsRectangularTerrain",value:function(){var e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);var t=e.visibleDemTiles.reduce((function(e,t){if(t.dem){var n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}},{key:"getBounds",value:function(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}},{key:"horizonLineFromTop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}},{key:"getMaxBounds",value:function(){return this.maxBounds}},{key:"setMaxBounds",value:function(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}},{key:"calculatePosMatrix",value:function(e,t){return this.projection.createTileMatrix(this,t,e)}},{key:"calculateDistanceTileData",value:function(t){var n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];var i=t.canonical,a=1/this.height,o=this.cameraWorldSize,s=o/this.zoomScale(i.z),l=(i.x+Math.pow(2,i.z)*t.wrap)*s,u=i.y*s,c=this.point;c.x*=o/this.worldSize,c.y*=o/this.worldSize;var h=this.angle,f=Math.sin(-h),d=-Math.cos(-h);return r[n]={bearing:[f,d],center:[(c.x-l)*a,(c.y-u)*a],scale:s/e.EXTENT*a},r[n]}},{key:"calculateFogTileMatrix",value:function(t){var n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];var i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}},{key:"calculateProjMatrix",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];var a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),i[r]=new Float32Array(a),i[r]}},{key:"calculatePixelsToTileUnitsMatrix",value:function(t){var n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];var i=function(t,n){var r,i,a,o,s,l,u,c,h=t.tileTransform.scale*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return r=new Float32Array(4),o=(i=n.inverseAdjustmentMatrix)[1],s=i[2],l=i[3],c=(a=[h,h])[1],r[0]=i[0]*(u=a[0]),r[1]=o*u,r[2]=s*c,r[3]=l*c,r}(t,this);return r[n]=i,r[n]}},{key:"customLayerMatrix",value:function(){return this.mercatorMatrix.slice()}},{key:"globeToMercatorMatrix",value:function(){if("globe"===this.projection.name){var t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}},{key:"recenterOnTerrain",value:function(){if(this._elevation&&"globe"!==this.projection.name){var t=this._elevation;this._updateCameraState();var n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=a,i[2]/=a,e.normalize(i,i);var o=t.raycast(r,i,t.exaggeration());if(o){var s=e.scaleAndAdd([],r,i,o),l=new e.MercatorCoordinate(s[0],s[1],e.mercatorZfromAltitude(s[2],e.latFromMercatorY(s[1]))),u=(l.z+e.length([l.x-r[0],l.y-r[1],l.z-r[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(u),this._centerAltitude=l.toAltitude(),this._center=this.coordinateLocation(l),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}}},{key:"_constrainCamera",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._elevation){var n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(a(e.MercatorCoordinate,c(i))),s=this.pixelsPerMeter/this.worldSize*o,l=this._minimumHeightOverTerrain(),u=i[2]-s;if(u<=l)if(u<0||t){var h=this.locationCoordinate(this._center,this._centerAltitude),f=[i[0],i[1],h.z-i[2]],d=e.length(f);f[2]-=(l-u)/this._pixelsPerMercatorPixel;var p=e.length(f);if(0===p)return;e.scale$2(f,f,d/p*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],h.z*this._pixelsPerMercatorPixel-f[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}}},{key:"_constrain",value:function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){var n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}var r=this._unmodified,i=this.point,a=i.x,o=i.y,s=0,l=a,u=o,c=this.width/2,h=this.height/2,f=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(o-h<f&&(u=f+h),o+h>d&&(u=d-h),d-f<this.height&&(s=Math.max(s,this.height/(d-f)),u=(d+f)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){var p=this.worldMinX*this.scale,m=this.worldMaxX*this.scale,v=this.worldSize/2-(p+m)/2;(l=(a+v+this.worldSize)%this.worldSize-v)-c<p&&(l=p+c),l+c>m&&(l=m-c),m-p<this.width&&(s=Math.max(s,this.width/(m-p)),l=(m+p)/2)}l===a&&u===o||(this.center=this.unproject(new e.Point(l,u))),s&&(this.zoom+=this.scaleZoom(s)),this._constrainCamera(),this._unmodified=r,this._constraining=!1}}},{key:"_minZoomForBounds",value:function(){var e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}},{key:"_maxCameraBoundsDistance",value:function(){return this._mercatorZfromZoom(this._minZoomForBounds())}},{key:"_calcMatrices",value:function(){if(this.height){var t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));var r=ri(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;var i="meters"===this.projection.zAxisUnit?n:1,a=this._camera.getWorldToCamera(this.worldSize,i),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-t.x/this.width,o[9]=2*t.y/this.height;var s=e.mul([],o,a);if(this.projection.isReprojectedInTileSpace){var l=this.locationCoordinate(this.center),u=e.identity([]);e.translate(u,u,[l.x*this.worldSize,l.y*this.worldSize,0]),e.multiply(u,u,ti(this)),e.translate(u,u,[-l.x*this.worldSize,-l.y*this.worldSize,0]),e.multiply(s,s,u),this.inverseAdjustmentMatrix=function(e){var t=ti(e,!0);return I([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);var c=e.invert([],o);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(c,this.horizonLineFromTop(),this.height);var h=new Float32Array(16);e.identity(h),e.scale(h,h,[1,-1,1]),e.rotateX(h,h,this._pitch),e.rotateZ(h,h,this.angle);var f=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;f[8]=2*-t.x/this.width,f[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(h,f,h);var p=this.point,m=p.x,v=p.y,g=this.width%2/2,y=this.height%2/2,_=Math.cos(this.angle),x=Math.sin(this.angle),b=m-Math.round(m)+_*g+x*y,w=v-Math.round(v)+_*y+x*g,k=new Float64Array(s);if(e.translate(k,k,[b>.5?b-1:b,w>.5?w-1:w,0]),this.alignedProjMatrix=k,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},!(s=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);var E=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(E,E,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}}},{key:"_calcFogMatrices",value:function(){this._fogTileMatrixCache={};var t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,n];e.scale$2(a,a,i),e.scale$2(r,r,-1),e.multiply$2(r,r,a);var o=e.create();e.translate(o,o,r),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}},{key:"_computeCameraPosition",value:function(e){var t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}},{key:"_updateCameraState",value:function(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}},{key:"_translateCameraConstrained",value:function(t){var n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2],a=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(a=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}},{key:"_updateStateFromCamera",value:function(){var t=this._camera.position,n=this._camera.forward(),r=this._camera.getPitchBearing(),i=r.pitch,a=r.bearing,o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,s=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),l=Math.max((t[2]-o)/Math.cos(i),s),u=this._zoomFromMercatorZ(l);e.scaleAndAdd(t,t,n,l),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(a,-Math.PI,Math.PI),this._setZoom(e.clamp(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}},{key:"_worldSizeFromZoom",value:function(e){return Math.pow(2,e)*this.tileSize}},{key:"_mercatorZfromZoom",value:function(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}},{key:"_minimumHeightOverTerrain",value:function(){var e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}},{key:"_zoomFromMercatorZ",value:function(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}},{key:"zoomFromMercatorZAdjusted",value:function(t){for(var n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,a=1/0;r-n>1e-6&&r>n;){var o=n+.5*(r-n),s=this.tileSize*Math.pow(2,o),l=this.getCameraToCenterDistance(this.projection,o,s),u=this.scaleZoom(l/(t*this.tileSize)),c=Math.abs(o-u);c<a&&(a=c,i=o),o<u?n=o:r=o}return i}},{key:"_terrainEnabled",value:function(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}},{key:"anyCornerOffEdge",value:function(t,n){var r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),a=Math.min(t.y,n.y),o=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;for(var s=[new e.Point(r,a),new e.Point(i,o),new e.Point(r,o),new e.Point(i,a)],l=this.renderWorldCopies?-3:0,u=this.renderWorldCopies?4:1,c=0,h=s;c<h.length;c++){var f=h[c],d=this.pointRayIntersection(f);if(d.t<0)return!0;var p=this.rayIntersectionCoordinate(d);if(p.x<l||p.y<0||p.x>u||p.y>1)return!0}return!1}},{key:"isHorizonVisible",value:function(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}},{key:"zoomDeltaToMovement",value:function(t,n){var r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}},{key:"getCameraPoint",value:function(){if("globe"===this.projection.name){var t=function(t,n){var r=h(t,3),i=[r[0],r[1],r[2],1];e.transformMat4$1(i,i,n);var a=i[3]=Math.max(i[3],1e-6);return i[0]/=a,i[1]/=a,i[2]/=a,i}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}var n=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,n))}},{key:"getCameraToCenterDistance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize,r=ri(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}},{key:"getWorldToCameraMatrix",value:function(){var t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}]),n}();function li(e,t){var n=!1,r=null,i=function i(){r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}var ui=function(){function t(n){d(this,t),this._hashName=n&&encodeURIComponent(n),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=li(this._updateHashUnthrottled.bind(this),300)}return p(t,[{key:"addTo",value:function(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}},{key:"remove",value:function(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}},{key:"getHashString",value:function(){var t=this._map;if(!t)return"";var n=ci(t);if(this._hashName){var r=this._hashName,i=!1,a=e.window.location.hash.slice(1).split("&").map((function(e){var t=e.split("=")[0];return t===r?(i=!0,"".concat(t,"=").concat(n)):e})).filter((function(e){return e}));return i||a.push("".concat(r,"=").concat(n)),"#".concat(a.join("&"))}return"#".concat(n)}},{key:"_getCurrentHash",value:function(){var t,n=this,r=e.window.location.hash.replace("#","");return this._hashName?(r.split("&").map((function(e){return e.split("=")})).forEach((function(e){e[0]===n._hashName&&(t=e)})),(t&&t[1]||"").split("/")):r.split("/")}},{key:"_onHashChange",value:function(){var e=this._map;if(!e)return!1;var t=this._getCurrentHash();if(t.length>=3&&!t.some((function(e){return isNaN(e)}))){var n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}},{key:"_updateHashUnthrottled",value:function(){var t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}]),t}();function ci(e,t){var n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,i),o=Math.round(n.lng*a)/a,s=Math.round(n.lat*a)/a,l=e.getBearing(),u=e.getPitch(),c=t?"/".concat(o,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(o);return(l||u)&&(c+="/"+Math.round(10*l)/10),u&&(c+="/".concat(Math.round(u))),c}var hi={linearity:.3,easing:e.bezier(0,0,.3,1)},fi=e.extend({deceleration:2500,maxSpeed:1400},hi),di=e.extend({deceleration:20,maxSpeed:1400},hi),pi=e.extend({deceleration:1e3,maxSpeed:360},hi),mi=e.extend({deceleration:1e3,maxSpeed:90},hi),vi=function(){function t(e){d(this,t),this._map=e,this.clear()}return p(t,[{key:"clear",value:function(){this._inertiaBuffer=[]}},{key:"record",value:function(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}},{key:"_drainInertiaBuffer",value:function(){for(var t=this._inertiaBuffer,n=e.exported.now();t.length>0&&n-t[0].time>160;)t.shift()}},{key:"_onMoveEnd",value:function(t){if(!this._map._prefersReducedMotion()&&(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2))){var n,r={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},i=f(this._inertiaBuffer);try{for(i.s();!(n=i.n()).done;){var a=n.value.settings;r.zoom+=a.zoomDelta||0,r.bearing+=a.bearingDelta||0,r.pitch+=a.pitchDelta||0,a.panDelta&&r.pan._add(a.panDelta),a.around&&(r.around=a.around),a.pinchAround&&(r.pinchAround=a.pinchAround)}}catch(p){i.e(p)}finally{i.f()}var o=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,s={};if(r.pan.mag()){var l=yi(r.pan.mag(),o,e.extend({},fi,t||{}));s.offset=r.pan.mult(l.amount/r.pan.mag()),s.center=this._map.transform.center,gi(s,l)}if(r.zoom){var u=yi(r.zoom,o,di);s.zoom=this._map.transform.zoom+u.amount,gi(s,u)}if(r.bearing){var c=yi(r.bearing,o,pi);s.bearing=this._map.transform.bearing+e.clamp(c.amount,-179,179),gi(s,c)}if(r.pitch){var h=yi(r.pitch,o,mi);s.pitch=this._map.transform.pitch+h.amount,gi(s,h)}if(s.zoom||s.bearing){var d=void 0===r.pinchAround?r.around:r.pinchAround;s.around=d?this._map.unproject(d):this._map.getCenter()}return this.clear(),s.noMoveStart=!0,s}}}]),t}();function gi(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function yi(t,n,r){var i=r.maxSpeed,a=r.linearity,o=r.deceleration,s=e.clamp(t*a/(n/1e3),-i,i),l=Math.abs(s)/(o*a);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}var _i=function(t){m(r,t);var n=v(r);function r(t,i,a){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(this,r);var l=C(i.getCanvasContainer(),a),u=i.unproject(l);return(o=n.call(this,t,e.extend({point:l,lngLat:u,originalEvent:a},s)))._defaultPrevented=!1,o.target=i,o}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),xi=function(t){m(r,t);var n=v(r);function r(t,i,a){var o;d(this,r);var s="touchend"===t?a.changedTouches:a.touches,l=M(i.getCanvasContainer(),s),u=l.map((function(e){return i.unproject(e)})),c=l.reduce((function(e,t,n,r){return e.add(t.div(r.length))}),new e.Point(0,0));return(o=n.call(this,t,{points:l,point:c,lngLats:u,lngLat:i.unproject(c),originalEvent:a}))._defaultPrevented=!1,o}return p(r,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),r}(e.Event),bi=function(e){m(n,e);var t=v(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,{originalEvent:i}))._defaultPrevented=!1,a}return p(n,[{key:"preventDefault",value:function(){this._defaultPrevented=!0}},{key:"defaultPrevented",get:function(){return this._defaultPrevented}}]),n}(e.Event),wi=function(){function t(e,n){d(this,t),this._map=e,this._clickTolerance=n.clickTolerance}return p(t,[{key:"reset",value:function(){this._mousedownPos=void 0}},{key:"wheel",value:function(e){return this._firePreventable(new bi(e.type,this._map,e))}},{key:"mousedown",value:function(e,t){return this._mousedownPos=t,this._firePreventable(new _i(e.type,this._map,e))}},{key:"mouseup",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"preclick",value:function(t){var n=e.extend({},t);n.type="preclick",this._map.fire(new _i(n.type,this._map,n))}},{key:"click",value:function(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new _i(e.type,this._map,e)))}},{key:"dblclick",value:function(e){return this._firePreventable(new _i(e.type,this._map,e))}},{key:"mouseover",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"mouseout",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"touchstart",value:function(e){return this._firePreventable(new xi(e.type,this._map,e))}},{key:"touchmove",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchend",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"touchcancel",value:function(e){this._map.fire(new xi(e.type,this._map,e))}},{key:"_firePreventable",value:function(e){if(this._map.fire(e),e.defaultPrevented)return{}}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),t}(),ki=function(){function e(t){d(this,e),this._map=t}return p(e,[{key:"reset",value:function(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}},{key:"mousemove",value:function(e){this._map.fire(new _i(e.type,this._map,e))}},{key:"mousedown",value:function(){this._delayContextMenu=!0}},{key:"mouseup",value:function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}},{key:"contextmenu",value:function(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new _i(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}},{key:"isEnabled",value:function(){return!0}},{key:"isActive",value:function(){return!1}},{key:"enable",value:function(){}},{key:"disable",value:function(){}}]),e}(),Ei=function(){function t(e,n){d(this,t),this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=n.clickTolerance||1}return p(t,[{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"enable",value:function(){this.isEnabled()||(this._enabled=!0)}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1)}},{key:"mousedown",value:function(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(k(),this._startPos=this._lastPos=t,this._active=!0)}},{key:"mousemoveWindow",value:function(e,t){var n=this;if(this._active){var r=t,i=this._startPos,a=this._lastPos;if(!(!i||!a||a.equals(r)||!this._box&&r.dist(i)<this._clickTolerance)){this._lastPos=r,this._box||(this._box=y("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(i.x,r.x),s=Math.max(i.x,r.x),l=Math.min(i.y,r.y),u=Math.max(i.y,r.y);this._map._requestDomTask((function(){n._box&&(n._box.style.transform="translate(".concat(o,"px,").concat(l,"px)"),n._box.style.width=s-o+"px",n._box.style.height=u-l+"px")}))}}}},{key:"mouseupWindow",value:function(t,n){var r=this;if(this._active){var i=this._startPos,a=n;if(i&&0===t.button){if(this.reset(),T(),i.x!==a.x||i.y!==a.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:function(e){return e.fitScreenCoordinates(i,a,r._map.getBearing(),{linear:!1})}};this._fireEvent("boxzoomcancel",t)}}}},{key:"keydown",value:function(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),E(),delete this._startPos,delete this._lastPos}},{key:"_fireEvent",value:function(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}]),t}();function Si(e,t){for(var n={},r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}var Ti=function(){function t(e){d(this,t),this.reset(),this.numTouches=e.numTouches}return p(t,[{key:"reset",value:function(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}},{key:"touchstart",value:function(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){var n,r=new e.Point(0,0),i=f(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;r._add(a)}}catch(o){i.e(o)}finally{i.f()}return r.div(t.length)}(n),this.touches=Si(r,n)))}},{key:"touchmove",value:function(e,t,n){if(!this.aborted&&this.centroid){var r=Si(n,t);for(var i in this.touches){var a=r[i];(!a||a.dist(this.touches[i])>30)&&(this.aborted=!0)}}}},{key:"touchend",value:function(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){var r=!this.aborted&&this.centroid;if(this.reset(),r)return r}}}]),t}(),Ci=function(){function e(t){d(this,e),this.singleTap=new Ti(t),this.numTaps=t.numTaps,this.reset()}return p(e,[{key:"reset",value:function(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}},{key:"touchstart",value:function(e,t,n){this.singleTap.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this.singleTap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this.singleTap.touchend(e,t,n);if(r){var i=e.timeStamp-this.lastTime<500,a=!this.lastTap||this.lastTap.dist(r)<30;if(i&&a||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}]),e}(),Mi=function(){function e(){d(this,e),this._zoomIn=new Ci({numTouches:1,numTaps:2}),this._zoomOut=new Ci({numTouches:2,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}},{key:"touchstart",value:function(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}},{key:"touchmove",value:function(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){var r=this,i=this._zoomIn.touchend(e,t,n),a=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}}):a?(this._active=!0,e.preventDefault(),setTimeout((function(){return r.reset()}),0),{cameraAnimation:function(t){return t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(a)},{originalEvent:e})}}):void 0}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ai={0:1,2:2},Pi=function(){function e(t){d(this,e),this.reset(),this._clickTolerance=t.clickTolerance||1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}},{key:"_correctButton",value:function(e,t){return!1}},{key:"_move",value:function(e,t){return{}}},{key:"mousedown",value:function(e,t){if(!this._lastPoint){var n=A(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}}},{key:"mousemoveWindow",value:function(e,t){var n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){var n=Ai[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}},{key:"mouseupWindow",value:function(e){this._lastPoint&&A(e)===this._eventButton&&(this._moved&&T(),this.reset())}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ii=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"mousedown",value:function(e,t){o(s(n.prototype),"mousedown",this).call(this,e,t),this._lastPoint&&(this._active=!0)}},{key:"_correctButton",value:function(e,t){return 0===t&&!e.ctrlKey}},{key:"_move",value:function(e,t){return{around:t,panDelta:t.sub(e)}}}]),n}(Pi),zi=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Pi),Li=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"_correctButton",value:function(e,t){return 0===t&&e.ctrlKey||2===t}},{key:"_move",value:function(e,t){var n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}},{key:"contextmenu",value:function(e){e.preventDefault()}}]),n}(Pi),Di=function(){function t(n,r){d(this,t),this._map=n,this._el=n.getCanvasContainer(),this._minTouches=1,this._clickTolerance=r.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}return p(t,[{key:"reset",value:function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}},{key:"touchstart",value:function(e,t,n){return this._calculateTransform(e,t,n)}},{key:"touchmove",value:function(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}},{key:"touchend",value:function(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}},{key:"touchcancel",value:function(){this.reset()}},{key:"_calculateTransform",value:function(t,n,r){r.length>0&&(this._active=!0);var i=Si(r,n),a=new e.Point(0,0),o=new e.Point(0,0),s=0;for(var l in i){var u=i[l],c=this._touches[l];c&&(a._add(u),o._add(u.sub(c)),s++,i[l]=u)}if(this._touches=i,!(s<this._minTouches)&&o.mag()){var h=o.div(s);return this._sum._add(h),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:h}}}},{key:"enable",value:function(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}},{key:"disable",value:function(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return!!this._active}},{key:"_addTouchPanBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showTouchPanBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),e._alertContainer.setAttribute("role","null")}),500)}}]),t}(),Ri=function(){function e(){d(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._firstTwoTouches=void 0}},{key:"_start",value:function(e){}},{key:"_move",value:function(e,t,n){return{}}},{key:"touchstart",value:function(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}},{key:"touchmove",value:function(e,t,n){var r=this._firstTwoTouches;if(r){e.preventDefault();var i=h(r,2),a=i[0],o=i[1],s=Oi(n,t,a),l=Oi(n,t,o);if(s&&l){var u=this._aroundCenter?null:s.add(l).div(2);return this._move([s,l],u,e)}}}},{key:"touchend",value:function(e,t,n){if(this._firstTwoTouches){var r=h(this._firstTwoTouches,2),i=r[0],a=r[1],o=Oi(n,t,i),s=Oi(n,t,a);o&&s||(this._active&&T(),this.reset())}}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}();function Oi(e,t,n){for(var r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function ji(e,t){return Math.log(e/t)/Math.LN2}var Ni=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._distance=0,this._startDistance=0}},{key:"_start",value:function(e){this._startDistance=this._distance=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(ji(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ji(this._distance,n),pinchAround:t}}}]),n}(Ri);function Bi(e,t){return 180*e.angleWith(t)/Math.PI}var Fi=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"reset",value:function(){o(s(n.prototype),"reset",this).call(this),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}},{key:"_start",value:function(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}},{key:"_move",value:function(e,t){var n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Bi(this._vector,n),pinchAround:t}}},{key:"_isBelowThreshold",value:function(e){this._minDiameter=Math.min(this._minDiameter,e.mag());var t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;var r=Bi(e,n);return Math.abs(r)<t}}]),n}(Ri);function $i(e){return Math.abs(e.y)>Math.abs(e.x)}var Vi=function(t){m(r,t);var n=v(r);function r(e){var t;return d(this,r),(t=n.call(this))._map=e,t}return p(r,[{key:"reset",value:function(){o(s(r.prototype),"reset",this).call(this),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}},{key:"_start",value:function(e){this._lastPoints=e,$i(e[0].sub(e[1]))&&(this._valid=!1)}},{key:"_move",value:function(t,n,r){var i=this._lastPoints;if(i){var a=t[0].sub(i[0]),o=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(a,o,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+o.y)/2*-.5})}}},{key:"gestureBeginsVertically",value:function(e,t,n){if(void 0!==this._valid)return this._valid;var r=e.mag()>=2,i=t.mag()>=2;if(r||i){if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;var a=e.y>0==t.y>0;return $i(e)&&$i(t)&&a}}}]),r}(Ri),Ui={panStep:100,bearingStep:15,pitchStep:10},Zi=function(){function e(){d(this,e);var t=Ui;this._panStep=t.panStep,this._bearingStep=t.bearingStep,this._pitchStep=t.pitchStep,this._rotationDisabled=!1}return p(e,[{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"keydown",value:function(e){var t=this;if(!(e.altKey||e.ctrlKey||e.metaKey)){var n=0,r=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:n=1;break;case 189:case 109:case 173:n=-1;break;case 37:e.shiftKey?r=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?r=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(r=0,i=0),{cameraAnimation:function(s){var l=s.getZoom();s.easeTo({duration:300,easeId:"keyboardHandler",easing:Hi,zoom:n?Math.round(l)+n*(e.shiftKey?2:1):l,bearing:s.getBearing()+r*t._bearingStep,pitch:s.getPitch()+i*t._pitchStep,offset:[-a*t._panStep,-o*t._panStep],center:s.getCenter()},{originalEvent:e})}}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}},{key:"disableRotation",value:function(){this._rotationDisabled=!0}},{key:"enableRotation",value:function(){this._rotationDisabled=!1}}]),e}();function Hi(e){return e*(2-e)}var Wi=4.000244140625,qi=function(){function t(n,r){d(this,t),this._map=n,this._el=n.getCanvasContainer(),this._handler=r,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}return p(t,[{key:"setZoomRate",value:function(e){this._defaultZoomRate=e}},{key:"setWheelZoomRate",value:function(e){this._wheelZoomRate=e}},{key:"isEnabled",value:function(){return!!this._enabled}},{key:"isActive",value:function(){return this._active||void 0!==this._finishTimeout}},{key:"isZooming",value:function(){return!!this._zooming}},{key:"enable",value:function(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}},{key:"disable",value:function(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}},{key:"wheel",value:function(t){if(this.isEnabled()){if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}var n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY,r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Wi==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}}},{key:"_onTimeout",value:function(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}},{key:"_start",value:function(e){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var t=C(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}}},{key:"renderFrame",value:function(){var t=this;if(this._frameId&&(this._frameId=null,this.isActive())){var n=this._map.transform;"wheel"===this._type&&n.projection.wrap&&(n._center.lng>=180||n._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);var r=function(){return n._terrainEnabled()&&t._aroundCoord?n.computeZoomRelativeTo(t._aroundCoord):n.zoom};if(0!==this._delta){var i="wheel"===this._type&&Math.abs(this._delta)>Wi?this._wheelZoomRate:this._defaultZoomRate,a=2/(1+Math.exp(-Math.abs(this._delta*i)));this._delta<0&&0!==a&&(a=1/a);var o=r(),s=Math.pow(2,o),l="number"==typeof this._targetZoom?n.zoomScale(this._targetZoom):s;this._targetZoom=Math.min(n.maxZoom,Math.max(n.minZoom,n.scaleZoom(l*a))),"wheel"===this._type&&(this._startZoom=o,this._easing=this._smoothOutEasing(200)),this._delta=0}var u,c="number"==typeof this._targetZoom?this._targetZoom:r(),h=this._startZoom,f=this._easing,d=!1;if("wheel"===this._type&&h&&f){var p=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),m=f(p);u=e.number(h,c,m),p<1?this._frameId||(this._frameId=!0):d=!0}else u=c,d=!0;return this._active=!0,d&&(this._active=!1,this._finishTimeout=setTimeout((function(){t._zooming=!1,t._handler._triggerRenderFrame(),delete t._targetZoom,delete t._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!d,zoomDelta:u-r(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}}},{key:"_smoothOutEasing",value:function(t){var n=e.ease;if(this._prevEase){var r=this._prevEase,i=(e.exported.now()-r.start)/r.duration,a=r.easing(i+.01)-r.easing(i),o=.27/Math.sqrt(a*a+1e-4)*.01,s=Math.sqrt(.0729-o*o);n=e.bezier(o,s,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}},{key:"blur",value:function(){this.reset()}},{key:"reset",value:function(){this._active=!1}},{key:"_addScrollZoomBlocker",value:function(){this._map&&!this._alertContainer&&(this._alertContainer=y("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}},{key:"_showBlockerAlert",value:function(){var e=this;this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((function(){e._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),e._alertContainer.setAttribute("role","null")}),200)}}]),t}(),Gi=function(){function e(t,n){d(this,e),this._clickZoom=t,this._tapZoom=n}return p(e,[{key:"enable",value:function(){this._clickZoom.enable(),this._tapZoom.enable()}},{key:"disable",value:function(){this._clickZoom.disable(),this._tapZoom.disable()}},{key:"isEnabled",value:function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}},{key:"isActive",value:function(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}]),e}(),Xi=function(){function e(){d(this,e),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1}},{key:"blur",value:function(){this.reset()}},{key:"dblclick",value:function(e,t){return e.preventDefault(),{cameraAnimation:function(n){n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Ki=function(){function e(){d(this,e),this._tap=new Ci({numTouches:1,numTaps:1}),this.reset()}return p(e,[{key:"reset",value:function(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}},{key:"touchstart",value:function(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}},{key:"touchmove",value:function(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;var r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}},{key:"touchend",value:function(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}},{key:"touchcancel",value:function(){this.reset()}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1,this.reset()}},{key:"isEnabled",value:function(){return this._enabled}},{key:"isActive",value:function(){return this._active}}]),e}(),Yi=function(){function e(t,n,r){d(this,e),this._el=t,this._mousePan=n,this._touchPan=r}return p(e,[{key:"enable",value:function(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}},{key:"disable",value:function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}},{key:"isEnabled",value:function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}},{key:"isActive",value:function(){return this._mousePan.isActive()||this._touchPan.isActive()}}]),e}(),Ji=function(){function e(t,n,r){d(this,e),this._pitchWithRotate=t.pitchWithRotate,this._mouseRotate=n,this._mousePitch=r}return p(e,[{key:"enable",value:function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}},{key:"disable",value:function(){this._mouseRotate.disable(),this._mousePitch.disable()}},{key:"isEnabled",value:function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}},{key:"isActive",value:function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}]),e}(),Qi=function(){function e(t,n,r,i){d(this,e),this._el=t,this._touchZoom=n,this._touchRotate=r,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}return p(e,[{key:"enable",value:function(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}},{key:"disable",value:function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}},{key:"isEnabled",value:function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}},{key:"isActive",value:function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}},{key:"disableRotation",value:function(){this._rotationDisabled=!0,this._touchRotate.disable()}},{key:"enableRotation",value:function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}]),e}(),ea=function(e){return e.zoom||e.drag||e.pitch||e.rotate},ta=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n)}(e.Event),na=function(){function t(){d(this,t),this.constants=[1,1,.01],this.radius=0}return p(t,[{key:"setup",value:function(t,n){var r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}},{key:"projectRay",value:function(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);var n=e.scale$2([],t,this.radius);if(n[2]>0){var r=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),a=e.add([],n,e.scale$2([],e.sub([],e.add([],i,r),n),2));n[0]=a[0],n[1]=a[1]}return n}}]),t}();function ra(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}var ia=function(){function t(n,r){d(this,t),this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new vi(n),this._bearingSnap=r.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new na,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(r),e.bindAll(["handleEvent","handleWindowEvent"],this);var i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];var a,o=f(this._listeners);try{for(o.s();!(a=o.n()).done;){var s=h(a.value,3),l=s[0],u=s[1],c=s[2];l.addEventListener(u,l===e.window.document?this.handleWindowEvent:this.handleEvent,c)}}catch(p){o.e(p)}finally{o.f()}}return p(t,[{key:"destroy",value:function(){var t,n=f(this._listeners);try{for(n.s();!(t=n.n()).done;){var r=h(t.value,3),i=r[0],a=r[1],o=r[2];i.removeEventListener(a,i===e.window.document?this.handleWindowEvent:this.handleEvent,o)}}catch(s){n.e(s)}finally{n.f()}}},{key:"_addDefaultHandlers",value:function(e){var t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new wi(t,e));var r=t.boxZoom=new Ei(t,e);this._add("boxZoom",r);var i=new Mi,a=new Xi;t.doubleClickZoom=new Gi(a,i),this._add("tapZoom",i),this._add("clickZoom",a);var o=new Ki;this._add("tapDragZoom",o);var s=t.touchPitch=new Vi(t);this._add("touchPitch",s);var l=new zi(e),u=new Li(e);t.dragRotate=new Ji(e,l,u),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",u,["mouseRotate"]);var c=new Ii(e),h=new Di(t,e);t.dragPan=new Yi(n,c,h),this._add("mousePan",c),this._add("touchPan",h,["touchZoom","touchRotate"]);var f=new Fi,d=new Ni;t.touchZoomRotate=new Qi(n,d,f,o),this._add("touchRotate",f,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new ki(t));var p=t.scrollZoom=new qi(t,this);this._add("scrollZoom",p,["mousePan"]);var m=t.keyboard=new Zi;this._add("keyboard",m);for(var v=0,g=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];v<g.length;v++){var y=g[v];e.interactive&&e[y]&&t[y].enable(e[y])}}},{key:"_add",value:function(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}},{key:"stop",value:function(e){if(!this._updatingCamera){var t,n=f(this._handlers);try{for(n.s();!(t=n.n()).done;)t.value.handler.reset()}catch(r){n.e(r)}finally{n.f()}this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}},{key:"isActive",value:function(){var e,t=f(this._handlers);try{for(t.s();!(e=t.n()).done;)if(e.value.handler.isActive())return!0}catch(n){t.e(n)}finally{t.f()}return!1}},{key:"isZooming",value:function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}},{key:"isRotating",value:function(){return!!this._eventsInProgress.rotate}},{key:"isMoving",value:function(){return!!ea(this._eventsInProgress)||this.isZooming()}},{key:"_isDragging",value:function(){return!!this._eventsInProgress.drag}},{key:"_blockedByActive",value:function(e,t,n){for(var r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}},{key:"handleWindowEvent",value:function(e){this.handleEvent(e,"".concat(e.type,"Window"))}},{key:"_getMapTouches",value:function(e){var t,n=[],r=f(e);try{for(r.s();!(t=r.n()).done;){var i=t.value;this._el.contains(i.target)&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}},{key:"handleEvent",value:function(e,t){this._updatingCamera=!0;var n,r="renderFrame"===e.type,i=r?void 0:e,a={needsRenderFrame:!1},o={},s={},l=e.touches?this._getMapTouches(e.touches):void 0,u=l?M(this._el,l):r?void 0:C(this._el,e),c=f(this._handlers);try{for(c.s();!(n=c.n()).done;){var h=n.value,d=h.handlerName,p=h.handler,m=h.allowed;if(p.isEnabled()){var v=void 0;this._blockedByActive(s,m,d)?p.reset():p[t||e.type]&&(v=p[t||e.type](e,u,l),this.mergeHandlerResult(a,o,v,d,i),v&&v.needsRenderFrame&&this._triggerRenderFrame()),(v||p.isActive())&&(s[d]=p)}}}catch(x){c.e(x)}finally{c.f()}var g={};for(var y in this._previousActiveHandlers)s[y]||(g[y]=i);this._previousActiveHandlers=s,(Object.keys(g).length||ra(a))&&(this._changes.push([a,o,g]),this._triggerRenderFrame()),(Object.keys(s).length||ra(a))&&this._map._stop(!0),this._updatingCamera=!1;var _=a.cameraAnimation;_&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_(this._map))}},{key:"mergeHandlerResult",value:function(t,n,r,i,a){if(r){e.extend(t,r);var o={handlerName:i,originalEvent:r.originalEvent||a};void 0!==r.zoomDelta&&(n.zoom=o),void 0!==r.panDelta&&(n.drag=o),void 0!==r.pitchDelta&&(n.pitch=o),void 0!==r.bearingDelta&&(n.rotate=o)}}},{key:"_applyChanges",value:function(){var t,n={},r={},i={},a=f(this._changes);try{for(a.s();!(t=a.n()).done;){var o=h(t.value,3),s=o[0],l=o[1],u=o[2];s.panDelta&&(n.panDelta=(n.panDelta||new e.Point(0,0))._add(s.panDelta)),s.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+s.zoomDelta),s.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+s.bearingDelta),s.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+s.pitchDelta),void 0!==s.around&&(n.around=s.around),void 0!==s.aroundCoord&&(n.aroundCoord=s.aroundCoord),void 0!==s.pinchAround&&(n.pinchAround=s.pinchAround),s.noInertia&&(n.noInertia=s.noInertia),e.extend(r,l),e.extend(i,u)}}catch(c){a.e(c)}finally{a.f()}this._updateMapTransform(n,r,i),this._changes=[]}},{key:"_updateMapTransform",value:function(t,n,r){var i=this,a=this._map,o=a.transform,s=function(e){return[e.x,e.y,e.z]};if(function(e){var t=i._eventsInProgress.drag;return t&&!i._handlersById[t.handlerName].isActive()}()&&!ra(t)){var l=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",l!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&a._stop(!0),ra(t)){var u=t.panDelta,c=t.zoomDelta,h=t.bearingDelta,f=t.pitchDelta,d=t.around,p=t.aroundCoord,m=t.pinchAround;o._isCameraConstrained&&(c>0&&(c=0),o._isCameraConstrained=!1),void 0!==m&&(d=m),(c||function(e){return n[e]&&!i._eventsInProgress[e]}("drag"))&&d&&(this._dragOrigin=s(o.pointCoordinate3D(d)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",a._stop(!0),d=d||a.transform.centerPoint,h&&(o.bearing+=h),f&&(o.pitch+=f),o._updateCameraState();var v=[0,0,0];if(u)if("mercator"===o.projection.name){var g=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d).dir),y=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(d.sub(u)).dir);v[0]=y[0]-g[0],v[1]=y[1]-g[1]}else{var _=o.pointCoordinate(d);if("globe"===o.projection.name){u=u.rotate(-o.angle);var x=o._pixelsPerMercatorPixel/o.worldSize;v[0]=-u.x*e.mercatorScale(e.latFromMercatorY(_.y))*x,v[1]=-u.y*e.mercatorScale(o.center.lat)*x}else{var b=o.pointCoordinate(d.sub(u));_&&b&&(v[0]=b.x-_.x,v[1]=b.y-_.y)}}var w=o.zoom,k=[0,0,0];if(c){var E=s(p||o.pointCoordinate3D(d)),S={dir:e.normalize([],e.sub([],E,o._camera.position))};if(S.dir[2]<0){var T=o.zoomDeltaToMovement(E,c);e.scale$2(k,S.dir,T)}}var C=e.add(v,v,k);o._translateCameraConstrained(C),c&&Math.abs(o.zoom-w)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}else this._fireEvents(n,r,!0)}},{key:"_fireEvents",value:function(t,n,r){var i=this,a=ea(this._eventsInProgress),o=ea(t),s={};for(var l in t){var u=t[l].originalEvent;this._eventsInProgress[l]||(s["".concat(l,"start")]=u),this._eventsInProgress[l]=t[l]}for(var c in!a&&o&&this._fireEvent("movestart",o.originalEvent),s)this._fireEvent(c,s[c]);for(var h in o&&this._fireEvent("move",o.originalEvent),t){var f=t[h].originalEvent;this._fireEvent(h,f)}var d,p={};for(var m in this._eventsInProgress){var v=this._eventsInProgress[m],g=v.handlerName,y=v.originalEvent;this._handlersById[g].isActive()||(delete this._eventsInProgress[m],d=n[g]||y,p["".concat(m,"end")]=d)}for(var _ in p)this._fireEvent(_,p[_]);var x=ea(this._eventsInProgress);if(r&&(a||o)&&!x){this._updatingCamera=!0;var b=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),w=function(e){return 0!==e&&-i._bearingSnap<e&&e<i._bearingSnap};b?(w(b.bearing||this._map.getBearing())&&(b.bearing=0),this._map.easeTo(b,{originalEvent:d})):(this._map.fire(new e.Event("moveend",{originalEvent:d})),w(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}},{key:"_fireEvent",value:function(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}},{key:"_requestFrame",value:function(){var e=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(t){e._frameId=void 0,e.handleEvent(new ta("renderFrame",{timeStamp:t})),e._applyChanges()}))}},{key:"_triggerRenderFrame",value:function(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}]),t}(),aa="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.",oa=function(t){m(r,t);var n=v(r);function r(t,a){var o;return d(this,r),(o=n.call(this))._moving=!1,o._zooming=!1,o.transform=t,o._bearingSnap=a.bearingSnap,o._respectPrefersReducedMotion=!1!==a.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],i(o)),o}return p(r,[{key:"getCenter",value:function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}},{key:"setCenter",value:function(e,t){return this.jumpTo({center:e},t)}},{key:"panBy",value:function(t,n,r){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}},{key:"panTo",value:function(t,n,r){return this.easeTo(e.extend({center:t},n),r)}},{key:"getZoom",value:function(){return this.transform.zoom}},{key:"setZoom",value:function(e,t){return this.jumpTo({zoom:e},t),this}},{key:"zoomTo",value:function(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}},{key:"zoomIn",value:function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}},{key:"zoomOut",value:function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}},{key:"getBearing",value:function(){return this.transform.bearing}},{key:"setBearing",value:function(e,t){return this.jumpTo({bearing:e},t),this}},{key:"getPadding",value:function(){return this.transform.padding}},{key:"setPadding",value:function(e,t){return this.jumpTo({padding:e},t),this}},{key:"rotateTo",value:function(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}},{key:"resetNorth",value:function(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}},{key:"resetNorthPitch",value:function(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}},{key:"snapToNorth",value:function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}},{key:"getPitch",value:function(){return this.transform.pitch}},{key:"setPitch",value:function(e,t){return this.jumpTo({pitch:e},t),this}},{key:"cameraForBounds",value:function(t,n){t=e.LngLatBounds.convert(t);var r=n&&n.bearing||0,i=n&&n.pitch||0,a=t.getNorthWest(),o=t.getSouthEast();return this._cameraForBounds(this.transform,a,o,r,i,n)}},{key:"_extendCameraOptions",value:function(t){var n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){var r=t.padding;t.padding={top:r,bottom:r,right:r,left:r}}return t.padding=e.extend(n,t.padding),t}},{key:"_minimumAABBFrustumDistance",value:function(e,t){var n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}},{key:"_cameraForBoundsOnGlobe",value:function(t,n,r,i,a,o){var s=t.clone(),l=this._extendCameraOptions(o);s.bearing=i,s.pitch=a;var u=e.LngLat.convert(n),c=e.LngLat.convert(r),h=.5*(u.lat+c.lat),f=.5*(u.lng+c.lng),d=e.latLngToECEF(h,f),p=e.normalize([],d),m=e.normalize([],e.cross([],p,[0,1,0])),v=e.cross([],m,p),g=[m[0],m[1],m[2],0,v[0],v[1],v[2],0,p[0],p[1],p[2],0,0,0,0,1],y=[d,e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(h,u.lng),e.latLngToECEF(h,c.lng),e.latLngToECEF(u.lat,f),e.latLngToECEF(c.lat,f)],_=e.Aabb.fromPoints(y.map((function(t){return[e.dot(m,t),e.dot(v,t),e.dot(p,t)]}))),x=e.transformMat4([],_.center,g);0===e.squaredLength(x)&&e.set(x,0,0,1),e.normalize(x,x),e.scale$2(x,x,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(x);var b=s.getWorldToCameraMatrix(),w=e.invert(new Float64Array(16),b);_=e.Aabb.applyTransform(_,e.multiply([],b,g)),e.transformMat4(x,x,b);var k=.5*(_.max[2]-_.min[2]),E=this._minimumAABBFrustumDistance(s,_),S=e.scale$2([],[0,0,1],k),T=e.add(S,x,S),C=E+(0===s.pitch?0:e.distance(x,T)),M=s.globeCenterInViewSpace,A=e.sub([],x,[M[0],M[1],M[2]]);e.normalize(A,A),e.scale$2(A,A,C);var P=e.add([],x,A);e.transformMat4(P,P,w);var I=e.earthRadius/e.GLOBE_RADIUS,z=e.length(P),L=e.mercatorZfromAltitude(Math.max(z*I-e.earthRadius,Number.EPSILON),0),D=Math.min(s.zoomFromMercatorZAdjusted(L),l.maxZoom);return D>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=D,this._cameraForBounds(s,n,r,i,a,o)):{center:s.center,zoom:D,bearing:i,pitch:a}}},{key:"queryTerrainElevation",value:function(t,n){var r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}},{key:"_cameraForBounds",value:function(t,n,r,i,a,o){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,a,o);var s=t.clone(),l=this._extendCameraOptions(o),u=s.padding;s.bearing=i,s.pitch=a;var c=e.LngLat.convert(n),h=e.LngLat.convert(r),f=new e.LngLat(c.lng,h.lat),d=new e.LngLat(h.lng,c.lat),p=s.project(c),m=s.project(h),v=this.queryTerrainElevation(c),g=this.queryTerrainElevation(h),y=this.queryTerrainElevation(f),_=this.queryTerrainElevation(d),x=[[p.x,p.y,Math.min(v||0,g||0,y||0,_||0)],[m.x,m.y,Math.max(v||0,g||0,y||0,_||0)]],b=e.Aabb.fromPoints(x),w=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,w);var E=e.sub([],b.max,b.min),S=u.left||0,T=u.right||0,C=u.bottom||0,M=u.top||0,A=l.padding,P=A.left,I=A.right,z=A.top,L=A.bottom,D=.5*(S+T),R=.5*(M+C),O=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(S+T+P+I))/E[0],(s.height-(C+M+L+z))/E[1])),l.maxZoom),j=s.scale/s.zoomScale(O);b=new e.Aabb([b.min[0]-(P+D)*j,b.min[1]-(L+R)*j,b.min[2]],[b.max[0]+(I+D)*j,b.max[1]+(z+R)*j,b.max[2]]);var N=.5*E[2],B=this._minimumAABBFrustumDistance(s,b),F=[0,0,1,0];e.transformMat4$1(F,F,w),e.normalize$2(F,F);var $=e.scale$2([],F,B+N),V=e.add([],b.center,$),U=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(i));b.center[0]-=U.x*j,b.center[1]+=U.y*j,e.transformMat4(b.center,b.center,k),e.transformMat4(V,V,k);var Z=[b.center[0],b.center[1],V[2]*s.pixelsPerMeter];e.scale$2(Z,Z,1/s.worldSize);var H=e.lngFromMercatorX(Z[0]),W=e.latFromMercatorY(Z[1]),q=Math.min(s._zoomFromMercatorZ(Z[2]),l.maxZoom),G=new e.LngLat(H,W);return s.mercatorFromTransition&&q<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=q,this._cameraForBounds(s,n,r,i,a,o)):{center:G,zoom:q,bearing:i,pitch:a}}},{key:"fitBounds",value:function(e,t,n){var r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}},{key:"fitScreenCoordinates",value:function(t,n,r,i,a){var o=e.Point.convert(t),s=e.Point.convert(n),l=new e.Point(Math.min(o.x,s.x),Math.min(o.y,s.y)),u=new e.Point(Math.max(o.x,s.x),Math.max(o.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,s))return this;var c=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(u),f=this.transform.pointLocation3D(new e.Point(l.x,u.y)),d=this.transform.pointLocation3D(new e.Point(u.x,l.y)),p=[Math.min(c.lng,h.lng,f.lng,d.lng),Math.min(c.lat,h.lat,f.lat,d.lat)],m=[Math.max(c.lng,h.lng,f.lng,d.lng),Math.max(c.lat,h.lat,f.lat,d.lat)],v=i&&i.pitch?i.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,p,m,r,v,i);return this._fitInternal(g,i,a)}},{key:"_fitInternal",value:function(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}},{key:"jumpTo",value:function(t,n){this.stop();var r=t.preloadOnly?this.transform.clone():this.transform,i=!1,a=!1,o=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(a=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(o=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}},{key:"getFreeCameraOptions",value:function(){return this.transform.projection.supportsFreeCamera||e.warnOnce(aa),this.transform.getFreeCameraOptions()}},{key:"setFreeCameraOptions",value:function(t,n){var r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(aa),this;this.stop();var i=r.zoom,a=r.pitch,o=r.bearing;r.setFreeCameraOptions(t);var s=i!==r.zoom,l=a!==r.pitch,u=o!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),u&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}},{key:"easeTo",value:function(t,n){var r=this;this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);var i,a,o,s=this.transform,l=this.getZoom(),u=this.getBearing(),c=this.getPitch(),h=this.getPadding(),f="zoom"in t?+t.zoom:l,d="bearing"in t?this._normalizeBearing(t.bearing,u):u,p="pitch"in t?+t.pitch:c,m="padding"in t?t.padding:s.padding,v=e.Point.convert(t.offset);if("globe"===s.projection.name){var g=e.MercatorCoordinate.fromLngLat(s.center),y=v.rotate(-s.angle);g.x+=y.x/s.worldSize,g.y+=y.y/s.worldSize;var _=g.toLngLat(),x=e.LngLat.convert(t.center||_);this._normalizeCenter(x),i=s.centerPoint.add(y),a=new e.Point(g.x,g.y).mult(s.worldSize),o=new e.Point(e.mercatorXfromLng(x.lng),e.mercatorYfromLat(x.lat)).mult(s.worldSize).sub(a)}else{i=s.centerPoint.add(v);var b=s.pointLocation(i),w=e.LngLat.convert(t.center||b);this._normalizeCenter(w),a=s.project(b),o=s.project(w).sub(a)}var k,E,S=s.zoomScale(f-l);t.around&&(k=e.LngLat.convert(t.around),E=s.locationPoint(k));var T=this._zooming||f!==l,C=this._rotating||u!==d,M=this._pitching||p!==c,A=!s.isPaddingEqual(m),P=function(s){return function(g){if(T&&(s.zoom=e.number(l,f,g)),C&&(s.bearing=e.number(u,d,g)),M&&(s.pitch=e.number(c,p,g)),A&&(s.interpolatePadding(h,m,g),i=s.centerPoint.add(v)),k)s.setLocationAtPoint(k,E);else{var y=s.zoomScale(s.zoom-l),_=f>l?Math.min(2,S):Math.max(.5,S),x=Math.pow(_,1-g),b=s.unproject(a.add(o.mult(g*x)).mult(y));s.setLocationAtPoint(s.renderWorldCopies?b.wrap():b,i)}return t.preloadOnly||r._fireMoveEvents(n),s}};if(t.preloadOnly){var I=this._emulate(P,t.duration,s);return this._preloadTiles(I),this}var z={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=T,this._rotating=C,this._pitching=M,this._padding=A,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,z),this._ease(P(s),(function(e){s.recenterOnTerrain(),r._afterEase(n,e)}),t),this}},{key:"_prepareEase",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}},{key:"_fireMoveEvents",value:function(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}},{key:"_afterEase",value:function(t,n){if(!this._easeId||!n||this._easeId!==n){this._easeId=void 0,this.transform.cameraElevationReference="ground";var r=this._zooming,i=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}}},{key:"flyTo",value:function(t,n){var r=this;if(this._prefersReducedMotion(t)){var i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);var a=this.transform,o=this.getZoom(),s=this.getBearing(),l=this.getPitch(),u=this.getPadding(),c="zoom"in t?e.clamp(+t.zoom,a.minZoom,a.maxZoom):o,h="bearing"in t?this._normalizeBearing(t.bearing,s):s,f="pitch"in t?+t.pitch:l,d="padding"in t?t.padding:a.padding,p=a.zoomScale(c-o),m=e.Point.convert(t.offset),v=a.centerPoint.add(m),g=a.pointLocation(v),y=e.LngLat.convert(t.center||g);this._normalizeCenter(y);var _=a.project(g),x=a.project(y).sub(_),b=t.curve,w=Math.max(a.width,a.height),k=w/p,E=x.mag();if("minZoom"in t){var S=e.clamp(Math.min(t.minZoom,o,c),a.minZoom,a.maxZoom),T=w/a.zoomScale(S-o);b=Math.sqrt(T/E*2)}var C=b*b;function M(e){var t=(k*k-w*w+(e?-1:1)*C*C*E*E)/(2*(e?k:w)*C*E);return Math.log(Math.sqrt(t*t+1)-t)}function A(e){return(Math.exp(e)-Math.exp(-e))/2}function P(e){return(Math.exp(e)+Math.exp(-e))/2}var I=M(0),z=function(e){return P(I)/P(I+b*e)},L=function(e){return w*((P(I)*(A(t=I+b*e)/P(t))-A(I))/C)/E;var t},D=(M(1)-I)/b;if(Math.abs(E)<1e-6||!isFinite(D)){if(Math.abs(w-k)<1e-6)return this.easeTo(t,n);var R=k<w?-1:1;D=Math.abs(Math.log(k/w))/b,L=function(){return 0},z=function(e){return Math.exp(R*b*e)}}t.duration="duration"in t?+t.duration:1e3*D/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);var O=s!==h,j=f!==l,N=!a.isPaddingEqual(d),B=function(i){return function(a){var p=a*D,g=1/z(p);i.zoom=1===a?c:o+i.scaleZoom(g),O&&(i.bearing=e.number(s,h,a)),j&&(i.pitch=e.number(l,f,a)),N&&(i.interpolatePadding(u,d,a),v=i.centerPoint.add(m));var b=1===a?y:i.unproject(_.add(x.mult(L(p))).mult(g));return i.setLocationAtPoint(i.renderWorldCopies?b.wrap():b,v),i._updateCameraOnTerrain(),t.preloadOnly||r._fireMoveEvents(n),i}};if(t.preloadOnly){var F=this._emulate(B,t.duration,a);return this._preloadTiles(F),this}return this._zooming=!0,this._rotating=O,this._pitching=j,this._padding=N,this._prepareEase(n,!1),this._ease(B(a),(function(){return r._afterEase(n)}),t),this}},{key:"isEasing",value:function(){return!!this._easeFrameId}},{key:"stop",value:function(){return this._stop()}},{key:"_stop",value:function(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){var n=this._onEaseEnd;this._onEaseEnd=void 0,n.call(this,t)}if(!e){var r=this.handlers;r&&r.stop(!1)}return this}},{key:"_ease",value:function(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}},{key:"_renderFrameCallback",value:function(){var t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}},{key:"_normalizeBearing",value:function(t,n){t=e.wrap(t,-180,180);var r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}},{key:"_normalizeCenter",value:function(e){var t=this.transform;if(t.renderWorldCopies&&!t.maxBounds){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}}},{key:"_prefersReducedMotion",value:function(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}},{key:"_emulate",value:function(e,t,n){for(var r=Math.ceil(15*t/1e3),i=[],a=e(n.clone()),o=0;o<=r;o++){var s=a(o/r);i.push(s.clone())}return i}}]),r}(e.Evented),sa=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,t),this.options=n,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-right"}},{key:"onAdd",value:function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=y("button","mapboxgl-ctrl-attrib-button",this._container),y("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=y("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}},{key:"_setElementTitle",value:function(e,t){var n=this._map._getUIString("AttributionControl.".concat(t));e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},{key:"_toggleAttribution",value:function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}},{key:"_updateEditLink",value:function(){var t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));var n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){var r=n.reduce((function(e,t,r){return t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<n.length-1?"&":"")),e}),"?");t.href="".concat(e.config.FEEDBACK_URL,"/").concat(r,"#").concat(ci(this._map,!0)),t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}},{key:"_updateData",value:function(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}},{key:"_updateAttributions",value:function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style._sourceCaches;for(var r in n){var i=n[r];if(i.used){var a=i.getSource();a.attribution&&e.indexOf(a.attribution)<0&&e.push(a.attribution)}}e.sort((function(e,t){return e.length-t.length})),e=e.filter((function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[].concat(c(this.options.customAttribution),c(e)):e.unshift(this.options.customAttribution));var o=e.join(" | ");o!==this._attribHTML&&(this._attribHTML=o,e.length?(this._innerContainer.innerHTML=o,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}}},{key:"_updateCompact",value:function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}]),t}(),la=function(){function t(){d(this,t),e.bindAll(["_updateLogo","_updateCompact"],this)}return p(t,[{key:"onAdd",value:function(e){this._map=e,this._container=y("div","mapboxgl-ctrl");var t=y("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}},{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_updateLogo",value:function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}},{key:"_logoRequired",value:function(){if(!this._map.style)return!0;var e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(var t in e){var n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}},{key:"_updateCompact",value:function(){var e=this._container.children;if(e.length){var t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}]),t}(),ua=function(){function e(){d(this,e),this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}return p(e,[{key:"add",value:function(e){var t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}},{key:"remove",value:function(e){var t,n=this._currentlyRunning,r=n?this._queue.concat(n):this._queue,i=f(r);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.id===e)return void(a.cancelled=!0)}}catch(o){i.e(o)}finally{i.f()}}},{key:"run",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this._currentlyRunning=this._queue;this._queue=[];var n,r=f(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.cancelled&&(i.callback(e),this._cleared))break}}catch(a){r.e(a)}finally{r.f()}this._cleared=!1,this._currentlyRunning=!1}},{key:"clear",value:function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}]),e}();function ca(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){var i=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(l||Math.abs(i.lng-r.center.lng)<o)?t=i:r.locationPoint(a).distSqr(n)<s&&(l||Math.abs(a.lng-r.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-r.center.lng)>180;){var u=r.locationPoint(t);if(u.x>=0&&u.y>=0&&u.x<=r.width&&u.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}var ha={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},fa=function(t){m(r,t);var n=v(r);function r(t,a){var o;if(d(this,r),o=n.call(this),(t instanceof e.window.HTMLElement||a)&&(t=e.extend({element:t},a)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],i(o)),o._anchor=t&&t.anchor||"center",o._color=t&&t.color||"#3FB1CE",o._scale=t&&t.scale||1,o._draggable=t&&t.draggable||!1,o._clickTolerance=t&&t.clickTolerance||0,o._isDragging=!1,o._state="inactive",o._rotation=t&&t.rotation||0,o._rotationAlignment=t&&t.rotationAlignment||"auto",o._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",o._updateMoving=function(){return o._update(!0)},o._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)o._element=t.element,o._offset=e.Point.convert(t&&t.offset||[0,0]);else{o._defaultMarker=!0,o._element=y("div");var s=41,u=27,c=_("svg",{display:"block",height:s*o._scale+"px",width:u*o._scale+"px",viewBox:"0 0 ".concat(u," ").concat(s)},o._element),h=_("radialGradient",{id:"shadowGradient"},_("defs",{},c));_("stop",{offset:"10%","stop-opacity":.4},h),_("stop",{offset:"100%","stop-opacity":.05},h),_("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},c),_("path",{fill:o._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},c),_("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},c),_("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},c),o._offset=e.Point.convert(t&&t.offset||[0,-14])}o._element.hasAttribute("aria-label")||o._element.setAttribute("aria-label","Map marker"),o._element.classList.add("mapboxgl-marker"),o._element.addEventListener("dragstart",(function(e){e.preventDefault()})),o._element.addEventListener("mousedown",(function(e){e.preventDefault()}));var f=o._element.classList;for(var p in ha)f.remove("mapboxgl-marker-anchor-".concat(p));return f.add("mapboxgl-marker-anchor-".concat(o._anchor)),o._popup=null,l(o)}return p(r,[{key:"addTo",value:function(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}},{key:"remove",value:function(){var e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}},{key:"getElement",value:function(){return this._element}},{key:"setPopup",value:function(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){var t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}},{key:"_onKeyPress",value:function(e){var t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}},{key:"_onMapClick",value:function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}},{key:"getPopup",value:function(){return this._popup}},{key:"togglePopup",value:function(){var e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}},{key:"_behindTerrain",value:function(){var e=this._map,t=this._pos;if(!e||!t)return!1;var n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;var i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}},{key:"_evaluateOpacity",value:function(){var t=this._map;if(t){var n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)this._clearFadeTimer();else{var r,i=t.unproject(n);t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity="".concat(r),this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}}}},{key:"_clearFadeTimer",value:function(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}},{key:"_updateDOM",value:function(){var e=this._pos;if(e&&this._map){var t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(ha[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}}},{key:"_calculateXYTransform",value:function(){var t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){var i=n.getPitch();return i?"rotateX(".concat(i,"deg)"):""}var a=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),s=Math.abs(o.x)+Math.abs(o.y);if(0===s)return"";var l=a/s;return"rotateX(".concat(-o.y*l,"deg) rotateY(").concat(o.x*l,"deg)")}},{key:"_calculateZTransform",value:function(){var t=this._pos,n=this._map;if(!n||!t)return"";var r=0,i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){var a=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),o=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(a);r=e.radToDeg(Math.atan2(o.y,o.x))-90}else r=-n.getBearing();else if("horizon"===i){var s=e.smoothstep(4,6,n.getZoom()),l=e.globeCenterToScreenPoint(n.transform);l.y+=s*n.transform.height;var u=t.sub(l),c=e.radToDeg(Math.atan2(u.y,u.x));r=(c>90?c-270:c+90)*(1-s)}return(r+=this._rotation)?"rotateZ(".concat(r,"deg)"):""}},{key:"_update",value:function(t){var n=this;e.window.cancelAnimationFrame(this._updateFrameId);var r=this._map;r&&(r.transform.renderWorldCopies&&(this._lngLat=ca(this._lngLat,this._pos,r.transform)),this._pos=r.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((function(){n._element&&n._pos&&n._anchor&&(n._pos=n._pos.round(),n._updateDOM())})):this._pos=this._pos.round(),r._requestDomTask((function(){n._map&&(n._element&&n._pos&&n._anchor&&n._updateDOM(),(r._showingGlobe()||r.getTerrain()||r.getFog())&&!n._fadeTimer&&(n._fadeTimer=setTimeout(n._evaluateOpacity.bind(n),60)))})))}},{key:"getOffset",value:function(){return this._offset}},{key:"setOffset",value:function(t){return this._offset=e.Point.convert(t),this._update(),this}},{key:"_onMove",value:function(t){var n=this._map;if(n){var r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){var a=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<a)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}}},{key:"_onUp",value:function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;var t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}},{key:"_addDragHandler",value:function(e){var t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}},{key:"setDraggable",value:function(e){this._draggable=!!e;var t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}},{key:"isDraggable",value:function(){return this._draggable}},{key:"setRotation",value:function(e){return this._rotation=e||0,this._update(),this}},{key:"getRotation",value:function(){return this._rotation}},{key:"setRotationAlignment",value:function(e){return this._rotationAlignment=e||"auto",this._update(),this}},{key:"getRotationAlignment",value:function(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}},{key:"setPitchAlignment",value:function(e){return this._pitchAlignment=e||"auto",this._update(),this}},{key:"getPitchAlignment",value:function(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}},{key:"setOccludedOpacity",value:function(e){return this._occludedOpacity=e||.2,this._update(),this}},{key:"getOccludedOpacity",value:function(){return this._occludedOpacity}}]),r}(e.Evented),da={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},pa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ma(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.Point(0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){var r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.Point(0,t);case"top-left":return new e.Point(r,r);case"top-right":return new e.Point(-r,r);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(r,-r);case"bottom-right":return new e.Point(-r,-r);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[n]||[0,0])}var va=function(){function t(e){d(this,t),this.jumpTo(e)}return p(t,[{key:"getValue",value:function(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;var n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}},{key:"isEasing",value:function(e){return e>=this._startTime&&e<=this._endTime}},{key:"jumpTo",value:function(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}},{key:"easeTo",value:function(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}]),t}(),ga={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},ya={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},_a={showCompass:!0,showZoom:!0,visualizePitch:!1},xa=function(){function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,t),this._clickTolerance=10,this.element=r,this.mouseRotate=new zi({clickTolerance:n.dragRotate._mouseRotate._clickTolerance}),this.map=n,i&&(this.mousePitch=new Li({clickTolerance:n.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),r.addEventListener("mousedown",this.mousedown),r.addEventListener("touchstart",this.touchstart,{passive:!1}),r.addEventListener("touchmove",this.touchmove),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.reset)}return p(t,[{key:"down",value:function(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),k()}},{key:"move",value:function(e,t){var n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){var a=this.mousePitch.mousemoveWindow(e,t),o=a&&a.pitchDelta;o&&n.setPitch(n.getPitch()+o)}}},{key:"off",value:function(){var e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}},{key:"offTemp",value:function(){E(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}},{key:"mousedown",value:function(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:function(){return t.preventDefault()}}),C(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}},{key:"mousemove",value:function(e){this.move(e,C(this.element,e))}},{key:"mouseup",value:function(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}},{key:"touchstart",value:function(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=M(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return e.preventDefault()}},this._startPos))}},{key:"touchmove",value:function(e){1!==e.targetTouches.length?this.reset():(this._lastPos=M(this.element,e.targetTouches)[0],this.move({preventDefault:function(){return e.preventDefault()}},this._lastPos))}},{key:"touchend",value:function(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}},{key:"reset",value:function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}]),t}(),ba={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},wa={maxWidth:100,unit:"metric"},ka={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ea={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:function(t){m(c,t);var a=v(c);function c(t){var n;if(d(this,c),e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},ya,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),(n=a.call(this,new si(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t))._interactive=t.interactive,n._minTileCacheSize=t.minTileCacheSize,n._maxTileCacheSize=t.maxTileCacheSize,n._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,n._preserveDrawingBuffer=t.preserveDrawingBuffer,n._antialias=t.antialias,n._useWebGL2=t.useWebGL2,n._trackResize=t.trackResize,n._bearingSnap=t.bearingSnap,n._refreshExpiredTiles=t.refreshExpiredTiles,n._fadeDuration=t.fadeDuration,n._isInitialLoad=!0,n._crossSourceCollisions=t.crossSourceCollisions,n._collectResourceTiming=t.collectResourceTiming,n._optimizeForTerrain=t.optimizeForTerrain,n._language=n._parseLanguage(t.language),n._worldview=t.worldview,n._renderTaskQueue=new ua,n._domRenderTaskQueue=new ua,n._controls=[],n._markers=[],n._popups=[],n._mapId=e.uniqueId(),n._locale=e.extend({},ga,t.locale),n._clickTolerance=t.clickTolerance,n._cooperativeGestures=t.cooperativeGestures,n._performanceMetricsCollection=t.performanceMetricsCollection,n._containerWidth=0,n._containerHeight=0,n._averageElevationLastSampledAt=-1/0,n._averageElevationExaggeration=0,n._averageElevation=new va(0),n._interactionRange=[1/0,-1/0],n._visibilityHidden=0,n._useExplicitProjection=!1,n._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),n._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(n._container=e.window.document.getElementById(t.container),!n._container)throw new Error("Container '".concat(t.container,"' not found."))}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");n._container=t.container}if(n._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&n.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],i(n)),n._setupContainer(),n._setupPainter(),void 0===n.painter)throw new Error("Failed to initialize WebGL.");return n.on("move",(function(){return n._update(!1)})),n.on("moveend",(function(){return n._update(!1)})),n.on("zoom",(function(){return n._update(!0)})),void 0!==e.window&&(e.window.addEventListener("online",n._onWindowOnline,!1),e.window.addEventListener("resize",n._onWindowResize,!1),e.window.addEventListener("orientationchange",n._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",n._onWindowResize,!1),e.window.addEventListener("visibilitychange",n._onVisibilityChange,!1)),n.handlers=new ia(i(n),t),n._localFontFamily=t.localFontFamily,n._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&n.setStyle(t.style,{localFontFamily:n._localFontFamily,localIdeographFontFamily:n._localIdeographFontFamily}),t.projection&&n.setProjection(t.projection),n._hash=t.hash&&new ui("string"==typeof t.hash&&t.hash||void 0).addTo(i(n)),n._hash&&n._hash._onHashChange()||(n.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(n.resize(),n.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),n.resize(),t.attributionControl&&n.addControl(new sa({customAttribution:t.customAttribution})),n._logoControl=new la,n.addControl(n._logoControl,t.logoPosition),n.on("style.load",(function(){n.transform.unmodified&&n.jumpTo(n.style.stylesheet)})),n.on("data",(function(t){n._update("style"===t.dataType),n.fire(new e.Event("".concat(t.dataType,"data"),t))})),n.on("dataloading",(function(t){n.fire(new e.Event("".concat(t.dataType,"dataloading"),t))})),l(n)}return p(c,[{key:"_getMapId",value:function(){return this._mapId}},{key:"addControl",value:function(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var r=t.onAdd(this);this._controls.push(t);var i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}},{key:"removeControl",value:function(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}},{key:"hasControl",value:function(e){return this._controls.indexOf(e)>-1}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getCanvas",value:function(){return this._canvas}},{key:"resize",value:function(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));var n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}},{key:"getBounds",value:function(){return this.transform.getBounds()}},{key:"getMaxBounds",value:function(){return this.transform.getMaxBounds()||null}},{key:"setMaxBounds",value:function(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}},{key:"setMinZoom",value:function(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}},{key:"getMinZoom",value:function(){return this.transform.minZoom}},{key:"setMaxZoom",value:function(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}},{key:"getMaxZoom",value:function(){return this.transform.maxZoom}},{key:"setMinPitch",value:function(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}},{key:"getMinPitch",value:function(){return this.transform.minPitch}},{key:"setMaxPitch",value:function(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}},{key:"getMaxPitch",value:function(){return this.transform.maxPitch}},{key:"getRenderWorldCopies",value:function(){return this.transform.renderWorldCopies}},{key:"setRenderWorldCopies",value:function(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}},{key:"getLanguage",value:function(){return this._language}},{key:"_parseLanguage",value:function(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((function(t){return"auto"===t?e.window.navigator.language:t})):t}},{key:"setLanguage",value:function(e){var t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();var n,r=f(this._controls);try{for(r.s();!(n=r.n()).done;){var i=n.value;i._setLanguage&&i._setLanguage(this._language)}}catch(a){r.e(a)}finally{r.f()}return this}},{key:"getWorldview",value:function(){return this._worldview}},{key:"setWorldview",value:function(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}},{key:"getProjection",value:function(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}},{key:"_showingGlobe",value:function(){return"globe"===this.transform.projection.name}},{key:"setProjection",value:function(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}},{key:"_updateProjectionTransition",value:function(){if("globe"===this.getProjection().name){var t,n=this.transform,r=n.projection.name;"globe"===r&&n.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(n.setMercatorFromTransition(),t=!0):"mercator"===r&&n.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(n.setProjection({name:"globe"}),t=!0),t&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}}},{key:"_prioritizeAndUpdateProjection",value:function(e,t){return this._updateProjection(e||t||{name:"mercator"})}},{key:"_updateProjection",value:function(t){var n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){for(var r in this.painter.clearBackgroundTiles(),this.style._sourceCaches)this.style._sourceCaches[r].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}},{key:"project",value:function(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}},{key:"unproject",value:function(t){return this.transform.pointLocation3D(e.Point.convert(t))}},{key:"isMoving",value:function(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}},{key:"isZooming",value:function(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}},{key:"isRotating",value:function(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}},{key:"_isDragging",value:function(){return this.handlers&&this.handlers._isDragging()||!1}},{key:"_createDelegatedListener",value:function(e,t,n){var i=this;if("mouseenter"===e||"mouseover"===e){var a=!1,o=function(r){var o=t.filter((function(e){return i.getLayer(e)})),s=o.length?i.queryRenderedFeatures(r.point,{layers:o}):[];s.length?a||(a=!0,n.call(i,new _i(e,i,r.originalEvent,{features:s}))):a=!1},s=function(){a=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:o,mouseout:s}}}if("mouseleave"===e||"mouseout"===e){var l=!1,u=function(r){var a=t.filter((function(e){return i.getLayer(e)}));(a.length?i.queryRenderedFeatures(r.point,{layers:a}):[]).length?l=!0:l&&(l=!1,n.call(i,new _i(e,i,r.originalEvent)))},c=function(t){l&&(l=!1,n.call(i,new _i(e,i,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:u,mouseout:c}}}var h=function(e){var r=t.filter((function(e){return i.getLayer(e)})),a=r.length?i.queryRenderedFeatures(e.point,{layers:r}):[];a.length&&(e.features=a,n.call(i,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:r({},e,h)}}},{key:"on",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"on",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r),r.delegates)this.on(i,r.delegates[i]);return this}},{key:"once",value:function(e,t,n){if(void 0===n)return o(s(c.prototype),"once",this).call(this,e,t);Array.isArray(t)||(t=[t]);var r=this._createDelegatedListener(e,t,n);for(var i in r.delegates)this.once(i,r.delegates[i]);return this}},{key:"off",value:function(e,t,n){var r=this;if(void 0===n)return o(s(c.prototype),"off",this).call(this,e,t);t=new Set(Array.isArray(t)?t:[t]);var i=function(e,t){if(e.size!==t.size)return!1;var n,r=f(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0},a=this._delegatedListeners?this._delegatedListeners[e]:void 0;return a&&function(e){for(var a=0;a<e.length;a++){var o=e[a];if(o.listener===n&&i(o.layers,t)){for(var s in o.delegates)r.off(s,o.delegates[s]);return e.splice(a,1),r}}}(a),this}},{key:"queryRenderedFeatures",value:function(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}},{key:"querySourceFeatures",value:function(e,t){return this.style.querySourceFeatures(e,t)}},{key:"isPointOnSurface",value:function(t){var n=this.transform.projection.name;return"globe"!==n&&"mercator"!==n&&e.warnOnce("".concat(n," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(e.Point.convert(t))}},{key:"setStyle",value:function(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}},{key:"_getUIString",value:function(e){var t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}},{key:"_updateStyle",value:function(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new hn(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}},{key:"_lazyInitEmptyStyle",value:function(){this.style||(this.style=new hn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}},{key:"_diffStyle",value:function(t,n){var r=this;if("string"==typeof t){var i=this._requestManager.normalizeStyleURL(t),a=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(a,(function(t,i){t?r.fire(new e.ErrorEvent(t)):i&&r._updateDiff(i,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}},{key:"_updateDiff",value:function(t,n){try{this.style.setState(t)&&this._update(!0)}catch(u){e.warnOnce("Unable to perform style diff: ".concat(u.message||u.error||u,".  Rebuilding the style from scratch.")),this._updateStyle(t,n)}}},{key:"getStyle",value:function(){if(this.style)return this.style.serialize()}},{key:"isStyleLoaded",value:function(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}},{key:"addSource",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}},{key:"isSourceLoaded",value:function(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}},{key:"areTilesLoaded",value:function(){var e=this.style&&this.style._sourceCaches;for(var t in e){var n=e[t]._tiles;for(var r in n){var i=n[r];if("loaded"!==i.state&&"errored"!==i.state)return!1}}return!0}},{key:"addSourceType",value:function(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}},{key:"removeSource",value:function(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}},{key:"getSource",value:function(e){return this.style.getSource(e)}},{key:"addImage",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.pixelRatio,a=void 0===i?1:i,o=r.sdf,s=void 0!==o&&o,l=r.stretchX,u=r.stretchY,c=r.content;if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){var h=e.exported.getImageData(n),f=h.width,d=h.height,p=h.data;this.style.addImage(t,{data:new e.RGBAImage({width:f,height:d},p),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{var m=n.width,v=n.height,g=n;this.style.addImage(t,{data:new e.RGBAImage({width:m,height:v},new Uint8Array(g.data)),pixelRatio:a,stretchX:l,stretchY:u,content:c,sdf:s,version:0,userImage:g}),g.onAdd&&g.onAdd(this,t)}}},{key:"updateImage",value:function(t,n){var r=this.style.getImage(t);if(r){var i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,a=i.width,o=i.height;void 0!==a&&void 0!==o?a===r.data.width&&o===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error("The width and height of the updated image (".concat(a,", ").concat(o,")\n                must be that same as the previous version of the image\n                (").concat(r.data.width,", ").concat(r.data.height,")")))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}else this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")))}},{key:"hasImage",value:function(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}},{key:"removeImage",value:function(e){this.style.removeImage(e)}},{key:"loadImage",value:function(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(function(t,r){n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}},{key:"listImages",value:function(){return this.style.listImages()}},{key:"addLayer",value:function(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}},{key:"moveLayer",value:function(e,t){return this.style.moveLayer(e,t),this._update(!0)}},{key:"removeLayer",value:function(e){return this.style.removeLayer(e),this._update(!0)}},{key:"getLayer",value:function(e){return this.style.getLayer(e)}},{key:"setLayerZoomRange",value:function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}},{key:"setFilter",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.style.setFilter(e,t,n),this._update(!0)}},{key:"getFilter",value:function(e){return this.style.getFilter(e)}},{key:"setPaintProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setPaintProperty(e,t,n,r),this._update(!0)}},{key:"getPaintProperty",value:function(e,t){return this.style.getPaintProperty(e,t)}},{key:"setLayoutProperty",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}},{key:"getLayoutProperty",value:function(e,t){return this.style.getLayoutProperty(e,t)}},{key:"setLight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}},{key:"getLight",value:function(){return this.style.getLight()}},{key:"setTerrain",value:function(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}},{key:"getTerrain",value:function(){return this.style?this.style.getTerrain():null}},{key:"setFog",value:function(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}},{key:"getFog",value:function(){return this.style?this.style.getFog():null}},{key:"_queryFogOpacity",value:function(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}},{key:"setFeatureState",value:function(e,t){return this.style.setFeatureState(e,t),this._update()}},{key:"removeFeatureState",value:function(e,t){return this.style.removeFeatureState(e,t),this._update()}},{key:"getFeatureState",value:function(e){return this.style.getFeatureState(e)}},{key:"_updateContainerDimensions",value:function(){if(this._container){for(var t,n,r,i=this._container.getBoundingClientRect().width||400,a=this._container.getBoundingClientRect().height||300,o=this._container;o&&(!n||!r);){var s=e.window.getComputedStyle(o).transform;s&&"none"!==s&&((t=s.match(/matrix.*\((.+)\)/)[1].split(", "))[0]&&"0"!==t[0]&&"1"!==t[0]&&(n=t[0]),t[3]&&"0"!==t[3]&&"1"!==t[3]&&(r=t[3])),o=o.parentElement}this._containerWidth=n?Math.abs(i/n):i,this._containerHeight=r?Math.abs(a/r):a}}},{key:"_detectMissingCSS",value:function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}},{key:"_setupContainer",value:function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=y("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();var t=this._canvasContainer=y("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=y("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);var n=this._controlContainer=y("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(e){r[e]=y("div","mapboxgl-ctrl-".concat(e),n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}},{key:"_resizeCanvas",value:function(t,n){var r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(n,"px")}},{key:"_addMarker",value:function(e){this._markers.push(e)}},{key:"_removeMarker",value:function(e){var t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}},{key:"_addPopup",value:function(e){this._popups.push(e)}},{key:"_removePopup",value:function(e){var t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}},{key:"_setupPainter",value:function(){var t=this,r=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",r),a=i||this._canvas.getContext("webgl",r)||this._canvas.getContext("experimental-webgl",r);a?(this._useWebGL2&&!i&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(a,!0),this.painter=new Gr(a,this.transform,!!i),this.on("data",(function(e){"source"===e.dataType&&t.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(a)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}},{key:"_contextLost",value:function(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}},{key:"_contextRestored",value:function(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}},{key:"_onMapScroll",value:function(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}},{key:"loaded",value:function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}},{key:"_update",value:function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}},{key:"_requestRenderFrame",value:function(e){return this._update(),this._renderTaskQueue.add(e)}},{key:"_cancelRenderFrame",value:function(e){this._renderTaskQueue.remove(e)}},{key:"_requestDomTask",value:function(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}},{key:"_render",value:function(t){var n,r=this,i=this.painter.context.extTimerQuery,a=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),!this._removed){this._updateProjectionTransition();var o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;var s=this.transform.zoom,l=this.transform.pitch,u=e.exported.now(),c=new e.EvaluationParameters(s,{now:u,fadeDuration:o,pitch:l,transition:this.style.getTransition()});this.style.update(c)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);var h=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),h=this._updateAverageElevation(a),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):h=this._updateAverageElevation(a),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){var f=e.exported.now()-a;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout((function(){var t=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),r.fire(new e.Event("gpu-timing-frame",{cpuTime:f,gpuTime:t})),e.window.performance.mark("frame-gpu",{startTime:a,detail:{gpuTime:t}})}),50)}if(this.listens("gpu-timing-layer")){var d=this.painter.collectGpuTimers();setTimeout((function(){var t=r.painter.queryGpuTimers(d);r.fire(new e.Event("gpu-timing-layer",{layerTimes:t}))}),50)}if(this.listens("gpu-timing-deferred-render")){var p=this.painter.collectDeferredRenderGpuQueries();setTimeout((function(){var t=r.painter.queryGpuTimeDeferredRender(p);r.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:t}))}),50)}var m=this._sourcesDirty||this._styleDirty||this._placementDirty||h;if(m||this._repaint)this.triggerRepaint();else{var v=!this.isMoving()&&this.loaded();if(v&&(h=this._updateAverageElevation(a,!0)),h)this.triggerRepaint();else if(this._triggerFrame(!1),v&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){var g=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:g})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||m||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}}},{key:"_forceMarkerAndPopupUpdate",value:function(e){var t,n=f(this._markers);try{for(n.s();!(t=n.n()).done;){var r=t.value;e&&!this.getRenderWorldCopies()&&(r._lngLat=r._lngLat.wrap()),r._update()}}catch(s){n.e(s)}finally{n.f()}var i,a=f(this._popups);try{for(a.s();!(i=a.n()).done;){var o=i.value;!e||this.getRenderWorldCopies()||o._trackPointer||(o._lngLat=o._lngLat.wrap()),o._update()}}catch(s){a.e(s)}finally{a.f()}}},{key:"_updateAverageElevation",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=function(e){return t.transform.averageElevation=e,t._update(!1),!0};if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&r(0);if((n||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){var i=this.transform.averageElevation,a=this.transform.sampleAverageElevation(),o=!1;this.transform.elevation&&(o=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(a)?a=0:this._averageElevationLastSampledAt=e;var s=Math.abs(i-a);if(s>1){if(this._isInitialLoad||o)return this._averageElevation.jumpTo(a),r(a);this._averageElevation.easeTo(a,e,300)}else if(s>1e-4)return this._averageElevation.jumpTo(a),r(a)}return!!this._averageElevation.isEasing(e)&&r(this._averageElevation.getValue(e))}},{key:"_authenticate",value:function(){var t=this;e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(n){if(n&&(n.message===e.AUTH_ERR_MSG||401===n.status)){var r=t.painter.context.gl;e.storeAuthState(r,!1),t._logoControl instanceof la&&t._logoControl._updateLogo(),r&&r.clear(r.DEPTH_BUFFER_BIT|r.COLOR_BUFFER_BIT|r.STENCIL_BUFFER_BIT),t._silenceAuthErrors||t.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(function(){}))}},{key:"_updateTerrain",value:function(){var e=this._isDragging();this.painter.updateTerrain(this.style,e)}},{key:"_calculateSpeedIndex",value:function(){var e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());var n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);var t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}},{key:"_canvasPixelComparison",value:function(e,t,n){for(var r=n[1]-n[0],i=e.length/4,a=0;a<t.length;a++){for(var o=t[a],s=0,l=0;l<o.length;l+=4)o[l]===e[l]&&o[l+1]===e[l+1]&&o[l+2]===e[l+2]&&o[l+3]===e[l+3]&&(s+=1);r+=(n[a+2]-n[a+1])*(1-s/i)}return r}},{key:"remove",value:function(){this._hash&&this._hash.remove();var t,n=f(this._controls);try{for(n.s();!(t=n.n()).done;)t.value.onRemove(this)}catch(i){n.e(i)}finally{n.f()}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));var r=this.painter.context.gl.getExtension("WEBGL_lose_context");r&&r.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}},{key:"triggerRepaint",value:function(){this._triggerFrame(!0)}},{key:"_triggerFrame",value:function(t){var n=this;this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((function(e){var t=!!n._renderNextFrame;n._frame=null,n._renderNextFrame=null,t&&n._render(e)})))}},{key:"_preloadTiles",value:function(t){var n=this,r=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(r,(function(e,n){return e._preloadTiles(t,n)}),(function(){n.triggerRepaint()})),this}},{key:"_onWindowOnline",value:function(){this._update()}},{key:"_onWindowResize",value:function(e){this._trackResize&&this.resize({originalEvent:e})._update()}},{key:"_onVisibilityChange",value:function(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}},{key:"showTileBoundaries",get:function(){return!!this._showTileBoundaries},set:function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}},{key:"showTerrainWireframe",get:function(){return!!this._showTerrainWireframe},set:function(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}},{key:"speedIndexTiming",get:function(){return!!this._speedIndexTiming},set:function(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}},{key:"showPadding",get:function(){return!!this._showPadding},set:function(e){this._showPadding!==e&&(this._showPadding=e,this._update())}},{key:"showCollisionBoxes",get:function(){return!!this._showCollisionBoxes},set:function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}},{key:"showOverdrawInspector",get:function(){return!!this._showOverdrawInspector},set:function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}},{key:"repaint",get:function(){return!!this._repaint},set:function(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}},{key:"vertices",get:function(){return!!this._vertices},set:function(e){this._vertices=e,this._update()}},{key:"showTileAABBs",get:function(){return!!this._showTileAABBs},set:function(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}},{key:"_setCacheLimits",value:function(t,n){e.setCacheLimits(t,n)}},{key:"version",get:function(){return e.version}}]),c}(oa),NavigationControl:function(){function t(n){var r=this;d(this,t),this.options=e.extend({},_a,n),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(e){r._map&&r._map.zoomIn({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(e){r._map&&r._map.zoomOut({},{originalEvent:e})})),y("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(e){var t=r._map;t&&(r.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=y("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}return p(t,[{key:"_updateZoomButtons",value:function(){var e=this._map;if(e){var t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}}},{key:"_rotateCompassArrow",value:function(){var e=this,t=this._map;if(t){var n=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(t.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(t.transform.pitch,"deg) rotateZ(").concat(t.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(t.transform.angle*(180/Math.PI),"deg)");t._requestDomTask((function(){e._compassIcon&&(e._compassIcon.style.transform=n)}))}}},{key:"onAdd",value:function(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new xa(e,this._compass,this.options.visualizePitch)),this._container}},{key:"onRemove",value:function(){var e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}},{key:"_createButton",value:function(e,t){var n=y("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}},{key:"_setButtonTitle",value:function(e,t){if(this._map){var n=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}}}]),t}(),GeolocateControl:function(t){m(r,t);var n=v(r);function r(t){var a;return d(this,r),(a=n.call(this)).options=e.extend({geolocation:e.window.navigator.geolocation},ba,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],i(a)),a._updateMarkerRotationThrottled=li(a._updateMarkerRotation,20),a._numberOfWatches=0,a}return p(r,[{key:"onAdd",value:function(e){return this._map=e,this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}},{key:"onRemove",value:function(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}},{key:"_checkGeolocationSupport",value:function(t){var n=this,r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!n.options.geolocation;n._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((function(e){return r("denied"!==e.state)})).catch((function(){return r()})):r()}},{key:"_isOutOfMapMaxBounds",value:function(e){var t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}},{key:"_setErrorState",value:function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}},{key:"_onSuccess",value:function(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}},{key:"_updateCamera",value:function(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),a=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),a,{geolocateSource:!0})}},{key:"_updateMarker",value:function(t){if(t){var n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}},{key:"_updateCircleRadius",value:function(){var t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}},{key:"_onZoom",value:function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}},{key:"_updateMarkerRotation",value:function(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}},{key:"_onError",value:function(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var n=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",n),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",n),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}},{key:"_finish",value:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}},{key:"_setupUI",value:function(t){var n=this;if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(function(e){return e.preventDefault()})),this._geolocateButton=y("button","mapboxgl-ctrl-geolocate",this._container),y("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var r=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",r),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",r)}else{var i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",i),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=y("div","mapboxgl-user-location"),this._dotElement.appendChild(y("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(y("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new fa({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=y("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new fa({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(t){t.geolocateSource||"ACTIVE_LOCK"!==n._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(n._watchState="BACKGROUND",n._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),n._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),n.fire(new e.Event("trackuserlocationend")))}))}}},{key:"_onDeviceOrientation",value:function(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}},{key:"trigger",value:function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var t;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(t={maximumAge:6e5,timeout:0},this._noTimeout=!0):(t=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,t),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}},{key:"_addDeviceOrientationListener",value:function(){var t=this,n=function(){e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",t._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((function(e){"granted"===e&&n()})).catch(console.error):n()}},{key:"_clearWatch",value:function(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}}]),r}(e.Evented),AttributionControl:sa,ScaleControl:function(){function t(n){d(this,t),this.options=e.extend({},wa,n),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}return p(t,[{key:"getDefaultPosition",value:function(){return"bottom-left"}},{key:"_update",value:function(){var e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),a=t.unproject([r+e,n]),o=i.distanceTo(a);if("imperial"===this.options.unit){var s=3.2808*o;s>5280?this._setScale(e,s/5280,"mile"):this._setScale(e,s,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}},{key:"_setScale",value:function(e,t,n){var r=this;this._map._requestDomTask((function(){var i=function(e){var t=Math.pow(10,"".concat(Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){var t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(t),a=i/t;r._container.innerHTML=r._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(r._language,{style:"unit",unitDisplay:"short",unit:n}).format(i):"".concat(i,"&nbsp;").concat(ka[n]),r._container.style.width=e*a+"px"}))}},{key:"onAdd",value:function(e){return this._map=e,this._language=e.getLanguage(),this._container=y("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}},{key:"onRemove",value:function(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}},{key:"_setLanguage",value:function(e){this._language=e,this._update()}},{key:"setUnit",value:function(e){this.options.unit=e,this._update()}}]),t}(),FullscreenControl:function(){function t(n){d(this,t),this._fullscreen=!1,n&&n.container&&(n.container instanceof e.window.HTMLElement?this._container=n.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}return p(t,[{key:"onAdd",value:function(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=y("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}},{key:"onRemove",value:function(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_checkFullscreenSupport",value:function(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}},{key:"_setupUI",value:function(){var t=this._fullscreenButton=y("button","mapboxgl-ctrl-fullscreen",this._controlContainer);y("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}},{key:"_updateTitle",value:function(){var e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}},{key:"_getTitle",value:function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}},{key:"_isFullscreen",value:function(){return this._fullscreen}},{key:"_changeIcon",value:function(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}},{key:"_onClickFullscreen",value:function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}}]),t}(),Popup:function(t){m(r,t);var n=v(r);function r(t){var a;return d(this,r),(a=n.call(this)).options=e.extend(Object.create(da),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],i(a)),a._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[]),a}return p(r,[{key:"addTo",value:function(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}},{key:"isOpen",value:function(){return!!this._map}},{key:"remove",value:function(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);var t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}},{key:"getLngLat",value:function(){return this._lngLat}},{key:"setLngLat",value:function(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();var n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}},{key:"trackPointer",value:function(){this._trackPointer=!0,this._pos=null,this._update();var e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}},{key:"getElement",value:function(){return this._container}},{key:"setText",value:function(t){return this.setDOMContent(e.window.document.createTextNode(t))}},{key:"setHTML",value:function(t){var n,r=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");for(i.innerHTML=t;n=i.firstChild;)r.appendChild(n);return this.setDOMContent(r)}},{key:"getMaxWidth",value:function(){return this._container&&this._container.style.maxWidth}},{key:"setMaxWidth",value:function(e){return this.options.maxWidth=e,this._update(),this}},{key:"setDOMContent",value:function(e){var t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=y("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){var n=this._closeButton=y("button","mapboxgl-popup-close-button",t);n.type="button",n.setAttribute("aria-label","Close popup"),n.setAttribute("aria-hidden","true"),n.innerHTML="&#215;",n.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}},{key:"addClassName",value:function(e){return this._classList.add(e),this._updateClassList(),this}},{key:"removeClassName",value:function(e){return this._classList.delete(e),this._updateClassList(),this}},{key:"setOffset",value:function(e){return this.options.offset=e,this._update(),this}},{key:"toggleClassName",value:function(e){var t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}},{key:"_onMouseEvent",value:function(e){this._update(e.point)}},{key:"_getAnchor",value:function(e){if(this.options.anchor)return this.options.anchor;var t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";var i=n.offsetWidth,a=n.offsetHeight,o=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<a)return o?"top-left":s?"top-right":"top";if(r.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}},{key:"_updateClassList",value:function(){var e=this._container;if(e){var t=c(this._classList);t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}}},{key:"_update",value:function(t){var n=this,r=this._map,i=this._content;if(r&&(this._lngLat||this._trackPointer)&&i){var a=this._container;if(a||(a=this._container=y("div","mapboxgl-popup",r.getContainer()),this._tip=y("div","mapboxgl-popup-tip",a),a.appendChild(i)),this.options.maxWidth&&a.style.maxWidth!==this.options.maxWidth&&(a.style.maxWidth=this.options.maxWidth),r.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ca(this._lngLat,this._pos,r.transform)),!this._trackPointer||t){var o=this._pos=this._trackPointer&&t?t:r.project(this._lngLat),s=ma(this.options.offset),l=this._anchor=this._getAnchor(s.y),u=ma(this.options.offset,l),c=o.add(u).round();r._requestDomTask((function(){n._container&&l&&(n._container.style.transform="".concat(ha[l]," translate(").concat(c.x,"px,").concat(c.y,"px)"))}))}if(!this._marker&&r._showingGlobe()){var h=e.isLngLatBehindGlobe(r.transform,this._lngLat)?0:1;this._setOpacity(h)}this._updateClassList()}}},{key:"_focusFirstElement",value:function(){if(this.options.focusAfterOpen&&this._container){var e=this._container.querySelector(pa);e&&e.focus()}}},{key:"_onClose",value:function(){this.remove()}},{key:"_setOpacity",value:function(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}}]),r}(e.Evented),Marker:fa,Style:hn,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Qr,Evented:e.Evented,config:e.config,prewarm:function(){Je().acquire(Ke)},clearPrewarmedResources:function(){var e=Xe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ke),Xe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Ye.workerCount},set workerCount(e){Ye.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage:function(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return Ea})),n}()},888:function(e,t,n){"use strict";var r=n(9047);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},2007:function(e,t,n){e.exports=n(888)()},9047:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(e,t,n){"use strict";var r=n(2791),i=n(5296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function m(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var v={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){v[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];v[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){v[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){v[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){v[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){v[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){v[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){v[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){v[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=v.hasOwnProperty(t)?v[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(d,e)&&(f.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);v[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),v.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){v[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),C=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var L=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var O,j=Object.assign;function N(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function F(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function $(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case S:return"Profiler";case E:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function Z(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Z(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=Z(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,Z(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Z(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Z(n)}}function ae(e,t){var n=Z(t.value),r=Z(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ve(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Ee=null;function Se(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),we(e.stateNode,e.type,t))}}function Te(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Ce(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Me(e,t){return e(t)}function Ae(){}var Pe=!1;function Ie(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Me(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ee)&&(Ae(),Ce())}}function ze(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Le=!1;if(c)try{var De={};Object.defineProperty(De,"passive",{get:function(){Le=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ce){Le=!1}function Re(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Oe=!1,je=null,Ne=!1,Be=null,Fe={onError:function(e){Oe=!0,je=e}};function $e(e,t,n,r,i,a,o,s,l){Oe=!1,je=null,Re.apply(Fe,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ze(e){if(Ve(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ze(i),e;if(o===r)return Ze(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Ge=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Ke=i.unstable_requestPaint,Ye=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Qe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function vt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,wt,kt,Et,St,Tt=!1,Ct=[],Mt=null,At=null,Pt=null,It=new Map,zt=new Map,Lt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Ot(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function jt(e){var t=yi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ue(n)))return e.blockedOn=t,void St(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Bt(e,t,n){Nt(e)&&n.delete(t)}function Ft(){Tt=!1,null!==Mt&&Nt(Mt)&&(Mt=null),null!==At&&Nt(At)&&(At=null),null!==Pt&&Nt(Pt)&&(Pt=null),It.forEach(Bt),zt.forEach(Bt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ft)))}function Vt(e){function t(t){return $t(t,e)}if(0<Ct.length){$t(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mt&&$t(Mt,e),null!==At&&$t(At,e),null!==Pt&&$t(Pt,e),It.forEach(t),zt.forEach(t),n=0;n<Lt.length;n++)(r=Lt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&null===(n=Lt[0]).blockedOn;)jt(n),null===n.blockedOn&&Lt.shift()}var Ut=x.ReactCurrentBatchConfig,Zt=!0;function Ht(e,t,n,r){var i=_t,a=Ut.transition;Ut.transition=null;try{_t=1,qt(e,t,n,r)}finally{_t=i,Ut.transition=a}}function Wt(e,t,n,r){var i=_t,a=Ut.transition;Ut.transition=null;try{_t=4,qt(e,t,n,r)}finally{_t=i,Ut.transition=a}}function qt(e,t,n,r){if(Zt){var i=Xt(e,t,n,r);if(null===i)Zr(e,t,r,Gt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Mt=Ot(Mt,e,t,n,r,i),!0;case"dragenter":return At=Ot(At,e,t,n,r,i),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return It.set(a,Ot(It.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,zt.set(a,Ot(zt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var a=_i(i);if(null!==a&&bt(a),null===(a=Xt(e,t,n,r))&&Zr(e,t,r,Gt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Zr(e,t,r,null,n)}}var Gt=null;function Xt(e,t,n,r){if(Gt=null,null!==(e=yi(e=be(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Jt,r=n.length,i="value"in Yt?Yt.value:Yt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Qt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=j({},un,{view:0,detail:0}),fn=an(hn),dn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(dn),mn=an(j({},dn,{dataTransfer:0})),vn=an(j({},hn,{relatedTarget:0})),gn=an(j({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(yn),xn=an(j({},un,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Sn(){return En}var Tn=j({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(Tn),Mn=an(j({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=an(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Pn=an(j({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=j({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zn=an(In),Ln=[9,13,27,32],Dn=c&&"CompositionEvent"in window,Rn=null;c&&"documentMode"in document&&(Rn=document.documentMode);var On=c&&"TextEvent"in window&&!Rn,jn=c&&(!Dn||Rn&&8<Rn&&11>=Rn),Nn=String.fromCharCode(32),Bn=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Ln.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Un={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Un[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Gn(e){Nr(e,0)}function Xn(e){if(q(xi(e)))return e}function Kn(e,t){if("change"===e)return t}var Yn=!1;if(c){var Jn;if(c){var Qn="oninput"in document;if(!Qn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qn="function"===typeof er.oninput}Jn=Qn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Xn(qn)){var t=[];Hn(t,qn,e,be(e)),Ie(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(qn)}function ar(e,t){if("click"===e)return Xn(t)}function or(e,t){if("input"===e||"change"===e)return Xn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,vr=null,gr=null,yr=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==vr||vr!==G(r)||("selectionStart"in(r=vr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},kr={},Er={};function Sr(e){if(kr[e])return kr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return kr[e]=n[t];return e}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Tr=Sr("animationend"),Cr=Sr("animationiteration"),Mr=Sr("animationstart"),Ar=Sr("transitionend"),Pr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zr(e,t){Pr.set(e,t),l(t,[e])}for(var Lr=0;Lr<Ir.length;Lr++){var Dr=Ir[Lr];zr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}zr(Tr,"onAnimationEnd"),zr(Cr,"onAnimationIteration"),zr(Mr,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Ar,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function jr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if($e.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var c=je;Oe=!1,je=null,Ne||(Ne=!0,Be=c)}}(r,t,void 0,e),e.currentTarget=null}function Nr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;jr(i,s,u),a=l}}}if(Ne)throw e=Be,Ne=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Ur(t,e,2,!1),n.add(r))}function Fr(e,t,n){var r=0;t&&(r|=4),Ur(n,e,r,t)}var $r="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[$r]){e[$r]=!0,o.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||Fr(t,!1,e),Fr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$r]||(t[$r]=!0,Fr("selectionchange",!1,t))}}function Ur(e,t,n,r){switch(Kt(t)){case 1:var i=Ht;break;case 4:i=Wt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Le||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Zr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Ie((function(){var r=a,i=be(n),o=[];e:{var s=Pr.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=vn;break;case"focusout":u="blur",l=vn;break;case"beforeblur":case"afterblur":l=vn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Cr:case Mr:l=gn;break;case Ar:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=zn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Mn}var c=0!==(4&t),h=!c&&"scroll"===e,f=c?null!==s?s+"Capture":null:s;c=[];for(var d,p=r;null!==p;){var m=(d=p).stateNode;if(5===d.tag&&null!==m&&(d=m,null!==f&&(null!=(m=ze(p,f))&&c.push(Hr(p,m,d)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Mn,m="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==l?s:xi(l),d=null==u?s:xi(u),(s=new c(m,p+"leave",l,n,i)).target=h,s.relatedTarget=d,m=null,yi(i)===r&&((c=new c(f,p+"enter",u,n,i)).target=d,c.relatedTarget=h,m=c),h=m,l&&u)e:{for(f=u,p=0,d=c=l;d;d=qr(d))p++;for(d=0,m=f;m;m=qr(m))d++;for(;0<p-d;)c=qr(c),p--;for(;0<d-p;)f=qr(f),d--;for(;p--;){if(c===f||null!==f&&c===f.alternate)break e;c=qr(c),f=qr(f)}c=null}else c=null;null!==l&&Gr(o,s,l,c,!1),null!==u&&null!==h&&Gr(o,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Kn;else if(Zn(s))if(Yn)v=or;else{v=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(v=ar);switch(v&&(v=v(e,r))?Hn(o,v,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?xi(r):window,e){case"focusin":(Zn(g)||"true"===g.contentEditable)&&(vr=g,gr=r,yr=null);break;case"focusout":yr=gr=vr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vn?Fn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Vn&&(y=en()):(Jt="value"in(Yt=i)?Yt.value:Yt.textContent,Vn=!0)),0<(g=Wr(r,_)).length&&(_=new xn(_,e,null,n,i),o.push({event:_,listeners:g}),y?_.data=y:null!==(y=$n(n))&&(_.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Bn=!0,Nn);case"textInput":return(e=t.data)===Nn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&Fn(e,t)?(e=en(),Qt=Jt=Yt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Nr(o,t)}))}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=ze(e,n))&&r.unshift(Hr(e,a,i)),null!=(a=ze(e,t))&&r.push(Hr(e,a,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=ze(n,a))&&o.unshift(Hr(n,l,s)):i||null!=(l=ze(n,a))&&o.push(Hr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Xr=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Kr,"")}function Jr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(a(425))}function Qr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),fi="__reactFiber$"+hi,di="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,vi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[fi])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var wi=[],ki=-1;function Ei(e){return{current:e}}function Si(e){0>ki||(e.current=wi[ki],wi[ki]=null,ki--)}function Ti(e,t){ki++,wi[ki]=e.current,e.current=t}var Ci={},Mi=Ei(Ci),Ai=Ei(!1),Pi=Ci;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function zi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Li(){Si(Ai),Si(Mi)}function Di(e,t,n){if(Mi.current!==Ci)throw Error(a(168));Ti(Mi,t),Ti(Ai,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,U(e)||"Unknown",i));return j({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Pi=Mi.current,Ti(Mi,e),Ti(Ai,Ai.current),!0}function ji(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Ri(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Mi),Ti(Mi,e)):Si(Ai),Ti(Ai,n)}var Ni=null,Bi=!1,Fi=!1;function $i(e){null===Ni?Ni=[e]:Ni.push(e)}function Vi(){if(!Fi&&null!==Ni){Fi=!0;var e=0,t=_t;try{var n=Ni;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ni=null,Bi=!1}catch(i){throw null!==Ni&&(Ni=Ni.slice(e+1)),qe(Qe,Vi),i}finally{_t=t,Fi=!1}}return null}var Ui=[],Zi=0,Hi=null,Wi=0,qi=[],Gi=0,Xi=null,Ki=1,Yi="";function Ji(e,t){Ui[Zi++]=Wi,Ui[Zi++]=Hi,Hi=e,Wi=t}function Qi(e,t,n){qi[Gi++]=Ki,qi[Gi++]=Yi,qi[Gi++]=Xi,Xi=e;var r=Ki;e=Yi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ki=1<<32-ot(t)+i|n<<i|r,Yi=a+e}else Ki=1<<a|n<<i|r,Yi=e}function ea(e){null!==e.return&&(Ji(e,1),Qi(e,1,0))}function ta(e){for(;e===Hi;)Hi=Ui[--Zi],Ui[Zi]=null,Wi=Ui[--Zi],Ui[Zi]=null;for(;e===Xi;)Xi=qi[--Gi],qi[Gi]=null,Yi=qi[--Gi],qi[Gi]=null,Ki=qi[--Gi],qi[Gi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=zu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ki,overflow:Yi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=zu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw fa(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function fa(){for(var e=ra;e;)e=ui(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var ma=x.ReactCurrentBatchConfig;function va(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ei(null),ya=null,_a=null,xa=null;function ba(){xa=_a=ya=null}function wa(e){var t=ga.current;Si(ga),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ya=e,xa=_a=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(xa!==e)if(e={context:e,memoizedValue:t,next:null},null===_a){if(null===ya)throw Error(a(308));_a=e,ya.dependencies={lanes:0,firstContext:e}}else _a=_a.next=e;return t}var Ta=null;function Ca(e){null===Ta?Ta=[e]:Ta.push(e)}function Ma(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Aa(e,r)}function Aa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Pa=!1;function Ia(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function za(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function La(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Da(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Aa(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Aa(e,n)}function Ra(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Oa(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ja(e,t,n,r){var i=e.updateQueue;Pa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var f=s.lane,d=s.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(f=t,d=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=m.payload)?p.call(d,h,f):p)||void 0===f)break e;h=j({},h,f);break e;case 2:Pa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[s]:f.push(s))}else d={eventTime:d,lane:f,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=d,l=h):c=c.next=d,o|=f;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(f=s).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);jl|=o,e.lanes=o,e.memoizedState=h}}function Na(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ba=(new r.Component).refs;function Fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var $a={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=La(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(ru(t,e,i,r),Ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),a=La(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Da(e,a,i))&&(ru(t,e,i,r),Ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=La(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Da(e,i,r))&&(ru(t,e,r,n),Ra(t,e,r))}};function Va(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Ua(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=zi(t)?Pi:Mi.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=$a,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Za(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&$a.enqueueReplaceState(t,t.state,null)}function Ha(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ba,Ia(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=zi(t)?Pi:Mi.current,i.context=Ii(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&$a.enqueueReplaceState(i,i.state,null),ja(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ba&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Xa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Du(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Nu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===z&&Ga(a)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Ru(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Ou(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Nu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ru(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case w:return(t=Bu(t,e.mode,n)).return=e,t;case z:return f(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Ou(t,e.mode,n,null)).return=e,t;qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case z:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:h(e,t,n,r,null);qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case z:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,i,null);qa(t,r)}return null}function m(i,a,s,l){for(var u=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=d(i,h,s[m],l);if(null===g){null===h&&(h=v);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),ia&&Ji(i,m),u;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],l))&&(a=o(h,a,m),null===c?u=h:c.sibling=h,c=h);return ia&&Ji(i,m),u}for(h=r(i,h);m<s.length;m++)null!==(v=p(h,i,m,s[m],l))&&(e&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&h.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),u}function v(i,s,l,u){var c=R(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,g=null,y=l.next();null!==m&&!y.done;v++,y=l.next()){m.index>v?(g=m,m=null):g=m.sibling;var _=d(i,m,y.value,u);if(null===_){null===m&&(m=g);break}e&&m&&null===_.alternate&&t(i,m),s=o(_,s,v),null===h?c=_:h.sibling=_,h=_,m=g}if(y.done)return n(i,m),ia&&Ji(i,v),c;if(null===m){for(;!y.done;v++,y=l.next())null!==(y=f(i,y.value,u))&&(s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return ia&&Ji(i,v),c}for(m=r(i,m);!y.done;v++,y=l.next())null!==(y=p(m,i,v,y.value,u))&&(e&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===z&&Ga(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Wa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===k?((a=Ou(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Ru(o.type,o.key,o.props,null,r.mode,l)).ref=Wa(r,a,o),l.return=r,r=l)}return s(r);case w:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bu(o,r.mode,l)).return=r,r=a}return s(r);case z:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return m(r,a,o,l);if(R(o))return v(r,a,o,l);qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Nu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var Ka=Xa(!0),Ya=Xa(!1),Ja={},Qa=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Qa,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Qa),Ti(Qa,t)}function io(){Si(Qa),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Qa.current),n=le(t,e.type);t!==n&&(Ti(eo,e),Ti(Qa,n))}function oo(e){eo.current===e&&(Si(Qa),Si(eo))}var so=Ei(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=x.ReactCurrentDispatcher,fo=x.ReactCurrentBatchConfig,po=0,mo=null,vo=null,go=null,yo=!1,_o=!1,xo=0,bo=0;function wo(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),_o){o=0;do{if(_o=!1,xo=0,25<=o)throw Error(a(301));o+=1,go=vo=null,t.updateQueue=null,ho.current=us,e=n(r,i)}while(_o)}if(ho.current=os,t=null!==vo&&null!==vo.next,po=0,go=vo=mo=null,yo=!1,t)throw Error(a(300));return e}function So(){var e=0!==xo;return xo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?mo.memoizedState=go=e:go=go.next=e,go}function Co(){if(null===vo){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=vo.next;var t=null===go?mo.memoizedState:go.next;if(null!==t)go=t,vo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(vo=e).memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},null===go?mo.memoizedState=go=e:go=go.next=e}return go}function Mo(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=vo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,s=r):u=u.next=f,mo.lanes|=h,jl|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(xs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,jl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(xs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Io(){}function zo(e,t){var n=mo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,xs=!0),r=r.queue,Zo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Bo(9,Do.bind(null,n,r,i,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&po)||Lo(n,t,i)}return i}function Lo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Do(e,t,n,r){t.value=n,t.getSnapshot=r,Oo(t)&&jo(e)}function Ro(e,t,n){return n((function(){Oo(t)&&jo(e)}))}function Oo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function jo(e){var t=Aa(e,1);null!==t&&ru(t,e,1,-1)}function No(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,mo,e),[t.memoizedState,e]}function Bo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fo(){return Co().memoizedState}function $o(e,t,n,r){var i=To();mo.flags|=e,i.memoizedState=Bo(1|t,n,void 0,void 0===r?null:r)}function Vo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==vo){var o=vo.memoizedState;if(a=o.destroy,null!==r&&ko(r,o.deps))return void(i.memoizedState=Bo(t,n,a,r))}mo.flags|=e,i.memoizedState=Bo(1|t,n,a,r)}function Uo(e,t){return $o(8390656,8,e,t)}function Zo(e,t){return Vo(2048,8,e,t)}function Ho(e,t){return Vo(4,2,e,t)}function Wo(e,t){return Vo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Go(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vo(4,4,qo.bind(null,t,e),n)}function Xo(){}function Ko(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Yo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ko(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,xs=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),mo.lanes|=n,jl|=n,e.baseState=!0),t)}function Qo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{_t=n,fo.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Ma(e,t,n,r))){ru(n,e,r,tu()),as(n,t,r)}}function ns(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ca(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Ma(e,t,i,r))&&(ru(n,e,r,i=tu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function is(e,t){_o=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Sa,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,$o(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $o(4194308,4,e,t)},useInsertionEffect:function(e,t){return $o(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:No,useDebugValue:Xo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=No(!1),t=e[0];return e=Qo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&po)||Lo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Bo(9,Do.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Pl.identifierPrefix;if(ia){var n=Yi;t=":"+t+"R"+(n=(Ki&~(1<<32-ot(Ki)-1)).toString(32)+n),0<(n=xo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:Ko,useContext:Sa,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Yo,useReducer:Ao,useRef:Fo,useState:function(){return Ao(Mo)},useDebugValue:Xo,useDeferredValue:function(e){return Jo(Co(),vo.memoizedState,e)},useTransition:function(){return[Ao(Mo)[0],Co().memoizedState]},useMutableSource:Io,useSyncExternalStore:zo,useId:es,unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:Ko,useContext:Sa,useEffect:Zo,useImperativeHandle:Go,useInsertionEffect:Ho,useLayoutEffect:Wo,useMemo:Yo,useReducer:Po,useRef:Fo,useState:function(){return Po(Mo)},useDebugValue:Xo,useDeferredValue:function(e){var t=Co();return null===vo?t.memoizedState=e:Jo(t,vo.memoizedState,e)},useTransition:function(){return[Po(Mo)[0],Co().memoizedState]},useMutableSource:Io,useSyncExternalStore:zo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=$(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=La(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Wl=r),fs(0,t)},n}function ms(e,t,n){(n=La(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){fs(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){fs(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=La(-1,1)).tag=2,Da(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var _s=x.ReactCurrentOwner,xs=!1;function bs(e,t,n,r){t.child=null===e?Ya(t,null,n,r):Ka(t,e.child,n,r)}function ws(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||xs?(ia&&n&&ea(t),t.flags|=1,bs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function ks(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Lu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ru(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Es(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Du(a,r)).ref=t.ref,e.return=t,t.child=e}function Es(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(xs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(xs=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Dl,Ll),Ll|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Dl,Ll),Ll|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Dl,Ll),Ll|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Dl,Ll),Ll|=r;return bs(e,t,i,n),t.child}function Ts(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var a=zi(n)?Pi:Mi.current;return a=Ii(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||xs?(ia&&r&&ea(t),t.flags|=1,bs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ms(e,t,n,r,i){if(zi(n)){var a=!0;Oi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Zs(e,t),Ua(t,n,r),Ha(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Sa(u):u=Ii(t,u=zi(n)?Pi:Mi.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Za(t,o,r,u),Pa=!1;var f=t.memoizedState;o.state=f,ja(t,r,o,i),l=t.memoizedState,s!==r||f!==l||Ai.current||Pa?("function"===typeof c&&(Fa(t,n,c,r),l=t.memoizedState),(s=Pa||Va(t,n,s,r,f,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,za(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:va(t.type,s),o.props=u,h=t.pendingProps,f=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Sa(l):l=Ii(t,l=zi(n)?Pi:Mi.current);var d=n.getDerivedStateFromProps;(c="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||f!==l)&&Za(t,o,r,l),Pa=!1,f=t.memoizedState,o.state=f,ja(t,r,o,i);var p=t.memoizedState;s!==h||f!==p||Ai.current||Pa?("function"===typeof d&&(Fa(t,n,d,r),p=t.memoizedState),(u=Pa||Va(t,n,u,r,f,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Ts(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&ji(t,n,!1),Hs(e,t,a);r=t.stateNode,_s.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ka(t,e.child,null,a),t.child=Ka(t,null,s,a)):bs(e,t,s,a),t.memoizedState=r.state,i&&ji(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ro(e,t.containerInfo)}function Is(e,t,n,r,i){return da(),pa(i),t.flags|=256,bs(e,t,n,r),t.child}var zs,Ls,Ds,Rs,Os={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ns(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=ju(l,i,0,null),e=Ou(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=js(n),t.memoizedState=Os,e):Bs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Fs(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=ju({mode:"visible",children:r.children},i,0,null),(o=Ou(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ka(t,e.child,null,s),t.child.memoizedState=js(s),t.memoizedState=Os,o);if(0===(1&t.mode))return Fs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Fs(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),xs||l){if(null!==(r=Pl)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Aa(e,i),ru(r,e,i,-1))}return vu(),Fs(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Mu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(qi[Gi++]=Ki,qi[Gi++]=Yi,qi[Gi++]=Xi,Ki=e.id,Yi=e.overflow,Xi=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Du(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Du(r,s):(s=Ou(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?js(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Os,i}return e=(s=e.child).sibling,i=Du(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=ju({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fs(e,t,n,r){return null!==r&&pa(r),Ka(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $s(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function Vs(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Us(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,n,t);else if(19===e.tag)$s(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vs(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vs(t,!0,n,null,a);break;case"together":Vs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Du(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Du(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gs(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(t),null;case 1:case 17:return zi(t.type)&&Li(),qs(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Mi),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(su(aa),aa=null))),Ls(e,t),qs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return qs(t),null}if(e=no(Qa.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":K(r,o),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Br("invalid",r);break;case"textarea":ie(r,o),Br("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":W(r),Q(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fi]=t,e[di]=r,zs(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":K(e,r),i=X(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=j({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ve(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Br("scroll",e):null!=c&&_(e,o,c,l))}switch(n){case"input":W(e),Q(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Z(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Qr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Qa.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return qs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))fa(),da(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qs(t),o=!1}else null!==aa&&(su(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Rl&&(Rl=3):vu())),null!==t.updateQueue&&(t.flags|=4),qs(t),null);case 4:return io(),Ls(e,t),null===e&&Vr(t.stateNode.containerInfo),qs(t),null;case 10:return wa(t.type._context),qs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return qs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ws(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ye()>Ul&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return qs(t),null}else 2*Ye()-o.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ye(),t.sibling=null,n=so.current,Ti(so,r?1&n|2:1&n),t):(qs(t),null);case 22:case 23:return fu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ll)&&(qs(t),6&t.subtreeFlags&&(t.flags|=8192)):qs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Xs(e,t){switch(ta(t),t.tag){case 1:return zi(t.type)&&Li(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Mi),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return wa(t.type._context),null;case 22:case 23:return fu(),null;default:return null}}zs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ls=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Qa.current);var a,o=null;switch(n){case"input":i=X(e,i),r=X(e,r),o=[];break;case"select":i=j({},i,{value:void 0}),r=j({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Br("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ks=!1,Ys=!1,Js="function"===typeof WeakSet?WeakSet:Set,Qs=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Su(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&tl(t,n,a)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function al(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[di],delete t[mi],delete t[vi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,fl=!1;function dl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Ys||el(n,t);case 6:var r=hl,i=fl;hl=null,dl(e,t,n),fl=i,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Vt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=fl,hl=n.stateNode.containerInfo,fl=!0,dl(e,t,n),hl=r,fl=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&tl(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Ys&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Ys=(r=Ys)||null!==n.memoizedState,dl(e,t,n),Ys=r):dl(e,t,n);break;default:dl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Js),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(a(160));pl(o,s,i),hl=null,fl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(v){Su(e,e.return,v)}try{rl(5,e,e.return)}catch(v){Su(e,e.return,v)}}break;case 1:vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(vl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{fe(i,"")}catch(v){Su(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Y(i,o),_e(l,s);var c=_e(l,o);for(s=0;s<u.length;s+=2){var h=u[s],f=u[s+1];"style"===h?ve(i,f):"dangerouslySetInnerHTML"===h?he(i,f):"children"===h?fe(i,f):_(i,h,f,c)}switch(l){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(v){Su(e,e.return,v)}}break;case 6:if(vl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(v){Su(e,e.return,v)}}break;case 3:if(vl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Vt(t.containerInfo)}catch(v){Su(e,e.return,v)}break;case 4:default:vl(t,e),yl(e);break;case 13:vl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vl=Ye())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ys=(c=Ys)||h,vl(t,e),Ys=c):vl(t,e),yl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(f=Qs=h;null!==Qs;){switch(p=(d=Qs).child,d.tag){case 0:case 11:case 14:case 15:rl(4,d,d.return);break;case 1:el(d,d.return);var m=d.stateNode;if("function"===typeof m.componentWillUnmount){r=d,n=d.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(v){Su(r,n,v)}}break;case 5:el(d,d.return);break;case 22:if(null!==d.memoizedState){wl(f);continue}}null!==p?(p.return=d,Qs=p):wl(f)}h=h.sibling}e:for(h=null,f=e;;){if(5===f.tag){if(null===h){h=f;try{i=f.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,s=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(v){Su(e,e.return,v)}}}else if(6===f.tag){if(null===h)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(v){Su(e,e.return,v)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function _l(e,t,n){Qs=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Ks;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Ys;s=Ks;var u=Ys;if(Ks=o,(Ys=l)&&!u)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?kl(i):null!==l?(l.return=o,Qs=l):kl(i);for(;null!==a;)Qs=a,xl(a,t,n),a=a.sibling;Qs=i,Ks=s,Ys=u}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):bl(e)}}function bl(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ys||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ys)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:va(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Na(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Na(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var f=h.dehydrated;null!==f&&Vt(f)}}}break;default:throw Error(a(163))}Ys||512&t.flags&&al(t)}catch(d){Su(t,t.return,d)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function wl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function kl(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var a=t.return;try{al(t)}catch(l){Su(t,a,l)}break;case 5:var o=t.return;try{al(t)}catch(l){Su(t,o,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var El,Sl=Math.ceil,Tl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Ml=x.ReactCurrentBatchConfig,Al=0,Pl=null,Il=null,zl=0,Ll=0,Dl=Ei(0),Rl=0,Ol=null,jl=0,Nl=0,Bl=0,Fl=null,$l=null,Vl=0,Ul=1/0,Zl=null,Hl=!1,Wl=null,ql=null,Gl=!1,Xl=null,Kl=0,Yl=0,Jl=null,Ql=-1,eu=0;function tu(){return 0!==(6&Al)?Ye():-1!==Ql?Ql:Ql=Ye()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==zl?zl&-zl:null!==ma.transition?(0===eu&&(eu=mt()),eu):0!==(e=_t)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function ru(e,t,n,r){if(50<Yl)throw Yl=0,Jl=null,Error(a(185));gt(e,n,r),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Nl|=n),4===Rl&&lu(e,zl)),iu(e,r),1===n&&0===Al&&0===(1&t.mode)&&(Ul=Ye()+500,Bi&&Vi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=dt(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=ft(e,e===Pl?zl:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Bi=!0,$i(e)}(uu.bind(null,e)):$i(uu.bind(null,e)),oi((function(){0===(6&Al)&&Vi()})),n=null;else{switch(xt(r)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pu(n,au.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function au(e,t){if(Ql=-1,eu=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(ku()&&e.callbackNode!==n)return null;var r=ft(e,e===Pl?zl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Al;Al|=2;var o=mu();for(Pl===e&&zl===t||(Zl=null,Ul=Ye()+500,du(e,t));;)try{_u();break}catch(l){pu(e,l)}ba(),Tl.current=o,Al=i,null!==Il?t=0:(Pl=null,zl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ou(e,i))),1===t)throw n=Ol,du(e,0),lu(e,r),iu(e,Ye()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=pt(e))&&(r=o,t=ou(e,o))),1===t))throw n=Ol,du(e,0),lu(e,r),iu(e,Ye()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wu(e,$l,Zl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=Vl+500-Ye())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wu.bind(null,e,$l,Zl),t);break}wu(e,$l,Zl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(wu.bind(null,e,$l,Zl),r);break}wu(e,$l,Zl);break;default:throw Error(a(329))}}}return iu(e,Ye()),e.callbackNode===n?au.bind(null,e):null}function ou(e,t){var n=Fl;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=gu(e,t))&&(t=$l,$l=n,null!==t&&su(t)),e}function su(e){null===$l?$l=e:$l.push.apply($l,e)}function lu(e,t){for(t&=~Bl,t&=~Nl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Al))throw Error(a(327));ku();var t=ft(e,0);if(0===(1&t))return iu(e,Ye()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ou(e,r))}if(1===n)throw n=Ol,du(e,0),lu(e,t),iu(e,Ye()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wu(e,$l,Zl),iu(e,Ye()),null}function cu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Ul=Ye()+500,Bi&&Vi())}}function hu(e){null!==Xl&&0===Xl.tag&&0===(6&Al)&&ku();var t=Al;Al|=1;var n=Ml.transition,r=_t;try{if(Ml.transition=null,_t=1,e)return e()}finally{_t=r,Ml.transition=n,0===(6&(Al=t))&&Vi()}}function fu(){Ll=Dl.current,Si(Dl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Li();break;case 3:io(),Si(Ai),Si(Mi),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:wa(r.type._context);break;case 22:case 23:fu()}n=n.return}if(Pl=e,Il=e=Du(e.current,null),zl=Ll=t,Rl=0,Ol=null,Bl=Nl=jl=0,$l=Fl=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pu(e,t){for(;;){var n=Il;try{if(ba(),ho.current=os,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=vo=mo=null,_o=!1,xo=0,Cl.current=null,null===n||null===n.return){Rl=1,Ol=t,Il=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=zl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,f=h.tag;if(0===(1&h.mode)&&(0===f||11===f||15===f)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&vs(o,c,t),u=c;var m=(t=p).updateQueue;if(null===m){var v=new Set;v.add(u),t.updateQueue=v}else m.add(u);break e}if(0===(1&t)){vs(o,c,t),vu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==Rl&&(Rl=2),null===Fl?Fl=[o]:Fl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ps(0,u,t));break e;case 1:l=u;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===ql||!ql.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,Oa(o,ms(o,l,t));break e}}o=o.return}while(null!==o)}bu(n)}catch(x){t=x,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mu(){var e=Tl.current;return Tl.current=os,null===e?os:e}function vu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&jl)&&0===(268435455&Nl)||lu(Pl,zl)}function gu(e,t){var n=Al;Al|=2;var r=mu();for(Pl===e&&zl===t||(Zl=null,du(e,t));;)try{yu();break}catch(i){pu(e,i)}if(ba(),Al=n,Tl.current=r,null!==Il)throw Error(a(261));return Pl=null,zl=0,Rl}function yu(){for(;null!==Il;)xu(Il)}function _u(){for(;null!==Il&&!Xe();)xu(Il)}function xu(e){var t=El(e.alternate,e,Ll);e.memoizedProps=e.pendingProps,null===t?bu(e):Il=t,Cl.current=null}function bu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gs(n,t,Ll)))return void(Il=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Rl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Rl&&(Rl=5)}function wu(e,t,n){var r=_t,i=Ml.transition;try{Ml.transition=null,_t=1,function(e,t,n,r){do{ku()}while(null!==Xl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Pl&&(Il=Pl=null,zl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pu(tt,(function(){return ku(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ml.transition,Ml.transition=null;var s=_t;_t=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(ei=Zt,dr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(l=s+i),f!==o||0!==r&&3!==f.nodeType||(u=s+r),3===f.nodeType&&(s+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++c===i&&(l=s),d===o&&++h===r&&(u=s),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Zt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var v=m.memoizedProps,g=m.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?v:va(t.type,v),g);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(a(163))}}catch(b){Su(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}m=nl,nl=!1}(e,n),gl(n,e),pr(ti),Zt=!!ei,ti=ei=null,e.current=n,_l(n,e,i),Ke(),Al=l,_t=s,Ml.transition=o}else e.current=n;if(Gl&&(Gl=!1,Xl=e,Kl=i),o=e.pendingLanes,0===o&&(ql=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Wl,Wl=null,e;0!==(1&Kl)&&0!==e.tag&&ku(),o=e.pendingLanes,0!==(1&o)?e===Jl?Yl++:(Yl=0,Jl=e):Yl=0,Vi()}(e,t,n,r)}finally{Ml.transition=i,_t=r}return null}function ku(){if(null!==Xl){var e=xt(Kl),t=Ml.transition,n=_t;try{if(Ml.transition=null,_t=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Kl=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var f=h.child;if(null!==f)f.return=h,Qs=f;else for(;null!==Qs;){var d=(h=Qs).sibling,p=h.return;if(ol(h),h===c){Qs=null;break}if(null!==d){d.return=p,Qs=d;break}Qs=p}}}var m=o.alternate;if(null!==m){var v=m.child;if(null!==v){m.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(null!==v)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var _=e.current;for(Qs=_;null!==Qs;){var x=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Qs=x;else e:for(s=_;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Su(l,l.return,w)}if(l===s){Qs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Qs=b;break e}Qs=l.return}}if(Al=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{_t=n,Ml.transition=t}}return!1}function Eu(e,t,n){e=Da(e,t=ps(0,t=cs(n,t),1),1),t=tu(),null!==e&&(gt(e,1,t),iu(e,t))}function Su(e,t,n){if(3===e.tag)Eu(e,e,n);else for(;null!==t;){if(3===t.tag){Eu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Da(t,e=ms(t,e=cs(n,e),1),1),e=tu(),null!==t&&(gt(t,1,e),iu(t,e));break}}t=t.return}}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(zl&n)===n&&(4===Rl||3===Rl&&(130023424&zl)===zl&&500>Ye()-Vl?du(e,0):Bl|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=tu();null!==(e=Aa(e,t))&&(gt(e,t,n),iu(e,n))}function Mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}function Pu(e,t){return qe(e,t)}function Iu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zu(e,t,n,r){return new Iu(e,t,n,r)}function Lu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Du(e,t){var n=e.alternate;return null===n?((n=zu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ru(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Lu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Ou(n.children,i,o,t);case E:s=8,i|=8;break;case S:return(e=zu(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=zu(13,n,t,i)).elementType=A,e.lanes=o,e;case P:return(e=zu(19,n,t,i)).elementType=P,e.lanes=o,e;case L:return ju(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:s=10;break e;case C:s=9;break e;case M:s=11;break e;case I:s=14;break e;case z:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=zu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Ou(e,t,n,r){return(e=zu(7,e,r,t)).lanes=n,e}function ju(e,t,n,r){return(e=zu(22,e,r,t)).elementType=L,e.lanes=n,e.stateNode={isHidden:!1},e}function Nu(e,t,n){return(e=zu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=zu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vt(0),this.expirationTimes=vt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $u(e,t,n,r,i,a,o,s,l){return e=new Fu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=zu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ia(a),e}function Vu(e){if(!e)return Ci;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(zi(n))return Ri(e,n,t)}return t}function Uu(e,t,n,r,i,a,o,s,l){return(e=$u(n,r,!0,e,0,a,0,s,l)).context=Vu(null),n=e.current,(a=La(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Da(n,a,i),e.current.lanes=i,gt(e,i,r),iu(e,r),e}function Zu(e,t,n,r){var i=t.current,a=tu(),o=nu(i);return n=Vu(n),null===t.context?t.context=n:t.pendingContext=n,(t=La(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Da(i,t,o))&&(ru(e,i,o,a),Ra(e,i,o)),o}function Hu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}El=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)xs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xs=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),da();break;case 5:ao(t);break;case 1:zi(t.type)&&Oi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ns(e,t,n):(Ti(so,1&so.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ti(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Us(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Hs(e,t,n)}(e,t,n);xs=0!==(131072&e.flags)}else xs=!1,ia&&0!==(1048576&t.flags)&&Qi(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Zs(e,t),e=t.pendingProps;var i=Ii(t,Mi.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zi(r)?(o=!0,Oi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ia(t),i.updater=$a,t.stateNode=i,i._reactInternals=t,Ha(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Zs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Lu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===I)return 14}return 2}(r),e=va(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=ws(null,t,r,e,n);break e;case 14:t=ks(null,t,r,va(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:va(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:va(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,za(e,t),ja(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Is(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Is(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Ya(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Hs(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ts(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Ns(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ka(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,ws(e,t,r,i=t.elementType===r?i:va(r,i),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ti(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ai.current){t=Hs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=La(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),ka(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),ka(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}bs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return i=va(r=t.type,t.pendingProps),ks(e,t,r,i=va(r.type,i),n);case 15:return Es(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:va(r,i),Zs(e,t),t.tag=1,zi(r)?(e=!0,Oi(t)):e=!1,Ea(t,n),Ua(t,r,i),Ha(t,r,i,n),As(null,t,r,!0,e,n);case 19:return Us(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Gu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Ku(e){this._internalRoot=e}function Yu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function ec(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Hu(o);s.call(e)}}Zu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Hu(o);a.call(e)}}var o=Uu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=o,e[pi]=o.current,Vr(8===e.nodeType?e.parentNode:e),hu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hu(l);s.call(e)}}var l=$u(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[pi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hu((function(){Zu(t,l,n,r)})),l}(n,t,e,i,r);return Hu(o)}Ku.prototype.render=Xu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zu(e,t,null,null)},Ku.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Zu(null,e,null,null)})),t[pi]=null}},Ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&0!==t&&t<Lt[n].priority;n++);Lt.splice(n,0,e),0===n&&jt(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),iu(t,Ye()),0===(6&Al)&&(Ul=Ye()+500,Vi()))}break;case 13:hu((function(){var t=Aa(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),qu(e,1)}},wt=function(e){if(13===e.tag){var t=Aa(e,134217728);if(null!==t)ru(t,e,134217728,tu());qu(e,134217728)}},kt=function(e){if(13===e.tag){var t=nu(e),n=Aa(e,t);if(null!==n)ru(n,e,t,tu());qu(e,t)}},Et=function(){return _t},St=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));q(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Me=cu,Ae=hu;var tc={usingClientEntryPoint:!1,Events:[_i,xi,bi,Te,Ce,cu]},nc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{it=ic.inject(rc),at=ic}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yu(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yu(e))throw Error(a(299));var n=!1,r="",i=Gu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=$u(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new Xu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hu(e)},t.hydrate=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yu(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Gu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Uu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ku(t)},t.render=function(e,t,n){if(!Ju(t))throw Error(a(200));return ec(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Ju(e))throw Error(a(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Ju(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(4164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4463)},2198:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=(0,i.useState)(e.count),n=r(t,2),a=n[0],o=n[1],s=(0,i.useState)(e.size),l=r(s,2),u=l[0],c=l[1],h=(0,i.useState)(e.char),f=r(h,2),d=f[0],p=f[1],m=(0,i.useState)(e.color),v=r(m,2),g=v[0],y=v[1],_=(0,i.useState)(e.activeColor),x=r(_,2),b=x[0],w=x[1],k=(0,i.useState)(e.isHalf),E=r(k,2),S=E[0],T=E[1],C=(0,i.useState)(e.edit),M=r(C,2),A=M[0],P=M[1],I=(0,i.useState)(e.emptyIcon),z=r(I,2),L=z[0],D=z[1],R=(0,i.useState)(e.halfIcon),O=r(R,2),j=O[0],N=O[1],B=(0,i.useState)(e.filledIcon),F=r(B,2),$=F[0],V=F[1],U=(0,i.useState)(e.a11y),Z=r(U,2),H=Z[0],W=Z[1];return[{count:a,size:u,char:d,color:g,activeColor:b,isHalf:S,edit:A,emptyIcon:L,halfIcon:j,filledIcon:$,a11y:H},function(e){o(e.count),c(e.size),p(e.char),y(e.color),w(e.activeColor),T(e.isHalf),P(e.edit),D(e.emptyIcon),N(e.halfIcon),V(e.filledIcon),W(e.a11y)}]};var i=n(2791)},5112:function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(l){i=!0,a=l}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(2791),a=u(i),o=u(n(2007)),s=u(n(2198)),l=u(n(9059));function u(e){return e&&e.__esModule?e:{default:e}}var c={overflow:"hidden",position:"relative"};function h(e,t){return"\n    .react-stars-"+t+":before {\n      position: absolute;\n      overflow: hidden;\n      display: block;\n      z-index: 1;\n      top: 0; left: 0;\n      width: 50%;\n      content: attr(data-forhalf);\n      color: "+e+";\n  }"}function f(e){var t=(0,i.useState)(""),n=r(t,2),o=n[0],u=n[1],f=(0,i.useState)(0),d=r(f,2),p=d[0],m=d[1],v=(0,i.useState)([]),g=r(v,2),y=g[0],_=g[1],x=(0,i.useState)(!1),b=r(x,2),w=b[0],k=b[1],E=(0,s.default)(e),S=r(E,2),T=S[0],C=S[1],M=(0,i.useState)(0),A=r(M,2),P=A[0],I=A[1],z=(0,i.useState)(!1),L=r(z,2),D=L[0],R=L[1],O=(0,i.useState)(""),j=r(O,2),N=j[0],B=j[1];function F(e){"undefined"===typeof e&&(e=T.isHalf?Math.floor(p):Math.round(p));for(var t=[],n=0;n<T.count;n++)t.push({active:n<=e-1});return t}function $(e){if(T.edit){var t=Number(e.currentTarget.getAttribute("data-index"));if(T.isHalf){var n=V(e);R(n),n&&(t+=1),I(t)}else t+=1;!function(e){var t=y.filter((function(e){return e.active}));e!==t.length&&_(F(e))}(t)}}function V(e){var t=e.target.getBoundingClientRect(),n=e.clientX-t.left;return(n=Math.round(Math.abs(n)))>t.width/2}function U(){T.edit&&(Z(p),_(F()))}function Z(e){T.isHalf&&(R(function(e){return e%1===0}(e)),I(Math.floor(e)))}function H(e){if(T.edit){var t=Number(e.currentTarget.getAttribute("data-index")),n=void 0;if(T.isHalf){var r=V(e);R(r),r&&(t+=1),n=r?t:t+.5,I(t)}else n=t+=1;W(n)}}function W(t){t!==p&&(_(F(t)),m(t),e.onChange(t))}return(0,i.useEffect)((function(){var t,n;!function(){var t="react-stars";B(e.classNames+" "+t)}(),t=e.value,n=e.count,m(t<0||t>n?0:t),_(F(e.value)),C(e),u((Math.random()+"").replace(".","")),k(function(e){return!e.isHalf&&e.emptyIcon&&e.filledIcon||e.isHalf&&e.emptyIcon&&e.halfIcon&&e.filledIcon}(e)),I(Math.floor(e.value)),R(e.isHalf&&e.value%1<.5)}),[]),a.default.createElement("div",{className:"react-stars-wrapper-"+o,style:{display:"flex"}},a.default.createElement("div",{tabIndex:T.a11y&&T.edit?0:null,"aria-label":"add rating by typing an integer from 0 to 5 or pressing arrow keys",onKeyDown:function(e){if(T.a11y||T.edit){var t=e.key,n=p,r=Number(t);r?Number.isInteger(r)&&r>0&&r<=T.count&&(n=r):("ArrowUp"===t||"ArrowRight"===t)&&n<T.count?(e.preventDefault(),n+=T.isHalf?.5:1):("ArrowDown"===t||"ArrowLeft"===t)&&n>.5&&(e.preventDefault(),n-=T.isHalf?.5:1),Z(n),W(n)}},className:N,style:c},T.isHalf&&function(){return a.default.createElement("style",{dangerouslySetInnerHTML:{__html:w?(e=T.activeColor,"\n          span.react-stars-half > * {\n          color: "+e+";\n      }"):h(T.activeColor,o)}});var e}(),y.map((function(e,t){return a.default.createElement(l.default,{key:t,index:t,active:e.active,config:T,onMouseOver:$,onMouseLeave:U,onClick:H,halfStarHidden:D,halfStarAt:P,isUsingIcons:w,uniqueness:o})})),a.default.createElement("p",{style:{position:"absolute",left:"-200rem"},role:"status"},p)))}f.propTypes={classNames:o.default.string,edit:o.default.bool,half:o.default.bool,value:o.default.number,count:o.default.number,char:o.default.string,size:o.default.number,color:o.default.string,activeColor:o.default.string,emptyIcon:o.default.element,halfIcon:o.default.element,filledIcon:o.default.element,a11y:o.default.bool},f.defaultProps={edit:!0,half:!1,value:0,count:5,char:"\u2605",size:15,color:"gray",activeColor:"#ffd700",a11y:!0,onChange:function(){}},t.Z=f},9059:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=e.index,n=e.active,i=e.config,a=e.onMouseOver,l=e.onMouseLeave,u=e.onClick,c=e.halfStarHidden,h=e.halfStarAt,f=e.isUsingIcons,d=e.uniqueness,p=i.color,m=i.activeColor,v=i.size,g=i.char,y=i.isHalf,_=i.edit,x=i.halfIcon,b=i.emptyIcon,w=i.filledIcon,k="",E=!1;y&&!c&&h===t&&(k=f?"react-stars-half":"react-stars-"+d,E=!0);var S=r({},s,{color:n?m:p,cursor:_?"pointer":"default",fontSize:v+"px"});return o.default.createElement("span",{className:k,style:S,key:t,"data-index":t,"data-forhalf":w?t:g,onMouseOver:a,onMouseMove:a,onMouseLeave:l,onClick:u},f?n?w:!n&&E?x:b:g)};var i,a=n(2791),o=(i=a)&&i.__esModule?i:{default:i};var s={position:"relative",overflow:"hidden",cursor:"pointer",display:"block",float:"left"}},8459:function(e,t){"use strict";var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),v=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case s:case o:case f:case d:return e;default:switch(e=e&&e.$$typeof){case c:case u:case h:case m:case p:case l:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference")},6900:function(e,t,n){"use strict";n(8459)},6374:function(e,t,n){"use strict";var r=n(2791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.Fragment=a,t.jsx=u,t.jsxs=u},9117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,v={};function g(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var x=_.prototype=new y;x.constructor=_,m(x,g.prototype),x.isPureReactComponent=!0;var b=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)w.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+M(l,0):a,b(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",b(e))for(var u=0;u<e.length;u++){var c=a+M(s=e[u],u);l+=A(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=A(s=s.value,t,i,c=a+M(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},L={transition:null},D={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:L,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=k.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)w.call(t,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=L.transition;L.transition={};try{e()}finally{L.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return z.current.useCallback(e,t)},t.useContext=function(e){return z.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return z.current.useDeferredValue(e)},t.useEffect=function(e,t){return z.current.useEffect(e,t)},t.useId=function(){return z.current.useId()},t.useImperativeHandle=function(e,t,n){return z.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return z.current.useMemo(e,t)},t.useReducer=function(e,t,n){return z.current.useReducer(e,t,n)},t.useRef=function(e){return z.current.useRef(e)},t.useState=function(e){return z.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return z.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return z.current.useTransition()},t.version="18.2.0"},2791:function(e,t,n){"use strict";e.exports=n(9117)},184:function(e,t,n){"use strict";e.exports=n(6374)},6813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,f=null,d=3,p=!1,m=!1,v=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function b(e){if(v=!1,x(e),!m)if(null!==r(u))m=!0,L(w);else{var t=r(c);null!==t&&D(b,t.startTime-e)}}function w(e,n){m=!1,v&&(v=!1,y(T),T=-1),p=!0;var a=d;try{for(x(n),f=r(u);null!==f&&(!(f.expirationTime>n)||e&&!A());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var s=o(f.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?f.callback=s:f===r(u)&&i(u),x(n)}else i(u);f=r(u)}if(null!==f)var l=!0;else{var h=r(c);null!==h&&D(b,h.startTime-n),l=!1}return l}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,S=null,T=-1,C=5,M=-1;function A(){return!(t.unstable_now()-M<C)}function P(){if(null!==S){var e=t.unstable_now();M=e;var n=!0;try{n=S(!0,e)}finally{n?k():(E=!1,S=null)}}else E=!1}if("function"===typeof _)k=function(){_(P)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,z=I.port2;I.port1.onmessage=P,k=function(){z.postMessage(null)}}else k=function(){g(P,0)};function L(e){S=e,E||(E=!0,k())}function D(e,n){T=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(v?(y(T),T=-1):v=!0,D(b,a-o))):(e.sortIndex=s,n(u,e),m||p||(m=!0,L(w))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},5296:function(e,t,n){"use strict";e.exports=n(6813)},1561:function(e,t,n){"use strict";var r=n(2791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,c=r[1];return s((function(){i.value=n,i.getSnapshot=t,u(i)&&c({inst:i})}),[e,n,t]),o((function(){return u(i)&&c({inst:i}),e((function(){u(i)&&c({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},7595:function(e,t,n){"use strict";var r=n(2791),i=n(7248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;h=u((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,s=n)}var o,s,l=!1,u=void 0===n?null:n;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,n,r,i]);var d=o(e,h[0],h[1]);return l((function(){f.hasValue=!0,f.value=d}),[d]),c(d),d}},7248:function(e,t,n){"use strict";e.exports=n(1561)},327:function(e,t,n){"use strict";e.exports=n(7595)},2533:function(e){function t(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=function(){return[]},t.resolve=t,t.id=2533,e.exports=t},3897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},5372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},3405:function(e,t,n){var r=n(3897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},6690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(9617);function a(t,n,o){return i()?(e.exports=a=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=a=function(e,t,n){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return n&&r(a,n.prototype),a},e.exports.__esModule=!0,e.exports.default=e.exports),a.apply(null,arguments)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},9728:function(e,t,n){var r=n(4062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},4704:function(e,t,n){var r=n(6116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}},e.exports.__esModule=!0,e.exports.default=e.exports},6389:function(e,t,n){var r=n(3808),i=n(9617),a=n(4993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var o=r(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},8416:function(e,t,n){var r=n(4062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},1588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(arguments.length<3?e:n):a.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},3808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},1655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},6035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},9617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},9498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},8872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},2218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},2281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4993:function(e,t,n){var r=n(8698).default,i=n(6115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7424:function(e,t,n){var r=n(5372),i=n(8872),a=n(6116),o=n(2218);e.exports=function(e,t){return r(e)||i(e,t)||a(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(3808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},1589:function(e,t,n){var r=n(5372),i=n(9498),a=n(6116),o=n(2218);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(3405),i=n(9498),a=n(6116),o=n(2281);e.exports=function(e){return r(e)||i(e)||a(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},5036:function(e,t,n){var r=n(8698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},4062:function(e,t,n){var r=n(8698).default,i=n(5036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},8698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},6116:function(e,t,n){var r=n(3897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},3496:function(e,t,n){var r=n(3808),i=n(6015),a=n(6035),o=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return o(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},3878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},5861:function(e,t,n){"use strict";function r(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,a){var o=e.apply(t,n);function s(e){r(o,i,a,s,l,"next",e)}function l(e){r(o,i,a,s,l,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},5671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},3144:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(9142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function a(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},7762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(9142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},9199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},5267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},4165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(P){c=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,o=Object.create(i.prototype),s=new C(r||[]);return a(o,"_invoke",{value:k(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=h;var d={};function p(){}function m(){}function v(){}var g={};c(g,s,(function(){return this}));var y=Object.getPrototypeOf,_=y&&y(y(M([])));_&&_!==t&&n.call(_,s)&&(g=_);var x=v.prototype=p.prototype=Object.create(g);function b(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(a,o,s,l){var u=f(e[a],e,o);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==(0,r.Z)(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,s,l)}),(function(e){i("throw",e,s,l)})):t.resolve(h).then((function(e){c.value=e,s(c)}),(function(e){return i("throw",e,s,l)}))}l(u.arg)}var o;a(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=E(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return m.prototype=v,a(x,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=c(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,c(e,u,"GeneratorFunction")),e.prototype=Object.create(x),e},e.awrap=function(e){return{__await:e}},b(w.prototype),c(w.prototype,l,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(h(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(x),c(x,u,"Generator"),c(x,s,(function(){return this})),c(x,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}},9439:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(3878);var i=n(181),a=n(5267);function o(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,a.Z)()}},3433:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(907);var i=n(9199),a=n(181);function o(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,a.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},9142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},1002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{3:"1303fa99",372:"16f5fa58",443:"ce3f6284",738:"363b43f6",787:"0e3c9aeb",856:"7c6dd01b"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="swiftshop:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var f=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkswiftshop=self.webpackChunkswiftshop||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e=n(2791),t=n.t(e,2),r=n(1250),i=n(9439),a=n(3433),o=n(5671),s=n(3144);function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function h(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}var f=n(1002);function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){var t=h();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===(0,f.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,n)}}function m(e,t,n){return m=h()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&l(i,n.prototype),i},m.apply(null,arguments)}function v(e){var t="function"===typeof Map?new Map:void 0;return v=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return m(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},v(e)}var g=n(3878),y=n(9199),_=n(181),x=n(5267);var b,w=n(7762);function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(b||(b={}));var E,S="popstate";function T(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function C(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function M(e,t){return{usr:e.state,key:e.key,idx:t}}function A(e,t,n,r){return void 0===n&&(n=null),k({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?I(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function P(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function I(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function z(e,t,n,r){void 0===r&&(r={});var i=r,a=i.window,o=void 0===a?document.defaultView:a,s=i.v5Compat,l=void 0!==s&&s,u=o.history,c=b.Pop,h=null,f=d();function d(){return(u.state||{idx:null}).idx}function p(){c=b.Pop;var e=d(),t=null==e?null:e-f;f=e,h&&h({action:c,location:v.location,delta:t})}function m(e){var t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:P(e);return T(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,u.replaceState(k({},u.state,{idx:f}),""));var v={get action(){return c},get location(){return e(o,u)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return o.addEventListener(S,p),h=e,function(){o.removeEventListener(S,p),h=null}},createHref:function(e){return t(o,e)},createURL:m,encodeLocation:function(e){var t=m(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=b.Push;var r=A(v.location,e,t);n&&n(r,e);var i=M(r,f=d()+1),a=v.createHref(r);try{u.pushState(i,"",a)}catch(s){if(s instanceof DOMException&&"DataCloneError"===s.name)throw s;o.location.assign(a)}l&&h&&h({action:c,location:v.location,delta:1})},replace:function(e,t){c=b.Replace;var r=A(v.location,e,t);n&&n(r,e);var i=M(r,f=d()),a=v.createHref(r);u.replaceState(i,"",a),l&&h&&h({action:c,location:v.location,delta:0})},go:function(e){return u.go(e)}};return v}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(E||(E={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function L(e,t,n){void 0===n&&(n="/");var r=q(("string"===typeof t?I(t):t).pathname||"/",n);if(null==r)return null;var i=D(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=Z(i[o],W(r));return a}function D(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(T(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var s=Y([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(T(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),D(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:U(s,e.index),routesMeta:l})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=(0,w.Z)(R(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(s){a.e(s)}finally{a.f()}}else i(e,t)})),t}function R(e){var t=e.split("/");if(0===t.length)return[];var n,r=(n=t,(0,g.Z)(n)||(0,y.Z)(n)||(0,_.Z)(n)||(0,x.Z)()),i=r[0],o=r.slice(1),s=i.endsWith("?"),l=i.replace(/\?$/,"");if(0===o.length)return s?[l,""]:[l];var u=R(o.join("/")),c=[];return c.push.apply(c,(0,a.Z)(u.map((function(e){return""===e?l:[l,e].join("/")})))),s&&c.push.apply(c,(0,a.Z)(u)),c.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}var O=/^:\w+$/,j=3,N=2,B=1,F=10,$=-2,V=function(e){return"*"===e};function U(e,t){var n=e.split("/"),r=n.length;return n.some(V)&&(r+=$),t&&(r+=N),n.filter((function(e){return!V(e)})).reduce((function(e,t){return e+(O.test(t)?j:""===t?B:F)}),r)}function Z(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var s=n[o],l=o===n.length-1,u="/"===i?t:t.slice(i.length)||"/",c=H({path:s.relativePath,caseSensitive:s.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);var h=s.route;a.push({params:r,pathname:Y([i,c.pathname]),pathnameBase:J(Y([i,c.pathnameBase])),route:h}),"/"!==c.pathnameBase&&(i=Y([i,c.pathnameBase]))}return a}function H(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);C("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=(0,i.Z)(n,2),a=r[0],o=r[1],s=t.match(a);if(!s)return null;var l=s[0],u=l.replace(/(.)\/+$/,"$1"),c=s.slice(1),h=o.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";u=l.slice(0,l.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return C(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(c[n]||"",t),e}),{});return{params:h,pathname:l,pathnameBase:u,pattern:e}}function W(e){try{return decodeURI(e)}catch(t){return C(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function G(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function K(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=I(e):(T(!(i=k({},e)).pathname||!i.pathname.includes("?"),G("?","pathname","search",i)),T(!i.pathname||!i.pathname.includes("#"),G("#","pathname","hash",i)),T(!i.search||!i.search.includes("#"),G("#","search","hash",i)));var a,o=""===e||""===i.pathname,s=o?"/":i.pathname;if(r||null==s)a=n;else{var l=t.length-1;if(s.startsWith("..")){for(var u=s.split("/");".."===u[0];)u.shift(),l-=1;i.pathname=u.join("/")}a=l>=0?t[l]:"/"}var c=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?I(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,s=void 0===o?"":o,l=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:l,search:Q(a),hash:ee(s)}}(i,a),h=s&&"/"!==s&&s.endsWith("/"),f=(o||"."===s)&&n.endsWith("/");return c.pathname.endsWith("/")||!h&&!f||(c.pathname+="/"),c}var Y=function(e){return e.join("/").replace(/\/\/+/g,"/")},J=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},Q=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ee=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},te=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(v(Error));function ne(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var re=["post","put","patch","delete"],ie=(new Set(re),["get"].concat(re));new Set(ie),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ae(){return ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ae.apply(this,arguments)}var oe=e.createContext(null);var se=e.createContext(null);var le=e.createContext(null);var ue=e.createContext(null);var ce=e.createContext(null);var he=e.createContext({outlet:null,matches:[],isDataRoute:!1});var fe=e.createContext(null);function de(){return null!=e.useContext(ce)}function pe(){return de()||T(!1),e.useContext(ce).location}function me(t){e.useContext(ue).static||e.useLayoutEffect(t)}function ve(){return e.useContext(he).isDataRoute?function(){var t=Ce(be.UseNavigateStable).router,n=Ae(we.UseNavigateStable),r=e.useRef(!1);me((function(){r.current=!0}));var i=e.useCallback((function(e,i){void 0===i&&(i={}),r.current&&("number"===typeof e?t.navigate(e):t.navigate(e,ae({fromRouteId:n},i)))}),[t,n]);return i}():function(){de()||T(!1);var t=e.useContext(oe),n=e.useContext(ue),r=n.basename,i=n.navigator,a=e.useContext(he).matches,o=pe().pathname,s=JSON.stringify(X(a).map((function(e){return e.pathnameBase}))),l=e.useRef(!1);me((function(){l.current=!0}));var u=e.useCallback((function(e,n){if(void 0===n&&(n={}),l.current)if("number"!==typeof e){var a=K(e,JSON.parse(s),o,"path"===n.relative);null==t&&"/"!==r&&(a.pathname="/"===a.pathname?r:Y([r,a.pathname])),(n.replace?i.replace:i.push)(a,n.state,n)}else i.go(e)}),[r,i,s,o,t]);return u}()}function ge(){var t=e.useContext(he).matches,n=t[t.length-1];return n?n.params:{}}function ye(t,n){var r=(void 0===n?{}:n).relative,i=e.useContext(he).matches,a=pe().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase})));return e.useMemo((function(){return K(t,JSON.parse(o),a,"path"===r)}),[t,o,a,r])}function _e(t,n,r){de()||T(!1);var i,a=e.useContext(ue).navigator,o=e.useContext(he).matches,s=o[o.length-1],l=s?s.params:{},u=(s&&s.pathname,s?s.pathnameBase:"/"),c=(s&&s.route,pe());if(n){var h,f="string"===typeof n?I(n):n;"/"===u||(null==(h=f.pathname)?void 0:h.startsWith(u))||T(!1),i=f}else i=c;var d=i.pathname||"/",p=L(t,{pathname:"/"===u?d:d.slice(u.length)||"/"});var m=Te(p&&p.map((function(e){return Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Y([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Y([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),o,r);return n&&m?e.createElement(ce.Provider,{value:{location:ae({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:b.Pop}},m):m}function xe(){var t=function(){var t,n=e.useContext(fe),r=Me(we.UseRouteError),i=Ae(we.UseRouteError);if(n)return n;return null==(t=r.errors)?void 0:t[i]}(),n=ne(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i};return e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},n),r?e.createElement("pre",{style:a},r):null,null)}var be,we,ke=e.createElement(xe,null),Ee=function(t){u(r,t);var n=p(r);function r(e){var t;return(0,o.Z)(this,r),(t=n.call(this,e)).state={location:e.location,revalidation:e.revalidation,error:e.error},t}return(0,s.Z)(r,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?e.createElement(he.Provider,{value:this.props.routeContext},e.createElement(fe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}}]),r}(e.Component);function Se(t){var n=t.routeContext,r=t.match,i=t.children,a=e.useContext(oe);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(he.Provider,{value:n},i)}function Te(t,n,r){var i;if(void 0===n&&(n=[]),void 0===r&&(r=null),null==t){var a;if(null==(a=r)||!a.errors)return null;t=r.matches}var o=t,s=null==(i=r)?void 0:i.errors;if(null!=s){var l=o.findIndex((function(e){return e.route.id&&(null==s?void 0:s[e.route.id])}));l>=0||T(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((function(t,i,a){var l=i.route.id?null==s?void 0:s[i.route.id]:null,u=null;r&&(u=i.route.errorElement||ke);var c=n.concat(o.slice(0,a+1)),h=function(){var n;return n=l?u:i.route.Component?e.createElement(i.route.Component,null):i.route.element?i.route.element:t,e.createElement(Se,{match:i,routeContext:{outlet:t,matches:c,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===a)?e.createElement(Ee,{location:r.location,revalidation:r.revalidation,component:u,error:l,children:h(),routeContext:{outlet:null,matches:c,isDataRoute:!0}}):h()}),null)}function Ce(t){var n=e.useContext(oe);return n||T(!1),n}function Me(t){var n=e.useContext(se);return n||T(!1),n}function Ae(t){var n=function(t){var n=e.useContext(he);return n||T(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||T(!1),r.route.id}!function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"}(be||(be={})),function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"}(we||(we={}));var Pe;t.startTransition;function Ie(e){T(!1)}function ze(t){var n=t.basename,r=void 0===n?"/":n,i=t.children,a=void 0===i?null:i,o=t.location,s=t.navigationType,l=void 0===s?b.Pop:s,u=t.navigator,c=t.static,h=void 0!==c&&c;de()&&T(!1);var f=r.replace(/^\/*/,"/"),d=e.useMemo((function(){return{basename:f,navigator:u,static:h}}),[f,u,h]);"string"===typeof o&&(o=I(o));var p=o,m=p.pathname,v=void 0===m?"/":m,g=p.search,y=void 0===g?"":g,_=p.hash,x=void 0===_?"":_,w=p.state,k=void 0===w?null:w,E=p.key,S=void 0===E?"default":E,C=e.useMemo((function(){var e=q(v,f);return null==e?null:{location:{pathname:e,search:y,hash:x,state:k,key:S},navigationType:l}}),[f,v,y,x,k,S,l]);return null==C?null:e.createElement(ue.Provider,{value:d},e.createElement(ce.Provider,{children:a,value:C}))}function Le(e){var t=e.children,n=e.location;return _e(Re(t),n)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Pe||(Pe={}));var De=new Promise((function(){}));e.Component;function Re(t,n){void 0===n&&(n=[]);var r=[];return e.Children.forEach(t,(function(t,i){if(e.isValidElement(t)){var o=[].concat((0,a.Z)(n),[i]);if(t.type!==e.Fragment){t.type!==Ie&&T(!1),t.props.index&&t.props.children&&T(!1);var s={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(s.children=Re(t.props.children,o)),r.push(s)}else r.push.apply(r,Re(t.props.children,o))}})),r}function Oe(){return Oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function je(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);var Ne=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];var Be=t.startTransition;function Fe(t){var n=t.basename,r=t.children,a=t.future,o=t.window,s=e.useRef();null==s.current&&(s.current=function(e){return void 0===e&&(e={}),z((function(e,t){var n=e.location;return A("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:P(t)}),null,e)}({window:o,v5Compat:!0}));var l=s.current,u=e.useState({action:l.action,location:l.location}),c=(0,i.Z)(u,2),h=c[0],f=c[1],d=(a||{}).v7_startTransition,p=e.useCallback((function(e){d&&Be?Be((function(){return f(e)})):f(e)}),[f,d]);return e.useLayoutEffect((function(){return l.listen(p)}),[l,p]),e.createElement(ze,{basename:n,children:r,location:h.location,navigationType:h.action,navigator:l})}var $e="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=e.forwardRef((function(t,n){var r,i=t.onClick,a=t.relative,o=t.reloadDocument,s=t.replace,l=t.state,u=t.target,c=t.to,h=t.preventScrollReset,f=je(t,Ne),d=e.useContext(ue).basename,p=!1;if("string"===typeof c&&Ve.test(c)&&(r=c,$e))try{var m=new URL(window.location.href),v=c.startsWith("//")?new URL(m.protocol+c):new URL(c),g=q(v.pathname,d);v.origin===m.origin&&null!=g?c=g+v.search+v.hash:p=!0}catch(x){}var y=function(t,n){var r=(void 0===n?{}:n).relative;de()||T(!1);var i=e.useContext(ue),a=i.basename,o=i.navigator,s=ye(t,{relative:r}),l=s.hash,u=s.pathname,c=s.search,h=u;return"/"!==a&&(h="/"===u?a:Y([a,u])),o.createHref({pathname:h,search:c,hash:l})}(c,{relative:a}),_=function(t,n){var r=void 0===n?{}:n,i=r.target,a=r.replace,o=r.state,s=r.preventScrollReset,l=r.relative,u=ve(),c=pe(),h=ye(t,{relative:l});return e.useCallback((function(e){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();var n=void 0!==a?a:P(c)===P(h);u(t,{replace:n,state:o,preventScrollReset:s,relative:l})}}),[c,u,h,a,o,i,t,s,l])}(c,{replace:s,state:l,target:u,preventScrollReset:h,relative:a});return e.createElement("a",Oe({},f,{href:r||y,onClick:p||o?i:function(e){i&&i(e),e.defaultPrevented||_(e)},ref:n,target:u}))}));var Ze,He;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher"})(Ze||(Ze={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(He||(He={}));var We=n(7248),qe=n(327),Ge=n(4164);var Xe=function(e){e()},Ke=function(){return Xe},Ye=n(4942),Je=Symbol.for("react-redux-context-".concat(e.version)),Qe=globalThis;var et=new Proxy({},new Proxy({},{get:function(t,n){var r=function(){var t=Qe[Je];return t||(t=(0,e.createContext)(null),Qe[Je]=t),t}();return function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];return Reflect[n].apply(Reflect,[r].concat(i))}}}));function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return function(){return(0,e.useContext)(t)}}var nt=tt(),rt=function(){throw new Error("uSES not initialized!")},it=function(e,t){return e===t};function at(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,n=t===et?nt:tt(t);return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i="function"===typeof r?{equalityFn:r}:r,a=i.equalityFn,o=void 0===a?it:a,s=i.stabilityCheck,l=void 0===s?void 0:s;i.noopCheck;var u=n(),c=u.store,h=u.subscription,f=u.getServerState,d=u.stabilityCheck,p=(u.noopCheck,(0,e.useRef)(!0),(0,e.useCallback)((0,Ye.Z)({},t.name,(function(e){return t(e)}))[t.name],[t,d,l])),m=rt(h.addNestedSub,c.getState,f||c.getState,p,o);return(0,e.useDebugValue)(m),m}}var ot=at();n(2110),n(6900);var st={notify:function(){},get:function(){return[]}};function lt(e,t){var n,r=st;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=Ke(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=st)},getListeners:function(){return r}};return o}var ut=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;var ct=function(t){var n=t.store,r=t.context,i=t.children,a=t.serverState,o=t.stabilityCheck,s=void 0===o?"once":o,l=t.noopCheck,u=void 0===l?"once":l,c=(0,e.useMemo)((function(){var e=lt(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0,stabilityCheck:s,noopCheck:u}}),[n,a,s,u]),h=(0,e.useMemo)((function(){return n.getState()}),[n]);ut((function(){var e=c.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),h!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[c,h]);var f=r||et;return e.createElement(f.Provider,{value:c},i)};function ht(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=e===et?nt:tt(e);return function(){return t().store}}var ft=ht();function dt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=e===et?ft:ht(e);return function(){return t().dispatch}}var pt,mt=dt();function vt(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function gt(e){return!!e&&!!e[sn]}function yt(e){var t;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ln}(e)||Array.isArray(e)||!!e[on]||!!(null===(t=e.constructor)||void 0===t?void 0:t[on])||St(e)||Tt(e))}function _t(e,t,n){void 0===n&&(n=!1),0===xt(e)?(n?Object.keys:un)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function xt(e){var t=e[sn];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:St(e)?2:Tt(e)?3:0}function bt(e,t){return 2===xt(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function wt(e,t){return 2===xt(e)?e.get(t):e[t]}function kt(e,t,n){var r=xt(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Et(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function St(e){return tn&&e instanceof Map}function Tt(e){return nn&&e instanceof Set}function Ct(e){return e.o||e.t}function Mt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=cn(e);delete t[sn];for(var n=un(t),r=0;r<n.length;r++){var i=n[r],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function At(e,t){return void 0===t&&(t=!1),It(e)||gt(e)||!yt(e)||(xt(e)>1&&(e.set=e.add=e.clear=e.delete=Pt),Object.freeze(e),t&&_t(e,(function(e,t){return At(t,!0)}),!0)),e}function Pt(){vt(2)}function It(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function zt(e){var t=hn[e];return t||vt(18,e),t}function Lt(e,t){hn[e]||(hn[e]=t)}function Dt(){return Qt}function Rt(e,t){t&&(zt("Patches"),e.u=[],e.s=[],e.v=t)}function Ot(e){jt(e),e.p.forEach(Bt),e.p=null}function jt(e){e===Qt&&(Qt=e.l)}function Nt(e){return Qt={p:[],l:Qt,h:e,m:!0,_:0}}function Bt(e){var t=e[sn];0===t.i||1===t.i?t.j():t.g=!0}function Ft(e,t){t._=t.p.length;var n=t.p[0],r=void 0!==e&&e!==n;return t.h.O||zt("ES5").S(t,e,r),r?(n[sn].P&&(Ot(t),vt(4)),yt(e)&&(e=$t(t,e),t.l||Ut(t,e)),t.u&&zt("Patches").M(n[sn].t,e,t.u,t.s)):e=$t(t,n,[]),Ot(t),t.u&&t.v(t.u,t.s),e!==an?e:void 0}function $t(e,t,n){if(It(t))return t;var r=t[sn];if(!r)return _t(t,(function(i,a){return Vt(e,r,t,i,a,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return Ut(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=4===r.i||5===r.i?r.o=Mt(r.k):r.o,a=i,o=!1;3===r.i&&(a=new Set(i),i.clear(),o=!0),_t(a,(function(t,a){return Vt(e,r,i,t,a,n,o)})),Ut(e,i,!1),n&&e.u&&zt("Patches").N(r,n,e.u,e.s)}return r.o}function Vt(e,t,n,r,i,a,o){if(gt(i)){var s=$t(e,i,a&&t&&3!==t.i&&!bt(t.R,r)?a.concat(r):void 0);if(kt(n,r,s),!gt(s))return;e.m=!1}else o&&n.add(i);if(yt(i)&&!It(i)){if(!e.h.D&&e._<1)return;$t(e,i),t&&t.A.l||Ut(e,i)}}function Ut(e,t,n){void 0===n&&(n=!1),!e.l&&e.h.D&&e.m&&At(t,n)}function Zt(e,t){var n=e[sn];return(n?Ct(n):e)[t]}function Ht(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Wt(e){e.P||(e.P=!0,e.l&&Wt(e.l))}function qt(e){e.o||(e.o=Mt(e.t))}function Gt(e,t,n){var r=St(t)?zt("MapSet").F(t,n):Tt(t)?zt("MapSet").T(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:Dt(),P:!1,I:!1,R:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,a=fn;n&&(i=[r],a=dn);var o=Proxy.revocable(i,a),s=o.revoke,l=o.proxy;return r.k=l,r.j=s,l}(t,n):zt("ES5").J(t,n);return(n?n.A:Dt()).p.push(r),r}function Xt(e){return gt(e)||vt(22,e),function e(t){if(!yt(t))return t;var n,r=t[sn],i=xt(t);if(r){if(!r.P&&(r.i<4||!zt("ES5").K(r)))return r.t;r.I=!0,n=Kt(t,i),r.I=!1}else n=Kt(t,i);return _t(n,(function(t,i){r&&wt(r.t,t)===i||kt(n,t,e(i))})),3===i?new Set(n):n}(e)}function Kt(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mt(e)}function Yt(){function e(e,t){var n=i[e];return n?n.enumerable=t:i[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[sn];return fn.get(t,e)},set:function(t){var n=this[sn];fn.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var i=e[t][sn];if(!i.P)switch(i.i){case 5:r(i)&&Wt(i);break;case 4:n(i)&&Wt(i)}}}function n(e){for(var t=e.t,n=e.k,r=un(n),i=r.length-1;i>=0;i--){var a=r[i];if(a!==sn){var o=t[a];if(void 0===o&&!bt(t,a))return!0;var s=n[a],l=s&&s[sn];if(l?l.t!==o:!Et(s,o))return!0}}var u=!!t[sn];return r.length!==un(t).length+(u?0:1)}function r(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);if(n&&!n.get)return!0;for(var r=0;r<t.length;r++)if(!t.hasOwnProperty(r))return!0;return!1}var i={};Lt("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var a=cn(n);delete a[sn];for(var o=un(a),s=0;s<o.length;s++){var l=o[s];a[l]=e(l,t||!!a[l].enumerable)}return Object.create(Object.getPrototypeOf(n),a)}(r,t),a={i:r?5:4,A:n?n.A:Dt(),P:!1,I:!1,R:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,sn,{value:a,writable:!0}),i},S:function(e,n,i){i?gt(n)&&n[sn].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[sn];if(n){var i=n.t,a=n.k,o=n.R,s=n.i;if(4===s)_t(a,(function(t){t!==sn&&(void 0!==i[t]||bt(i,t)?o[t]||e(a[t]):(o[t]=!0,Wt(n)))})),_t(i,(function(e){void 0!==a[e]||bt(a,e)||(o[e]=!1,Wt(n))}));else if(5===s){if(r(n)&&(Wt(n),o.length=!0),a.length<i.length)for(var l=a.length;l<i.length;l++)o[l]=!1;else for(var u=i.length;u<a.length;u++)o[u]=!0;for(var c=Math.min(a.length,i.length),h=0;h<c;h++)a.hasOwnProperty(h)||(o[h]=!0),void 0===o[h]&&e(a[h])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?n(e):r(e)}})}!function(e){rt=e}(qe.useSyncExternalStoreWithSelector),function(e){e}(We.useSyncExternalStore),pt=Ge.unstable_batchedUpdates,Xe=pt;var Jt,Qt,en="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),tn="undefined"!=typeof Map,nn="undefined"!=typeof Set,rn="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,an=en?Symbol.for("immer-nothing"):((Jt={})["immer-nothing"]=!0,Jt),on=en?Symbol.for("immer-draftable"):"__$immer_draftable",sn=en?Symbol.for("immer-state"):"__$immer_state",ln=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),un="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,cn=Object.getOwnPropertyDescriptors||function(e){var t={};return un(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},hn={},fn={get:function(e,t){if(t===sn)return e;var n=Ct(e);if(!bt(n,t))return function(e,t,n){var r,i=Ht(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var r=n[t];return e.I||!yt(r)?r:r===Zt(e.t,t)?(qt(e),e.o[t]=Gt(e.A.h,r,e)):r},has:function(e,t){return t in Ct(e)},ownKeys:function(e){return Reflect.ownKeys(Ct(e))},set:function(e,t,n){var r=Ht(Ct(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Zt(Ct(e),t),a=null==i?void 0:i[sn];if(a&&a.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Et(n,i)&&(void 0!==n||bt(e.t,t)))return!0;qt(e),Wt(e)}return e.o[t]===n&&(void 0!==n||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return void 0!==Zt(e.t,t)||t in e.t?(e.R[t]=!1,qt(e),Wt(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Ct(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){vt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){vt(12)}},dn={};_t(fn,(function(e,t){dn[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),dn.deleteProperty=function(e,t){return dn.set.call(this,e,t,void 0)},dn.set=function(e,t,n){return fn.set.call(this,e[0],t,n,e[0])};var pn=function(){function e(e){var t=this;this.O=rn,this.D=!0,this.produce=function(e,n,r){if("function"==typeof e&&"function"!=typeof n){var i=n;n=e;var a=t;return function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(o))}))}}var o;if("function"!=typeof n&&vt(6),void 0!==r&&"function"!=typeof r&&vt(7),yt(e)){var s=Nt(t),l=Gt(t,e,void 0),u=!0;try{o=n(l),u=!1}finally{u?Ot(s):jt(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return Rt(s,r),Ft(e,s)}),(function(e){throw Ot(s),e})):(Rt(s,r),Ft(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=n(e))&&(o=e),o===an&&(o=void 0),t.D&&At(o,!0),r){var c=[],h=[];zt("Patches").M(e,o,c,h),r(c,h)}return o}vt(21,e)},this.produceWithPatches=function(e,n){if("function"==typeof e)return function(n){for(var r=arguments.length,i=Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];return t.produceWithPatches(n,(function(t){return e.apply(void 0,[t].concat(i))}))};var r,i,a=t.produce(e,n,(function(e,t){r=e,i=t}));return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(e){return[e,r,i]})):[a,r,i]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){yt(e)||vt(8),gt(e)&&(e=Xt(e));var t=Nt(this),n=Gt(this,e,void 0);return n[sn].C=!0,jt(t),n},t.finishDraft=function(e,t){var n=(e&&e[sn]).A;return Rt(n,t),Ft(void 0,n)},t.setAutoFreeze=function(e){this.D=e},t.setUseProxies=function(e){e&&!rn&&vt(20),this.O=e},t.applyPatches=function(e,t){var n;for(n=t.length-1;n>=0;n--){var r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));var i=zt("Patches").$;return gt(e)?i(e,t):this.produce(e,(function(e){return i(e,t)}))},e}(),mn=new pn,vn=mn.produce,gn=(mn.produceWithPatches.bind(mn),mn.setAutoFreeze.bind(mn),mn.setUseProxies.bind(mn),mn.applyPatches.bind(mn),mn.createDraft.bind(mn),mn.finishDraft.bind(mn),vn);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,Ye.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var bn="function"===typeof Symbol&&Symbol.observable||"@@observable",wn=function(){return Math.random().toString(36).substring(7).split("").join(".")},kn={INIT:"@@redux/INIT"+wn(),REPLACE:"@@redux/REPLACE"+wn(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+wn()}};function En(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Sn(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(xn(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(xn(1));return n(Sn)(e,t)}if("function"!==typeof e)throw new Error(xn(2));var i=e,a=t,o=[],s=o,l=!1;function u(){s===o&&(s=o.slice())}function c(){if(l)throw new Error(xn(3));return a}function h(e){if("function"!==typeof e)throw new Error(xn(4));if(l)throw new Error(xn(5));var t=!0;return u(),s.push(e),function(){if(t){if(l)throw new Error(xn(6));t=!1,u();var n=s.indexOf(e);s.splice(n,1),o=null}}}function f(e){if(!En(e))throw new Error(xn(7));if("undefined"===typeof e.type)throw new Error(xn(8));if(l)throw new Error(xn(9));try{l=!0,a=i(a,e)}finally{l=!1}for(var t=o=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:kn.INIT}),(r={dispatch:f,subscribe:h,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(xn(10));i=e,f({type:kn.REPLACE})}})[bn]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(xn(11));function n(){e.next&&e.next(c())}return n(),{unsubscribe:t(n)}}})[bn]=function(){return this},e},r}function Tn(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:kn.INIT}))throw new Error(xn(12));if("undefined"===typeof n(void 0,{type:kn.PROBE_UNKNOWN_ACTION()}))throw new Error(xn(13))}))}(n)}catch(s){a=s}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var l=o[s],u=n[l],c=e[l],h=u(c,t);if("undefined"===typeof h){t&&t.type;throw new Error(xn(14))}i[l]=h,r=r||h!==c}return(r=r||o.length!==Object.keys(e).length)?i:e}}function Cn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function Mn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(xn(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=Cn.apply(void 0,a)(n.dispatch),_n(_n({},n),{},{dispatch:r})}}}function An(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"===typeof i?i(n,r,e):t(i)}}}}var Pn=An();Pn.withExtraArgument=An;var In=Pn,zn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ln=function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},Dn=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Rn=Object.defineProperty,On=Object.defineProperties,jn=Object.getOwnPropertyDescriptors,Nn=Object.getOwnPropertySymbols,Bn=Object.prototype.hasOwnProperty,Fn=Object.prototype.propertyIsEnumerable,$n=function(e,t,n){return t in e?Rn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},Vn=function(e,t){for(var n in t||(t={}))Bn.call(t,n)&&$n(e,n,t[n]);if(Nn)for(var r=0,i=Nn(t);r<i.length;r++){n=i[r];Fn.call(t,n)&&$n(e,n,t[n])}return e},Un=function(e,t){return On(e,jn(t))},Zn=function(e,t,n){return new Promise((function(r,i){var a=function(e){try{s(n.next(e))}catch(t){i(t)}},o=function(e){try{s(n.throw(e))}catch(t){i(t)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(a,o)};s((n=n.apply(e,t)).next())}))},Hn="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Cn:Cn.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Wn(e){if("object"!==typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var qn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return zn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Dn([void 0],e[0].concat(this)))):new(t.bind.apply(t,Dn([void 0],e.concat(this))))},t}(Array),Gn=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return zn(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)},t.prototype.prepend=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,Dn([void 0],e[0].concat(this)))):new(t.bind.apply(t,Dn([void 0],e.concat(this))))},t}(Array);function Xn(e){return yt(e)?gn(e,(function(){})):e}function Kn(){return function(e){return function(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=(e.immutableCheck,e.serializableCheck,new qn);n&&(!function(e){return"boolean"===typeof e}(n)?r.push(In.withExtraArgument(n.extraArgument)):r.push(In));0;return r}(e)}}function Yn(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var i=t.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return Vn(Vn({type:e,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Jn(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"===typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Qn(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof e.initialState?e.initialState:Xn(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},s={},l={};function u(){var t="function"===typeof e.extraReducers?Jn(e.extraReducers):[e.extraReducers],n=t[0],i=void 0===n?{}:n,a=t[1],o=void 0===a?[]:a,l=t[2],u=void 0===l?void 0:l,c=Vn(Vn({},i),s);return function(e,t,n,r){void 0===n&&(n=[]);var i,a="function"===typeof t?Jn(t):[t,n,r],o=a[0],s=a[1],l=a[2];if(function(e){return"function"===typeof e}(e))i=function(){return Xn(e())};else{var u=Xn(e);i=function(){return u}}function c(e,t){void 0===e&&(e=i());var n=Dn([o[t.type]],s.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[l]),n.reduce((function(e,n){if(n){var r;if(gt(e))return void 0===(r=n(e,t))?e:r;if(yt(e))return gn(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=i,c}(r,(function(e){for(var t in c)e.addCase(t,c[t]);for(var n=0,r=o;n<r.length;n++){var i=r[n];e.addMatcher(i.matcher,i.reducer)}u&&e.addDefaultCase(u)}))}return a.forEach((function(e){var n,r,a=i[e],u=t+"/"+e;"reducer"in a?(n=a.reducer,r=a.prepare):n=a,o[e]=n,s[u]=n,l[e]=r?Yn(u,r):Yn(u)})),{name:t,reducer:function(e,t){return n||(n=u()),n(e,t)},actions:l,caseReducers:o,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}var er=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},tr=["name","message","stack","code"],nr=function(e,t){this.payload=e,this.meta=t},rr=function(e,t){this.payload=e,this.meta=t},ir=function(e){if("object"===typeof e&&null!==e){for(var t={},n=0,r=tr;n<r.length;n++){var i=r[n];"string"===typeof e[i]&&(t[i]=e[i])}return t}return{message:String(e)}},ar=function(){function e(e,t,n){var r=Yn(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:Un(Vn({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),i=Yn(e+"/pending",(function(e,t,n){return{payload:void 0,meta:Un(Vn({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),a=Yn(e+"/rejected",(function(e,t,r,i,a){return{payload:i,error:(n&&n.serializeError||ir)(e||"Rejected"),meta:Un(Vn({},a||{}),{arg:r,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,l,u){var c,h=(null==n?void 0:n.idGenerator)?n.idGenerator(e):er(),f=new o;function d(e){c=e,f.abort()}var p=function(){return Zn(this,null,(function(){var o,p,m,v,g,y;return Ln(this,(function(_){switch(_.label){case 0:return _.trys.push([0,4,,5]),v=null==(o=null==n?void 0:n.condition)?void 0:o.call(n,e,{getState:l,extra:u}),null===(x=v)||"object"!==typeof x||"function"!==typeof x.then?[3,2]:[4,v];case 1:v=_.sent(),_.label=2;case 2:if(!1===v||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,g=new Promise((function(e,t){return f.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:c||"Aborted"})}))})),s(i(h,e,null==(p=null==n?void 0:n.getPendingMeta)?void 0:p.call(n,{requestId:h,arg:e},{getState:l,extra:u}))),[4,Promise.race([g,Promise.resolve(t(e,{dispatch:s,getState:l,extra:u,requestId:h,signal:f.signal,abort:d,rejectWithValue:function(e,t){return new nr(e,t)},fulfillWithValue:function(e,t){return new rr(e,t)}})).then((function(t){if(t instanceof nr)throw t;return t instanceof rr?r(t.payload,h,e,t.meta):r(t,h,e)}))])];case 3:return m=_.sent(),[3,5];case 4:return y=_.sent(),m=y instanceof nr?a(null,h,e,y.payload,y.meta):a(y,h,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&a.match(m)&&m.meta.condition||s(m),[2,m]}var x}))}))}();return Object.assign(p,{abort:d,requestId:h,arg:e,unwrap:function(){return p.then(or)}})}}),{pending:i,rejected:a,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function or(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var sr="listenerMiddleware";Yn(sr+"/add"),Yn(sr+"/removeAll"),Yn(sr+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:globalThis);var lr,ur=function(e){return function(t){setTimeout(t,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ur(10);Yt();var cr=n(4165),hr=n(5861);function fr(e,t){return function(){return e.apply(t,arguments)}}var dr,pr=Object.prototype.toString,mr=Object.getPrototypeOf,vr=(dr=Object.create(null),function(e){var t=pr.call(e);return dr[t]||(dr[t]=t.slice(8,-1).toLowerCase())}),gr=function(e){return e=e.toLowerCase(),function(t){return vr(t)===e}},yr=function(e){return function(t){return typeof t===e}},_r=Array.isArray,xr=yr("undefined");var br=gr("ArrayBuffer");var wr=yr("string"),kr=yr("function"),Er=yr("number"),Sr=function(e){return null!==e&&"object"===typeof e},Tr=function(e){if("object"!==vr(e))return!1;var t=mr(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Cr=gr("Date"),Mr=gr("File"),Ar=gr("Blob"),Pr=gr("FileList"),Ir=gr("URLSearchParams");function zr(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),_r(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,s=a?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;for(n=0;n<l;n++)o=s[n],t.call(null,e[o],o,e)}}function Lr(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Dr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Rr=function(e){return!xr(e)&&e!==Dr};var Or,jr=(Or="undefined"!==typeof Uint8Array&&mr(Uint8Array),function(e){return Or&&e instanceof Or}),Nr=gr("HTMLFormElement"),Br=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),Fr=gr("RegExp"),$r=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};zr(n,(function(n,i){!1!==t(n,i,e)&&(r[i]=n)})),Object.defineProperties(e,r)},Vr="abcdefghijklmnopqrstuvwxyz",Ur="0123456789",Zr={DIGIT:Ur,ALPHA:Vr,ALPHA_DIGIT:Vr+Vr.toUpperCase()+Ur};var Hr=gr("AsyncFunction"),Wr={isArray:_r,isArrayBuffer:br,isBuffer:function(e){return null!==e&&!xr(e)&&null!==e.constructor&&!xr(e.constructor)&&kr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||kr(e.append)&&("formdata"===(t=vr(e))||"object"===t&&kr(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&br(e.buffer)},isString:wr,isNumber:Er,isBoolean:function(e){return!0===e||!1===e},isObject:Sr,isPlainObject:Tr,isUndefined:xr,isDate:Cr,isFile:Mr,isBlob:Ar,isRegExp:Fr,isFunction:kr,isStream:function(e){return Sr(e)&&kr(e.pipe)},isURLSearchParams:Ir,isTypedArray:jr,isFileList:Pr,forEach:zr,merge:function e(){for(var t=(Rr(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Lr(n,i)||i;Tr(n[a])&&Tr(r)?n[a]=e(n[a],r):Tr(r)?n[a]=e({},r):_r(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&zr(arguments[i],r);return n},extend:function(e,t,n){return zr(t,(function(t,r){n&&kr(t)?e[r]=fr(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&mr(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:vr,kindOfTest:gr,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(_r(e))return e;var t=e.length;if(!Er(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Nr,hasOwnProperty:Br,hasOwnProp:Br,reduceDescriptors:$r,freezeMethods:function(e){$r(e,(function(t,n){if(kr(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];kr(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return _r(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return e=+e,Number.isFinite(e)?e:t},findKey:Lr,global:Dr,isContextDefined:Rr,ALPHABET:Zr,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zr.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&kr(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Sr(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=_r(n)?[]:{};return zr(n,(function(t,n){var a=e(t,r+1);!xr(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Hr,isThenable:function(e){return e&&(Sr(e)||kr(e))&&kr(e.then)&&kr(e.catch)}};function qr(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Wr.inherits(qr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Wr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var Gr=qr.prototype,Xr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Xr[e]={value:e}})),Object.defineProperties(qr,Xr),Object.defineProperty(Gr,"isAxiosError",{value:!0}),qr.from=function(e,t,n,r,i,a){var o=Object.create(Gr);return Wr.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),qr.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var Kr=qr;function Yr(e){return Wr.isPlainObject(e)||Wr.isArray(e)}function Jr(e){return Wr.endsWith(e,"[]")?e.slice(0,-2):e}function Qr(e,t,n){return e?e.concat(t).map((function(e,t){return e=Jr(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var ei=Wr.toFlatObject(Wr,{},null,(function(e){return/^is[A-Z]/.test(e)}));var ti=function(e,t,n){if(!Wr.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=Wr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Wr.isUndefined(t[e])}));var r=n.metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Wr.isSpecCompliantForm(t);if(!Wr.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Wr.isDate(e))return e.toISOString();if(!s&&Wr.isBlob(e))throw new Kr("Blob is not supported. Use a Buffer instead.");return Wr.isArrayBuffer(e)||Wr.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(Wr.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Wr.isArray(e)&&function(e){return Wr.isArray(e)&&!e.some(Yr)}(e)||(Wr.isFileList(e)||Wr.endsWith(n,"[]"))&&(s=Wr.toArray(e)))return n=Jr(n),s.forEach((function(e,r){!Wr.isUndefined(e)&&null!==e&&t.append(!0===o?Qr([n],r,a):null===o?n:n+"[]",l(e))})),!1;return!!Yr(e)||(t.append(Qr(i,n,a),l(e)),!1)}var c=[],h=Object.assign(ei,{defaultVisitor:u,convertValue:l,isVisitable:Yr});if(!Wr.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Wr.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),Wr.forEach(n,(function(n,a){!0===(!(Wr.isUndefined(n)||null===n)&&i.call(t,n,Wr.isString(a)?a.trim():a,r,h))&&e(n,r?r.concat(a):[a])})),c.pop()}}(e),t};function ni(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ri(e,t){this._pairs=[],e&&ti(e,this,t)}var ii=ri.prototype;ii.append=function(e,t){this._pairs.push([e,t])},ii.toString=function(e){var t=e?function(t){return e.call(this,t,ni)}:ni;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var ai=ri;function oi(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function si(e,t,n){if(!t)return e;var r,i=n&&n.encode||oi,a=n&&n.serialize;if(r=a?a(t,n):Wr.isURLSearchParams(t)?t.toString():new ai(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var li=function(){function e(){(0,o.Z)(this,e),this.handlers=[]}return(0,s.Z)(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Wr.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),ui=li,ci={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hi={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ai,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},isStandardBrowserEnv:function(){var e;return("undefined"===typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&("undefined"!==typeof window&&"undefined"!==typeof document)}(),isStandardBrowserWebWorkerEnv:"undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};var fi=function(e){function t(e,n,r,i){var a=e[i++],o=Number.isFinite(+a),s=i>=e.length;return a=!a&&Wr.isArray(r)?r.length:a,s?(Wr.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Wr.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Wr.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Wr.isFormData(e)&&Wr.isFunction(e.entries)){var n={};return Wr.forEachEntry(e,(function(e,r){t(function(e){return Wr.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null},di={"Content-Type":void 0};var pi={transitional:ci,adapter:["xhr","http"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Wr.isObject(e);if(a&&Wr.isHTMLForm(e)&&(e=new FormData(e)),Wr.isFormData(e))return i&&i?JSON.stringify(fi(e)):e;if(Wr.isArrayBuffer(e)||Wr.isBuffer(e)||Wr.isStream(e)||Wr.isFile(e)||Wr.isBlob(e))return e;if(Wr.isArrayBufferView(e))return e.buffer;if(Wr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ti(e,new hi.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return hi.isNode&&Wr.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Wr.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return ti(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Wr.isString(e))try{return(t||JSON.parse)(e),Wr.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||pi.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(e&&Wr.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(i){if("SyntaxError"===a.name)throw Kr.from(a,Kr.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hi.classes.FormData,Blob:hi.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Wr.forEach(["delete","get","head"],(function(e){pi.headers[e]={}})),Wr.forEach(["post","put","patch"],(function(e){pi.headers[e]=Wr.merge(di)}));var mi=pi,vi=Wr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gi=Symbol("internals");function yi(e){return e&&String(e).trim().toLowerCase()}function _i(e){return!1===e||null==e?e:Wr.isArray(e)?e.map(_i):String(e)}function xi(e,t,n,r,i){return Wr.isFunction(r)?r.call(this,t,n):(i&&(t=n),Wr.isString(t)?Wr.isString(r)?-1!==t.indexOf(r):Wr.isRegExp(r)?r.test(t):void 0:void 0)}var bi=function(e,t){function n(e){(0,o.Z)(this,n),e&&this.set(e)}return(0,s.Z)(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=yi(t);if(!i)throw new Error("header name must be a non-empty string");var a=Wr.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=_i(e))}var a=function(e,t){return Wr.forEach(e,(function(e,n){return i(e,n,t)}))};return Wr.isPlainObject(e)||e instanceof this.constructor?a(e,t):Wr.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&vi[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t):null!=e&&i(t,e,n),this}},{key:"get",value:function(e,t){if(e=yi(e)){var n=Wr.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Wr.isFunction(t))return t.call(this,r,n);if(Wr.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=yi(e)){var n=Wr.findKey(this,e);return!(!n||void 0===this[n]||t&&!xi(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=yi(e)){var i=Wr.findKey(n,e);!i||t&&!xi(0,n[i],i,t)||(delete n[i],r=!0)}}return Wr.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!xi(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Wr.forEach(this,(function(r,i){var a=Wr.findKey(n,i);if(a)return t[a]=_i(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=_i(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Wr.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Wr.isArray(n)?n.join(", "):n)})),t}},{key:e,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=(0,i.Z)(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:t,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[gi]=this[gi]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=yi(e);t[r]||(!function(e,t){var n=Wr.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Wr.isArray(e)?e.forEach(r):r(e),this}}]),n}(Symbol.iterator,Symbol.toStringTag);bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Wr.freezeMethods(bi.prototype),Wr.freezeMethods(bi);var wi=bi;function ki(e,t){var n=this||mi,r=t||n,i=wi.from(r.headers),a=r.data;return Wr.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Ei(e){return!(!e||!e.__CANCEL__)}function Si(e,t,n){Kr.call(this,null==e?"canceled":e,Kr.ERR_CANCELED,t,n),this.name="CanceledError"}Wr.inherits(Si,Kr,{__CANCEL__:!0});var Ti=Si;var Ci=hi.isStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[];o.push(e+"="+encodeURIComponent(t)),Wr.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Wr.isString(r)&&o.push("path="+r),Wr.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Mi(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Ai=hi.isStandardBrowserEnv?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Wr.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0};var Pi=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var l=Date.now(),u=i[o];n||(n=l),r[a]=s,i[a]=l;for(var c=o,h=0;c!==a;)h+=r[c++],c%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(l-n<t)){var f=u&&l-u;return f?Math.round(1e3*h/f):void 0}}};function Ii(e,t){var n=0,r=Pi(50,250);return function(i){var a=i.loaded,o=i.lengthComputable?i.total:void 0,s=a-n,l=r(s);n=a;var u={loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:i};u[t?"download":"upload"]=!0,e(u)}}var zi="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i=e.data,a=wi.from(e.headers).normalize(),o=e.responseType;function s(){e.cancelToken&&e.cancelToken.unsubscribe(r),e.signal&&e.signal.removeEventListener("abort",r)}Wr.isFormData(i)&&(hi.isStandardBrowserEnv||hi.isStandardBrowserWebWorkerEnv?a.setContentType(!1):a.setContentType("multipart/form-data;",!1));var l=new XMLHttpRequest;if(e.auth){var u=e.auth.username||"",c=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";a.set("Authorization","Basic "+btoa(u+":"+c))}var h=Mi(e.baseURL,e.url);function f(){if(l){var r=wi.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Kr("Request failed with status code "+n.status,[Kr.ERR_BAD_REQUEST,Kr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}((function(e){t(e),s()}),(function(e){n(e),s()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:e,request:l}),l=null}}if(l.open(e.method.toUpperCase(),si(h,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(f)},l.onabort=function(){l&&(n(new Kr("Request aborted",Kr.ECONNABORTED,e,l)),l=null)},l.onerror=function(){n(new Kr("Network Error",Kr.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||ci;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(new Kr(t,r.clarifyTimeoutError?Kr.ETIMEDOUT:Kr.ECONNABORTED,e,l)),l=null},hi.isStandardBrowserEnv){var d=(e.withCredentials||Ai(h))&&e.xsrfCookieName&&Ci.read(e.xsrfCookieName);d&&a.set(e.xsrfHeaderName,d)}void 0===i&&a.setContentType(null),"setRequestHeader"in l&&Wr.forEach(a.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),Wr.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),o&&"json"!==o&&(l.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&l.addEventListener("progress",Ii(e.onDownloadProgress,!0)),"function"===typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",Ii(e.onUploadProgress)),(e.cancelToken||e.signal)&&(r=function(t){l&&(n(!t||t.type?new Ti(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(r),e.signal&&(e.signal.aborted?r():e.signal.addEventListener("abort",r)));var p=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(h);p&&-1===hi.protocols.indexOf(p)?n(new Kr("Unsupported protocol "+p+":",Kr.ERR_BAD_REQUEST,e)):l.send(i||null)}))},Li={http:null,xhr:zi};Wr.forEach(Li,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));var Di=function(e){for(var t,n,r=(e=Wr.isArray(e)?e:[e]).length,i=0;i<r&&(t=e[i],!(n=Wr.isString(t)?Li[t.toLowerCase()]:t));i++);if(!n){if(!1===n)throw new Kr("Adapter ".concat(t," is not supported by the environment"),"ERR_NOT_SUPPORT");throw new Error(Wr.hasOwnProp(Li,t)?"Adapter '".concat(t,"' is not available in the build"):"Unknown adapter '".concat(t,"'"))}if(!Wr.isFunction(n))throw new TypeError("adapter is not a function");return n};function Ri(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ti(null,e)}function Oi(e){return Ri(e),e.headers=wi.from(e.headers),e.data=ki.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Di(e.adapter||mi.adapter)(e).then((function(t){return Ri(e),t.data=ki.call(e,e.transformResponse,t),t.headers=wi.from(t.headers),t}),(function(t){return Ei(t)||(Ri(e),t&&t.response&&(t.response.data=ki.call(e,e.transformResponse,t.response),t.response.headers=wi.from(t.response.headers))),Promise.reject(t)}))}var ji=function(e){return e instanceof wi?e.toJSON():e};function Ni(e,t){t=t||{};var n={};function r(e,t,n){return Wr.isPlainObject(e)&&Wr.isPlainObject(t)?Wr.merge.call({caseless:n},e,t):Wr.isPlainObject(t)?Wr.merge({},t):Wr.isArray(t)?t.slice():t}function i(e,t,n){return Wr.isUndefined(t)?Wr.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Wr.isUndefined(t))return r(void 0,t)}function o(e,t){return Wr.isUndefined(t)?Wr.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(ji(e),ji(t),!0)}};return Wr.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=l[r]||i,o=a(e[r],t[r],r);Wr.isUndefined(o)&&a!==s||(n[r]=o)})),n}var Bi="1.4.0",Fi={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){Fi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var $i={};Fi.transitional=function(e,t,n){function r(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,i,a){if(!1===e)throw new Kr(r(i," has been removed"+(t?" in "+t:"")),Kr.ERR_DEPRECATED);return t&&!$i[i]&&($i[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,a)}};var Vi={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Kr("options must be an object",Kr.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],l=void 0===s||o(s,a,e);if(!0!==l)throw new Kr("option "+a+" must be "+l,Kr.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Kr("Unknown option "+a,Kr.ERR_BAD_OPTION)}},validators:Fi},Ui=Vi.validators,Zi=function(){function e(t){(0,o.Z)(this,e),this.defaults=t,this.interceptors={request:new ui,response:new ui}}return(0,s.Z)(e,[{key:"request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n,r=t=Ni(this.defaults,t),i=r.transitional,a=r.paramsSerializer,o=r.headers;void 0!==i&&Vi.assertOptions(i,{silentJSONParsing:Ui.transitional(Ui.boolean),forcedJSONParsing:Ui.transitional(Ui.boolean),clarifyTimeoutError:Ui.transitional(Ui.boolean)},!1),null!=a&&(Wr.isFunction(a)?t.paramsSerializer={serialize:a}:Vi.assertOptions(a,{encode:Ui.function,serialize:Ui.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),(n=o&&Wr.merge(o.common,o[t.method]))&&Wr.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=wi.concat(n,o);var s=[],l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var h,f=0;if(!l){var d=[Oi.bind(this),void 0];for(d.unshift.apply(d,s),d.push.apply(d,c),h=d.length,u=Promise.resolve(t);f<h;)u=u.then(d[f++],d[f++]);return u}h=s.length;var p=t;for(f=0;f<h;){var m=s[f++],v=s[f++];try{p=m(p)}catch(g){v.call(this,g);break}}try{u=Oi.call(this,p)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)u=u.then(c[f++],c[f++]);return u}},{key:"getUri",value:function(e){return si(Mi((e=Ni(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Wr.forEach(["delete","get","head","options"],(function(e){Zi.prototype[e]=function(t,n){return this.request(Ni(n||{},{method:e,url:t,data:(n||{}).data}))}})),Wr.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Ni(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Zi.prototype[e]=t(),Zi.prototype[e+"Form"]=t(!0)}));var Hi=Zi,Wi=function(){function e(t){if((0,o.Z)(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Ti(e,t,i),n(r.reason))}))}return(0,s.Z)(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),qi=Wi;var Gi={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Gi).forEach((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];Gi[r]=n}));var Xi=Gi;var Ki=function e(t){var n=new Hi(t),r=fr(Hi.prototype.request,n);return Wr.extend(r,Hi.prototype,n,{allOwnKeys:!0}),Wr.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Ni(t,n))},r}(mi);Ki.Axios=Hi,Ki.CanceledError=Ti,Ki.CancelToken=qi,Ki.isCancel=Ei,Ki.VERSION=Bi,Ki.toFormData=ti,Ki.AxiosError=Kr,Ki.Cancel=Ki.CanceledError,Ki.all=function(e){return Promise.all(e)},Ki.spread=function(e){return function(t){return e.apply(null,t)}},Ki.isAxiosError=function(e){return Wr.isObject(e)&&!0===e.isAxiosError},Ki.mergeConfig=Ni,Ki.AxiosHeaders=wi,Ki.formToJSON=function(e){return fi(Wr.isHTMLForm(e)?new FormData(e):e)},Ki.HttpStatusCode=Xi,Ki.default=Ki;var Yi=Ki,Ji="http://localhost:5000/user",Qi=ar("user/getCurrentUser",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(Ji,"/get"),{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),ea=ar("user/logoutUser",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(Ji,"/logout"),{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),ta=ar("user/changeProfile",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.put("".concat(Ji,"/profile/change"),_n({},t),{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),na=Qn({name:"user",initialState:null,reducers:{setNull:function(e){return null}},extraReducers:function(e){e.addCase(Qi.fulfilled,(function(e,t){return t.payload.user})),e.addCase(Qi.rejected,(function(e,t){return null})),e.addCase(ea.fulfilled,(function(e,t){if(t.payload.success)return null})),e.addCase(ta.fulfilled,(function(e,t){if(t.payload.success)return t.payload.findUser}))}}),ra=(na.actions.setNull,na.reducer),ia="http://localhost:5000/products",aa="http://localhost:5000/admin/products",oa=ar("products/fetchProducts",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(ia,"/all"));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),sa=ar("products/getProductByCategory",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(ia,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),la=ar("products/filterProducts",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.filter,r=t.currentCategory,e.next=3,Yi.get("".concat(ia,"/filter?filter=").concat(n,"&category=").concat(r));case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ua=ar("products/fetchProductById",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(ia,"/product/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ca=ar("products/createProduct",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r={title:n.name,description:n.description,price:n.price,rating:n.rating,category:n.category,image:n.image,stock:n.stock},e.next=4,Yi.post("".concat(aa,"/create"),r,{withCredentials:!0});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ha=ar("products/editProduct",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r={productId:n.productId,title:n.name,description:n.description,price:n.price,rating:n.rating,category:n.category,image:null===n.image?null:n.image,stock:n.stock},e.next=4,Yi.post("".concat(aa,"/edit"),r,{withCredentials:!0});case 4:return i=e.sent,e.abrupt("return",i.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),fa=Qn({name:"products",initialState:null,reducers:{setEmpty:function(e){return null}},extraReducers:function(e){e.addCase(oa.fulfilled,(function(e,t){if(t.payload.success)return t.payload.products})),e.addCase(oa.rejected,(function(e){return null})),e.addCase(sa.fulfilled,(function(e,t){if(t.payload.success)return t.payload.products})),e.addCase(sa.rejected,(function(e){return null===e})),e.addCase(ua.fulfilled,(function(e,t){if(t.payload.success)return t.payload.products})),e.addCase(ua.rejected,(function(e){return null})),e.addCase(la.fulfilled,(function(e,t){if(t.payload.success)return t.payload.products})),e.addCase(la.rejected,(function(e){return null})),e.addCase(ca.fulfilled,(function(t,n){if(n.payload.success)return n.payload.products;e.addCase(ca.rejected,(function(e){return e}))})),e.addCase(ha.fulfilled,(function(t,n){if(n.payload.success)return n.payload.products;e.addCase(ha.rejected,(function(e){return e}))}))}}),da=(fa.actions.setEmpty,fa.reducer),pa=ar("categories/fetchCategories",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("http://localhost:5000/products/category");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),ma=Qn({initialState:null,name:"categories",reducers:{setNull:function(e){return null}},extraReducers:function(e){e.addCase(pa.rejected,(function(e){return null})),e.addCase(pa.fulfilled,(function(e,t){return t.payload.categories}))}}).reducer,va="http://localhost:5000/cart",ga=ar("cart/fetchCart",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(va,"/get"),{withCredentials:!0,headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),ya=ar("cart/updateCart",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.productId,r=t.quantity,i=t.price,e.next=3,Yi.post("".concat(va,"/create"),{products:{productId:n,quantity:r,price:i}},{withCredentials:!0,headers:{"Content-Type":"application/json"}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_a=ar("cart/deleteItemFromCart",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.put("".concat(va,"/delete"),{productId:t},{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),xa=Qn({name:"Cart",initialState:null,reducers:{setNull:function(e){return null}},extraReducers:function(e){e.addCase(ga.fulfilled,(function(e,t){if(t.payload.success)return t.payload.cart})),e.addCase(ga.rejected,(function(e){return null})),e.addCase(ya.fulfilled,(function(e,t){if(t.payload.success)return t.payload.cart})),e.addCase(_a.fulfilled,(function(e,t){if(t.payload.success)return t.payload.cart})),e.addCase(_a.rejected,(function(e){return null}))}}).reducer,ba=ar("orders/fetchOrders",(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat("http://localhost:5000/orders","/fetch"),{withCredentials:!0});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})))),wa=Qn({name:"orders",initialState:null,extraReducers:function(e){e.addCase(ba.fulfilled,(function(e,t){if(t.payload.success)return t.payload.orders})),e.addCase(ba.rejected,(function(e){return null}))}}).reducer;function ka(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ea(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Ea(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var Sa=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Ea(e))&&(r&&(r+=" "),r+=t);return r},Ta=["theme","type"],Ca=["delay","staleId"],Ma=function(e){return"number"==typeof e&&!isNaN(e)},Aa=function(e){return"string"==typeof e},Pa=function(e){return"function"==typeof e},Ia=function(e){return Aa(e)||Pa(e)?e:null},za=function(t){return(0,e.isValidElement)(t)||Aa(t)||Pa(t)||Ma(t)};function La(t){var n=t.enter,r=t.exit,i=t.appendPosition,o=void 0!==i&&i,s=t.collapse,l=void 0===s||s,u=t.collapseDuration,c=void 0===u?300:u;return function(t){var i=t.children,s=t.position,u=t.preventExitTransition,h=t.done,f=t.nodeRef,d=t.isIn,p=o?"".concat(n,"--").concat(s):n,m=o?"".concat(r,"--").concat(s):r,v=(0,e.useRef)(0);return(0,e.useLayoutEffect)((function(){var e,t=f.current,n=p.split(" "),r=function e(r){var i;r.target===f.current&&(t.dispatchEvent(new Event("d")),t.removeEventListener("animationend",e),t.removeEventListener("animationcancel",e),0===v.current&&"animationcancel"!==r.type&&(i=t.classList).remove.apply(i,(0,a.Z)(n)))};(e=t.classList).add.apply(e,(0,a.Z)(n)),t.addEventListener("animationend",r),t.addEventListener("animationcancel",r)}),[]),(0,e.useEffect)((function(){var e=f.current,t=function t(){e.removeEventListener("animationend",t),l?function(e,t,n){void 0===n&&(n=300);var r=e.scrollHeight,i=e.style;requestAnimationFrame((function(){i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame((function(){i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)}))}))}(e,h,c):h()};d||(u?t():(v.current=1,e.className+=" ".concat(m),e.addEventListener("animationend",t)))}),[d]),e.createElement(e.Fragment,null,i)}}function Da(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}var Ra={list:new Map,emitQueue:new Map,on:function(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off:function(e,t){if(t){var n=this.list.get(e).filter((function(e){return e!==t}));return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit:function(e){var t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit:function(e){var t=arguments,n=this;this.list.has(e)&&this.list.get(e).forEach((function(r){var i=setTimeout((function(){r.apply(void 0,(0,a.Z)([].slice.call(t,1)))}),0);n.emitQueue.has(e)||n.emitQueue.set(e,[]),n.emitQueue.get(e).push(i)}))}},Oa=function(t){var n=t.theme,r=t.type,i=ka(t,Ta);return e.createElement("svg",_n({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===n?"currentColor":"var(--toastify-icon-color-".concat(r,")")},i))},ja={info:function(t){return e.createElement(Oa,_n({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return e.createElement(Oa,_n({},t),e.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return e.createElement(Oa,_n({},t),e.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return e.createElement(Oa,_n({},t),e.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return e.createElement("div",{className:"Toastify__spinner"})}};function Na(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Ba(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Fa(t){var n=t.closeToast,r=t.theme,i=t.ariaLabel,a=void 0===i?"close":i;return e.createElement("button",{className:"Toastify__close-button Toastify__close-button--".concat(r),type:"button",onClick:function(e){e.stopPropagation(),n(e)},"aria-label":a},e.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},e.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function $a(t){var n=t.delay,r=t.isRunning,i=t.closeToast,a=t.type,o=void 0===a?"default":a,s=t.hide,l=t.className,u=t.style,c=t.controlledProgress,h=t.progress,f=t.rtl,d=t.isIn,p=t.theme,m=s||c&&0===h,v=_n(_n({},u),{},{animationDuration:"".concat(n,"ms"),animationPlayState:r?"running":"paused",opacity:m?0:1});c&&(v.transform="scaleX(".concat(h,")"));var g=Sa("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated","Toastify__progress-bar-theme--".concat(p),"Toastify__progress-bar--".concat(o),{"Toastify__progress-bar--rtl":f}),y=Pa(l)?l({rtl:f,type:o,defaultClassName:g}):Sa(g,l);return e.createElement("div",(0,Ye.Z)({role:"progressbar","aria-hidden":m?"true":"false","aria-label":"notification timer",className:y,style:v},c&&h>=1?"onTransitionEnd":"onAnimationEnd",c&&h<1?null:function(){d&&i()}))}var Va=function(t){var n=function(t){var n=(0,e.useState)(!1),r=(0,i.Z)(n,2),a=r[0],o=r[1],s=(0,e.useState)(!1),l=(0,i.Z)(s,2),u=l[0],c=l[1],h=(0,e.useRef)(null),f=(0,e.useRef)({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,d=(0,e.useRef)(t),p=t.autoClose,m=t.pauseOnHover,v=t.closeToast,g=t.onClick,y=t.closeOnClick;function _(e){if(t.draggable){"touchstart"===e.nativeEvent.type&&e.nativeEvent.preventDefault(),f.didMove=!1,document.addEventListener("mousemove",k),document.addEventListener("mouseup",E),document.addEventListener("touchmove",k),document.addEventListener("touchend",E);var n=h.current;f.canCloseOnClick=!0,f.canDrag=!0,f.boundingRect=n.getBoundingClientRect(),n.style.transition="",f.x=Na(e.nativeEvent),f.y=Ba(e.nativeEvent),"x"===t.draggableDirection?(f.start=f.x,f.removalDistance=n.offsetWidth*(t.draggablePercent/100)):(f.start=f.y,f.removalDistance=n.offsetHeight*(80===t.draggablePercent?1.5*t.draggablePercent:t.draggablePercent/100))}}function x(e){if(f.boundingRect){var n=f.boundingRect,r=n.top,i=n.bottom,a=n.left,o=n.right;"touchend"!==e.nativeEvent.type&&t.pauseOnHover&&f.x>=a&&f.x<=o&&f.y>=r&&f.y<=i?w():b()}}function b(){o(!0)}function w(){o(!1)}function k(e){var n=h.current;f.canDrag&&n&&(f.didMove=!0,a&&w(),f.x=Na(e),f.y=Ba(e),f.delta="x"===t.draggableDirection?f.x-f.start:f.y-f.start,f.start!==f.x&&(f.canCloseOnClick=!1),n.style.transform="translate".concat(t.draggableDirection,"(").concat(f.delta,"px)"),n.style.opacity=""+(1-Math.abs(f.delta/f.removalDistance)))}function E(){document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",E);var e=h.current;if(f.canDrag&&f.didMove&&e){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance)return c(!0),void t.closeToast();e.style.transition="transform 0.2s, opacity 0.2s",e.style.transform="translate".concat(t.draggableDirection,"(0)"),e.style.opacity="1"}}(0,e.useEffect)((function(){d.current=t})),(0,e.useEffect)((function(){return h.current&&h.current.addEventListener("d",b,{once:!0}),Pa(t.onOpen)&&t.onOpen((0,e.isValidElement)(t.children)&&t.children.props),function(){var t=d.current;Pa(t.onClose)&&t.onClose((0,e.isValidElement)(t.children)&&t.children.props)}}),[]),(0,e.useEffect)((function(){return t.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",b),window.addEventListener("blur",w)),function(){t.pauseOnFocusLoss&&(window.removeEventListener("focus",b),window.removeEventListener("blur",w))}}),[t.pauseOnFocusLoss]);var S={onMouseDown:_,onTouchStart:_,onMouseUp:x,onTouchEnd:x};return p&&m&&(S.onMouseEnter=w,S.onMouseLeave=b),y&&(S.onClick=function(e){g&&g(e),f.canCloseOnClick&&v()}),{playToast:b,pauseToast:w,isRunning:a,preventExitTransition:u,toastRef:h,eventHandlers:S}}(t),r=n.isRunning,a=n.preventExitTransition,o=n.toastRef,s=n.eventHandlers,l=t.closeButton,u=t.children,c=t.autoClose,h=t.onClick,f=t.type,d=t.hideProgressBar,p=t.closeToast,m=t.transition,v=t.position,g=t.className,y=t.style,_=t.bodyClassName,x=t.bodyStyle,b=t.progressClassName,w=t.progressStyle,k=t.updateId,E=t.role,S=t.progress,T=t.rtl,C=t.toastId,M=t.deleteToast,A=t.isIn,P=t.isLoading,I=t.iconOut,z=t.closeOnClick,L=t.theme,D=Sa("Toastify__toast","Toastify__toast-theme--".concat(L),"Toastify__toast--".concat(f),{"Toastify__toast--rtl":T},{"Toastify__toast--close-on-click":z}),R=Pa(g)?g({rtl:T,position:v,type:f,defaultClassName:D}):Sa(D,g),O=!!S||!c,j={closeToast:p,type:f,theme:L},N=null;return!1===l||(N=Pa(l)?l(j):(0,e.isValidElement)(l)?(0,e.cloneElement)(l,j):Fa(j)),e.createElement(m,{isIn:A,done:M,position:v,preventExitTransition:a,nodeRef:o},e.createElement("div",_n(_n({id:C,onClick:h,className:R},s),{},{style:y,ref:o}),e.createElement("div",_n(_n({},A&&{role:E}),{},{className:Pa(_)?_({type:f}):Sa("Toastify__toast-body",_),style:x}),null!=I&&e.createElement("div",{className:Sa("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!P})},I),e.createElement("div",null,u)),N,e.createElement($a,_n(_n({},k&&!O?{key:"pb-".concat(k)}:{}),{},{rtl:T,theme:L,delay:c,isRunning:r,isIn:A,closeToast:p,hide:d,type:f,style:w,className:b,controlledProgress:O,progress:S||0}))))},Ua=function(e,t){return void 0===t&&(t=!1),{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}},Za=La(Ua("bounce",!0)),Ha=(La(Ua("slide",!0)),La(Ua("zoom")),La(Ua("flip")),(0,e.forwardRef)((function(t,n){var r=function(t){var n=(0,e.useReducer)((function(e){return e+1}),0),r=(0,i.Z)(n,2)[1],o=(0,e.useState)([]),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,e.useRef)(null),h=(0,e.useRef)(new Map).current,f=function(e){return-1!==l.indexOf(e)},d=(0,e.useRef)({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:f,getToast:function(e){return h.get(e)}}).current;function p(e){var t=e.containerId;!d.props.limit||t&&d.containerId!==t||(d.count-=d.queue.length,d.queue=[])}function m(e){u((function(t){return null==e?[]:t.filter((function(t){return t!==e}))}))}function v(){var e=d.queue.shift();y(e.toastContent,e.toastProps,e.staleId)}function g(t,n){var a=n.delay,o=n.staleId,s=ka(n,Ca);if(za(t)&&!function(e){return!c.current||d.props.enableMultiContainer&&e.containerId!==d.props.containerId||h.has(e.toastId)&&null==e.updateId}(s)){var l=s.toastId,u=s.updateId,f=s.data,p=d.props,g=function(){return m(l)},_=null==u;_&&d.count++;var x,b,w=_n(_n(_n({},p),{},{style:p.toastStyle,key:d.toastKey++},Object.fromEntries(Object.entries(s).filter((function(e){var t=(0,i.Z)(e,2);return t[0],null!=t[1]})))),{},{toastId:l,updateId:u,data:f,closeToast:g,isIn:!1,className:Ia(s.className||p.toastClassName),bodyClassName:Ia(s.bodyClassName||p.bodyClassName),progressClassName:Ia(s.progressClassName||p.progressClassName),autoClose:!s.isLoading&&(x=s.autoClose,b=p.autoClose,!1===x||Ma(x)&&x>0?x:b),deleteToast:function(){var e=Da(h.get(l),"removed");h.delete(l),Ra.emit(4,e);var t=d.queue.length;if(d.count=null==l?d.count-d.displayedToast:d.count-1,d.count<0&&(d.count=0),t>0){var n=null==l?d.props.limit:1;if(1===t||1===n)d.displayedToast++,v();else{var i=n>t?t:n;d.displayedToast=i;for(var a=0;a<i;a++)v()}}else r()}});w.iconOut=function(t){var n=t.theme,r=t.type,i=t.isLoading,a=t.icon,o=null,s={theme:n,type:r};return!1===a||(Pa(a)?o=a(s):(0,e.isValidElement)(a)?o=(0,e.cloneElement)(a,s):Aa(a)||Ma(a)?o=a:i?o=ja.spinner():function(e){return e in ja}(r)&&(o=ja[r](s))),o}(w),Pa(s.onOpen)&&(w.onOpen=s.onOpen),Pa(s.onClose)&&(w.onClose=s.onClose),w.closeButton=p.closeButton,!1===s.closeButton||za(s.closeButton)?w.closeButton=s.closeButton:!0===s.closeButton&&(w.closeButton=!za(p.closeButton)||p.closeButton);var k=t;(0,e.isValidElement)(t)&&!Aa(t.type)?k=(0,e.cloneElement)(t,{closeToast:g,toastProps:w,data:f}):Pa(t)&&(k=t({closeToast:g,toastProps:w,data:f})),p.limit&&p.limit>0&&d.count>p.limit&&_?d.queue.push({toastContent:k,toastProps:w,staleId:o}):Ma(a)?setTimeout((function(){y(k,w,o)}),a):y(k,w,o)}}function y(e,t,n){var r=t.toastId;n&&h.delete(n);var i={content:e,props:t};h.set(r,i),u((function(e){return[].concat((0,a.Z)(e),[r]).filter((function(e){return e!==n}))})),Ra.emit(4,Da(i,null==i.props.updateId?"added":"updated"))}return(0,e.useEffect)((function(){return d.containerId=t.containerId,Ra.cancelEmit(3).on(0,g).on(1,(function(e){return c.current&&m(e)})).on(5,p).emit(2,d),function(){h.clear(),Ra.emit(3,d)}}),[]),(0,e.useEffect)((function(){d.props=t,d.isToastActive=f,d.displayedToast=l.length})),{getToastToRender:function(e){var n=new Map,r=Array.from(h.values());return t.newestOnTop&&r.reverse(),r.forEach((function(e){var t=e.props.position;n.has(t)||n.set(t,[]),n.get(t).push(e)})),Array.from(n,(function(t){return e(t[0],t[1])}))},containerRef:c,isToastActive:f}}(t),o=r.getToastToRender,s=r.containerRef,l=r.isToastActive,u=t.className,c=t.style,h=t.rtl,f=t.containerId;function d(e){var t=Sa("Toastify__toast-container","Toastify__toast-container--".concat(e),{"Toastify__toast-container--rtl":h});return Pa(u)?u({position:e,rtl:h,defaultClassName:t}):Sa(t,Ia(u))}return(0,e.useEffect)((function(){n&&(n.current=s.current)}),[]),e.createElement("div",{ref:s,className:"Toastify",id:f},o((function(t,n){var r=n.length?_n({},c):_n(_n({},c),{},{pointerEvents:"none"});return e.createElement("div",{className:d(t),style:r,key:"container-".concat(t)},n.map((function(t,r){var i=t.content,a=t.props;return e.createElement(Va,_n(_n({},a),{},{isIn:l(a.toastId),style:_n(_n({},a.style),{},{"--nth":r+1,"--len":n.length}),key:"toast-".concat(a.key)}),i)})))})))})));Ha.displayName="ToastContainer",Ha.defaultProps={position:"top-right",transition:Za,autoClose:5e3,closeButton:Fa,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};var Wa,qa=new Map,Ga=[],Xa=1;function Ka(){return""+Xa++}function Ya(e){return e&&(Aa(e.toastId)||Ma(e.toastId))?e.toastId:Ka()}function Ja(e,t){return qa.size>0?Ra.emit(0,e,t):Ga.push({content:e,options:t}),t.toastId}function Qa(e,t){return _n(_n({},t),{},{type:t&&t.type||e,toastId:Ya(t)})}function eo(e){return function(t,n){return Ja(t,Qa(e,n))}}function to(e,t){return Ja(e,Qa("default",t))}to.loading=function(e,t){return Ja(e,Qa("default",_n({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t)))},to.promise=function(e,t,n){var r,i=t.pending,a=t.error,o=t.success;i&&(r=Aa(i)?to.loading(i,n):to.loading(i.render,_n(_n({},n),i)));var s={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=function(e,t,i){if(null!=t){var a=_n(_n(_n({type:e},s),n),{},{data:i}),o=Aa(t)?{render:t}:t;return r?to.update(r,_n(_n({},a),o)):to(o.render,_n(_n({},a),o)),i}to.dismiss(r)},u=Pa(e)?e():e;return u.then((function(e){return l("success",o,e)})).catch((function(e){return l("error",a,e)})),u},to.success=eo("success"),to.info=eo("info"),to.error=eo("error"),to.warning=eo("warning"),to.warn=to.warning,to.dark=function(e,t){return Ja(e,Qa("default",_n({theme:"dark"},t)))},to.dismiss=function(e){qa.size>0?Ra.emit(1,e):Ga=Ga.filter((function(t){return null!=e&&t.options.toastId!==e}))},to.clearWaitingQueue=function(e){return void 0===e&&(e={}),Ra.emit(5,e)},to.isActive=function(e){var t=!1;return qa.forEach((function(n){n.isToastActive&&n.isToastActive(e)&&(t=!0)})),t},to.update=function(e,t){void 0===t&&(t={}),setTimeout((function(){var n=function(e,t){var n=t.containerId,r=qa.get(n||Wa);return r&&r.getToast(e)}(e,t);if(n){var r=n.props,i=n.content,a=_n(_n(_n({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Ka()});a.toastId!==e&&(a.staleId=e);var o=a.render||i;delete a.render,Ja(o,a)}}),0)},to.done=function(e){to.update(e,{progress:1})},to.onChange=function(e){return Ra.on(4,e),function(){Ra.off(4,e)}},to.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},to.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Ra.on(2,(function(e){Wa=e.containerId||e,qa.set(Wa,e),Ga.forEach((function(e){Ra.emit(0,e.content,e.options)})),Ga=[]})).on(3,(function(e){qa.delete(e.containerId||e),0===qa.size&&Ra.off(0).off(1).off(5)}));var no="http://localhost:5000/reviews",ro=ar("reviews/createReview",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.dt,r=t.img,i=t.productId,e.next=3,Yi.post("".concat(no,"/").concat(i,"/create"),{rating:n.rating,comment:n.comment,headline:n.headline,image:r},{withCredentials:!0});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),io=ar("reviews/fetchReviews",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(no,"/").concat(t.id,"/fetch"),{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ao=ar("reviews/deleteReview",function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.post("".concat(no,"/delete"),{id:t.id,userId:t.userId},{withCredentials:!0});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),oo=function(e){var t,n=Kn(),r=e||{},i=r.reducer,a=void 0===i?void 0:i,o=r.middleware,s=void 0===o?n():o,l=r.devTools,u=void 0===l||l,c=r.preloadedState,h=void 0===c?void 0:c,f=r.enhancers,d=void 0===f?void 0:f;if("function"===typeof a)t=a;else{if(!Wn(a))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=Tn(a)}var p=s;"function"===typeof p&&(p=p(n));var m=Mn.apply(void 0,p),v=Cn;u&&(v=Hn(Vn({trace:!1},"object"===typeof u&&u)));var g=new Gn(m),y=g;return Array.isArray(d)?y=Dn([m],d):"function"===typeof d&&(y=d(g)),Sn(t,h,v.apply(void 0,y))}({reducer:{user:ra,products:da,categories:ma,cart:xa,orders:wa,reviews:Qn({name:"review",initialState:null,extraReducers:function(e){e.addCase(ro.fulfilled,(function(e,t){if(t.payload.success)return to.success("Review created successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}),t.payload.review})),e.addCase(ro.rejected,(function(e){return null})),e.addCase(io.fulfilled,(function(e,t){if(t.payload.success)return t.payload.reviews})),e.addCase(io.rejected,(function(e){return null})),e.addCase(ao.fulfilled,(function(e,t){if(t.payload.success)return to.success("Review deleted successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}),t.payload.reviews})),e.addCase(ao.rejected,(function(e){return null}))}}).reducer}}),so=oo,lo=n.p+"static/media/swiftshop.40c331ca8d2d43ab6842.png",uo=n(1811),co=n(5883);function ho(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var fo,po=n(1554),mo=function(e,t,n,r,i){return go(e[1],t[1],n[1],r[1],i).map((function(i){return vo(e[0],t[0],n[0],r[0],i)}))},vo=function(e,t,n,r,i){return i*(3*t*Math.pow(i-1,2)+i*(-3*n*i+3*n+r*i))-e*Math.pow(i-1,3)},go=function(e,t,n,r,i){return yo((r-=i)-3*(n-=i)+3*(t-=i)-(e-=i),3*n-6*t+3*e,3*t-3*e,e).filter((function(e){return e>=0&&e<=1}))},yo=function(e,t,n,r){if(0===e)return function(e,t,n){var r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]}(t,n,r);var i=(3*(n/=e)-(t/=e)*t)/3,a=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===i)return[Math.pow(-a,1/3)];if(0===a)return[Math.sqrt(-i),-Math.sqrt(-i)];var o=Math.pow(a/2,2)+Math.pow(i/3,3);if(0===o)return[Math.pow(a/2,.5)-t/3];if(o>0)return[Math.pow(-a/2+Math.sqrt(o),1/3)-Math.pow(a/2+Math.sqrt(o),1/3)-t/3];var s=Math.sqrt(Math.pow(-i/3,3)),l=Math.acos(-a/(2*Math.sqrt(Math.pow(-i/3,3)))),u=2*Math.pow(s,1/3);return[u*Math.cos(l/3)-t/3,u*Math.cos((l+2*Math.PI)/3)-t/3,u*Math.cos((l+4*Math.PI)/3)-t/3]},_o=n(9448),xo=function(){function e(){(0,o.Z)(this,e),this.m=new Map}return(0,s.Z)(e,[{key:"reset",value:function(e){this.m=new Map(Object.entries(e))}},{key:"get",value:function(e,t){var n=this.m.get(e);return void 0!==n?n:t}},{key:"getBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.m.get(e);return void 0===n?t:"string"===typeof n?"true"===n:!!n}},{key:"getNumber",value:function(e,t){var n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}},{key:"set",value:function(e,t){this.m.set(e,t)}}]),e}(),bo=new xo,wo=function(e){return e&&(0,po.iJ)(e)||fo},ko=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r,i,a,o){var s,l;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=2;break}return e.abrupt("return",t.attachViewToDom(n,r,a,i));case 2:if(o||"string"===typeof r||r instanceof HTMLElement){e.next=4;break}throw new Error("framework delegate is missing");case 4:return l="string"===typeof r?null===(s=n.ownerDocument)||void 0===s?void 0:s.createElement(r):r,i&&i.forEach((function(e){return l.classList.add(e)})),a&&Object.assign(l,a),n.appendChild(l),e.next=10,new Promise((function(e){return(0,uo.c)(l,e)}));case 10:return e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),Eo=function(e,t){if(t){if(e){var n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()},So=function(){function e(t,n){(0,o.Z)(this,e),this.component=t,this.params=n,this.state=1}return(0,s.Z)(e,[{key:"init",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state=2,this.element){e.next=6;break}return n=this.component,e.next=5,ko(this.delegate,t,n,["ion-page","ion-page-invisible"],this.params);case 5:this.element=e.sent;case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_destroy",value:function(){(0,uo.p)(3!==this.state,"view state must be ATTACHED");var e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}]),e}(),To=function(e,t,n){return!!e&&(e.component===t&&(0,uo.s)(e.params,n))},Co=function(e,t){return e?e instanceof So?e:new So(e,t):null},Mo=(0,po.GH)(function(e){u(r,e);var t=p(r);function r(){var e;return(0,o.Z)(this,r),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionNavWillLoad=(0,po.yM)(d(e),"ionNavWillLoad",7),e.ionNavWillChange=(0,po.yM)(d(e),"ionNavWillChange",3),e.ionNavDidChange=(0,po.yM)(d(e),"ionNavDidChange",3),e.transInstr=[],e.animationEnabled=!0,e.useRouter=!1,e.isTransitioning=!1,e.destroyed=!1,e.views=[],e.delegate=void 0,e.swipeGesture=void 0,e.animated=!0,e.animation=void 0,e.rootParams=void 0,e.root=void 0,e}return(0,s.Z)(r,[{key:"swipeGestureChanged",value:function(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}},{key:"rootChanged",value:function(){var e=po.Z5.isDev;void 0!==this.root&&(this.useRouter?e&&console.warn("<ion-nav> does not support a root attribute when using ion-router."):this.setRoot(this.root,this.rootParams))}},{key:"componentWillLoad",value:function(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){var e=wo(this);this.swipeGesture=bo.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}},{key:"componentDidLoad",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.rootChanged(),e.next=3,n.e(3).then(n.bind(n,9003));case 3:this.gesture=e.sent.createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connectedCallback",value:function(){this.destroyed=!1}},{key:"disconnectedCallback",value:function(){var e,t=(0,w.Z)(this.views);try{for(t.s();!(e=t.n()).done;){var n=e.value;(0,_o.l)(n.element,_o.d),n._destroy()}}catch(r){t.e(r)}finally{t.f()}this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}},{key:"push",value:function(e,t,n,r){return this.insert(-1,e,t,n,r)}},{key:"insert",value:function(e,t,n,r,i){return this.insertPages(e,[{component:t,componentProps:n}],r,i)}},{key:"insertPages",value:function(e,t,n,r){return this.queueTrns({insertStart:e,insertViews:t,opts:n},r)}},{key:"pop",value:function(e,t){return this.removeIndex(-1,1,e,t)}},{key:"popTo",value:function(e,t,n){var r={removeStart:-1,removeCount:-1,opts:t};return"object"===typeof e&&e.component?(r.removeView=e,r.removeStart=1):"number"===typeof e&&(r.removeStart=e+1),this.queueTrns(r,n)}},{key:"popToRoot",value:function(e,t){return this.removeIndex(1,-1,e,t)}},{key:"removeIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return this.queueTrns({removeStart:e,removeCount:t,opts:n},r)}},{key:"setRoot",value:function(e,t,n,r){return this.setPages([{component:e,componentProps:t}],n,r)}},{key:"setPages",value:function(e,t,n){return null!==t&&void 0!==t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}},{key:"setRouteId",value:function(e,t,n,r){var i,a=this.getActiveSync();if(To(a,e,t))return Promise.resolve({changed:!1,element:a.element});var o,s=new Promise((function(e){return i=e})),l={updateURL:!1,viewIsReady:function(e){var t,n=new Promise((function(e){return t=e}));return i({changed:!0,element:e,markVisible:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(),e.next=3,o;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),n}};if("root"===n)o=this.setRoot(e,t,l);else{var u=this.views.find((function(n){return To(n,e,t)}));u?o=this.popTo(u,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:r})):"forward"===n?o=this.push(e,t,Object.assign(Object.assign({},l),{animationBuilder:r})):"back"===n&&(o=this.setRoot(e,t,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:r})))}return s}},{key:"getRouteId",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.getActiveSync())){e.next=3;break}return e.abrupt("return",{id:t.element.tagName,params:t.params,element:t.element});case 3:return e.abrupt("return",void 0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getActive",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getActiveSync());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getByIndex",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.views[t]);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"canGoBack",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.canGoBackSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrevious",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getPreviousSync(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLength",value:function(){return this.views.length}},{key:"getActiveSync",value:function(){return this.views[this.views.length-1]}},{key:"canGoBackSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getActiveSync();return!(!e||!this.getPreviousSync(e))}},{key:"getPreviousSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getActiveSync();if(e){var t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}}},{key:"queueTrns",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n){var r,i,a,o,s;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isTransitioning||!(null===(r=t.opts)||void 0===r?void 0:r.skipIfBusy)){e.next=2;break}return e.abrupt("return",!1);case 2:if(a=new Promise((function(e,n){t.resolve=e,t.reject=n})),t.done=n,!t.opts||!1===t.opts.updateURL||!this.useRouter){e.next=15;break}if(!(o=document.querySelector("ion-router"))){e.next=15;break}return e.next=9,o.canTransition();case 9:if(!1!==(s=e.sent)){e.next=12;break}return e.abrupt("return",!1);case 12:if("string"!==typeof s){e.next=15;break}return o.push(s,t.opts.direction||"back"),e.abrupt("return",!1);case 15:return 0===(null===(i=t.insertViews)||void 0===i?void 0:i.length)&&(t.insertViews=void 0),this.transInstr.push(t),this.nextTrns(),e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"success",value:function(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){var n=document.querySelector("ion-router");if(n){var r="back"===e.direction?"back":"forward";n.navChanged(r)}}}},{key:"failed",value:function(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}},{key:"fireError",value:function(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}},{key:"nextTrns",value:function(){if(this.isTransitioning)return!1;var e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}},{key:"runTransition",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(t),n=this.getActiveSync(),r=this.getEnteringView(t,n),n||r){e.next=8;break}throw new Error("no views in the stack to be removed");case 8:if(!r||1!==r.state){e.next=11;break}return e.next=11,r.init(this.el);case 11:if(this.postViewInit(r,n,t),(i=(t.enteringRequiresTransition||t.leavingRequiresTransition)&&r!==n)&&t.opts&&n&&("back"===t.opts.direction&&(t.opts.animationBuilder=t.opts.animationBuilder||(null===r||void 0===r?void 0:r.animationBuilder)),n.animationBuilder=t.opts.animationBuilder),!i){e.next=20;break}return e.next=17,this.transition(r,n,t);case 17:a=e.sent,e.next=21;break;case 20:a={hasCompleted:!0,requiresTransition:!1};case 21:this.success(a,t),this.ionNavDidChange.emit(),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),this.failed(e.t0,t);case 28:this.isTransitioning=!1,this.nextTrns();case 30:case"end":return e.stop()}}),e,this,[[0,25]])})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareTI",value:function(e){var t,n,r,i=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(n=(r=e.opts).delegate)&&void 0!==n||(r.delegate=this.delegate),void 0!==e.removeView){(0,uo.p)(void 0!==e.removeStart,"removeView needs removeStart"),(0,uo.p)(void 0!==e.removeCount,"removeView needs removeCount");var a=this.views.indexOf(e.removeView);if(a<0)throw new Error("removeView was not found");e.removeStart+=a}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=i-1),e.removeCount<0&&(e.removeCount=i-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===i),e.insertViews&&((e.insertStart<0||e.insertStart>i)&&(e.insertStart=i),e.enteringRequiresTransition=e.insertStart===i);var o=e.insertViews;if(o){(0,uo.p)(o.length>0,"length can not be zero");var s=o.map((function(e){return e instanceof So?e:"component"in e?Co(e.component,null===e.componentProps?void 0:e.componentProps):Co(e,void 0)})).filter((function(e){return null!==e}));if(0===s.length)throw new Error("invalid views to insert");var l,u=(0,w.Z)(s);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.delegate=e.opts.delegate;var h=c.nav;if(h&&h!==this)throw new Error("inserted view was already inserted");if(3===c.state)throw new Error("inserted view was already destroyed")}}catch(f){u.e(f)}finally{u.f()}e.insertViews=s}}},{key:"getEnteringView",value:function(e,t){var n=e.insertViews;if(void 0!==n)return n[n.length-1];var r=e.removeStart;if(void 0!==r)for(var i=this.views,a=r+e.removeCount,o=i.length-1;o>=0;o--){var s=i[o];if((o<r||o>=a)&&s!==t)return s}}},{key:"postViewInit",value:function(e,t,n){var r,i,a;(0,uo.p)(t||e,"Both leavingView and enteringView are null"),(0,uo.p)(n.resolve,"resolve must be valid"),(0,uo.p)(n.reject,"reject must be valid");var o,s=n.opts,l=n.insertViews,u=n.removeStart,c=n.removeCount;if(void 0!==u&&void 0!==c){(0,uo.p)(u>=0,"removeStart can not be negative"),(0,uo.p)(c>=0,"removeCount can not be negative"),o=[];for(var h=u;h<u+c;h++){var f=this.views[h];void 0!==f&&f!==e&&f!==t&&o.push(f)}null!==(r=s.direction)&&void 0!==r||(s.direction="back")}var d=this.views.length+(null!==(i=null===l||void 0===l?void 0:l.length)&&void 0!==i?i:0)-(null!==c&&void 0!==c?c:0);if((0,uo.p)(d>=0,"final balance can not be negative"),0===d)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(l){var p,m=n.insertStart,v=(0,w.Z)(l);try{for(v.s();!(p=v.n()).done;){var g=p.value;this.insertViewAt(g,m),m++}}catch(S){v.e(S)}finally{v.f()}n.enteringRequiresTransition&&(null!==(a=s.direction)&&void 0!==a||(s.direction="forward"))}if(o&&o.length>0){var y,_=(0,w.Z)(o);try{for(_.s();!(y=_.n()).done;){var x=y.value;(0,_o.l)(x.element,_o.b),(0,_o.l)(x.element,_o.c),(0,_o.l)(x.element,_o.d)}}catch(S){_.e(S)}finally{_.f()}var b,k=(0,w.Z)(o);try{for(k.s();!(b=k.n()).done;){var E=b.value;this.destroyView(E)}}catch(S){k.e(S)}finally{k.f()}}}},{key:"transition",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r){var i,a,o,s,l,u,c,h,f=this;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.opts,a=i.progressAnimation?function(e){return f.sbAni=e}:void 0,o=wo(this),s=t.element,l=n&&n.element,u=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(t),baseEl:this.el,progressCallback:a,animated:this.animated&&bo.getBoolean("animated",!0),enteringEl:s,leavingEl:l},i),{animationBuilder:i.animationBuilder||this.animation||bo.get("navAnimation")}),e.next=8,(0,_o.t)(u);case 8:return c=e.sent,h=c.hasCompleted,e.abrupt("return",this.transitionFinish(h,t,n,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"transitionFinish",value:function(e,t,n,r){var i=e?t:n;return i&&this.unmountInactiveViews(i),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:r.direction}}},{key:"insertViewAt",value:function(e,t){var n=this.views,r=n.indexOf(e);r>-1?((0,uo.p)(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(t,0,e)):((0,uo.p)(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}},{key:"removeView",value:function(e){(0,uo.p)(2===e.state||3===e.state,"view state should be loaded or destroyed");var t=this.views,n=t.indexOf(e);(0,uo.p)(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}},{key:"destroyView",value:function(e){e._destroy(),this.removeView(e)}},{key:"unmountInactiveViews",value:function(e){if(!this.destroyed)for(var t=this.views,n=t.indexOf(e),r=t.length-1;r>=0;r--){var i=t[r],a=i.element;a&&(r>n?((0,_o.l)(a,_o.d),this.destroyView(i)):r<n&&(0,_o.s)(a,!0))}}},{key:"canStart",value:function(){return!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.animationEnabled&&this.canGoBackSync()}},{key:"onStart",value:function(){this.pop({direction:"back",progressAnimation:!0})}},{key:"onMove",value:function(e){this.sbAni&&this.sbAni.progressStep(e)}},{key:"onEnd",value:function(e,t,n){var r=this;if(this.sbAni){this.animationEnabled=!1,this.sbAni.onFinish((function(){r.animationEnabled=!0}),{oneTimeCallback:!0});var i=e?-.001:.001;e?i+=mo([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=mo([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,i,n)}}},{key:"render",value:function(){return(0,po.h)("slot",null)}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}},{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}}]),r}(po.mv),[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]}]);var Ao=function(){if("undefined"!==typeof customElements){["ion-nav"].forEach((function(e){if("ion-nav"===e)customElements.get(e)||customElements.define(e,Mo)}))}},Po=(0,po.GH)(function(e){u(r,e);var t=p(r);function r(){var e;return(0,o.Z)(this,r),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionNavWillLoad=(0,po.yM)(d(e),"ionNavWillLoad",7),e.ionNavWillChange=(0,po.yM)(d(e),"ionNavWillChange",3),e.ionNavDidChange=(0,po.yM)(d(e),"ionNavDidChange",3),e.gestureOrAnimationInProgress=!1,e.mode=wo(d(e)),e.delegate=void 0,e.animated=!0,e.animation=void 0,e.swipeHandler=void 0,e}return(0,s.Z)(r,[{key:"swipeHandlerChanged",value:function(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}},{key:"connectedCallback",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,r=this;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){r.gestureOrAnimationInProgress=!0,r.swipeHandler&&r.swipeHandler.onStart()},e.next=3,n.e(3).then(n.bind(n,9003));case 3:this.gesture=e.sent.createSwipeBackGesture(this.el,(function(){return!r.gestureOrAnimationInProgress&&!!r.swipeHandler&&r.swipeHandler.canStart()}),(function(){return t()}),(function(e){var t;return null===(t=r.ani)||void 0===t?void 0:t.progressStep(e)}),(function(e,t,n){if(r.ani){r.ani.onFinish((function(){r.gestureOrAnimationInProgress=!1,r.swipeHandler&&r.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});var i=e?-.001:.001;e?i+=mo([0,0],[.32,.72],[0,1],[1,1],t)[0]:(r.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=mo([0,0],[1,0],[.68,.28],[1,1],t)[0]),r.ani.progressEnd(e?1:0,i,n)}else r.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillLoad",value:function(){this.ionNavWillLoad.emit()}},{key:"disconnectedCallback",value:function(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}},{key:"commit",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r){var i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.lock();case 2:return i=e.sent,a=!1,e.prev=4,e.next=7,this.transition(t,n,r);case 7:a=e.sent,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.error(e.t0);case 13:return i(),e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setRouteId",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r,i){var a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setRoot(t,n,{duration:"root"===r?0:void 0,direction:"back"===r?"back":"forward",animationBuilder:i});case 2:return a=e.sent,e.abrupt("return",{changed:a,element:this.activeEl});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getRouteId",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.activeEl,e.abrupt("return",t?{id:t.tagName,element:t,params:this.activeParams}:void 0);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRoot",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r){var i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.activeComponent!==t||!(0,uo.s)(n,this.activeParams)){e.next=2;break}return e.abrupt("return",!1);case 2:return i=this.activeEl,e.next=5,ko(this.delegate,this.el,t,["ion-page","ion-page-invisible"],n);case 5:return a=e.sent,this.activeComponent=t,this.activeEl=a,this.activeParams=n,e.next=11,this.commit(a,i,r);case 11:return e.next=13,Eo(this.delegate,i);case 13:return e.abrupt("return",!0);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"transition",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n){var r,i,a,o,s,l=this,u=arguments;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>2&&void 0!==u[2]?u[2]:{},n!==t){e.next=3;break}return e.abrupt("return",!1);case 3:return this.ionNavWillChange.emit(),i=this.el,a=this.mode,o=this.animated&&bo.getBoolean("animated",!0),s=r.animationBuilder||this.animation||bo.get("navAnimation"),e.next=9,(0,_o.t)(Object.assign(Object.assign({mode:a,animated:o,enteringEl:t,leavingEl:n,baseEl:i,deepWait:(0,uo.l)(i),progressCallback:r.progressAnimation?function(e){void 0===e||l.gestureOrAnimationInProgress?l.ani=e:(l.gestureOrAnimationInProgress=!0,e.onFinish((function(){l.gestureOrAnimationInProgress=!1,l.swipeHandler&&l.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},r),{animationBuilder:s}));case 9:return this.ionNavDidChange.emit(),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"lock",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.waitPromise,this.waitPromise=new Promise((function(e){return n=e})),void 0===t){e.next=5;break}return e.next=5,t;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return(0,po.h)("slot",null)}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{swipeHandler:["swipeHandlerChanged"]}}},{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}}]),r}(po.mv),[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]}]);var Io,zo=function(){if("undefined"!==typeof customElements){["ion-router-outlet"].forEach((function(e){if("ion-router-outlet"===e)customElements.get(e)||customElements.define(e,Po)}))}},Lo=n(4136);!function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(Io||(Io={}));var Do={getEngine:function(){var e;return(null===(e=null===Lo.w||void 0===Lo.w?void 0:Lo.w.Capacitor)||void 0===e?void 0:e.isPluginAvailable("Keyboard"))&&(null===Lo.w||void 0===Lo.w?void 0:Lo.w.Capacitor.Plugins.Keyboard)},getResizeMode:function(){var e=this.getEngine();return(null===e||void 0===e?void 0:e.getResizeMode)?e.getResizeMode().catch((function(e){if("UNIMPLEMENTED"!==e.code)throw e})):Promise.resolve(void 0)}},Ro=function(e){if(void 0===Lo.d||e===Io.None||void 0===e)return null;var t=Lo.d.querySelector("ion-app");return null!==t&&void 0!==t?t:Lo.d.body},Oo=function(e){var t=Ro(e);return null===t?0:t.clientHeight},jo=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i,a,o,s,l,u,c;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,o;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Do.getResizeMode();case 2:t=e.sent,o=void 0===t?void 0:t.mode,n=function(){void 0===a&&(a=Oo(o)),s(i=!0,o)},r=function(){s(i=!1,o)},null===Lo.w||void 0===Lo.w||Lo.w.addEventListener("keyboardWillShow",n),null===Lo.w||void 0===Lo.w||Lo.w.addEventListener("keyboardWillHide",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),s=function(e,n){t&&t(e,l(n))},l=function(e){if(0!==a&&a!==Oo(e)){var t=Ro(e);if(null!==t)return new Promise((function(e){var n=new ResizeObserver((function(){t.clientHeight===a&&(n.disconnect(),e())}));n.observe(t)}))}},u=function(){null===Lo.w||void 0===Lo.w||Lo.w.removeEventListener("keyboardWillShow",n),null===Lo.w||void 0===Lo.w||Lo.w.removeEventListener("keyboardWillHide",r),n=r=void 0},c=function(){return i},e.next=7,o();case 7:return e.abrupt("return",{init:o,destroy:u,isKeyboardVisible:c});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),No=function(e,t){return"string"===typeof e&&e.length>0?Object.assign((0,Ye.Z)({"ion-color":!0},"ion-color-".concat(e),!0),t):t},Bo=(0,po.GH)(function(e){u(n,e);var t=p(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionTabBarChanged=(0,po.yM)(d(e),"ionTabBarChanged",7),e.keyboardCtrl=null,e.keyboardVisible=!1,e.color=void 0,e.selectedTab=void 0,e.translucent=!1,e}return(0,s.Z)(n,[{key:"selectedTabChanged",value:function(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}},{key:"componentWillLoad",value:function(){this.selectedTabChanged()}},{key:"connectedCallback",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t=this;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jo(function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(n,r){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==n||void 0===r){e.next=3;break}return e.next=3,r;case 3:t.keyboardVisible=n;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:this.keyboardCtrl=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnectedCallback",value:function(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}},{key:"render",value:function(){var e,t=this.color,n=this.translucent,r=this.keyboardVisible,i=wo(this),a=r&&"top"!==this.el.getAttribute("slot");return(0,po.h)(po.AA,{role:"tablist","aria-hidden":a?"true":null,class:No(t,(e={},(0,Ye.Z)(e,i,!0),(0,Ye.Z)(e,"tab-bar-translucent",n),(0,Ye.Z)(e,"tab-bar-hidden",a),e))},(0,po.h)("slot",null))}},{key:"el",get:function(){return this}}],[{key:"watchers",get:function(){return{selectedTab:["selectedTabChanged"]}}},{key:"style",get:function(){return{ios:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{-webkit-padding-start:var(--ion-safe-area-left);padding-inline-start:var(--ion-safe-area-left);-webkit-padding-end:var(--ion-safe-area-right);padding-inline-end:var(--ion-safe-area-right);display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-bottom:var(--ion-safe-area-bottom, 0);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}}]),n}(po.mv),[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]}]);var Fo=function(){if("undefined"!==typeof customElements){["ion-tab-bar"].forEach((function(e){if("ion-tab-bar"===e)customElements.get(e)||customElements.define(e,Bo)}))}},$o=(0,po.GH)(function(e){u(n,e);var t=p(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.type="bounded",e}return(0,s.Z)(n,[{key:"addRipple",value:function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n){var r=this;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){(0,po.wj)((function(){var i=r.el.getBoundingClientRect(),a=i.width,o=i.height,s=Math.sqrt(a*a+o*o),l=Math.max(o,a),u=r.unbounded?l:s+Uo,c=Math.floor(l*Zo),h=u/c,f=t-i.left,d=n-i.top;r.unbounded&&(f=.5*a,d=.5*o);var p=f-.5*c,m=d-.5*c,v=.5*a-f,g=.5*o-d;(0,po.Iu)((function(){var t=document.createElement("div");t.classList.add("ripple-effect");var n=t.style;n.top=m+"px",n.left=p+"px",n.width=n.height=c+"px",n.setProperty("--final-scale","".concat(h)),n.setProperty("--translate-end","".concat(v,"px, ").concat(g,"px")),(r.el.shadowRoot||r.el).appendChild(t),setTimeout((function(){e((function(){Vo(t)}))}),325)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unbounded",get:function(){return"unbounded"===this.type}},{key:"render",value:function(){var e,t=wo(this);return(0,po.h)(po.AA,{role:"presentation",class:(e={},(0,Ye.Z)(e,t,!0),(0,Ye.Z)(e,"unbounded",this.unbounded),e)})}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}}]),n}(po.mv),[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),Vo=function(e){e.classList.add("fade-out"),setTimeout((function(){e.remove()}),200)},Uo=10,Zo=.5;var Ho=(0,po.GH)(function(e){u(n,e);var t=p(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.ionTabButtonClick=(0,po.yM)(d(e),"ionTabButtonClick",7),e.inheritedAttributes={},e.onKeyUp=function(t){"Enter"!==t.key&&" "!==t.key||e.selectTab(t)},e.onClick=function(t){e.selectTab(t)},e.disabled=!1,e.download=void 0,e.href=void 0,e.rel=void 0,e.layout=void 0,e.selected=!1,e.tab=void 0,e.target=void 0,e}return(0,s.Z)(n,[{key:"onTabBarChanged",value:function(e){var t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||(null===t||void 0===t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}},{key:"componentWillLoad",value:function(){this.inheritedAttributes=Object.assign({},(0,uo.d)(this.el,["aria-label"])),void 0===this.layout&&(this.layout=bo.get("tabButtonLayout","icon-top"))}},{key:"selectTab",value:function(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}},{key:"hasLabel",get:function(){return!!this.el.querySelector("ion-label")}},{key:"hasIcon",get:function(){return!!this.el.querySelector("ion-icon")}},{key:"render",value:function(){var e,t=this.disabled,n=this.hasIcon,r=this.hasLabel,i=this.href,a=this.rel,o=this.target,s=this.layout,l=this.selected,u=this.tab,c=this.inheritedAttributes,h=wo(this),f={download:this.download,href:i,rel:a,target:o};return(0,po.h)(po.AA,{onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==u?"tab-button-".concat(u):null,class:(e={},(0,Ye.Z)(e,h,!0),(0,Ye.Z)(e,"tab-selected",l),(0,Ye.Z)(e,"tab-disabled",t),(0,Ye.Z)(e,"tab-has-label",r),(0,Ye.Z)(e,"tab-has-icon",n),(0,Ye.Z)(e,"tab-has-label-only",r&&!n),(0,Ye.Z)(e,"tab-has-icon-only",n&&!r),(0,Ye.Z)(e,"tab-layout-".concat(s),!0),(0,Ye.Z)(e,"ion-activatable",!0),(0,Ye.Z)(e,"ion-selectable",!0),(0,Ye.Z)(e,"ion-focusable",!0),e)},(0,po.h)("a",Object.assign({},f,{class:"button-native",part:"native",role:"tab","aria-selected":l?"true":null,"aria-disabled":t?"true":null,tabindex:t?"-1":void 0},c),(0,po.h)("span",{class:"button-inner"},(0,po.h)("slot",null)),"md"===h&&(0,po.h)("ion-ripple-effect",{type:"unbounded"})))}},{key:"el",get:function(){return this}}],[{key:"style",get:function(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start) ::slotted(ion-badge):dir(rtl),:host(.tab-layout-icon-end) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide) ::slotted(ion-badge):dir(rtl),:host(.tab-has-label-only) ::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}}]),n}(po.mv),[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);var Wo,qo,Go,Xo,Ko=function(){if("undefined"!==typeof customElements){["ion-tab-button","ion-ripple-effect"].forEach((function(e){switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Ho);break;case"ion-ripple-effect":customElements.get(e)||"undefined"!==typeof customElements&&["ion-ripple-effect"].forEach((function(e){"ion-ripple-effect"===e&&(customElements.get(e)||customElements.define(e,$o))}))}}))}},Yo=!1,Jo=!0,Qo=!1,es=!0,ts=!0,ns=!0,rs=!0,is=!0,as=!0,os=!0,ss=!0,ls=!0,us=!0,cs=!0,hs=!0,fs=!1,ds=!0,ps=!0,ms=!0,vs=!0,gs=!0,ys=!0,_s=!0,xs=!0,bs=!0,ws=!0,ks=!0,Es=!0,Ss=!0,Ts=!0,Cs=!0,Ms=!0,As=!0,Ps=!0,Is=!0,zs=!0,Ls=!0,Ds=!0,Rs=!0,Os=!0,js=!0,Ns=!0,Bs=!0,Fs=!0,$s=!1,Vs=!1,Us=!1,Zs=!1,Hs=!1,Ws=!1,qs=!1,Gs=!1,Xs=!1,Ks=!0,Ys=!1,Js=!0,Qs=!1,el=!0,tl=!0,nl=!0,rl=!1,il=!0,al=!0,ol=!0,sl=!1,ll=!1,ul=!1,cl=!0,hl="app",fl=0,dl=!1,pl=!1,ml=!1,vl=!1,gl=0,yl=!1,_l=!0,xl=function(e){var t=new URL(e,tc.$resourcesUrl$);return t.origin!==Ju.location.origin?t.href:t.pathname},bl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Xs&&performance.mark){var n="st:".concat(e,":").concat(t,":").concat(fl++);return performance.mark(n),function(){return performance.measure("[Stencil] ".concat(e,"() <").concat(t,">"),n)}}return function(){}},wl=function(e,t){return Xs&&performance.mark?(0===performance.getEntriesByName(e,"mark").length&&performance.mark(e),function(){0===performance.getEntriesByName(t,"measure").length&&performance.measure(t,e)}):function(){}},kl="s-id",El="sty-id",Sl="c-id",Tl="http://www.w3.org/1999/xlink",Cl={},Ml=function(e){return"object"===(e=typeof e)||"function"===e};function Al(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}var Pl,Il,zl=function(e,t){for(var n=null,r=null,i=null,a=!1,o=!1,s=[],l=arguments.length,u=new Array(l>2?l-2:0),c=2;c<l;c++)u[c-2]=arguments[c];if(function t(r){for(var i=0;i<r.length;i++)n=r[i],Array.isArray(n)?t(n):null!=n&&"boolean"!==typeof n&&((a="function"!==typeof e&&!Ml(n))?n=String(n):Us&&"function"!==typeof e&&void 0===n.$flags$&&Wu("vNode passed as children has unexpected type.\nMake sure it's using the correct h() function.\nEmpty objects can also be the cause, look for JSX comments that became objects."),a&&o?s[s.length-1].$text$+=n:s.push(a?Ll(null,n):n),o=a)}(u),t&&(Us&&"input"===e&&Bl(t),zs&&t.key&&(r=t.key),Ks&&t.name&&(i=t.name),Ps)){var h=t.className||t.class;h&&(t.class="object"!==typeof h?h:Object.keys(h).filter((function(e){return h[e]})).join(" "))}if(Us&&s.some(Rl)&&Wu("The <Host> must be the single root component. Make sure:\n- You are NOT using hostData() and <Host> in the same component.\n- <Host> is used once, and it's the single root component of the render() function."),Is&&"function"===typeof e)return e(null===t?{}:t,s,Ol);var f=Ll(e,null);return f.$attrs$=t,s.length>0&&(f.$children$=s),zs&&(f.$key$=r),Ks&&(f.$name$=i),f},Ll=function(e,t){var n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Ms&&(n.$attrs$=null),zs&&(n.$key$=null),Ks&&(n.$name$=null),n},Dl={},Rl=function(e){return e&&e.$tag$===Dl},Ol={forEach:function(e,t){return e.map(jl).forEach(t)},map:function(e,t){return e.map(jl).map(t).map(Nl)}},jl=function(e){return{vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}},Nl=function(e){if("function"===typeof e.vtag){var t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),zl.apply(void 0,[e.vtag,t].concat((0,a.Z)(e.vchildren||[])))}var n=Ll(e.vtag,e.vtext);return n.$attrs$=e.vattrs,n.$children$=e.vchildren,n.$key$=e.vkey,n.$name$=e.vname,n},Bl=function(e){var t=Object.keys(e),n=t.indexOf("value");if(-1!==n){var r=t.indexOf("type"),i=t.indexOf("min"),a=t.indexOf("max"),o=t.indexOf("step");(n<r||n<i||n<a||n<o)&&qu('The "value" prop of <input> should be set after "min", "max", "type" and "step"')}},Fl=function e(t,n,r,i,a,o,s){var l,u,c,h;if(1===o.nodeType){for((l=o.getAttribute(Sl))&&((u=l.split("."))[0]!==s&&"0"!==u[0]||(c={$flags$:0,$hostId$:u[0],$nodeId$:u[1],$depth$:u[2],$index$:u[3],$tag$:o.tagName.toLowerCase(),$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},n.push(c),o.removeAttribute(Sl),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,t=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))),h=o.childNodes.length-1;h>=0;h--)e(t,n,r,i,a,o.childNodes[h],s);if(o.shadowRoot)for(h=o.shadowRoot.childNodes.length-1;h>=0;h--)e(t,n,r,i,a,o.shadowRoot.childNodes[h],s)}else if(8===o.nodeType)(u=o.nodeValue.split("."))[1]!==s&&"0"!==u[1]||(l=u[0],c={$flags$:0,$hostId$:u[1],$nodeId$:u[2],$depth$:u[3],$index$:u[4],$elm$:o,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===l?(c.$elm$=o.nextSibling,c.$elm$&&3===c.$elm$.nodeType&&(c.$text$=c.$elm$.textContent,n.push(c),o.remove(),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))):c.$hostId$===s&&("s"===l?(c.$tag$="slot",u[5]?o["s-sn"]=c.$name$=u[5]:o["s-sn"]="",o["s-sr"]=!0,bs&&i&&(c.$elm$=Qu.createElement(c.$tag$),c.$name$&&c.$elm$.setAttribute("name",c.$name$),o.parentNode.insertBefore(c.$elm$,o),o.remove(),"0"===c.$depth$&&(i[c.$index$]=c.$elm$)),r.push(c),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c):"r"===l&&(bs&&i?o.remove():Ks&&(a["s-cr"]=o,o["s-cn"]=!0))));else if(t&&"style"===t.$tag$){var f=Ll(null,o.textContent);f.$elm$=o,f.$index$="0",t.$children$=[f]}},$l=function e(t,n){if(1===t.nodeType){for(var r=0;r<t.childNodes.length;r++)e(t.childNodes[r],n);if(t.shadowRoot)for(r=0;r<t.shadowRoot.childNodes.length;r++)e(t.shadowRoot.childNodes[r],n)}else if(8===t.nodeType){var i=t.nodeValue.split(".");"o"===i[0]&&(n.set(i[1]+"."+i[2],t),t.nodeValue="",t["s-en"]=i[3])}},Vl=function(e){return Yu.map((function(t){return t(e)})).find((function(e){return!!e}))},Ul=function(e,t,n){var r=tc.ce(t,n);return e.dispatchEvent(r),r},Zl=new WeakMap,Hl=function(e,t,n){var r=Ku.get(e);ic&&n?"string"===typeof(r=r||new CSSStyleSheet)?r=t:r.replaceSync(t):r=t,Ku.set(e,r)},Wl=function(e,t,n,r){var i,o=Gl(t,n),s=Ku.get(o);if(!cl)return o;if(e=11===e.nodeType?e:Qu,s)if("string"===typeof s){e=e.head||e;var l,u=Zl.get(e);if(u||Zl.set(e,u=new Set),!u.has(o)){if(Ws&&e.host&&(l=e.querySelector("[".concat(El,'="').concat(o,'"]'))))l.innerHTML=s;else{if(rl&&tc.$cssShim$){var c=(l=tc.$cssShim$.createHostStyle(r,o,s,!!(10&t.$flags$)))["s-sc"];c&&(o=c,u=null)}else(l=Qu.createElement("style")).innerHTML=s;var h=null!==(i=tc.$nonce$)&&void 0!==i?i:Al(Qu);null!=h&&l.setAttribute("nonce",h),(Hs||$s)&&l.setAttribute(El,o),e.insertBefore(l,e.querySelector("link"))}u&&u.add(o)}}else il&&!e.adoptedStyleSheets.includes(s)&&(e.adoptedStyleSheets=[].concat((0,a.Z)(e.adoptedStyleSheets),[s]));return o},ql=function(e){var t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=bl("attachStyles",t.$tagName$),a=Wl(bs&&nc&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);(bs||xs)&&ks&&10&r&&(n["s-sc"]=a,n.classList.add(a+"-h"),xs&&2&r&&n.classList.add(a+"-s")),i()},Gl=function(e,t){return"sc-"+(vs&&t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$)},Xl=function(e,t,n,r,i,o){if(n!==r){var s=Uu(e,t),l=t.toLowerCase();if(Ps&&"class"===t){var u=e.classList,c=Yl(n),h=Yl(r);u.remove.apply(u,(0,a.Z)(c.filter((function(e){return e&&!h.includes(e)})))),u.add.apply(u,(0,a.Z)(h.filter((function(e){return e&&!c.includes(e)}))))}else if(js&&"style"===t){if(Cs)for(var f in n)r&&null!=r[f]||(!Hs&&f.includes("-")?e.style.removeProperty(f):e.style[f]="");for(var d in r)n&&r[d]===n[d]||(!Hs&&d.includes("-")?e.style.setProperty(d,r[d]):e.style[d]=r[d])}else if(zs&&"key"===t);else if(Ds&&"ref"===t)r&&r(e);else if(!Ls||(Gs?s:e.__lookupSetter__(t))||"o"!==t[0]||"n"!==t[1]){if(Rs){var p=Ml(r);if((s||p&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{var m=null==r?"":r;"list"===t?s=!1:null!=n&&e[t]==m||(e[t]=m)}}catch(g){}var v=!1;As&&l!==(l=l.replace(/^xlink\:?/,""))&&(t=l,v=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(As&&v?e.removeAttributeNS(Tl,t):e.removeAttribute(t)):(!s||4&o||i)&&!p&&(r=!0===r?"":r,As&&v?e.setAttributeNS(Tl,t,r):e.setAttribute(t,r))}}else t="-"===t[2]?t.slice(3):Uu(Ju,l)?l.slice(2):l[2]+t.slice(3),n&&tc.rel(e,t,n,!1),r&&tc.ael(e,t,r,!1)}},Kl=/\s/,Yl=function(e){return e?e.split(Kl):[]},Jl=function(e,t,n,r){var i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,a=e&&e.$attrs$||Cl,o=t.$attrs$||Cl;if(Cs)for(r in a)r in o||Xl(i,r,a[r],void 0,n,t.$flags$);for(r in o)Xl(i,r,a[r],o[r],n,t.$flags$)},Ql=function e(t,n,r,i){var a,o,s,l=n.$children$[r],u=0;if(Ks&&!dl&&(ml=!0,"slot"===l.$tag$&&(Wo&&i.classList.add(Wo+"-s"),l.$flags$|=l.$children$?2:1)),Us&&l.$elm$&&Wu("The JSX ".concat(null!==l.$text$?'"'.concat(l.$text$,'" text'):'"'.concat(l.$tag$,'" element')," node should not be shared within the same renderer. The renderer caches element lookups in order to improve performance. However, a side effect from this is that the exact same JSX node should not be reused. For more information please see https://stenciljs.com/docs/templating-jsx#avoid-shared-jsx-nodes")),Ns&&null!==l.$text$)a=l.$elm$=Qu.createTextNode(l.$text$);else if(Ks&&1&l.$flags$)a=l.$elm$=Vs||Hs?pu(l):Qu.createTextNode("");else{if(Ts&&!vl&&(vl="svg"===l.$tag$),a=l.$elm$=Ts?Qu.createElementNS(vl?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",Ks&&2&l.$flags$?"slot-fb":l.$tag$):Qu.createElement(Ks&&2&l.$flags$?"slot-fb":l.$tag$),Ts&&vl&&"foreignObject"===l.$tag$&&(vl=!1),Ms&&Jl(null,l,vl),(bs||xs)&&function(e){return null!=e}(Wo)&&a["s-si"]!==Wo&&a.classList.add(a["s-si"]=Wo),l.$children$)for(u=0;u<l.$children$.length;++u)(o=e(t,l,u,a))&&a.appendChild(o);Ts&&("svg"===l.$tag$?vl=!1:"foreignObject"===a.tagName&&(vl=!0))}return Ks&&(a["s-hn"]=Go,3&l.$flags$&&(a["s-sr"]=!0,a["s-cr"]=qo,a["s-sn"]=l.$name$||"",(s=t&&t.$children$&&t.$children$[r])&&s.$tag$===l.$tag$&&t.$elm$&&eu(t.$elm$,!1))),a},eu=function e(t,n){tc.$flags$|=1;for(var r=t.childNodes,i=r.length-1;i>=0;i--){var a=r[i];a["s-hn"]!==Go&&a["s-ol"]&&(ou(a).insertBefore(a,au(a)),a["s-ol"].remove(),a["s-ol"]=void 0,ml=!0),n&&e(a,n)}tc.$flags$&=-2},tu=function(e,t,n,r,i,a){var o,s=Ks&&e["s-cr"]&&e["s-cr"].parentNode||e;for(bs&&s.shadowRoot&&s.tagName===Go&&(s=s.shadowRoot);i<=a;++i)r[i]&&(o=Ql(null,n,i,e))&&(r[i].$elm$=o,s.insertBefore(o,Ks?au(t):t))},nu=function(e,t,n,r,i){for(;t<=n;++t)(r=e[t])&&(i=r.$elm$,fu(r),Ks&&(pl=!0,i["s-ol"]?i["s-ol"].remove():eu(i,!0)),i.remove())},ru=function(e,t,n,r){for(var i,a,o=0,s=0,l=0,u=0,c=t.length-1,h=t[0],f=t[c],d=r.length-1,p=r[0],m=r[d];o<=c&&s<=d;)if(null==h)h=t[++o];else if(null==f)f=t[--c];else if(null==p)p=r[++s];else if(null==m)m=r[--d];else if(iu(h,p))su(h,p),h=t[++o],p=r[++s];else if(iu(f,m))su(f,m),f=t[--c],m=r[--d];else if(iu(h,m))!Ks||"slot"!==h.$tag$&&"slot"!==m.$tag$||eu(h.$elm$.parentNode,!1),su(h,m),e.insertBefore(h.$elm$,f.$elm$.nextSibling),h=t[++o],m=r[--d];else if(iu(f,p))!Ks||"slot"!==h.$tag$&&"slot"!==m.$tag$||eu(f.$elm$.parentNode,!1),su(f,p),e.insertBefore(f.$elm$,h.$elm$),f=t[--c],p=r[++s];else{if(l=-1,zs)for(u=o;u<=c;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===p.$key$){l=u;break}zs&&l>=0?((a=t[l]).$tag$!==p.$tag$?i=Ql(t&&t[s],n,l,e):(su(a,p),t[l]=void 0,i=a.$elm$),p=r[++s]):(i=Ql(t&&t[s],n,s,e),p=r[++s]),i&&(Ks?ou(h.$elm$).insertBefore(i,au(h.$elm$)):h.$elm$.parentNode.insertBefore(i,h.$elm$))}o>c?tu(e,null==r[d+1]?null:r[d+1].$elm$,n,r,s,d):Cs&&s>d&&nu(t,o,c)},iu=function(e,t){return e.$tag$===t.$tag$&&(Ks&&"slot"===e.$tag$?e.$name$===t.$name$:!zs||e.$key$===t.$key$)},au=function(e){return e&&e["s-ol"]||e},ou=function(e){return(e["s-ol"]?e["s-ol"]:e).parentNode},su=function(e,t){var n,r=t.$elm$=e.$elm$,i=e.$children$,a=t.$children$,o=t.$tag$,s=t.$text$;Ns&&null!==s?Ns&&Ks&&(n=r["s-cr"])?n.parentNode.textContent=s:Ns&&e.$text$!==s&&(r.data=s):(Ts&&(vl="svg"===o||"foreignObject"!==o&&vl),(Ms||_s)&&(ws&&"slot"===o||Jl(e,t,vl)),Cs&&null!==i&&null!==a?ru(r,i,t,a):null!==a?(Cs&&Ns&&null!==e.$text$&&(r.textContent=""),tu(r,null,t,a,0,a.length-1)):Cs&&null!==i&&nu(i,0,i.length-1),Ts&&vl&&"svg"===o&&(vl=!1))},lu=function e(t){var n,r,i,a,o,s,l=t.childNodes;for(r=0,i=l.length;r<i;r++)if(1===(n=l[r]).nodeType){if(n["s-sr"])for(o=n["s-sn"],n.hidden=!1,a=0;a<i;a++)if(s=l[a].nodeType,l[a]["s-hn"]!==n["s-hn"]||""!==o){if(1===s&&o===l[a].getAttribute("slot")){n.hidden=!0;break}}else if(1===s||3===s&&""!==l[a].textContent.trim()){n.hidden=!0;break}e(n)}},uu=[],cu=function e(t){for(var n,r,i,a,o,s,l=0,u=t.childNodes,c=u.length;l<c;l++){if((n=u[l])["s-sr"]&&(r=n["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,a=n["s-sn"],s=i.length-1;s>=0;s--)(r=i[s])["s-cn"]||r["s-nr"]||r["s-hn"]===n["s-hn"]||(hu(r,a)?(o=uu.find((function(e){return e.$nodeToRelocate$===r})),pl=!0,r["s-sn"]=r["s-sn"]||a,o?o.$slotRefNode$=n:uu.push({$slotRefNode$:n,$nodeToRelocate$:r}),r["s-sr"]&&uu.map((function(e){hu(e.$nodeToRelocate$,r["s-sn"])&&(o=uu.find((function(e){return e.$nodeToRelocate$===r})),o&&!e.$slotRefNode$&&(e.$slotRefNode$=o.$slotRefNode$))}))):uu.some((function(e){return e.$nodeToRelocate$===r}))||uu.push({$nodeToRelocate$:r}));1===n.nodeType&&e(n)}},hu=function(e,t){return 1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t},fu=function e(t){Ds&&(t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(e))},du=function(e,t){var n=e.$hostElement$,r=e.$cmpMeta$,a=e.$vnode$||Ll(null,null),o=Rl(t)?t:zl(null,null,t);if(Go=n.tagName,Us&&Array.isArray(t)&&t.some(Rl))throw new Error('The <Host> must be the single root component.\nLooks like the render() function of "'.concat(Go.toLowerCase(),'" is returning an array that contains the <Host>.\n\nThe render() function should look like this instead:\n\nrender() {\n  // Do not return an array\n  return (\n    <Host>{content}</Host>\n  );\n}\n  '));if(_s&&r.$attrsToReflect$&&(o.$attrs$=o.$attrs$||{},r.$attrsToReflect$.map((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];return o.$attrs$[a]=n[r]}))),o.$tag$=null,o.$flags$|=4,e.$vnode$=o,o.$elm$=a.$elm$=bs&&n.shadowRoot||n,(xs||bs)&&(Wo=n["s-sc"]),Ks&&(qo=n["s-cr"],dl=nc&&0!==(1&r.$flags$),pl=!1),su(a,o),Ks){if(tc.$flags$|=1,ml){var s,l,u,c,h,f;cu(o.$elm$);for(var d=0;d<uu.length;d++)(l=(s=uu[d]).$nodeToRelocate$)["s-ol"]||((u=Vs||Hs?mu(l):Qu.createTextNode(""))["s-nr"]=l,l.parentNode.insertBefore(l["s-ol"]=u,l));for(d=0;d<uu.length;d++)if(l=(s=uu[d]).$nodeToRelocate$,s.$slotRefNode$){for(c=s.$slotRefNode$.parentNode,h=s.$slotRefNode$.nextSibling,u=l["s-ol"];u=u.previousSibling;)if((f=u["s-nr"])&&f["s-sn"]===l["s-sn"]&&c===f.parentNode&&(!(f=f.nextSibling)||!f["s-nr"])){h=f;break}(!h&&c!==l.parentNode||l.nextSibling!==h)&&l!==h&&(!l["s-hn"]&&l["s-ol"]&&(l["s-hn"]=l["s-ol"].parentNode.nodeName),c.insertBefore(l,h))}else 1===l.nodeType&&(l.hidden=!0)}pl&&lu(o.$elm$),tc.$flags$&=-2,uu.length=0}},pu=function(e){return Qu.createComment("<slot".concat(e.$name$?' name="'+e.$name$+'"':"","> (host=").concat(Go.toLowerCase(),")"))},mu=function(e){return Qu.createComment("org-location for "+(e.localName?"<".concat(e.localName,"> (host=").concat(e["s-hn"],")"):"[".concat(e.textContent,"]")))},vu=function(e,t){ll&&t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((function(t){return e.$onRenderResolve$=t})))},gu=function(e,t){if(Fs&&Cs&&(e.$flags$|=16),!(ll&&4&e.$flags$)){vu(e,e.$ancestorComponent$);var n=function(){return yu(e,t)};return Fs?dc(n):n()}e.$flags$|=512},yu=function(e,t){var n,r=e.$hostElement$,a=bl("scheduleUpdate",e.$cmpMeta$.$tagName$),o=Gs?e.$lazyInstance$:r;return t?(Gs&&ls&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return ku(o,n,r)})),e.$queuedListeners$=null)),Su(r,"componentWillLoad"),ns&&(n=ku(o,"componentWillLoad"))):(Su(r,"componentWillUpdate"),rs&&(n=ku(o,"componentWillUpdate"))),Su(r,"componentWillRender"),is&&(n=Eu(n,(function(){return ku(o,"componentWillRender")}))),a(),Eu(n,(function(){return _u(e,o,t)}))},_u=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r){var i,a,o,s,l,u;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.$hostElement$,a=bl("update",t.$cmpMeta$.$tagName$),o=i["s-rc"],Ss&&r&&ql(t),s=bl("render",t.$cmpMeta$.$tagName$),Us&&(t.$flags$|=1024),!Hs){e.next=11;break}return e.next=9,xu(t,n,i);case 9:e.next=12;break;case 11:xu(t,n,i);case 12:if(rl&&tc.$cssShim$&&tc.$cssShim$.updateHost(i),Us&&(t.$renderCount$++,t.$flags$&=-1025),Hs)try{Cu(i),r&&(1&t.$cmpMeta$.$flags$?i["s-en"]="":2&t.$cmpMeta$.$flags$&&(i["s-en"]="c"))}catch(c){Zu(c,i)}ll&&o&&(o.map((function(e){return e()})),i["s-rc"]=void 0),s(),a(),ll?(l=i["s-p"],u=function(){return bu(t)},0===l.length?u():(Promise.all(l).then(u),t.$flags$|=4,l.length=0)):bu(t);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),xu=function(e,t,n){var r=!!Yo,i=!!Gs,a=!!Fs,o=!!Cs;try{if(t,t=(r||t.render)&&t.render(),o&&a&&(e.$flags$&=-17),(o||i)&&(e.$flags$|=2),ss||_s)if(Os||_s){if(Hs)return Promise.resolve(t).then((function(t){return du(e,t)}));du(e,t)}else n.textContent=t}catch(s){Zu(s,e.$hostElement$)}return null,null},bu=function(e){var t=e.$cmpMeta$.$tagName$,n=e.$hostElement$,r=bl("postUpdate",t),i=Gs?e.$lazyInstance$:n,a=e.$ancestorComponent$;ts&&(Us&&(e.$flags$|=1024),ku(i,"componentDidRender"),Us&&(e.$flags$&=-1025)),Su(n,"componentDidRender"),64&e.$flags$?(es&&(Us&&(e.$flags$|=1024),ku(i,"componentDidUpdate"),Us&&(e.$flags$&=-1025)),Su(n,"componentDidUpdate"),r()):(e.$flags$|=64,ll&&ks&&Tu(n),Jo&&(Us&&(e.$flags$|=2048),ku(i,"componentDidLoad"),Us&&(e.$flags$&=-2049)),Su(n,"componentDidLoad"),r(),ll&&(e.$onReadyResolve$(n),a||wu(t))),$s&&n["s-hmr-load"]&&n["s-hmr-load"](),ms&&Gs&&e.$onInstanceResolve$(n),ll&&(e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&fc((function(){return gu(e,!1)})),e.$flags$&=-517)},wu=function(e){ks&&Tu(Qu.documentElement),ul&&(tc.$flags$|=2),fc((function(){return Ul(Ju,"appload",{detail:{namespace:hl}})})),Xs&&performance.measure&&performance.measure("[Stencil] ".concat(hl," initial load (by ").concat(e,")"),"st:app:start")},ku=function(e,t,n){if(e&&e[t])try{return e[t](n)}catch(r){Zu(r)}},Eu=function(e,t){return e&&e.then?e.then(t):t()},Su=function(e,t){qs&&Ul(e,"stencil_"+t,{bubbles:!0,composed:!0,detail:{namespace:hl}})},Tu=function(e){return Js?e.classList.add("hydrated"):Ys?e.setAttribute("hydrated",""):void 0},Cu=function e(t){var n=t.children;if(null!=n)for(var r=0,i=n.length;r<i;r++){var a=n[r];"function"===typeof a.connectedCallback&&a.connectedCallback(),e(a)}},Mu=function(e,t,n,r){var i,a,o=$u(e),s=Gs?o.$hostElement$:e,l=o.$instanceValues$.get(t),u=o.$flags$,c=Gs?o.$lazyInstance$:s;i=n,a=r.$members$[t][0],n=null==i||Ml(i)?i:el&&4&a?"false"!==i&&(""===i||!!i):tl&&2&a?parseFloat(i):nl&&1&a?String(i):i;var h=Number.isNaN(l)&&Number.isNaN(n);if((!Gs||!(8&u)||void 0===l)&&(n!==l&&!h)&&(o.$instanceValues$.set(t,n),Us&&(1024&o.$flags$?qu('The state/prop "'.concat(t,'" changed during rendering. This can potentially lead to infinite-loops and other bugs.'),"\nElement",s,"\nNew value",n,"\nOld value",l):2048&o.$flags$&&qu('The state/prop "'.concat(t,'" changed during "componentDidLoad()", this triggers extra re-renders, try to setup on "componentWillLoad()"'),"\nElement",s,"\nNew value",n,"\nOld value",l)),!Gs||c)){if(Bs&&r.$watchers$&&128&u){var f=r.$watchers$[t];f&&f.map((function(e){try{c[e](n,l,t)}catch(r){Zu(r,s)}}))}if(Cs&&2===(18&u)){if(al&&c.componentShouldUpdate&&!1===c.componentShouldUpdate(n,l,t))return;gu(o,!1)}}},Au=function(e,t,n){if(ps&&t.$members$){Bs&&e.watchers&&(t.$watchers$=e.watchers);var r=Object.entries(t.$members$),a=e.prototype;if(r.map((function(e){var r=(0,i.Z)(e,2),o=r[0],s=(0,i.Z)(r[1],1)[0];(ys||Es)&&(31&s||(!Gs||2&n)&&32&s)?Object.defineProperty(a,o,{get:function(){return e=o,$u(this).$instanceValues$.get(e);var e},set:function(e){if(Us){var r=$u(this);0===(1&n)&&0===(8&r.$flags$)&&0!==(31&s)&&0===(1024&s)&&qu('@Prop() "'.concat(o,'" on <').concat(t.$tagName$,"> is immutable but was modified from within the component.\nMore information: https://stenciljs.com/docs/properties#prop-mutability"))}Mu(this,o,e,t)},configurable:!0,enumerable:!0}):Gs&&ms&&1&n&&64&s&&Object.defineProperty(a,o,{value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=$u(this);return r.$onInstancePromise$.then((function(){var e;return(e=r.$lazyInstance$)[o].apply(e,t)}))}})})),gs&&(!Gs||1&n)){var o=new Map;a.attributeChangedCallback=function(e,t,n){var r=this;tc.jmp((function(){var t=o.get(e);if(r.hasOwnProperty(t))n=r[t],delete r[t];else if(a.hasOwnProperty(t)&&"number"===typeof r[t]&&r[t]==n)return;r[t]=(null!==n||"boolean"!==typeof r[t])&&n}))},e.observedAttributes=r.filter((function(e){var t=(0,i.Z)(e,2);t[0];return 15&t[1][0]})).map((function(e){var n=(0,i.Z)(e,2),r=n[0],a=n[1],s=a[1]||r;return o.set(s,r),_s&&512&a[0]&&t.$attrsToReflect$.push([r,s]),s}))}}return e},Pu=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,r,i,a,o){var s,l,u,c,h,f,d;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Gs||Hs||Ss)||0!==(32&r.$flags$)){e.next=37;break}if(!Gs&&!Ws){e.next=22;break}if(r.$flags$|=32,!(o=Xu(i,r,a)).then){e.next=10;break}return s=wl("st:load:".concat(i.$tagName$,":").concat(r.$modeName$),"[Stencil] Load module for <".concat(i.$tagName$,">")),e.next=8,o;case 8:o=e.sent,s();case 10:if(!Us&&!Vs||o){e.next=12;break}throw new Error('Constructor for "'.concat(i.$tagName$,"#").concat(r.$modeName$,'" was not found'));case 12:ps&&!o.isProxied&&(Bs&&(i.$watchers$=o.watchers),Au(o,i,2),o.isProxied=!0),l=bl("createInstance",i.$tagName$),ps&&(r.$flags$|=8);try{new o(r)}catch(p){Zu(p)}ps&&(r.$flags$&=-9),Bs&&(r.$flags$|=128),l(),Iu(r.$lazyInstance$),e.next=25;break;case 22:o=t.constructor,r.$flags$|=32,customElements.whenDefined(i.$tagName$).then((function(){return r.$flags$|=128}));case 25:if(!Ss||!o.style){e.next=37;break}if(u=o.style,vs&&"string"!==typeof u&&(u=u[r.$modeName$=Vl(t)],Hs&&r.$modeName$&&t.setAttribute("s-mode",r.$modeName$)),c=Gl(i,r.$modeName$),Ku.has(c)){e.next=37;break}if(h=bl("registerStyles",i.$tagName$),!(!Hs&&bs&&Qs&&8&i.$flags$)){e.next=35;break}return e.next=34,n.e(443).then(n.bind(n,8443)).then((function(e){return e.scopeCss(u,c,!1)}));case 34:u=e.sent;case 35:Hl(c,u,!!(1&i.$flags$)),h();case 37:f=r.$ancestorComponent$,d=function(){return gu(r,!0)},ll&&f&&f["s-rc"]?f["s-rc"].push(d):d();case 40:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Iu=function(e){Gs&&as&&ku(e,"connectedCallback")},zu=function(e){if(0===(1&tc.$flags$)){var t=$u(e),n=t.$cmpMeta$,r=bl("connectedCallback",n.$tagName$);if(fs&&Ou(e,t,n.$listeners$,!0),1&t.$flags$)Ou(e,t,n.$listeners$,!1),Iu(t.$lazyInstance$);else{var a;if(t.$flags$|=1,Ws&&(a=e.getAttribute(kl))){if(bs&&nc&&1&n.$flags$){var o=vs?Wl(e.shadowRoot,n,e.getAttribute("s-mode")):Wl(e.shadowRoot,n);e.classList.remove(o+"-h",o+"-s")}!function(e,t,n,r){var i=bl("hydrateClient",t),a=e.shadowRoot,o=[],s=bs&&a?[]:null,l=r.$vnode$=Ll(t,null);tc.$orgLocNodes$||$l(Qu.body,tc.$orgLocNodes$=new Map),e[kl]=n,e.removeAttribute(kl),Fl(l,o,[],s,e,e,n),o.map((function(e){var n=e.$hostId$+"."+e.$nodeId$,r=tc.$orgLocNodes$.get(n),i=e.$elm$;r&&nc&&""===r["s-en"]&&r.parentNode.insertBefore(i,r.nextSibling),a||(i["s-hn"]=t,r&&(i["s-ol"]=r,i["s-ol"]["s-nr"]=i)),tc.$orgLocNodes$.delete(n)})),bs&&a&&s.map((function(e){e&&a.appendChild(e)})),i()}(e,n.$tagName$,a,t)}if(Ks&&!a&&(Hs||(ws||bs)&&12&n.$flags$)&&Lu(e),ll)for(var s=e;s=s.parentNode||s.host;)if(Ws&&1===s.nodeType&&s.hasAttribute("s-id")&&s["s-p"]||s["s-p"]){vu(t,t.$ancestorComponent$=s);break}ys&&!Hs&&n.$members$&&Object.entries(n.$members$).map((function(t){var n=(0,i.Z)(t,2),r=n[0];if(31&(0,i.Z)(n[1],1)[0]&&e.hasOwnProperty(r)){var a=e[r];delete e[r],e[r]=a}})),sl?fc((function(){return Pu(e,t,n)})):Pu(e,t,n)}r()}},Lu=function(e){var t=e["s-cr"]=Qu.createComment(Vs?"content-ref (host=".concat(e.localName,")"):"");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Du=function(e){if(0===(1&tc.$flags$)){var t=$u(e),n=Gs?t.$lazyInstance$:e;ls&&t.$rmListeners$&&(t.$rmListeners$.map((function(e){return e()})),t.$rmListeners$=void 0),rl&&tc.$cssShim$&&tc.$cssShim$.removeHost(e),Gs&&os&&ku(n,"disconnectedCallback"),Qo&&ku(n,"componentDidUnload")}},Ru=function(e,t){var n={$flags$:t[0],$tagName$:t[1]};ps&&(n.$members$=t[2]),ls&&(n.$listeners$=t[3]),Bs&&(n.$watchers$=e.$watchers$),_s&&(n.$attrsToReflect$=[]),bs&&!nc&&1&n.$flags$&&(n.$flags$|=8);var r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost:function(){Vu(this,n)},connectedCallback:function(){zu(this),as&&r&&r.call(this)},disconnectedCallback:function(){Du(this),os&&i&&i.call(this)},__attachShadow:function(){nc?ol?this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=n.$tagName$,Au(e,n,3)},Ou=function(e,t,n,r){ls&&n&&(fs&&(n=r?n.filter((function(e){return 32&(0,i.Z)(e,1)[0]})):n.filter((function(e){return!(32&(0,i.Z)(e,1)[0])}))),n.map((function(n){var r=(0,i.Z)(n,3),a=r[0],o=r[1],s=r[2],l=ds?Nu(e,a):e,u=ju(t,s),c=Bu(a);tc.ael(l,o,u,c),(t.$rmListeners$=t.$rmListeners$||[]).push((function(){return tc.rel(l,o,u,c)}))})))},ju=function(e,t){return function(n){try{Gs?256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n]):e.$hostElement$[t](n)}catch(r){Zu(r)}}},Nu=function(e,t){return cs&&4&t?Qu:us&&8&t?Ju:hs&&16&t?Qu.body:fs&&32&t?e.parentElement:e},Bu=function(e){return rc?{passive:0!==(1&e),capture:0!==(2&e)}:0!==(2&e)},Fu=new WeakMap,$u=function(e){return Fu.get(e)},Vu=function(e,t){var n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Us&&(n.$renderCount$=0),ms&&Gs&&(n.$onInstancePromise$=new Promise((function(e){return n.$onInstanceResolve$=e}))),ll&&(n.$onReadyPromise$=new Promise((function(e){return n.$onReadyResolve$=e})),e["s-p"]=[],e["s-rc"]=[]),Ou(e,n,t.$listeners$,!1),Fu.set(e,n)},Uu=function(e,t){return t in e},Zu=function(e,t){return(Xo||console.error)(e,t)},Hu=Zs?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],Wu=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,Hu.concat(n))},qu=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,Hu.concat(n))},Gu=new Map,Xu=function(e,t,r){var i=e.$tagName$.replace(/-/g,"_"),a=e.$lazyBundleId$;if(!Us||"string"===typeof a){var o=!$s&&Gu.get(a);return o?o[i]:n(2533)("./".concat(a,".entry.js").concat($s&&r?"?s-hmr="+r:"")).then((function(e){return $s||Gu.set(a,e),e[i]}),Zu)}Wu("Trying to lazily load component <".concat(e.$tagName$,'> with style mode "').concat(t.$modeName$,'", but it does not exist.'))},Ku=new Map,Yu=[],Ju="undefined"!==typeof window?window:{},Qu=(rl&&Ju.CSS,Ju.document||{head:{}}),ec=Ju.HTMLElement||function(){return(0,s.Z)((function e(){(0,o.Z)(this,e)}))}(),tc={$flags$:0,$resourcesUrl$:"",jmp:function(e){return e()},raf:function(e){return requestAnimationFrame(e)},ael:function(e,t,n,r){return e.addEventListener(t,n,r)},rel:function(e,t,n,r){return e.removeEventListener(t,n,r)},ce:function(e,t){return new CustomEvent(e,t)}},nc=!Qs||!bs||function(){return(Qu.head.attachShadow+"").indexOf("[native")>-1}(),rc=function(){var e=!1;try{Qu.addEventListener("e",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(t){}return e}(),ic=!!il&&function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replaceSync}catch(e){}return!1}(),ac=[],oc=[],sc=[],lc=function(e,t){return function(n){e.push(n),yl||(yl=!0,t&&4&tc.$flags$?fc(hc):tc.raf(hc))}},uc=function(e){for(var t=0;t<e.length;t++)try{e[t](performance.now())}catch(n){Zu(n)}e.length=0},cc=function(e,t){for(var n=0,r=0;n<e.length&&(r=performance.now())<t;)try{e[n++](r)}catch(i){Zu(i)}n===e.length?e.length=0:0!==n&&e.splice(0,n)},hc=function e(){if(ul&&gl++,uc(ac),ul){var t=2===(6&tc.$flags$)?performance.now()+14*Math.ceil(.1*gl):1/0;cc(oc,t),cc(sc,t),oc.length>0&&(sc.push.apply(sc,oc),oc.length=0),(yl=ac.length+oc.length+sc.length>0)?tc.raf(e):gl=0}else uc(oc),(yl=ac.length>0)&&tc.raf(e)},fc=function(e){return function(e){return Promise.resolve(e)}().then(e)},dc=lc(oc,!0),pc=function(){if("undefined"===typeof window)return new Map;if(!Pl){var e=window;e.Ionicons=e.Ionicons||{},Pl=e.Ionicons.map=e.Ionicons.map||new Map}return Pl},mc=function(e){var t=pc().get(e);return t||xl("svg/".concat(e,".svg"))},vc=function(e,t,n,r,i){return n="ios"===(n&&xc(n))?"ios":"md",r&&"ios"===n?e=xc(r):i&&"md"===n?e=xc(i):(e||!t||yc(t)||(e=t),_c(e)&&(e=xc(e))),_c(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null},gc=function(e){return _c(e)&&(e=e.trim(),yc(e))?e:null},yc=function(e){return e.length>0&&/(\/|\.)/.test(e)},_c=function(e){return"string"===typeof e},xc=function(e){return e.toLowerCase()},bc=function e(t){if(1===t.nodeType){if("script"===t.nodeName.toLowerCase())return!1;for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n].name;if(_c(r)&&0===r.toLowerCase().indexOf("on"))return!1}for(var i=0;i<t.childNodes.length;i++)if(!e(t.childNodes[i]))return!1}return!0},wc=new Map,kc=new Map,Ec=function(e,t){var n=kc.get(e);if(!n){if("undefined"===typeof fetch||"undefined"===typeof document)return wc.set(e,""),Promise.resolve();if(function(e){return e.startsWith("data:image/svg+xml")}(e)&&function(e){return-1!==e.indexOf(";utf8,")}(e)){Il||(Il=new DOMParser);var r=Il.parseFromString(e,"text/html").querySelector("svg");return r&&wc.set(e,r.outerHTML),Promise.resolve()}n=fetch(e).then((function(n){if(n.ok)return n.text().then((function(n){n&&!1!==t&&(n=function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.childNodes.length-1;n>=0;n--)"svg"!==t.childNodes[n].nodeName.toLowerCase()&&t.removeChild(t.childNodes[n]);var r=t.firstElementChild;if(r&&"svg"===r.nodeName.toLowerCase()){var i=r.getAttribute("class")||"";if(r.setAttribute("class",(i+" s-ion-icon").trim()),bc(r))return t.innerHTML}return""}(n)),wc.set(e,n||"")}));wc.set(e,"")})),kc.set(e,n)}return n},Sc=Ru(function(e){u(n,e);var t=p(n);function n(){var e;return(0,o.Z)(this,n),(e=t.call(this)).__registerHost(),e.__attachShadow(),e.iconName=null,e.inheritedAttributes={},e.isVisible=!1,e.mode=Tc(),e.lazy=!1,e.sanitize=!0,e}return(0,s.Z)(n,[{key:"componentWillLoad",value:function(){this.inheritedAttributes=function(e){var t={};return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){e.hasAttribute(n)&&(null!==e.getAttribute(n)&&(t[n]=e.getAttribute(n)),e.removeAttribute(n))})),t}(this.el,["aria-label"])}},{key:"connectedCallback",value:function(){var e=this;this.waitUntilVisible(this.el,"50px",(function(){e.isVisible=!0,e.loadIcon()}))}},{key:"disconnectedCallback",value:function(){this.io&&(this.io.disconnect(),this.io=void 0)}},{key:"waitUntilVisible",value:function(e,t,n){var r=this;if(_l&&this.lazy&&"undefined"!==typeof window&&window.IntersectionObserver){var i=this.io=new window.IntersectionObserver((function(e){e[0].isIntersecting&&(i.disconnect(),r.io=void 0,n())}),{rootMargin:t});i.observe(e)}else n()}},{key:"loadIcon",value:function(){var e=this;if(_l&&this.isVisible){var t=function(e){var t=gc(e.src);if(t)return t;if(t=vc(e.name,e.icon,e.mode,e.ios,e.md))return mc(t);if(e.icon){if(t=gc(e.icon))return t;if(t=gc(e.icon[e.mode]))return t}return null}(this);t&&(wc.has(t)?this.svgContent=wc.get(t):Ec(t,this.sanitize).then((function(){return e.svgContent=wc.get(t)})))}this.iconName=vc(this.name,this.icon,this.mode,this.ios,this.md)}},{key:"render",value:function(){var e,t,n=this.flipRtl,r=this.iconName,i=this.inheritedAttributes,a=this.el,o=this.mode||"md",s=!!r&&((r.includes("arrow")||r.includes("chevron"))&&!1!==n),l=n||s;return zl(Dl,Object.assign({role:"img",class:Object.assign(Object.assign((0,Ye.Z)({},o,!0),Cc(this.color)),(e={},(0,Ye.Z)(e,"icon-".concat(this.size),!!this.size),(0,Ye.Z)(e,"flip-rtl",l),(0,Ye.Z)(e,"icon-rtl",l&&(t=a,t&&""!==t.dir?"rtl"===t.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),e))},i),_l&&this.svgContent?zl("div",{class:"icon-inner",innerHTML:this.svgContent}):zl("div",{class:"icon-inner"}))}},{key:"el",get:function(){return this}}],[{key:"assetsDirs",get:function(){return["svg"]}},{key:"watchers",get:function(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}},{key:"style",get:function(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:18px !important}:host(.icon-large){font-size:32px !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}}]),n}(ec),[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Tc=function(){return _l&&"undefined"!==typeof document&&document.documentElement.getAttribute("mode")||"md"},Cc=function(e){return e?(0,Ye.Z)({"ion-color":!0},"ion-color-".concat(e),!0):null};var Mc=function(){if("undefined"!==typeof customElements){["ion-icon"].forEach((function(e){if("ion-icon"===e)customElements.get(e)||customElements.define(e,Sc)}))}},Ac=e.createContext({onIonViewWillEnter:function(){},ionViewWillEnter:function(){},onIonViewDidEnter:function(){},ionViewDidEnter:function(){},onIonViewWillLeave:function(){},ionViewWillLeave:function(){},onIonViewDidLeave:function(){},ionViewDidLeave:function(){}}),Pc=function(){function e(){(0,o.Z)(this,e),this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[]}return(0,s.Z)(e,[{key:"onIonViewWillEnter",value:function(e){if(e.id){var t=this.ionViewWillEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}},{key:"ionViewWillEnter",value:function(){this.ionViewWillEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidEnter",value:function(e){if(e.id){var t=this.ionViewDidEnterCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}},{key:"ionViewDidEnter",value:function(){this.ionViewDidEnterCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewWillLeave",value:function(e){if(e.id){var t=this.ionViewWillLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}},{key:"ionViewWillLeave",value:function(){this.ionViewWillLeaveCallbacks.forEach((function(e){return e()}))}},{key:"onIonViewDidLeave",value:function(e){if(e.id){var t=this.ionViewDidLeaveCallbacks.findIndex((function(t){return t.id===e.id}));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}},{key:"ionViewDidLeave",value:function(){this.ionViewDidLeaveCallbacks.forEach((function(e){return e()})),this.componentCanBeDestroyed()}},{key:"onComponentCanBeDestroyed",value:function(e){this.componentCanBeDestroyedCallback=e}},{key:"componentCanBeDestroyed",value:function(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}}]),e}(),Ic=e.createContext({getIonRedirect:function(){},getIonRoute:function(){},getPageManager:function(){},getStackManager:function(){},goBack:function(e){"undefined"!==typeof window&&("string"===typeof e?window.location.pathname=e:window.history.back())},navigate:function(e){"undefined"!==typeof window&&(window.location.pathname=e)},hasIonicRouter:function(){return!1},routeInfo:void 0,setCurrentTab:function(){},changeTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)},resetTab:function(e,t){"undefined"!==typeof window&&(window.location.pathname=t)}}),zc=function(e){return e.toLowerCase().split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join("")},Lc=function(e){return e.replace(/([A-Z])/g,(function(e){return"-".concat(e[0].toLowerCase())}))},Dc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e instanceof Element){var r=Rc(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((function(n){if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){var r=n.substring(2),i=r[0].toLowerCase()+r.substring(1);Oc(i)||jc(e,i,t[n])}else{e[n]=t[n],"string"===typeof t[n]&&e.setAttribute(Lc(n),t[n])}}))}},Rc=function(e,t,n){var r=t.className||t.class,i=n.className||n.class,a=Nc(e),o=Nc(r?r.split(" "):[]),s=Nc(i?i.split(" "):[]),l=[];return a.forEach((function(e){o.has(e)?(l.push(e),o.delete(e)):s.has(e)||l.push(e)})),o.forEach((function(e){return l.push(e)})),l.join(" ")},Oc=function(e){if("undefined"===typeof document)return!0;var t="on"+function(e){return"doubleclick"===e?"dblclick":e}(e),n=t in document;if(!n){var r=document.createElement("div");r.setAttribute(t,"return;"),n="function"===typeof r[t]}return n},jc=function(e,t,n){var r=e.__events||(e.__events={}),i=r[t];i&&e.removeEventListener(t,i),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},Nc=function(e){var t=new Map;return e.forEach((function(e){return t.set(e,e)})),t},Bc=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach((function(t){!function(e,t){"function"===typeof e?e(t):null!=e&&(e.current=t)}(t,e)}))}},Fc=function(t,n,r,i){void 0!==i&&i();var a=zc(t),l=function(n){u(l,n);var i=p(l);function l(e){var t;return(0,o.Z)(this,l),(t=i.call(this,e)).setComponentElRef=function(e){t.componentEl=e},t}return(0,s.Z)(l,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(e){Dc(this.componentEl,this.props,e)}},{key:"render",value:function(){var n=this.props,i=n.children,a=n.forwardedRef,o=n.style,s=(n.className,n.ref,ho(n,["children","forwardedRef","style","className","ref"])),l=Object.keys(s).reduce((function(e,t){var n=s[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){var r=t.substring(2).toLowerCase();"undefined"!==typeof document&&Oc(r)&&(e[t]=n)}else{var i=typeof n;"string"!==i&&"boolean"!==i&&"number"!==i||(e[Lc(t)]=n)}return e}),{});r&&(l=r(this.props,l));var u=Object.assign(Object.assign({},l),{ref:Bc(a,this.setComponentElRef),style:o});return(0,e.createElement)(t,u,i)}}],[{key:"displayName",get:function(){return a}}]),l}(e.Component);return n&&(l.contextType=n),function(t,n){var r=function(n,r){return e.createElement(t,Object.assign({},n,{forwardedRef:r}))};return r.displayName=n,e.forwardRef(r)}(l,a)},$c=function(t,n){var r=function(n,r){return e.createElement(t,Object.assign({},n,{forwardedRef:r}))};return r.displayName=n,e.forwardRef(r)},Vc=(e.createContext({addOverlay:function(){},removeOverlay:function(){}}),Fc("ion-tab-button",void 0,void 0,Ko)),Uc=Fc("ion-tab-bar",void 0,void 0,Fo),Zc=Fc("ion-router-outlet",void 0,void 0,zo),Hc=Fc("ion-icon",void 0,void 0,Mc),Wc=e.createContext({registerIonPage:function(){},isInOutlet:function(){return!1}}),qc=function(t){u(r,t);var n=p(r);function r(t){var i;return(0,o.Z)(this,r),(i=n.call(this,t)).ionPageElementRef=e.createRef(),i.stableMergedRefs=Bc(i.ionPageElementRef,i.props.forwardedRef),i}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionPageElementRef.current.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var t=this,n=this.props,r=n.className,i=n.children,a=(n.routeInfo,n.forwardedRef,ho(n,["className","children","routeInfo","forwardedRef"]));return e.createElement(Ac.Consumer,null,(function(n){return t.ionLifeCycleContext=n,e.createElement("div",Object.assign({className:r?"".concat(r," ion-page"):"ion-page",ref:t.stableMergedRefs},a),i)}))}}],[{key:"contextType",get:function(){return Wc}}]),r}(e.PureComponent),Gc=function(t){u(r,t);var n=p(r);function r(e){return(0,o.Z)(this,r),n.call(this,e)}return(0,s.Z)(r,[{key:"render",value:function(){var t=this.props,n=t.className,r=t.children,i=t.forwardedRef,a=ho(t,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?e.createElement(qc,Object.assign({className:n?"".concat(n):"",routeInfo:this.context.routeInfo,forwardedRef:i},a),r):e.createElement("div",Object.assign({className:n?"ion-page ".concat(n):"ion-page",ref:i},a),r)}}],[{key:"displayName",get:function(){return"IonPage"}},{key:"contextType",get:function(){return Ic}}]),r}(e.Component),Xc=($c(Gc,"IonPage"),Fc("ion-nav",void 0,void 0,Ao)),Kc=($c((function(t){t.children;var n=t.forwardedRef,r=ho(t,["children","forwardedRef"]),o=(0,e.useState)([]),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=function(e){return u((function(t){return[].concat((0,a.Z)(t),[e])}))},h=function(e){return u((function(t){return t.filter((function(t){return t!==e}))}))},f=(0,e.useMemo)((function(){return function(e,t){var n=new WeakMap,r=function(){var t=(0,hr.Z)((0,cr.Z)().mark((function t(r,i,o,s){var l,u,c,h;return(0,cr.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=document.createElement("div"),s&&(l=u.classList).add.apply(l,(0,a.Z)(s)),r.appendChild(u),c=i(o),h=(0,Ge.createPortal)(c,u),n.set(u,h),e(h),t.abrupt("return",Promise.resolve(u));case 8:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}();return{attachViewToDom:r,removeViewFromDom:function(e,r){var i=n.get(r);return i&&t(i),r.remove(),Promise.resolve()}}}(c,h)}),[]);return e.createElement(Xc,Object.assign({delegate:f,ref:n},r),l)}),"IonNav"),e.createContext({activeTab:void 0,selectTab:function(){return!1}}),"undefined"!==typeof HTMLElement?HTMLElement:function(){return(0,s.Z)((function e(){(0,o.Z)(this,e)}))}()),Yc=function(t){u(r,t);var n=p(r);function r(e){var t;return(0,o.Z)(this,r),(t=n.call(this,e)).outletIsReady=!1,t}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.ionRouterOutlet&&(this.outletIsReady||(0,uo.c)(this.ionRouterOutlet,(function(){e.outletIsReady=!0,e.context.registerIonPage(e.ionRouterOutlet,e.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"componentWillUnmount",value:function(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler.bind(this)),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler.bind(this)))}},{key:"ionViewWillEnterHandler",value:function(){this.ionLifeCycleContext.ionViewWillEnter()}},{key:"ionViewDidEnterHandler",value:function(){this.ionLifeCycleContext.ionViewDidEnter()}},{key:"ionViewWillLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewWillLeave()}},{key:"ionViewDidLeaveHandler",value:function(){this.ionLifeCycleContext.ionViewDidLeave()}},{key:"render",value:function(){var t=this,n=this.props,r=n.StackManager,i=n.children,a=n.routeInfo,o=ho(n,["StackManager","children","routeInfo"]);return e.createElement(Ac.Consumer,null,(function(n){return t.ionLifeCycleContext=n,e.createElement(r,{routeInfo:a},e.createElement(Zc,Object.assign({setRef:function(e){return t.ionRouterOutlet=e}},o),i))}))}}],[{key:"contextType",get:function(){return Wc}}]),r}(e.Component),Jc=function(t){u(r,t);var n=p(r);function r(e){return(0,o.Z)(this,r),n.call(this,e)}return(0,s.Z)(r,[{key:"render",value:function(){var t=this.context.getStackManager(),n=this.props,r=n.children,i=n.forwardedRef,a=ho(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?a.ionPage?e.createElement(Yc,Object.assign({StackManager:t,routeInfo:this.context.routeInfo},a),r):e.createElement(t,{routeInfo:this.context.routeInfo},e.createElement(Zc,Object.assign({},a,{forwardedRef:i}),r)):e.createElement(Zc,Object.assign({ref:i},this.props),this.props.children)}}],[{key:"contextType",get:function(){return Ic}}]),r}(e.Component),Qc=($c(Jc,"IonRouterOutlet"),function(){return function(t){u(r,t);var n=p(r);function r(e){var t;return(0,o.Z)(this,r),(t=n.call(this,e)).handleIonTabButtonClick=t.handleIonTabButtonClick.bind(d(t)),t}return(0,s.Z)(r,[{key:"handleIonTabButtonClick",value:function(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}},{key:"render",value:function(){var t=ho(this.props,["onClick"]);return e.createElement(Vc,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},t))}}],[{key:"displayName",get:function(){return"IonTabButton"}}]),r}(e.Component)}()),eh=function(t){u(r,t);var n=p(r);function r(t){var i;(0,o.Z)(this,r),(i=n.call(this,t)).setActiveTabOnContext=function(e){};var a={};return e.Children.forEach(t.children,(function(e){var n,r,i,o;null!=e&&"object"===typeof e&&e.props&&(e.type===Qc||e.type.isTabButton)&&(a[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.href===(null===(n=t.routeInfo)||void 0===n?void 0:n.pathname)?null===(r=t.routeInfo)||void 0===r?void 0:r.routeOptions:void 0,currentRouteOptions:e.props.href===(null===(i=t.routeInfo)||void 0===i?void 0:i.pathname)?null===(o=t.routeInfo)||void 0===o?void 0:o.routeOptions:void 0})})),i.state={tabs:a},i.onTabButtonClick=i.onTabButtonClick.bind(d(i)),i.renderTabButton=i.renderTabButton.bind(d(i)),i.setActiveTabOnContext=i.setActiveTabOnContext.bind(d(i)),i.selectTab=i.selectTab.bind(d(i)),i}return(0,s.Z)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.state.tabs,n=Object.keys(t).find((function(n){var r=t[n].originalHref;return e.props.routeInfo.pathname.startsWith(r)}));n&&this.setState({activeTab:n})}},{key:"componentDidUpdate",value:function(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}},{key:"selectTab",value:function(e){var t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}},{key:"onTabButtonClick",value:function(e,t){var n=this.state.tabs[e.detail.tab],r=n.originalHref,i=e.detail.href,a=this.state.activeTab;t&&t(e),a===e.detail.tab?r!==i&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,i,e.detail.routeOptions))}},{key:"renderTabButton",value:function(t){var n=this;return function(r){var i,a;if(null!=r&&r.props&&(r.type===Qc||r.type.isTabButton)){var o=r.props.tab===t?null===(i=n.props.routeInfo)||void 0===i?void 0:i.pathname:n.state.tabs[r.props.tab].currentHref,s=r.props.tab===t?null===(a=n.props.routeInfo)||void 0===a?void 0:a.routeOptions:n.state.tabs[r.props.tab].currentRouteOptions;return e.cloneElement(r,{href:o,routeOptions:s,onClick:function(e){return n.onTabButtonClick(e,r.props.onClick)}})}return null}}},{key:"render",value:function(){var t=this.state.activeTab;return e.createElement(Uc,Object.assign({},this.props,{selectedTab:t}),e.Children.map(this.props.children,this.renderTabButton(t)))}}],[{key:"getDerivedStateFromProps",value:function(t,n){var r,i,a,o=Object.assign({},n.tabs),s=Object.keys(n.tabs).find((function(e){var r=n.tabs[e].originalHref;return t.routeInfo.pathname.startsWith(r)}));e.Children.forEach(t.children,(function(e){if(null!=e&&"object"===typeof e&&e.props&&(e.type===Qc||e.type.isTabButton)){var t=o[e.props.tab];t&&t.originalHref===e.props.href||(o[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));var l=n.activeTab;if(s&&l){var u=n.tabs[l].currentHref,c=n.tabs[l].currentRouteOptions;s===l&&u===(null===(r=t.routeInfo)||void 0===r?void 0:r.pathname)&&c===(null===(i=t.routeInfo)||void 0===i?void 0:i.routeOptions)||(o[s]={originalHref:o[s].originalHref,currentHref:t.routeInfo.pathname+(t.routeInfo.search||""),originalRouteOptions:o[s].originalRouteOptions,currentRouteOptions:null===(a=t.routeInfo)||void 0===a?void 0:a.routeOptions},"pop"===t.routeInfo.routeAction&&s!==l&&(o[l]={originalHref:o[l].originalHref,currentHref:o[l].originalHref,originalRouteOptions:o[l].originalRouteOptions,currentRouteOptions:o[l].currentRouteOptions}))}return s&&t.onSetCurrentTab(s,t.routeInfo),{activeTab:s,tabs:o}}},{key:"contextType",get:function(){return Ic}}]),r}(e.PureComponent),th=e.memo((function(t){var n=t.forwardedRef,r=ho(t,["forwardedRef"]),i=(0,e.useContext)(Ic);return e.createElement(eh,Object.assign({ref:n},r,{routeInfo:r.routeInfo||i.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:i.setCurrentTab}),r.children)})),nh=($c(th,"IonTabBar"),function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.call(this)}return(0,s.Z)(n)}(Kc));"undefined"!==typeof window&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",nh));var rh=function(t){u(r,t);var n=p(r);function r(e){var t;return(0,o.Z)(this,r),(t=n.call(this,e)).props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.'),t}return(0,s.Z)(r,[{key:"render",value:function(){var t,n,r,i=this.props,a=i.icon,o=i.ios,s=i.md,l=i.mode,u=ho(i,["icon","ios","md","mode"]),c=function(){if("undefined"!==typeof window){var e=window.Ionic;if(e&&e.config)return e.config}return null}(),h=l||(null===c||void 0===c?void 0:c.get("mode"));return r=o||s?"ios"===h?null!==(t=null!==o&&void 0!==o?o:s)&&void 0!==t?t:a:null!==(n=null!==s&&void 0!==s?s:o)&&void 0!==n?n:a:a,e.createElement(Hc,Object.assign({ref:this.props.forwardedRef,icon:r},u),this.props.children)}}],[{key:"contextType",get:function(){return Ic}}]),r}(e.PureComponent),ih=$c(rh,"IonIcon"),ah=(e.PureComponent,e.PureComponent,e.createContext({routeInfo:void 0,push:function(){throw new Error("An Ionic Router is required for IonRouterContext")},back:function(){throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:function(){throw new Error("An Ionic Router is required for IonRouterContext")}}));e.PureComponent;var oh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(var i in t)t.hasOwnProperty(i)&&!r.includes(i)&&t[i]!==n[i]&&e[i](t[i]);var a=t.from;a&&a!==n.from&&(Array.isArray(a)?a:[a]).forEach((function(t){return e.from(t.property,t.value)}));var o=t.to;o&&o!==n.to&&(Array.isArray(o)?o:[o]).forEach((function(t){return e.to(t.property,t.value)}));var s=t.fromTo;s&&s!==n.fromTo&&(Array.isArray(s)?s:[s]).forEach((function(t){return e.fromTo(t.property,t.fromValue,t.toValue)}));var l=t.onFinish;l&&l!==n.onFinish&&(Array.isArray(l)?l:[l]).forEach((function(t){return e.onFinish(t.callback,t.opts)}))},sh=function(e){var t,n,r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o.progressStart,u=o.progressStep,c=o.progressEnd;!l||(null===(t=s.progressStart)||void 0===t?void 0:t.forceLinearEasing)===(null===l||void 0===l?void 0:l.forceLinearEasing)&&(null===(n=s.progressStart)||void 0===n?void 0:n.step)===(null===l||void 0===l?void 0:l.step)||e.progressStart(l.forceLinearEasing,l.step),u&&(null===(r=s.progressStep)||void 0===r?void 0:r.step)!==(null===u||void 0===u?void 0:u.step)&&e.progressStep(u.step),!c||(null===(i=s.progressEnd)||void 0===i?void 0:i.playTo)===(null===c||void 0===c?void 0:c.playTo)&&(null===(a=s.progressEnd)||void 0===a?void 0:a.step)===(null===c||void 0===c?void 0:c.step)&&(null===s||void 0===s?void 0:s.dur)===(null===c||void 0===c?void 0:c.dur)||e.progressEnd(c.playTo,c.step,c.dur)},lh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!n.play&&t.play&&e.play(),!n.pause&&t.pause&&e.pause(),!n.stop&&t.stop&&e.stop(),!n.destroy&&t.destroy&&e.destroy()};e.Component,e.PureComponent;var uh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' d='M256 112v288M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",ch="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M240 424v-96c116.4 0 159.39 33.76 208 96 0-119.23-39.57-240-208-240V88L64 256z' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",hh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",fh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 184l144 144 144-144' class='ionicon-fill-none'/></svg>",dh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 328l144-144 144 144' class='ionicon-fill-none'/></svg>",ph="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M384 224v184a40 40 0 01-40 40H104a40 40 0 01-40-40V168a40 40 0 0140-40h167.48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M459.94 53.25a16.06 16.06 0 00-23.22-.56L424.35 65a8 8 0 000 11.31l11.34 11.32a8 8 0 0011.34 0l12.06-12c6.1-6.09 6.67-16.01.85-22.38zM399.34 90L218.82 270.2a9 9 0 00-2.31 3.93L208.16 299a3.91 3.91 0 004.86 4.86l24.85-8.35a9 9 0 003.93-2.31L422 112.66a9 9 0 000-12.66l-9.95-10a9 9 0 00-12.71 0z'/></svg>",mh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M63.998 86.004l21.998-21.998L448 426.01l-21.998 21.998zM259.34 192.09l60.57 60.57a64.07 64.07 0 00-60.57-60.57zM252.66 319.91l-60.57-60.57a64.07 64.07 0 0060.57 60.57z'/><path d='M256 352a96 96 0 01-92.6-121.34l-69.07-69.08C66.12 187.42 39.24 221.14 16 256c26.42 44 62.56 89.24 100.2 115.18C159.38 400.92 206.33 416 255.76 416A233.47 233.47 0 00335 402.2l-53.61-53.6A95.84 95.84 0 01256 352zM256 160a96 96 0 0192.6 121.34L419.26 352c29.15-26.25 56.07-61.56 76.74-96-26.38-43.43-62.9-88.56-101.18-114.82C351.1 111.2 304.31 96 255.76 96a222.92 222.92 0 00-78.21 14.29l53.11 53.11A95.84 95.84 0 01256 160z'/></svg>",vh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M420 192h-68v-80a96 96 0 10-192 0v80H92a12 12 0 00-12 12v280a12 12 0 0012 12h328a12 12 0 0012-12V204a12 12 0 00-12-12zm-106 0H198v-80.75a58 58 0 11116 0z'/></svg>",gh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M464 80H48a16 16 0 00-16 16v320a16 16 0 0016 16h416a16 16 0 0016-16V96a16 16 0 00-16-16zM265.82 284.63a16 16 0 01-19.64 0L89.55 162.81l19.64-25.26L256 251.73l146.81-114.18 19.64 25.26z'/></svg>",yh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M64 384h384v-42.67H64zm0-106.67h384v-42.66H64zM64 128v42.67h384V128z'/></svg>",_h="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-linejoin='round' d='M400 256H112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",xh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z'/></svg>",bh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M296 64h-80a7.91 7.91 0 00-8 8v24h96V72a7.91 7.91 0 00-8-8z' class='ionicon-fill-none'/><path d='M292 64h-72a4 4 0 00-4 4v28h80V68a4 4 0 00-4-4z' class='ionicon-fill-none'/><path d='M447.55 96H336V48a16 16 0 00-16-16H192a16 16 0 00-16 16v48H64.45L64 136h33l20.09 314A32 32 0 00149 480h214a32 32 0 0031.93-29.95L415 136h33zM176 416l-9-256h33l9 256zm96 0h-32V160h32zm24-320h-80V68a4 4 0 014-4h72a4 4 0 014 4zm40 320h-33l9-256h33z'/></svg>",wh="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M85.57 446.25h340.86a32 32 0 0028.17-47.17L284.18 82.58c-12.09-22.44-44.27-22.44-56.36 0L57.4 399.08a32 32 0 0028.17 47.17z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M250.26 195.39l5.74 122 5.73-121.95a5.74 5.74 0 00-5.79-6h0a5.74 5.74 0 00-5.68 5.95z' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path d='M256 397.25a20 20 0 1120-20 20 20 0 01-20 20z'/></svg>",kh=n(184),Eh=function(){var t=mt(),n=ot((function(e){return e.user})),r=ot((function(e){return e.categories})),a=ot((function(e){return e.cart})),o=(0,e.useState)(hh),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,e.useState)(hh),h=(0,i.Z)(c,2),f=h[0],d=h[1],p=pe(),m=ve(),v=p.pathname;return(0,e.useEffect)((function(){null!==n&&n.blocked&&(t(ea()),to.error("You have been blocked from accessing this website!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}))}),[n]),(0,e.useEffect)((function(){document.getElementById("content").classList.remove("left-[0%]"),document.body.classList.remove("overflow-hidden"),u(hh);var e=document.getElementById("profile");e&&e.classList.add("invisible"),d(hh);var t=document.getElementById("categories");t&&t.classList.add("hidden")}),[v,p.search]),(0,kh.jsx)("div",{id:"navbar",className:"w-full bg-zinc-950",children:(0,kh.jsxs)("nav",{className:"navbar",children:[(0,kh.jsxs)("div",{className:"nav-header",children:[(0,kh.jsx)("p",{className:"flex gap-4 items-center",children:(0,kh.jsx)(Ue,{to:"/",className:"focus:outline-none",children:(0,kh.jsx)("img",{src:lo,alt:"...",className:"w-24 md:w-28 h-full"})})}),(0,kh.jsx)("div",{}),(0,kh.jsx)(ih,{icon:yh,className:"text-4xl cursor-pointer md:hidden duration-200 text-white",onClick:function(e){return function(e){var t=document.getElementById("content");e.target.icon=e.target.icon===yh?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 145.49L366.51 112 256 222.51 145.49 112 112 145.49 222.51 256 112 366.51 145.49 400 256 289.49 366.51 400 400 366.51 289.49 256 400 145.49z'/></svg>":yh,t.classList.toggle("left-[0%]"),document.body.classList.toggle("overflow-hidden")}(e)}})]}),(0,kh.jsx)("div",{id:"content",className:"nav-content left-[-100%] ",children:(0,kh.jsxs)("ul",{className:"navLinks md:relative",children:[(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{className:"focus:outline-none focus:text-[#2e271f]",to:"/",children:"Home"})}),(0,kh.jsx)("li",{className:"",children:(0,kh.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,kh.jsxs)("div",{className:"flex items-center gap-3",children:[(0,kh.jsxs)("svg",{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 40",height:28,width:28,enableBackground:"new 0 0 40 40",fill:"#fff",children:[(0,kh.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,kh.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,kh.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M20.01,36.5c-0.277,0-0.537-0.137-0.693-0.368L9.468,21.529c-1.171-1.861-1.79-3.993-1.79-6.162 C7.678,8.824,13.206,3.5,20,3.5c6.795,0,12.322,5.324,12.322,11.867c0,2.164-0.612,4.284-1.77,6.129l-9.851,14.636 C20.547,36.363,20.287,36.5,20.01,36.5L20.01,36.5z M20,5.17c-5.873,0-10.652,4.574-10.652,10.197c0,1.854,0.525,3.669,1.52,5.251 l9.14,13.55l9.146-13.581c0.981-1.566,1.499-3.371,1.499-5.22C30.652,9.744,25.873,5.17,20,5.17L20,5.17z"}),(0,kh.jsx)("path",{display:"inline",d:"M20,20.857c-3.159,0-5.728-2.482-5.728-5.535c0-3.051,2.569-5.534,5.728-5.534s5.729,2.483,5.729,5.534 C25.729,18.375,23.158,20.857,20,20.857L20,20.857z M20,11.458c-2.237,0-4.057,1.734-4.057,3.864c0,2.13,1.82,3.865,4.057,3.865 s4.058-1.734,4.058-3.865C24.058,13.192,22.236,11.458,20,11.458L20,11.458z"})]}),(0,kh.jsx)("path",{display:"none",d:"M36.705,34.289L26.059,23.615c3.918-4.69,3.688-11.708-0.707-16.114C23.1,5.243,20.104,4,16.919,4 S10.74,5.243,8.488,7.501c-4.647,4.66-4.647,12.241,0,16.899c2.253,2.257,5.248,3.5,8.431,3.5c2.866,0,5.573-1.015,7.728-2.86 l10.639,10.665C35.479,35.902,35.738,36,35.994,36s0.514-0.098,0.709-0.293C37.096,35.316,37.097,34.68,36.705,34.289z M9.766,23.126c-3.945-3.958-3.945-10.395,0-14.351c1.912-1.914,4.452-2.97,7.153-2.97s5.243,1.056,7.153,2.97 c3.946,3.956,3.946,10.394,0,14.351c-1.91,1.914-4.452,2.969-7.153,2.969S11.678,25.04,9.766,23.126z"}),(0,kh.jsx)("path",{display:"none",d:"M25.38,34.848c-0.066,0-0.136-0.009-0.206-0.024l-10.498-2.561l-10.61,2.561 c-0.069,0.016-0.139,0.024-0.205,0.024c-0.191,0-0.38-0.064-0.532-0.184C3.12,34.5,3,34.252,3,33.986V8.635 c0-0.397,0.27-0.741,0.657-0.836l10.76-2.623l0.407,0.003l10.504,2.558l10.607-2.561c0.065-0.016,0.135-0.023,0.203-0.023 c0.195,0,0.38,0.063,0.533,0.183C36.881,5.499,37,5.746,37,6.012v25.352c0,0.397-0.27,0.741-0.656,0.837l-10.759,2.622 C25.516,34.839,25.446,34.848,25.38,34.848L25.38,34.848z M15.481,30.688l9.039,2.203V9.311l-9.039-2.203V30.688z M26.24,9.311 v23.58l9.039-2.202V7.108L26.24,9.311z M4.721,9.311v23.58l9.039-2.202V7.108L4.721,9.311z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M9.708,35C7.112,35,5,32.893,5,30.303c0-2.592,2.112-4.699,4.708-4.699c2.595,0,4.707,2.107,4.707,4.699 C14.415,32.893,12.303,35,9.708,35L9.708,35z M9.708,27.445c-1.578,0-2.863,1.281-2.863,2.857c0,1.574,1.285,2.855,2.863,2.855 c1.578,0,2.861-1.281,2.861-2.855C12.568,28.727,11.285,27.445,9.708,27.445L9.708,27.445z"}),(0,kh.jsx)("path",{display:"inline",d:"M24.574,35c-0.621,0-1.125-0.505-1.125-1.126c0-9.552-7.771-17.324-17.323-17.324 C5.505,16.55,5,16.045,5,15.425s0.505-1.126,1.126-1.126c10.792,0,19.573,8.781,19.573,19.575C25.699,34.495,25.193,35,24.574,35 L24.574,35z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.916,35c-0.597,0-1.082-0.486-1.082-1.084c0-14.75-12-26.751-26.751-26.751 C5.486,7.165,5,6.68,5,6.083C5,5.486,5.486,5,6.083,5C22.027,5,35,17.972,35,33.916C35,34.514,34.514,35,33.916,35L33.916,35z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",fillRule:"evenodd",clipRule:"evenodd",d:"M20,29.616c-6.911,0-13.412-3.681-17-9.615 c3.588-5.935,10.089-9.617,17-9.617c6.91,0,13.412,3.682,17,9.617C33.412,25.936,26.91,29.616,20,29.616L20,29.616z M19.998,12.254 c-5.817,0-11.309,2.848-14.687,7.618l-0.088,0.125l0.088,0.124c3.378,4.77,8.87,7.618,14.687,7.618 c5.82,0,11.311-2.849,14.687-7.618l0.089-0.124l-0.089-0.125C31.309,15.103,25.818,12.254,19.998,12.254L19.998,12.254z"}),(0,kh.jsx)("path",{display:"inline",fillRule:"evenodd",clipRule:"evenodd",d:"M19.987,13.521c-3.574,0-6.478,2.9-6.478,6.479 c0,3.579,2.904,6.478,6.478,6.478c3.581,0,6.478-2.898,6.478-6.478C26.465,16.42,23.568,13.521,19.987,13.521z M19.987,24.857 c-2.68,0-4.858-2.175-4.858-4.858s2.178-4.859,4.858-4.859c2.686,0,4.858,2.175,4.858,4.859S22.673,24.857,19.987,24.857z"})]}),(0,kh.jsx)("path",{display:"none",d:"M7.336,35.5c-0.399,0-0.725-0.325-0.725-0.726v-7.599c0-0.4,0.326-0.725,0.725-0.725h3.181v-6.336 c0-0.342,0.276-0.619,0.619-0.619h8.247v-5.949h-3.181c-0.398,0-0.725-0.325-0.725-0.726V5.223c0-0.399,0.326-0.723,0.725-0.723 h7.598c0.398,0,0.725,0.324,0.725,0.723v7.599c0,0.401-0.326,0.726-0.725,0.726H20.62v5.949h8.245c0.341,0,0.618,0.277,0.618,0.619 v6.336h3.182c0.397,0,0.724,0.324,0.724,0.725v7.599c0,0.399-0.326,0.725-0.724,0.725h-7.599c-0.4,0-0.726-0.325-0.726-0.725v-7.599 c0-0.4,0.325-0.725,0.726-0.725h3.179v-5.717H11.754v5.717h3.18c0.399,0,0.725,0.324,0.725,0.725v7.599 c0,0.4-0.325,0.726-0.725,0.726H7.336z M8.061,34.051h6.149V27.9H8.061V34.051z M25.79,34.051h6.149V27.9H25.79V34.051z M16.927,12.099h6.146V5.949h-6.146V12.099z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M11.018,35.01c-0.402,0-0.736-0.314-0.759-0.717L8.879,9.946H5.75c-0.419,0-0.76-0.342-0.76-0.76 c0-0.419,0.341-0.761,0.76-0.761h3.59L9.495,8.45L9.6,8.426h5.171V5.75c0-0.419,0.34-0.76,0.76-0.76h8.939 c0.419,0,0.76,0.341,0.76,0.76v2.676h5.174l0.175,0.028l0.118-0.028h3.554c0.419,0,0.76,0.342,0.76,0.761 c0,0.418-0.341,0.76-0.76,0.76h-3.128l-1.36,24.346c-0.023,0.402-0.356,0.718-0.759,0.718H11.018z M11.735,33.49h16.549L29.6,9.946 H10.4L11.735,33.49z M16.29,8.426h7.42V6.51h-7.42V8.426z"}),(0,kh.jsx)("path",{display:"inline",d:"M14.302,12.201c-0.249,0.012-0.435,0.102-0.57,0.252c-0.135,0.152-0.203,0.348-0.192,0.551l0.998,17.608 c0.024,0.401,0.357,0.716,0.759,0.716v0.19l0.045-0.19c0.417-0.024,0.737-0.385,0.715-0.804l-0.999-17.606 C15.034,12.516,14.702,12.201,14.302,12.201L14.302,12.201z"}),(0,kh.jsx)("path",{display:"inline",d:"M25.709,12.202c-0.445,0-0.776,0.314-0.8,0.716l-1,17.606c-0.022,0.419,0.298,0.779,0.717,0.804 l0.044,0.19v-0.19c0.402,0,0.735-0.314,0.757-0.716l1.001-17.608c0.011-0.203-0.058-0.398-0.192-0.551 c-0.136-0.15-0.321-0.24-0.523-0.251C25.711,12.202,25.71,12.202,25.709,12.202L25.709,12.202z"}),(0,kh.jsx)("path",{display:"inline",d:"M20,12.201c-0.419,0-0.76,0.341-0.76,0.76v17.607c0,0.419,0.341,0.76,0.76,0.76s0.76-0.341,0.76-0.76 V12.961C20.76,12.542,20.419,12.201,20,12.201L20,12.201z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M8.236,15.765C5.901,15.765,4,17.665,4,20c0,2.336,1.901,4.234,4.236,4.234 c2.336,0,4.235-1.898,4.235-4.234C12.472,17.665,10.572,15.765,8.236,15.765z M8.236,22.824c-1.557,0-2.823-1.268-2.823-2.824 c0-1.557,1.267-2.824,2.823-2.824c1.558,0,2.822,1.267,2.822,2.824C11.059,21.557,9.794,22.824,8.236,22.824z"}),(0,kh.jsx)("path",{display:"inline",d:"M20,15.765c-2.334,0-4.236,1.899-4.236,4.235c0,2.336,1.902,4.234,4.236,4.234 c2.337,0,4.236-1.898,4.236-4.234C24.236,17.665,22.337,15.765,20,15.765z M20,22.824c-1.557,0-2.822-1.268-2.822-2.824 c0-1.557,1.266-2.824,2.822-2.824c1.559,0,2.822,1.267,2.822,2.824C22.822,21.557,21.559,22.824,20,22.824z"}),(0,kh.jsx)("path",{display:"inline",d:"M31.764,15.765c-2.334,0-4.235,1.899-4.235,4.235c0,2.336,1.901,4.234,4.235,4.234 C34.101,24.234,36,22.336,36,20C36,17.665,34.101,15.765,31.764,15.765z M31.764,22.824c-1.556,0-2.822-1.268-2.822-2.824 c0-1.557,1.267-2.824,2.822-2.824c1.559,0,2.823,1.267,2.823,2.824C34.587,21.557,33.322,22.824,31.764,22.824z"})]}),(0,kh.jsx)("path",{display:"none",d:"M33.125,19.125H8.98L20.841,7.5c0.345-0.338,0.351-0.892,0.013-1.237s-0.892-0.35-1.237-0.012L6.262,19.339 C6.095,19.503,6,19.729,6,19.965c0,0.005,0,0.011,0,0.017C6,19.989,6,19.994,6,20c0,0.319,0.171,0.598,0.427,0.751L19.69,33.75 c0.17,0.167,0.392,0.25,0.613,0.25c0.227,0,0.453-0.088,0.625-0.262c0.338-0.346,0.332-0.9-0.013-1.238L9.055,20.875h24.07 C33.607,20.875,34,20.483,34,20S33.607,19.125,33.125,19.125z"}),(0,kh.jsx)("path",{display:"none",d:"M34,20c0-0.32-0.172-0.599-0.428-0.751L20.31,6.25c-0.345-0.338-0.899-0.333-1.237,0.012 S18.738,7.161,19.084,7.5l11.861,11.625H6.875C6.393,19.125,6,19.517,6,20s0.393,0.875,0.875,0.875H31.02L19.158,32.5 c-0.344,0.339-0.35,0.893-0.012,1.238C19.318,33.912,19.545,34,19.771,34c0.221,0,0.442-0.083,0.612-0.25l13.353-13.089 C33.904,20.497,34,20.271,34,20.035c0-0.005-0.001-0.011-0.001-0.017C33.999,20.011,34,20.006,34,20z"}),(0,kh.jsx)("path",{display:"none",d:"M33.75,19.616L20.66,6.262C20.496,6.095,20.271,6,20.037,6c-0.007,0-0.014,0.001-0.02,0.001S20.006,6,20,6 c-0.32,0-0.598,0.172-0.751,0.428L6.25,19.69c-0.338,0.345-0.332,0.899,0.013,1.237c0.171,0.167,0.391,0.25,0.612,0.25 c0.227-0.001,0.454-0.088,0.625-0.263l11.625-11.86v24.07C19.125,33.607,19.518,34,20,34c0.483,0,0.875-0.393,0.875-0.875V8.981 L32.5,20.841c0.338,0.345,0.893,0.35,1.237,0.013C34.082,20.515,34.088,19.96,33.75,19.616z"}),(0,kh.jsx)("path",{display:"none",d:"M33.737,19.071c-0.345-0.337-0.899-0.332-1.237,0.014l-11.625,11.86V6.875C20.875,6.392,20.483,6,20,6 c-0.482,0-0.875,0.392-0.875,0.875V31.02L7.5,19.159c-0.338-0.345-0.892-0.351-1.237-0.013c-0.345,0.338-0.351,0.892-0.013,1.237 l13.09,13.354C19.504,33.905,19.729,34,19.965,34c0.005,0,0.012-0.001,0.018-0.001C19.989,33.999,19.994,34,20,34 c0.32,0,0.599-0.172,0.752-0.428L33.75,20.31C34.088,19.965,34.082,19.41,33.737,19.071z"}),(0,kh.jsx)("path",{display:"none",d:"M26.714,34c-0.222,0-0.442-0.083-0.612-0.251l-13.429-13.16c-0.167-0.164-0.262-0.39-0.262-0.624 c0-0.236,0.095-0.462,0.262-0.626L26.027,6.251c0.344-0.339,0.898-0.334,1.237,0.011c0.338,0.346,0.331,0.899-0.013,1.237 L14.536,19.965l12.79,12.536c0.345,0.337,0.351,0.892,0.013,1.237C27.168,33.912,26.939,34,26.714,34z"}),(0,kh.jsx)("path",{display:"none",d:"M13.36,34c-0.225,0-0.453-0.088-0.624-0.262c-0.339-0.346-0.333-0.899,0.01-1.237l12.717-12.466 L12.673,7.499c-0.345-0.339-0.35-0.893-0.013-1.237c0.34-0.344,0.894-0.35,1.238-0.012l13.429,13.161 c0.167,0.164,0.262,0.39,0.262,0.624c0,0.236-0.094,0.461-0.262,0.625L13.974,33.75C13.803,33.917,13.581,34,13.36,34z"}),(0,kh.jsx)("path",{display:"none",d:"M5.938,28.131c-0.236,0-0.474-0.089-0.657-0.269c-0.368-0.362-0.375-0.956-0.012-1.325L19.37,12.149 c0.176-0.179,0.417-0.28,0.669-0.28s0.493,0.101,0.669,0.28l14.023,14.308c0.363,0.369,0.356,0.963-0.012,1.326 c-0.37,0.361-0.965,0.356-1.326-0.014L20.039,14.146L6.608,27.85C6.423,28.037,6.182,28.13,5.938,28.131z"}),(0,kh.jsx)("path",{display:"none",d:"M19.962,28.131c-0.253,0-0.493-0.102-0.67-0.281L5.27,13.542c-0.364-0.37-0.357-0.963,0.011-1.326 c0.372-0.362,0.965-0.356,1.326,0.013l13.354,13.625l13.433-13.704c0.361-0.37,0.954-0.376,1.326-0.015 c0.368,0.363,0.375,0.957,0.013,1.327L20.632,27.85C20.454,28.029,20.214,28.131,19.962,28.131z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M6.72,34C6.323,34,6,33.678,6,33.281v-5.811c0-0.396,0.323-0.721,0.72-0.721h5.81 c0.397,0,0.72,0.324,0.72,0.721v5.811c0,0.396-0.323,0.719-0.72,0.719H6.72z M7.439,32.561h4.371v-4.371H7.439V32.561z"}),(0,kh.jsx)("path",{display:"inline",d:"M17.095,34c-0.396,0-0.72-0.322-0.72-0.719v-5.811c0-0.396,0.323-0.721,0.72-0.721h5.811 c0.396,0,0.72,0.324,0.72,0.721v5.811c0,0.396-0.323,0.719-0.72,0.719H17.095z M17.815,32.561h4.371v-4.371h-4.371V32.561z"}),(0,kh.jsx)("path",{display:"inline",d:"M27.471,34c-0.397,0-0.721-0.322-0.721-0.719v-5.811c0-0.396,0.323-0.721,0.721-0.721h5.81 c0.396,0,0.72,0.324,0.72,0.721v5.811C34,33.678,33.677,34,33.28,34H27.471z M28.189,32.561h4.371v-4.371h-4.371V32.561z"}),(0,kh.jsx)("path",{display:"inline",d:"M6.72,23.625c-0.396,0-0.72-0.322-0.72-0.719v-5.811c0-0.397,0.323-0.72,0.72-0.72h5.81 c0.397,0,0.72,0.323,0.72,0.72v5.811c0,0.396-0.323,0.719-0.72,0.719H6.72z M7.439,22.186h4.371v-4.371H7.439V22.186z"}),(0,kh.jsx)("path",{display:"inline",d:"M17.095,23.625c-0.396,0-0.72-0.322-0.72-0.719v-5.811c0-0.397,0.323-0.72,0.72-0.72h5.811 c0.396,0,0.72,0.323,0.72,0.72v5.811c0,0.396-0.323,0.719-0.72,0.719H17.095z M17.815,22.186h4.371v-4.371h-4.371V22.186z"}),(0,kh.jsx)("path",{display:"inline",d:"M27.471,23.625c-0.397,0-0.721-0.322-0.721-0.719v-5.811c0-0.397,0.323-0.72,0.721-0.72h5.81 c0.396,0,0.72,0.323,0.72,0.72v5.811c0,0.396-0.323,0.719-0.72,0.719H27.471z M28.189,22.186h4.371v-4.371h-4.371V22.186z"}),(0,kh.jsx)("path",{display:"inline",d:"M6.72,13.25C6.323,13.25,6,12.927,6,12.531v-5.81C6,6.324,6.323,6,6.72,6h5.81 c0.397,0,0.72,0.323,0.72,0.72v5.81c0,0.396-0.323,0.719-0.72,0.719H6.72z M7.439,11.811h4.371V7.439H7.439V11.811z"}),(0,kh.jsx)("path",{display:"inline",d:"M17.095,13.25c-0.396,0-0.72-0.322-0.72-0.719v-5.81c0-0.397,0.323-0.72,0.72-0.72h5.811 c0.396,0,0.72,0.323,0.72,0.72v5.81c0,0.396-0.323,0.719-0.72,0.719H17.095z M17.815,11.811h4.371V7.439h-4.371V11.811z"}),(0,kh.jsx)("path",{display:"inline",d:"M27.471,13.25c-0.397,0-0.721-0.322-0.721-0.719v-5.81c0-0.397,0.323-0.72,0.721-0.72h5.81 C33.677,6,34,6.324,34,6.721v5.81c0,0.396-0.323,0.719-0.72,0.719H27.471z M28.189,11.811h4.371V7.439h-4.371V11.811z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M16.225,8.013h16.949C33.63,8.013,34,7.642,34,7.185c0-0.455-0.37-0.826-0.826-0.826H16.225 c-0.457,0-0.827,0.371-0.827,0.826C15.398,7.642,15.768,8.013,16.225,8.013z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.174,11.423H16.225c-0.457,0-0.827,0.369-0.827,0.826s0.37,0.826,0.827,0.826h16.949 c0.456,0,0.826-0.369,0.826-0.826S33.63,11.423,33.174,11.423z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.174,16.692H16.225c-0.457,0-0.827,0.371-0.827,0.827s0.37,0.827,0.827,0.827h16.949 c0.456,0,0.826-0.371,0.826-0.827S33.63,16.692,33.174,16.692z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.174,21.653H16.225c-0.457,0-0.827,0.371-0.827,0.827s0.37,0.827,0.827,0.827h16.949 c0.456,0,0.826-0.371,0.826-0.827S33.63,21.653,33.174,21.653z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.174,27.027H16.225c-0.457,0-0.827,0.37-0.827,0.827c0,0.456,0.37,0.826,0.827,0.826h16.949 c0.456,0,0.826-0.37,0.826-0.826C34,27.397,33.63,27.027,33.174,27.027z"}),(0,kh.jsx)("path",{display:"inline",d:"M33.174,31.987H16.225c-0.457,0-0.827,0.371-0.827,0.828c0,0.455,0.37,0.826,0.827,0.826h16.949 c0.456,0,0.826-0.371,0.826-0.826C34,32.358,33.63,31.987,33.174,31.987z"}),(0,kh.jsx)("path",{display:"inline",d:"M6.717,33.53C6.322,33.53,6,33.21,6,32.815v-4.961c0-0.396,0.322-0.717,0.717-0.717h4.961 c0.395,0,0.717,0.321,0.717,0.717v4.961c0,0.395-0.322,0.715-0.717,0.715H6.717z M7.434,32.098h3.526V28.57H7.434V32.098z"}),(0,kh.jsx)("path",{display:"inline",d:"M6.717,23.196C6.322,23.196,6,22.876,6,22.48V17.52c0-0.396,0.322-0.717,0.717-0.717h4.961 c0.395,0,0.717,0.321,0.717,0.717v4.961c0,0.396-0.322,0.716-0.717,0.716H6.717z M7.434,21.763h3.526v-3.527H7.434V21.763z"}),(0,kh.jsx)("path",{display:"inline",d:"M6.717,12.862C6.322,12.862,6,12.541,6,12.146V7.185C6,6.79,6.322,6.468,6.717,6.468h4.961 c0.395,0,0.717,0.322,0.717,0.717v4.961c0,0.396-0.322,0.717-0.717,0.717H6.717z M7.434,11.429h3.526V7.901H7.434V11.429z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M34.063,10.625H5.938C5.419,10.625,5,10.204,5,9.688C5,9.17,5.419,8.75,5.938,8.75h28.125 C34.58,8.75,35,9.17,35,9.688C35,10.204,34.58,10.625,34.063,10.625"}),(0,kh.jsx)("path",{display:"inline",d:"M34.063,20.938H5.938C5.419,20.938,5,20.517,5,20c0-0.518,0.419-0.938,0.938-0.938h28.125 C34.58,19.063,35,19.482,35,20C35,20.517,34.58,20.938,34.063,20.938"}),(0,kh.jsx)("path",{display:"inline",d:"M34.063,31.25H5.938C5.419,31.25,5,30.829,5,30.313c0-0.518,0.419-0.938,0.938-0.938h28.125 c0.518,0,0.938,0.42,0.938,0.938C35,30.829,34.58,31.25,34.063,31.25"}),(0,kh.jsx)("path",{display:"inline",d:"M34.063,20.938H5.938C5.419,20.938,5,20.517,5,20c0-0.518,0.419-0.938,0.938-0.938h28.125 C34.58,19.063,35,19.482,35,20C35,20.517,34.58,20.938,34.063,20.938"})]}),(0,kh.jsx)("path",{display:"none",d:"M21.414,20L33.207,8.207c0.391-0.39,0.391-1.023,0-1.414c-0.391-0.391-1.023-0.391-1.414,0L20,18.586 L8.207,6.793c-0.39-0.391-1.023-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414L18.586,20L6.793,31.793 c-0.391,0.391-0.391,1.023,0,1.414C6.988,33.402,7.245,33.5,7.5,33.5c0.256,0,0.511-0.098,0.707-0.293L20,21.414l11.793,11.793 c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.391-0.391,0.391-1.023,0-1.414L21.414,20z"}),(0,kh.jsx)("path",{display:"none",d:"M9.411,35C9,35,8.653,34.658,8.653,34.254V5.758C8.653,5.34,8.992,5,9.411,5h14.706 c0.198,0,0.394,0.084,0.546,0.236l6.449,6.461c0.15,0.13,0.235,0.324,0.235,0.535v22.021C31.347,34.658,31,35,30.589,35H9.411z M10.17,33.496h19.672V12.989h-5.726c-0.419,0-0.759-0.34-0.759-0.757V6.504H10.17V33.496z M24.875,11.485h3.9l-3.9-3.914V11.485z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M12.966,17.262c-0.483,0-0.878,0.395-0.878,0.878s0.395,0.877,0.878,0.877h13.518 c0.483,0,0.878-0.394,0.878-0.877s-0.395-0.878-0.878-0.878H12.966L12.966,17.262z"}),(0,kh.jsx)("path",{display:"inline",d:"M9.411,35C9,35,8.652,34.658,8.652,34.254V5.758C8.652,5.34,8.992,5,9.411,5h14.704 c0.2,0,0.395,0.084,0.547,0.236l6.449,6.461c0.15,0.13,0.236,0.324,0.236,0.534v22.022c0,0.404-0.349,0.746-0.759,0.746H9.411z M10.17,33.496h19.672V12.989h-5.727c-0.417,0-0.758-0.34-0.758-0.757V6.504H10.17V33.496z M24.875,11.485h3.9l-3.9-3.915V11.485z"}),(0,kh.jsx)("path",{display:"inline",d:"M12.966,21.164c-0.483,0-0.878,0.395-0.878,0.878s0.395,0.878,0.878,0.878h13.518 c0.483,0,0.878-0.395,0.878-0.878s-0.395-0.878-0.878-0.878H12.966L12.966,21.164z"}),(0,kh.jsx)("path",{display:"inline",d:"M12.966,25.065c-0.483,0-0.878,0.395-0.878,0.878c0,0.484,0.395,0.877,0.878,0.877h13.518 c0.483,0,0.878-0.393,0.878-0.877c0-0.483-0.395-0.878-0.878-0.878H12.966L12.966,25.065z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M14.766,16.227c0,0.45,0.367,0.816,0.817,0.816h12.578c0.449,0,0.817-0.367,0.817-0.816 c0-0.451-0.368-0.817-0.817-0.817H15.583C15.133,15.41,14.766,15.776,14.766,16.227z"}),(0,kh.jsx)("path",{display:"inline",d:"M32.468,10.232l-6.002-6.013C26.324,4.078,26.144,4,25.959,4H12.274c-0.389,0-0.706,0.316-0.706,0.706 v26.516c0,0.377,0.323,0.694,0.706,0.694h14.757v2.685H8.727V9.484H11.5v-1.4H8.02c-0.389,0-0.706,0.317-0.706,0.707v26.515 C7.313,35.683,7.637,36,8.02,36h19.706c0.383,0,0.706-0.317,0.706-0.694v-3.39h3.549c0.383,0,0.706-0.317,0.706-0.694V10.729 C32.687,10.533,32.607,10.354,32.468,10.232z M26.664,6.393l3.63,3.642h-3.63V6.393z M31.286,30.516H12.981V5.399h12.271v5.33 c0,0.388,0.315,0.705,0.706,0.705h5.327V30.516z"}),(0,kh.jsx)("path",{display:"inline",d:"M28.161,19.041H15.583c-0.45,0-0.817,0.367-0.817,0.817c0,0.45,0.367,0.816,0.817,0.816h12.578 c0.449,0,0.817-0.367,0.817-0.816C28.979,19.407,28.61,19.041,28.161,19.041z"}),(0,kh.jsx)("path",{display:"inline",d:"M28.161,22.672H15.583c-0.45,0-0.817,0.365-0.817,0.816s0.367,0.816,0.817,0.816h12.578 c0.449,0,0.817-0.365,0.817-0.816S28.61,22.672,28.161,22.672z"}),(0,kh.jsx)("path",{display:"inline",d:"M11.5,19.495h-0.172c-0.45,0-0.817,0.367-0.817,0.816c0,0.451,0.367,0.818,0.817,0.818H11.5V19.495z"}),(0,kh.jsx)("path",{display:"inline",d:"M11.5,23.125h-0.172c-0.45,0-0.817,0.367-0.817,0.816c0,0.451,0.367,0.818,0.817,0.818H11.5V23.125z"}),(0,kh.jsx)("path",{display:"inline",d:"M10.511,27.573c0,0.45,0.367,0.816,0.817,0.816H11.5v-1.634h-0.172 C10.878,26.756,10.511,27.123,10.511,27.573z"})]}),(0,kh.jsx)("path",{display:"none",d:"M35.823,14.582c-0.145-0.174-0.359-0.274-0.585-0.274h-2.286V8.381c0-0.42-0.341-0.762-0.762-0.762H7.81 c-0.421,0-0.762,0.341-0.762,0.762v3.279H4.762c-0.222,0-0.435,0.097-0.579,0.267c-0.145,0.169-0.208,0.394-0.173,0.614 l3.048,19.197c0.06,0.369,0.377,0.643,0.752,0.643H32.19c0.367,0,0.683-0.264,0.75-0.625l3.048-16.549 C36.028,14.985,35.969,14.755,35.823,14.582z M8.571,9.144h22.857v5.165H16.437l-3.621-2.512c-0.127-0.089-0.277-0.136-0.435-0.136 h-3.81V9.144z M31.558,30.856H8.46L5.655,13.184h6.487l3.621,2.511c0.127,0.089,0.28,0.137,0.435,0.137h18.125L31.558,30.856z"}),(0,kh.jsx)("path",{display:"none",d:"M8.944,35c-1.054,0-2.044-0.41-2.789-1.156C5.41,33.1,5,32.109,5,31.056s0.41-2.044,1.155-2.788 l12.549-12.549l-0.896-3.995c-0.074-0.276,0.004-0.569,0.202-0.768l5.727-5.724C23.887,5.083,24.084,5,24.295,5 c0.069,0,0.138,0.009,0.203,0.027L28.8,6.18c0.271,0.072,0.485,0.285,0.558,0.556c0.072,0.272-0.006,0.564-0.203,0.762l-4.27,4.271 l0.609,2.497l2.623,0.883l4.383-4.301c0.15-0.15,0.348-0.232,0.56-0.232c0.069,0,0.138,0.009,0.204,0.026 c0.271,0.073,0.484,0.288,0.557,0.559l1.152,4.302c0.074,0.272-0.004,0.563-0.203,0.761l-5.727,5.726 c-0.149,0.15-0.347,0.231-0.558,0.231c-0.069,0-0.138-0.009-0.203-0.027l-3.673-0.983l-2.324,2.084L11.733,33.845 C10.988,34.59,9.997,35,8.944,35L8.944,35z M19.449,11.75l1.035,3.862c0.072,0.271-0.006,0.563-0.204,0.761L7.27,29.382 c-0.447,0.446-0.694,1.042-0.694,1.674c0,0.633,0.247,1.227,0.694,1.673c0.449,0.448,1.043,0.695,1.674,0.695 c0.632,0,1.227-0.247,1.674-0.695l13.009-13.005c0.146-0.147,0.35-0.231,0.559-0.231c0.069,0,0.138,0.009,0.203,0.026l3.672,0.983 l5.131-4.89l-0.387-2.106l-0.154-0.579l-3.672,3.673c-0.149,0.149-0.348,0.231-0.558,0.231c-0.069,0-0.138-0.009-0.203-0.026 l-3.521-0.943c-0.271-0.072-0.484-0.285-0.557-0.556l-0.943-3.521c-0.072-0.272,0.006-0.564,0.203-0.762l3.673-3.672l-2.544-0.68 L19.449,11.75z"}),(0,kh.jsx)("path",{display:"none",d:"M35.667,18.241L20.476,7.193C20.338,7.091,20.173,7.038,20,7.038s-0.337,0.054-0.477,0.155l-6.715,4.884 v-1.85c0-0.53-0.371-0.961-0.828-0.961H8.334c-0.457,0-0.828,0.432-0.828,0.961v5.706l-3.173,2.308 c-0.361,0.263-0.441,0.771-0.178,1.132c0.151,0.208,0.397,0.332,0.655,0.332c0.172,0,0.336-0.053,0.477-0.154l2.321-1.688v14.29 c0,0.447,0.363,0.811,0.81,0.811h8.178c0.447,0,0.81-0.363,0.81-0.811v-9.715h5.191v9.715c0,0.447,0.362,0.811,0.809,0.811h8.178 c0.447,0,0.811-0.363,0.811-0.811v-14.29l2.322,1.688c0.137,0.101,0.301,0.154,0.475,0.154c0.259,0,0.504-0.124,0.656-0.332 C36.107,19.011,36.027,18.504,35.667,18.241z M9.162,11.188h1.991v2.092l-1.991,1.448V11.188z M30.772,31.342h-6.558v-9.714 c0-0.446-0.363-0.81-0.811-0.81h-6.809c-0.447,0-0.81,0.364-0.81,0.81v9.714H9.228V16.684L20,8.85l10.772,7.834V31.342z"}),(0,kh.jsx)("g",{display:"none",children:(0,kh.jsx)("path",{display:"inline",d:"M9.196,36c-0.43,0-0.766-0.338-0.766-0.767c0-0.431,0.336-0.768,0.766-0.768h2.006V10.234l-0.071-0.021 c-0.667-0.201-1.228-0.588-1.666-1.148c-0.436-0.555-0.656-1.201-0.656-1.92c0-0.88,0.308-1.63,0.915-2.229 C10.337,4.308,11.092,4,11.968,4c0.888,0,1.627,0.299,2.26,0.915c0.617,0.604,0.93,1.354,0.93,2.229 c0,0.708-0.226,1.354-0.672,1.92c-0.449,0.576-0.998,0.951-1.681,1.147l-0.072,0.021v0.956l10.374,2.568 c0.359,0.089,0.602,0.397,0.602,0.77v2.013l9.285,2.478c0.355,0.093,0.543,0.315,0.572,0.681c0.027,0.363-0.113,0.622-0.417,0.77 l-9.903,4.772c-0.1,0.066-0.202,0.098-0.32,0.098c-0.144,0-0.285-0.043-0.418-0.125c-0.237-0.148-0.348-0.357-0.348-0.656v-1.558 l-9.426,3.362v8.104h2.037c0.438,0,0.782,0.337,0.782,0.768c0,0.429-0.343,0.767-0.782,0.767H9.196z M12.734,24.729l9.426-3.359 v-6.242l-9.426-2.334V24.729z M23.709,23.33l6.888-3.335l-6.888-1.85V23.33z M11.964,5.534c-0.433,0-0.836,0.166-1.137,0.468 c-0.625,0.624-0.625,1.654-0.001,2.297c0.297,0.306,0.701,0.474,1.138,0.474c0.437,0,0.848-0.168,1.16-0.473 c0.321-0.312,0.497-0.726,0.494-1.165C13.615,6.702,13.439,6.3,13.123,6C12.808,5.7,12.396,5.534,11.964,5.534L11.964,5.534z"})}),(0,kh.jsx)("path",{display:"none",d:"M33.334,12.095h-6.857v-1.143c0-1.996-1.623-3.619-3.619-3.619h-5.714c-1.995,0-3.619,1.623-3.619,3.619 v1.143H6.667C5.196,12.095,4,13.292,4,14.762v5.714V30c0,1.471,1.196,2.666,2.667,2.666h26.667C34.805,32.666,36,31.471,36,30 v-9.524v-5.714C36,13.292,34.805,12.095,33.334,12.095z M15.048,10.952c0-1.154,0.94-2.095,2.095-2.095h5.714 c1.155,0,2.095,0.941,2.095,2.095v1.143h-9.904V10.952z M5.524,14.762c0-0.631,0.513-1.143,1.143-1.143h26.667 c0.631,0,1.143,0.512,1.143,1.143v4.953H5.524V14.762z M24.762,21.238h3.81v2.158h-3.81V21.238z M11.43,21.238h3.81v2.158h-3.81 V21.238z M33.334,31.143H6.667c-0.63,0-1.143-0.514-1.143-1.143v-8.762h4.382v2.92c0,0.422,0.34,0.762,0.762,0.762h5.333 c0.421,0,0.762-0.34,0.762-0.762v-2.92h6.476v2.92c0,0.422,0.342,0.762,0.762,0.762h5.334c0.421,0,0.762-0.34,0.762-0.762v-2.92 h4.381V30C34.477,30.629,33.965,31.143,33.334,31.143z"}),(0,kh.jsx)("path",{display:"none",d:"M25.033,14.427v-5.28c1.936-0.543,3.324-2.324,3.324-4.388c0-0.42-0.34-0.76-0.76-0.76H12.402 c-0.419,0-0.76,0.339-0.76,0.76c0,2.063,1.389,3.844,3.324,4.388v5.28c-1.935,0.543-3.324,2.324-3.324,4.389v1.899 c0,0.419,0.34,0.759,0.76,0.759h5.01c0.125,3.184,0.419,6.59,0.821,9.459c0.186,1.328,0.384,2.461,0.572,3.277 C19.009,35.09,19.218,36,20,36c0.781,0,0.991-0.91,1.195-1.789c0.188-0.816,0.386-1.949,0.572-3.277 c0.402-2.869,0.697-6.275,0.822-9.459h5.008c0.42,0,0.76-0.34,0.76-0.759v-1.899C28.357,16.751,26.969,14.97,25.033,14.427z M20,32.434c-0.412-2.4-0.888-6.395-1.068-10.959h2.137C20.891,26.039,20.414,30.033,20,32.434z M26.838,19.956h-4.982h-3.711 h-4.982v-1.14c0-1.531,1.144-2.826,2.659-3.015c0.38-0.047,0.665-0.371,0.665-0.754V8.527c0-0.383-0.285-0.706-0.665-0.753 c-1.256-0.156-2.258-1.073-2.563-2.254h13.482c-0.305,1.181-1.306,2.098-2.561,2.254c-0.38,0.047-0.667,0.371-0.667,0.753v6.521 c0,0.383,0.287,0.707,0.667,0.754c1.516,0.189,2.657,1.484,2.657,3.015V19.956z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M27.758,32.244L34,19.074V7.756H21.241V19.76h4.87l-4.87,12.484H27.758z M23.146,17.855V9.662h8.948 v8.983l-5.543,11.693h-2.522l4.868-12.482H23.146z"}),(0,kh.jsx)("path",{display:"inline",d:"M12.517,32.244l6.242-13.17V7.756H6V19.76h4.871L6,32.244H12.517z M7.905,17.855V9.662h8.948v8.983 l-5.542,11.693H8.789l4.868-12.482H7.905z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",d:"M23.83,28.146c-0.414,0-0.75,0.337-0.75,0.75v5.25H8.287V5.854H23.08v5.25c0,0.414,0.336,0.75,0.75,0.75 s0.75-0.336,0.75-0.75v-6c0-0.414-0.336-0.75-0.75-0.75H7.537c-0.414,0-0.75,0.336-0.75,0.75v29.793c0,0.415,0.336,0.75,0.75,0.75 H23.83c0.414,0,0.75-0.335,0.75-0.75v-6C24.58,28.483,24.244,28.146,23.83,28.146z"}),(0,kh.jsx)("path",{display:"inline",d:"M34.168,24.248l-2.48-8.688c-0.08-0.277-0.311-0.484-0.594-0.533c-0.285-0.05-0.572,0.069-0.738,0.304 L29.307,16.8c-1.635-1.122-3.586-1.735-5.693-1.783c-0.02-0.001-0.037,0-0.057,0.001c-4.104,0.216-6.771,1.523-10.574,5.178 c-0.258,0.248-0.305,0.642-0.115,0.942c0.191,0.302,0.568,0.426,0.902,0.3c1.627-0.619,3.34-0.946,4.955-0.946 c1.795,0,4.295,0.403,6.336,2.252l-0.947,1.327c-0.162,0.229-0.186,0.529-0.057,0.779s0.387,0.407,0.668,0.407h8.738l0,0 c0.416,0,0.75-0.336,0.75-0.75C34.213,24.416,34.197,24.329,34.168,24.248z M26.182,23.757l0.475-0.665 c0.209-0.292,0.18-0.692-0.068-0.953c-1.961-2.059-4.68-3.147-7.863-3.147c-0.754,0-1.527,0.063-2.305,0.188 c2.352-1.809,4.373-2.511,7.188-2.663c2.041,0.052,3.906,0.717,5.391,1.925c0.162,0.131,0.369,0.189,0.574,0.161 c0.205-0.027,0.391-0.139,0.51-0.308l0.59-0.826l1.795,6.288H26.182z"})]}),(0,kh.jsx)("path",{display:"none",d:"M11.087,35.498c-0.655,0-1.272-0.256-1.737-0.719l-4.128-4.13C4.756,30.185,4.5,29.567,4.5,28.912 c0-0.656,0.256-1.274,0.722-1.738l8.354-8.355c0.466-0.464,1.083-0.719,1.738-0.719c0.656,0,1.274,0.255,1.736,0.719l1.483,1.484 l1.771-1.771l-1.485-1.482c-0.463-0.464-0.72-1.082-0.72-1.738s0.257-1.272,0.72-1.737l8.356-8.354 c0.463-0.465,1.08-0.72,1.737-0.72s1.274,0.254,1.737,0.72l4.13,4.128c0.464,0.463,0.72,1.08,0.72,1.737s-0.256,1.275-0.72,1.738 l-8.355,8.355c-0.464,0.465-1.081,0.72-1.738,0.72c-0.654,0-1.272-0.255-1.736-0.72l-1.483-1.484l-1.77,1.771l1.483,1.482 c0.466,0.464,0.72,1.081,0.72,1.736c0,0.656-0.254,1.273-0.72,1.738l-8.354,8.355C12.361,35.242,11.744,35.498,11.087,35.498 L11.087,35.498z M15.313,19.747c-0.125,0-0.365,0.03-0.571,0.236l-8.356,8.356c-0.206,0.206-0.237,0.448-0.237,0.573 s0.031,0.366,0.237,0.572l4.13,4.13c0.207,0.207,0.447,0.237,0.571,0.237c0.125,0,0.367-0.03,0.573-0.237l8.356-8.354 c0.207-0.207,0.236-0.448,0.236-0.574c0-0.124-0.029-0.364-0.236-0.57l-1.483-1.486l-2.482,2.484 c-0.155,0.156-0.362,0.242-0.581,0.242c-0.222,0-0.428-0.086-0.582-0.242c-0.321-0.322-0.321-0.844-0.002-1.163l2.484-2.483 l-1.483-1.483C15.679,19.777,15.438,19.747,15.313,19.747L15.313,19.747z M24.651,14.526c0.219,0,0.426,0.085,0.58,0.24 c0.156,0.156,0.244,0.363,0.244,0.583s-0.088,0.426-0.242,0.581l-2.604,2.602l1.485,1.483c0.206,0.206,0.446,0.236,0.571,0.236 c0.126,0,0.367-0.03,0.574-0.235l8.354-8.356c0.208-0.206,0.237-0.448,0.237-0.574c0-0.125-0.029-0.365-0.235-0.573l-4.129-4.128 c-0.208-0.208-0.449-0.238-0.574-0.238s-0.367,0.03-0.573,0.238l-8.354,8.354c-0.208,0.206-0.239,0.448-0.239,0.573 s0.031,0.366,0.236,0.573l1.483,1.483l2.601-2.602C24.225,14.612,24.431,14.526,24.651,14.526L24.651,14.526z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",fillRule:"evenodd",clipRule:"evenodd",d:"M13.786,29.113c-1.022,0-1.853-0.829-1.853-1.85l-0.245-1.479 l-0.287-1.924c-0.052-0.188-0.076-0.348-0.076-0.498L9.373,9.702L9.035,7.667H5.377C4.894,7.667,4.5,7.274,4.5,6.791 c0-0.482,0.394-0.875,0.877-0.875h3.899c0.056,0,0.111,0.014,0.169,0.03l0.025,0.006l0.075,0.007 C9.652,5.93,9.708,5.915,9.763,5.915c0.484,0,0.878,0.393,0.878,0.875l0.186,1.122l0.097-0.017 c0.099-0.017,0.199-0.033,0.304-0.033h22.421c1.021,0,1.852,0.831,1.852,1.853v11.699c0,1.021-0.83,1.851-1.852,1.851 c-0.092,0.001-9.072,0.071-14.472,0.638c-2.596,0.273-5.058,1.01-5.75,1.229l-0.079,0.025l0.329,2.203h18.997 c0.482,0,0.877,0.394,0.877,0.877s-0.395,0.876-0.877,0.876H13.786z M12.445,9.618c-0.592,0-1.073,0.48-1.073,1.071l1.626,11.387 c-0.001,0.578,0.481,1.059,1.074,1.059c0.054-0.015,1.638-0.682,4.483-1.018c4.797-0.565,14.026-0.605,14.12-0.605 c0.59,0,1.072-0.48,1.072-1.073v-9.75c0-0.59-0.482-1.071-1.072-1.071H12.445z"}),(0,kh.jsx)("path",{display:"inline",fillRule:"evenodd",clipRule:"evenodd",d:"M15.948,30.188c-1.076,0-1.948,0.872-1.948,1.949 c0,1.076,0.872,1.948,1.948,1.948c1.079,0,1.951-0.872,1.951-1.948C17.899,31.06,17.027,30.188,15.948,30.188z"}),(0,kh.jsx)("circle",{display:"inline",fillRule:"evenodd",clipRule:"evenodd",cx:"29.598",cy:"32.136",r:"1.949"})]}),(0,kh.jsx)("path",{display:"none",fill:"#010101",d:"M32,10.465c0-0.948-0.66-2.295-3.808-3.337C25.993,6.4,23.084,6,20,6 c-3.083,0-5.993,0.4-8.192,1.128C8.661,8.169,8,9.517,8,10.465c0,0.008,0,0.014,0.001,0.022C8.001,10.491,8,10.495,8,10.496v6.326 c0,0.007,0,0.014,0.001,0.023C8.001,16.848,8,16.851,8,16.853v6.325c0,0.008,0,0.016,0.001,0.023c0,0.003-0.001,0.007-0.001,0.01 v6.324c0,0.947,0.661,2.295,3.808,3.337C14.007,33.6,16.917,34,20,34c3.084,0,5.993-0.4,8.192-1.128 C31.34,31.83,32,30.482,32,29.535v-6.324c0-0.003,0-0.007,0-0.01c0-0.008,0-0.016,0-0.023v-6.325c0-0.002,0-0.005,0-0.008 c0-0.009,0-0.016,0-0.023v-6.326c0-0.001,0-0.005,0-0.009C32,10.479,32,10.473,32,10.465z M30.5,29.535 c0,1.215-4.09,2.977-10.5,2.977S9.5,30.75,9.5,29.535v-4.052c0.557,0.371,1.306,0.732,2.308,1.063 c2.199,0.729,5.109,1.129,8.192,1.129c3.084,0,5.993-0.4,8.192-1.129c1.001-0.331,1.751-0.692,2.308-1.063V29.535z M30.5,23.178 c0,1.214-4.09,2.977-10.5,2.977S9.5,24.392,9.5,23.178v-4.052c0.557,0.371,1.306,0.733,2.308,1.065 c2.199,0.728,5.109,1.127,8.192,1.127c3.084,0,5.993-0.4,8.192-1.127c1.001-0.332,1.751-0.694,2.308-1.065V23.178z M30.5,16.822 c0,1.213-4.09,2.975-10.5,2.975S9.5,18.035,9.5,16.822v-4.053c0.557,0.371,1.306,0.733,2.308,1.065 c2.199,0.728,5.109,1.128,8.192,1.128c3.084,0,5.993-0.4,8.192-1.128c1.001-0.332,1.751-0.694,2.308-1.065V16.822z M20,13.44 c-6.41,0-10.5-1.762-10.5-2.975c0-1.214,4.09-2.976,10.5-2.976s10.5,1.762,10.5,2.976C30.5,11.678,26.41,13.44,20,13.44z"}),(0,kh.jsx)("path",{display:"none",fill:"#010101",d:"M31,10V6.667C31,6.299,30.647,6,30.214,6H9.785C9.353,6,9,6.299,9,6.667V10 c0,0.369,0.353,0.667,0.785,0.667h1.179v0.996c0,3.418,2.296,6.533,5.893,8.052v0.569c-3.596,1.518-5.893,4.629-5.893,8.049v1.002 H9.785C9.353,29.334,9,29.633,9,29.999v3.335C9,33.702,9.353,34,9.785,34h20.429C30.647,34,31,33.702,31,33.334v-3.335 c0-0.366-0.353-0.665-0.786-0.665h-1.179v-1.002c0-3.42-2.297-6.533-5.896-8.051v-0.565c3.599-1.518,5.896-4.632,5.896-8.054v-0.996 h1.179C30.647,10.667,31,10.369,31,10z M28.572,30.666h0.855v2H10.571v-2h1.179h16.5H28.572z M27.18,13.566 c-0.148,0.574-0.566,1.333-0.566,1.333c-0.914,1.655-2.516,3.018-4.575,3.783c-0.286,0.106-0.47,0.346-0.47,0.611v1.413 c0,0.265,0.184,0.504,0.47,0.611c3.296,1.226,5.427,3.979,5.427,7.016v1.003h-0.686h-2.015h-9.532h-1.998h-0.7v-1.002 c0-3.037,2.13-5.789,5.423-7.016c0.286-0.105,0.47-0.344,0.47-0.609V19.29c0-0.264-0.184-0.503-0.47-0.61 c-2.057-0.766-3.658-2.127-4.572-3.782c-0.344-0.56-0.565-1.333-0.565-1.333c-0.187-0.613-0.286-1.252-0.286-1.903v-0.985h14.93 v0.985C27.465,12.313,27.365,12.953,27.18,13.566z M29.428,9.333H28.25c-0.046,0-0.09,0.004-0.134,0.01H11.883 c-0.043-0.006-0.087-0.01-0.133-0.01h-1.179v-2h18.856V9.333z"}),(0,kh.jsx)("path",{display:"none",fill:"#010101",d:"M29.112,30.927H9.876C6.085,30.927,3,27.842,3,24.051c0-3.617,2.806-6.591,6.356-6.858 c0.77-2.392,3.021-4.066,5.583-4.066c0.369,0,0.744,0.041,1.133,0.125c1.362-2.559,4.023-4.177,6.963-4.177 c3.729,0,6.934,2.659,7.688,6.276C34.342,16.105,37,19.311,37,23.039C37,27.389,33.462,30.927,29.112,30.927z M9.833,18.791 c-2.879,0.024-5.215,2.375-5.215,5.26c0,2.898,2.359,5.258,5.258,5.258h19.236c3.457,0,6.271-2.813,6.271-6.27 c0-3.122-2.35-5.78-5.466-6.185c-0.364-0.048-0.651-0.334-0.698-0.699c-0.404-3.115-3.063-5.463-6.184-5.463 c-2.527,0-4.794,1.504-5.779,3.831c-0.163,0.387-0.596,0.584-0.996,0.453c-0.48-0.156-0.912-0.232-1.32-0.232 c-2.018,0-3.769,1.434-4.164,3.409c-0.076,0.377-0.408,0.65-0.793,0.65C9.921,18.803,9.869,18.796,9.833,18.791z"}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M29.364,15.71c-0.431,0-0.78,0.35-0.78,0.78v3.901c0,4.733-3.851,8.585-8.584,8.585 s-8.585-3.852-8.585-8.585v-3.901c0-0.431-0.35-0.78-0.78-0.78c-0.432,0-0.78,0.35-0.78,0.78v3.901 c0,5.331,4.134,9.716,9.365,10.116v3.932h-5.463c-0.432,0-0.781,0.349-0.781,0.78c0,0.431,0.35,0.78,0.781,0.78h12.486 c0.431,0,0.78-0.35,0.78-0.78c0-0.432-0.35-0.78-0.78-0.78H20.78v-3.932c5.23-0.4,9.365-4.785,9.365-10.116v-3.901 C30.146,16.06,29.796,15.71,29.364,15.71z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M20,27.025c3.657,0,6.633-2.975,6.633-6.633v-9.76C26.633,6.976,23.657,4,20,4 s-6.633,2.976-6.633,6.633v9.76C13.367,24.051,16.343,27.025,20,27.025z M14.928,10.633c0-2.797,2.275-5.072,5.072-5.072 s5.072,2.275,5.072,5.072v9.76c0,2.797-2.275,5.072-5.072,5.072s-5.072-2.275-5.072-5.072V10.633z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M22.603,19.604c1.136-0.807,1.88-2.131,1.88-3.626c0-2.452-1.994-4.446-4.444-4.446 c-2.451,0-4.445,1.994-4.445,4.446c0,1.495,0.745,2.82,1.881,3.627l-5.008,14.432c-0.132,0.378,0.068,0.791,0.447,0.924 C12.991,34.986,13.072,35,13.15,35c0.3,0,0.581-0.188,0.684-0.488l1.02-2.933h10.37l1.017,2.933C26.344,34.813,26.626,35,26.927,35 c0.078,0,0.157-0.014,0.237-0.039c0.378-0.133,0.578-0.546,0.446-0.924L22.603,19.604z M20.038,12.991 c1.646,0,2.986,1.34,2.986,2.987c0,1.646-1.34,2.986-2.986,2.986c-1.647,0-2.986-1.34-2.986-2.986 C17.052,14.331,18.391,12.991,20.038,12.991z M20.038,20.423c0.435,0,0.854-0.064,1.252-0.181l1.603,4.622h-5.709l1.604-4.622 C19.185,20.359,19.604,20.423,20.038,20.423z M15.356,30.129l1.324-3.814h6.715l1.325,3.814H15.356z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M14.12,21.617c0.142,0.142,0.327,0.212,0.511,0.212c0.187,0,0.373-0.07,0.515-0.212 c0.282-0.283,0.282-0.743,0-1.025c-1.234-1.231-1.913-2.87-1.913-4.613c0-1.743,0.678-3.381,1.911-4.613 c0.282-0.283,0.282-0.742,0-1.026c-0.285-0.282-0.743-0.282-1.025,0c-1.507,1.506-2.336,3.508-2.336,5.639 C11.782,18.108,12.612,20.111,14.12,21.617z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M12.581,23.154c-1.919-1.916-2.974-4.465-2.974-7.176c0-2.71,1.055-5.259,2.973-7.178 c0.283-0.283,0.283-0.742,0-1.025c-0.284-0.283-0.743-0.282-1.025,0.001c-2.191,2.191-3.398,5.104-3.398,8.202 s1.208,6.011,3.4,8.202c0.142,0.142,0.326,0.212,0.512,0.212s0.372-0.07,0.513-0.212C12.864,23.896,12.864,23.438,12.581,23.154z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M5.982,15.979c0-3.678,1.432-7.137,4.034-9.741c0.283-0.283,0.283-0.742,0-1.025 c-0.283-0.283-0.743-0.283-1.025,0c-2.876,2.877-4.46,6.7-4.46,10.766c0,4.065,1.584,7.889,4.46,10.766 c0.142,0.141,0.327,0.211,0.513,0.211s0.372-0.07,0.513-0.211c0.283-0.284,0.283-0.744,0-1.026 C7.415,23.115,5.982,19.656,5.982,15.979z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M26.768,15.979c0,1.742-0.679,3.38-1.911,4.612c-0.282,0.282-0.282,0.741,0,1.024 c0.142,0.142,0.328,0.213,0.514,0.213c0.185,0,0.37-0.071,0.512-0.213c1.507-1.506,2.337-3.508,2.337-5.637 c0-2.131-0.831-4.134-2.338-5.64c-0.283-0.283-0.741-0.282-1.026,0c-0.282,0.283-0.282,0.742,0.001,1.025 C26.089,12.596,26.768,14.235,26.768,15.979z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M28.445,7.775c-0.285-0.283-0.744-0.282-1.026,0.001c-0.284,0.283-0.284,0.742,0,1.024 c1.917,1.917,2.973,4.466,2.973,7.178c0,2.709-1.055,5.258-2.971,7.178c-0.284,0.282-0.284,0.74,0,1.024 c0.142,0.142,0.328,0.212,0.513,0.212c0.186,0,0.372-0.07,0.513-0.212c2.19-2.192,3.397-5.105,3.397-8.202 C31.844,12.879,30.636,9.966,28.445,7.775z"}),(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M31.007,5.212c-0.282-0.282-0.741-0.282-1.025,0c-0.283,0.283-0.283,0.743,0,1.025 c2.603,2.603,4.037,6.063,4.037,9.741c0,3.677-1.434,7.136-4.035,9.74c-0.283,0.283-0.283,0.741,0,1.025 c0.141,0.141,0.327,0.211,0.513,0.211c0.185,0,0.371-0.07,0.513-0.211c2.876-2.879,4.459-6.701,4.459-10.766 C35.468,11.912,33.884,8.089,31.007,5.212z"})]}),(0,kh.jsxs)("g",{display:"none",children:[(0,kh.jsx)("path",{display:"inline",fill:"#010101",d:"M26.197,5c-4.854,0-8.803,3.948-8.803,8.802c0,0.704,0.084,1.402,0.249,2.082L5,28.554V35 h6.979v-3.542h3.542v-3.542h3.541v-3.541h3.056l2.014-2.016c0.674,0.163,1.367,0.244,2.066,0.244c4.853,0,8.803-3.947,8.803-8.801 C35,8.949,31.05,5,26.197,5z M26.197,20.938c-0.705,0-1.403-0.103-2.074-0.307l-0.476-0.144l-2.223,2.221h-4.03v3.542h-3.541v3.541 h-3.541v3.542H6.667v-4.091l12.851-12.875l-0.146-0.479c-0.205-0.674-0.311-1.376-0.311-2.086c0-3.935,3.2-7.136,7.136-7.136 c3.935,0,7.135,3.201,7.135,7.136C33.332,17.737,30.132,20.938,26.197,20.938z"}),(0,kh.jsx)("circle",{display:"inline",fill:"#010101",cx:"27.671",cy:"12.348",r:"1.666"})]}),(0,kh.jsx)("path",{display:"none",fill:"#040305",d:"M5.812,35.5V7.128h6.317V4.5h1.594v2.628h12.402V4.5h1.604v2.628h6.458V35.5H5.812z M32.584,33.896V14.626H7.416v19.269H32.584z M32.584,13.022V8.733h-4.854v1.675h-1.604V8.733H13.723v1.675h-1.594V8.733H7.416 v4.289H32.584z"}),(0,kh.jsx)("path",{display:"none",fillRule:"evenodd",clipRule:"evenodd",d:"M22.672,29.195l-7.148,3.457c-0.331-0.021-0.63-0.235-0.951-0.766 L5,6.985c0.013-0.354,0.356-0.697,0.778-0.697l28.958,15.838c0.131,0.141,0.304,0.615,0.256,0.94 c-0.018,0.122-0.063,0.202-0.135,0.239l-6.256,3.024v5.654c0,0.926-0.731,1.685-1.646,1.726L22.672,29.195z M23.732,28.689 l2.346,2.471c0.339,0.345,0.504,0.492,0.673,0.492h0.001c0.115,0,0.261-0.062,0.297-0.363c0.016-0.135,0.018-0.341,0.018-0.622 v-3.22l0.012-0.011l0.012-0.133l-0.014-0.102l-0.007-0.004l-0.003-0.651l-0.003,0.002c0.008-0.487,0.029-1.026,0.029-1.026 l0.005-0.103l-8.106-5.941l-0.256,0.283l5.957,6.661l0.036-0.019l0.786,0.937l0.293,0.328L23.732,28.689z M9.12,9.995 c-0.448,0-0.812,0.363-0.812,0.811l7.175,18.895c0.195,0.325,0.464,0.665,0.957,0.665l6.112-2.922l0.146-0.038l1.488-0.735 l-9.567-10.689l13.229,8.908l3.224-1.551c0.103-0.054,0.224-0.163,0.259-0.392c0.043-0.292-0.086-0.704-0.281-0.898L9.169,9.995 H9.12z"}),(0,kh.jsx)("path",{display:"none",d:"M34.285,10H5.714C5.32,10,5,10.319,5,10.714v18.571C5,29.68,5.32,30,5.714,30h28.571 C34.681,30,35,29.68,35,29.285V10.714C35,10.319,34.681,10,34.285,10z M6.429,12.269l8.818,7.068l-8.818,8.124V12.269z M20,21.318 l-12.335-9.89h24.671L20,21.318z M16.374,20.241l3.178,2.548c0.001,0,0.003,0.002,0.004,0.002c0.007,0.006,0.015,0.012,0.021,0.017 c0.013,0.009,0.025,0.019,0.038,0.026c0.008,0.006,0.016,0.01,0.024,0.015c0.014,0.009,0.029,0.017,0.043,0.024 c0.007,0.002,0.013,0.006,0.019,0.01c0.022,0.009,0.045,0.018,0.067,0.025c0.001,0,0.002,0,0.003,0.002 c0.021,0.006,0.044,0.014,0.066,0.017c0.006,0.002,0.011,0.004,0.017,0.004c0.019,0.005,0.037,0.007,0.056,0.009 c0.005,0.002,0.012,0.002,0.017,0.002c0.024,0.004,0.047,0.006,0.071,0.006h0l0,0c0.024,0,0.048-0.002,0.072-0.006 c0.005,0,0.011,0,0.016-0.002c0.02-0.002,0.039-0.004,0.057-0.009c0.006,0,0.012-0.002,0.017-0.004 c0.022-0.003,0.044-0.011,0.066-0.017c0.001-0.002,0.002-0.002,0.003-0.002c0.023-0.008,0.045-0.017,0.067-0.025 c0.007-0.004,0.013-0.008,0.019-0.01c0.015-0.008,0.029-0.016,0.045-0.024c0.008-0.005,0.016-0.009,0.023-0.015 c0.012-0.008,0.025-0.018,0.037-0.026c0.008-0.005,0.016-0.011,0.022-0.017c0.001,0,0.003-0.002,0.004-0.002l3.178-2.548l9.043,8.33 H7.332L16.374,20.241z M24.754,19.337l8.817-7.068v15.175L24.754,19.337z"}),(0,kh.jsx)("g",{display:"none",children:(0,kh.jsx)("g",{display:"inline",children:(0,kh.jsx)("path",{d:"M20.01,5.5C12.008,5.5,5.5,12.005,5.5,20c0,7.997,6.508,14.5,14.51,14.5c2.701,0,5.34-0.75,7.633-2.166 c0.209-0.13,0.354-0.332,0.408-0.568c0.057-0.238,0.016-0.481-0.112-0.689c-0.17-0.273-0.462-0.438-0.782-0.438 c-0.168,0-0.333,0.049-0.477,0.138c-2,1.239-4.307,1.895-6.67,1.895c-6.99,0-12.677-5.687-12.677-12.67 c0-6.984,5.687-12.667,12.677-12.667c4.227,0,8.162,2.095,10.525,5.603c1.17,1.739,1.895,3.758,2.094,5.841 c0.047,0.494,0.152,2.249-0.475,4.098c-0.588,1.732-2.268,2.978-3.943,2.903c-1.047-0.038-1.807-0.407-2.326-1.126 c-1.666-2.338-0.511-7.771,0.074-9.666c0.145-0.472-0.105-0.969-0.571-1.134c-0.199-0.069-2.062-0.694-4.348-0.694 c-1.554,0-2.929,0.292-4.088,0.863c-1.801,0.888-3.064,2.42-3.755,4.554c-0.87,2.684-0.403,5.274,1.249,6.928 c0.991,0.993,2.305,1.537,3.696,1.537c0.549,0,1.096-0.086,1.624-0.258c1.015-0.323,1.929-0.933,2.718-1.811l0.923-1.025 l0.649,1.216c0.101,0.189,0.213,0.371,0.332,0.54c0.846,1.189,2.148,1.846,3.767,1.904c0.063,0.002,0.124,0.002,0.186,0.002 c2.401,0,4.737-1.742,5.552-4.148c0.723-2.141,0.635-4.112,0.563-4.858c-0.229-2.388-1.059-4.699-2.396-6.688 C29.349,7.898,24.846,5.5,20.01,5.5z M18.139,25.214L18.139,25.214c-0.901,0-1.752-0.356-2.397-1.003 c-1.173-1.176-1.466-3.023-0.804-5.069c0.538-1.658,1.456-2.794,2.808-3.473c0.922-0.459,2.026-0.69,3.285-0.69 c0.688,0,1.834,0.153,1.883,0.158l0.981,0.133l-0.156,0.979c-0.013,0.078-0.317,1.959-0.844,4.058 c-0.604,2.413-1.983,4.186-3.69,4.737C18.853,25.157,18.495,25.214,18.139,25.214z"})})}),(0,kh.jsx)("path",{display:"none",d:"M34.949,21.604L30.081,8.122c-0.106-0.297-0.39-0.496-0.706-0.496h-18.75c-0.315,0-0.598,0.199-0.705,0.496 L5.051,21.604C5.019,21.688,5.001,21.777,5,21.871l0,0c0,0.002,0,0.002,0,0.002l0,0l0,0v0.002l0,0v9.749 c0,0.414,0.336,0.75,0.75,0.75h28.5c0.415,0,0.75-0.336,0.75-0.75v-9.749l0,0v-0.002l0,0l0,0c0,0,0,0,0-0.002l0,0 C35,21.777,34.982,21.688,34.949,21.604z M11.151,9.125H28.85l4.333,12h-1.682l-2.024-6.004c-0.104-0.305-0.389-0.51-0.711-0.51 H11.71c-0.314,0-0.596,0.197-0.704,0.492l-2.207,6.022h-1.98L11.151,9.125z M29.918,21.125h-4.293c-0.283,0-0.543,0.16-0.67,0.414 l-1.668,3.336h-6.573l-1.668-3.336c-0.127-0.254-0.387-0.414-0.671-0.414h-3.978l1.837-5.014h15.992L29.918,21.125z M33.5,30.874 h-27v-8.249h7.412l1.668,3.335c0.127,0.254,0.387,0.414,0.67,0.414h7.5c0.285,0,0.545-0.16,0.672-0.414l1.668-3.335h7.41V30.874z"}),(0,kh.jsxs)("g",{children:[(0,kh.jsx)("path",{d:"M20,21.569c-0.095,0-0.189-0.021-0.282-0.062L5.434,15.115C5.165,14.995,4.994,14.72,5,14.413 c0.006-0.303,0.191-0.578,0.46-0.683l14.286-5.681C19.828,8.017,19.913,8,20,8c0.086,0,0.172,0.017,0.254,0.049l14.285,5.679 c0.275,0.11,0.455,0.378,0.461,0.683c0.008,0.308-0.163,0.584-0.434,0.704L20.281,21.51C20.192,21.549,20.096,21.569,20,21.569 L20,21.569z M7.626,14.468l12.339,5.522l12.409-5.522L20,9.549L7.626,14.468z"}),(0,kh.jsx)("path",{d:"M5.434,20.49c-0.361-0.163-0.53-0.604-0.376-0.983c0.113-0.275,0.372-0.454,0.659-0.454c0.097,0,0.191,0.021,0.282,0.062 l13.967,6.249l14.037-6.249c0.092-0.042,0.186-0.062,0.283-0.062c0.286,0,0.544,0.177,0.656,0.454 c0.155,0.379-0.014,0.82-0.376,0.983L20,27.008L5.434,20.49z"}),(0,kh.jsx)("path",{d:"M5.434,25.48c-0.362-0.164-0.531-0.604-0.376-0.981c0.113-0.275,0.372-0.454,0.659-0.454c0.097,0,0.191,0.021,0.282,0.061 l13.967,6.25l14.037-6.25c0.09-0.039,0.186-0.061,0.283-0.061c0.286,0,0.544,0.179,0.656,0.454 c0.155,0.378-0.014,0.819-0.375,0.981L20,32L5.434,25.48z"})]})]})]}),(0,kh.jsx)("p",{className:"text-lg",children:"Category"}),(0,kh.jsx)(ih,{icon:f,className:"text-base cursor-pointer",onClick:function(){return function(){var e=document.getElementById("categories");d((function(e){return e===hh?dh:hh})),e.classList.toggle("hidden")}()}})]}),(0,kh.jsx)("div",{className:"relative p-2 mx-2 md:w-[50%] border-[1px] rounded-2xl drop-shadow-xl md:absolute top-[110%] hidden bg-white gap-2 text-black",id:"categories",children:r&&r.map((function(e){return(0,kh.jsx)(Ue,{to:"/shop?category=".concat(e),className:"capitalize text-lg text-center block md:grid hover:bg-[#d4d4d4] p-2",children:e},e)}))})]})}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{className:"focus:outline-none focus:text-[#daa975]",to:"/shop",children:"Shop"})}),null===n&&(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsxs)(Ue,{className:"focus:outline-none focus:text-[#daa975] flex gap-3",to:"/login",children:[(0,kh.jsx)("svg",{"data-bbox":"0 0 50 50","data-type":"shape",xmlns:"http://www.w3.org/2000/svg",width:"26",height:"26",fill:"#fff",className:"hover:fill-[#efa95e]",viewBox:"0 0 50 50",children:(0,kh.jsx)("g",{children:(0,kh.jsx)("path",{d:"M25 48.077c-5.924 0-11.31-2.252-15.396-5.921 2.254-5.362 7.492-8.267 15.373-8.267 7.889 0 13.139 3.044 15.408 8.418-4.084 3.659-9.471 5.77-15.385 5.77m.278-35.3c4.927 0 8.611 3.812 8.611 8.878 0 5.21-3.875 9.456-8.611 9.456s-8.611-4.246-8.611-9.456c0-5.066 3.684-8.878 8.611-8.878M25 0C11.193 0 0 11.193 0 25c0 .915.056 1.816.152 2.705.032.295.091.581.133.873.085.589.173 1.176.298 1.751.073.338.169.665.256.997.135.515.273 1.027.439 1.529.114.342.243.675.37 1.01.18.476.369.945.577 1.406.149.331.308.657.472.98.225.446.463.883.714 1.313.182.312.365.619.56.922.272.423.56.832.856 1.237.207.284.41.568.629.841.325.408.671.796 1.02 1.182.22.244.432.494.662.728.405.415.833.801 1.265 1.186.173.154.329.325.507.475l.004-.011A24.886 24.886 0 0 0 25 50a24.881 24.881 0 0 0 16.069-5.861.126.126 0 0 1 .003.01c.172-.144.324-.309.49-.458.442-.392.88-.787 1.293-1.209.228-.232.437-.479.655-.72.352-.389.701-.78 1.028-1.191.218-.272.421-.556.627-.838.297-.405.587-.816.859-1.24a26.104 26.104 0 0 0 1.748-3.216c.208-.461.398-.93.579-1.406.127-.336.256-.669.369-1.012.167-.502.305-1.014.44-1.53.087-.332.183-.659.256-.996.126-.576.214-1.164.299-1.754.042-.292.101-.577.133-.872.095-.89.152-1.791.152-2.707C50 11.193 38.807 0 25 0"})})}),"Log In"]})}),null!==n&&(0,kh.jsxs)("li",{className:"items-center gap-3 p-3 relative flex  md:flex-row justify-around",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm-50.22 116.82C218.45 151.39 236.28 144 256 144s37.39 7.44 50.11 20.94c12.89 13.68 19.16 32.06 17.68 51.82C320.83 256 290.43 288 256 288s-64.89-32-67.79-71.25c-1.47-19.92 4.79-38.36 17.57-51.93zM256 432a175.49 175.49 0 01-126-53.22 122.91 122.91 0 0135.14-33.44C190.63 329 222.89 320 256 320s65.37 9 90.83 25.34A122.87 122.87 0 01382 378.78 175.45 175.45 0 01256 432z'/></svg>",className:"text-2xl md:text-3xl"}),(0,kh.jsxs)("h1",{className:"text-xl md:text-lg lg:text-xl font-[font4]",children:[n.isAdmin&&"Admin",!n.isAdmin&&n.name.split(" ")[0]]}),(0,kh.jsx)(ih,{icon:l,onClick:function(){return function(){var e=document.getElementById("profile");u((function(e){return e===hh?dh:hh})),e.classList.toggle("invisible")}()},className:"text-base cursor-pointer"}),(0,kh.jsxs)("div",{id:"profile",className:"flex z-[1] invisible rounded-2xl overflow-hidden flex-col cursor-pointer absolute w-full top-[100%] md:top-[125%] bg-zinc-950 text-white",children:[!n.isAdmin&&(0,kh.jsxs)(Ue,{to:"/user/profile",className:"flex justify-evenly items-center text-lg py-3 px-2 duration-200  md:border-b-[1px] border-b-white hover:bg-zinc-800",children:[(0,kh.jsx)(ih,{icon:ph,className:"text-xl"}),"Profile"]}),n.isAdmin&&(0,kh.jsxs)(Ue,{to:"/admin-dashboard",className:"flex justify-evenly items-center text-lg py-3 px-2 duration-200  md:border-b-[1px] border-b-white hover:bg-zinc-800",children:[(0,kh.jsx)(ih,{icon:ph,className:"text-xl"}),"Dashboard"]}),(0,kh.jsx)(Ue,{to:"/orders",children:(0,kh.jsxs)("h1",{className:"flex justify-evenly items-center text-lg py-3 px-2 duration-200  md:border-b-[1px] border-b-white hover:bg-zinc-800",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' d='M160 144h288M160 256h288M160 368h288' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='144' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='256' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><circle cx='80' cy='368' r='16' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-lg"}),(0,kh.jsx)("span",{children:"Orders"})]})}),(0,kh.jsxs)("button",{className:"flex py-3 px-2 justify-evenly items-center hover:bg-zinc-800 focus:outline-none duration-200",onClick:function(){return t(ea()),t(ga()),t(ba()),m("/"),void to.success("Logout successful! We look forward to serving you again.",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"})},children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M304 336v40a40 40 0 01-40 40H104a40 40 0 01-40-40V136a40 40 0 0140-40h152c22.09 0 48 17.91 48 40v40M368 336l80-80-80-80M176 256h256' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-2xl"}),"Logout"]})]})]}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsxs)(Ue,{className:"relative focus:outline-none focus:text-[#daa975]",to:"/cart",children:[(0,kh.jsx)("p",{className:"text-lg text-[#dca366] absolute ".concat(null!==a&&a.totalProducts>9?"left-[15%]":"left-[27.5%]"," top-[27.5%]"),children:null===a?0:a.totalProducts}),(0,kh.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"36",height:"36",fill:"#fff",viewBox:"0 0 164.9 196.4",preserveAspectRatio:"xMinYMax meet","data-hook":"svg-icon-9",children:[(0,kh.jsx)("path",{d:"M81.9 11.5c-18.8 0-34.1 16-34.1 35.7v18.1h7.8V47.2c0-15.4 11.8-27.9 26.4-27.9 14.5 0 26.4 12.5 26.4 27.9v18.1h6.6V64h1.1V47.2c-.1-19.7-15.4-35.7-34.2-35.7z"}),(0,kh.jsx)("path",{d:"M156.9 70.5v118H8v-118h148.9m8-8H0v134h164.9v-134z"})]})]})})]})})]})})},Sh={_origin:"https://api.emailjs.com"},Th=function(e,t,n){if(!e)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0},Ch=(0,s.Z)((function e(t){(0,o.Z)(this,e),this.status=t?t.status:0,this.text=t?t.responseText:"Network Error"})),Mh=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,i){var a=new XMLHttpRequest;a.addEventListener("load",(function(e){var t=e.target,n=new Ch(t);200===n.status||"OK"===n.text?r(n):i(n)})),a.addEventListener("error",(function(e){var t=e.target;i(new Ch(t))})),a.open("POST",Sh._origin+e,!0),Object.keys(n).forEach((function(e){a.setRequestHeader(e,n[e])})),a.send(t)}))},Ah=function(e,t,n,r){var i=r||Sh._userID;Th(i,e,t);var a={lib_version:"3.11.0",user_id:i,service_id:e,template_id:t,template_params:n};return Mh("/api/v1.0/email/send",JSON.stringify(a),{"Content-type":"application/json"})},Ph=function(){var t=(0,e.useState)(""),n=(0,i.Z)(t,2),r=n[0],a=n[1];return(0,kh.jsxs)("div",{className:"footer",children:[(0,kh.jsx)("div",{className:"",children:(0,kh.jsxs)("ul",{className:"flex flex-col gap-8",children:[(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/",className:"focus:outline-none focus:text-[#daa975] hover:underline",children:"Home"})}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/about",className:"focus:outline-none focus:text-[#daa975] hover:underline",children:"About"})}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/shop",className:"focus:outline-none focus:text-[#daa975] hover:underline",children:"Shop"})}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/contact",className:"focus:outline-none focus:text-[#daa975] hover:underline",children:"Contact"})})]})}),(0,kh.jsxs)("div",{className:"flex flex-col gap-8 text-slate-800",children:[(0,kh.jsxs)("p",{className:"text-lg",children:["500 Terry Francine St.",(0,kh.jsx)("br",{}),"San Francisco,CA 94158"]}),(0,kh.jsx)("p",{className:"text-lg",children:"Email: swiftshop@gmail.com"}),(0,kh.jsx)("p",{className:"text-lg",children:"Tel: 1-800-000-0000"})]}),(0,kh.jsx)("div",{className:"",children:(0,kh.jsxs)("ul",{className:"flex flex-col gap-6",children:[(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/shipping",className:"focus:outline-none focus:text-[#daa975]",children:"Shipping & Returns"})}),(0,kh.jsx)("li",{className:"nav-link",children:(0,kh.jsx)(Ue,{to:"/faq",className:"focus:outline-none focus:text-[#daa975]",children:"FAQ"})}),(0,kh.jsxs)("li",{className:"flex justify-start items-center gap-4",children:[(0,kh.jsx)("div",{children:(0,kh.jsx)("img",{alt:"Black Facebook Icon",fetchpriority:"high",className:"object-cover h-[24px] w-[24px] cursor-pointer",src:"https://static.wixstatic.com/media/0fdef751204647a3bbd7eaa2827ed4f9.png/v1/fill/w_29,h_29,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/0fdef751204647a3bbd7eaa2827ed4f9.png"})}),(0,kh.jsx)("div",{children:(0,kh.jsx)("img",{alt:"Black Twitter Icon",fetchpriority:"high",className:"object-cover h-[24px] w-[24px] cursor-pointer",src:"https://static.wixstatic.com/media/c7d035ba85f6486680c2facedecdcf4d.png/v1/fill/w_29,h_29,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/c7d035ba85f6486680c2facedecdcf4d.png"})}),(0,kh.jsx)("div",{children:(0,kh.jsx)("img",{alt:"Black Instagram Icon",fetchpriority:"high",className:"object-cover h-[24px] w-[24px] cursor-pointer",src:"https://static.wixstatic.com/media/01c3aff52f2a4dffa526d7a9843d46ea.png/v1/fill/w_29,h_29,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/01c3aff52f2a4dffa526d7a9843d46ea.png"})})]})]})}),(0,kh.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,kh.jsx)("p",{className:"text-xl",children:"Receive all our news and updates."}),(0,kh.jsx)("input",{type:"text",value:r,onChange:function(e){return a(e.target.value)},className:"py-2 px-4 text-lg border-black border-[1px] placeholder:text-lg hover:border-[gray] duration-100 focus:outline-none",placeholder:"Email Address*"}),(0,kh.jsx)("button",{className:"btn",onClick:function(){Ah("service_y5swlvb","template_pmk8qaj",{email:r},"Lub0zc2Mt-alm_jPW").then((function(e){console.log(e.text),a("")}))},children:"Subscribe Now"})]})]})},Ih=n.p+"static/media/Caraousel1.2f4cc48f04c23e63adb6.avif",zh=n.p+"static/media/Caraousel2.157c2fcd76f1a9a28526.avif",Lh=n.p+"static/media/Caraousel3.7ef51f2185864935f4fb.avif",Dh=function(){var t=[{id:1,image:Ih},{id:2,image:zh},{id:3,image:Lh}],n=(0,e.useState)(0),r=(0,i.Z)(n,2),a=r[0],o=r[1],s=(0,e.useState)(t[a]),l=(0,i.Z)(s,2),u=l[0],c=l[1];return(0,kh.jsxs)("div",{className:"w-full relative z-0",children:[(0,kh.jsxs)("div",{className:"caraousel",children:[(0,kh.jsx)("img",{src:u.image,alt:"...",className:"caraousel-img"}),(0,kh.jsxs)("div",{className:"caraousel-content",children:[(0,kh.jsxs)("h1",{className:"text-2xl md:text-5xl text-white ",children:["All the products available at Reasonable Prices.",(0,kh.jsx)("span",{className:"text-xl text-white block mt-3 font-[font2]",children:"Shop Swift.Shop Smart."})]}),(0,kh.jsx)(Ue,{to:"/shop",children:(0,kh.jsx)("button",{className:"btn-outline-white",children:"Shop Now"})})]})]},u.id),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",onClick:function(){return o(0===a?t.length-1:function(e){return e-1}),c(t[a])},className:"caraousel-controls left-[2.5%]"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M184 112l144 144-144 144' class='ionicon-fill-none'/></svg>",onClick:function(){return o(a===t.length-1?0:function(e){return e+1}),c(t[a])},className:"caraousel-controls right-[2.5%]"})]})};var Rh=n.p+"static/media/heart.a20cf6cfa8afc91c4e734c8d4e305dca.svg",Oh=n(5112),jh=function(t){var n=t.product,r=mt(),i=ve(),a=ot((function(e){return e.cart})),o=ot((function(e){return e.user})),s=[];a&&(s=a.products.filter((function(e){return e.productId.toString()===n._id})));var l=function(e){null===o&&(i("/login"),to.warning("Please Login First!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));var t=n._id,a=Math.round(n.price);if(0===s.length)r(ya({productId:t,price:a,quantity:1}));else if("increase"===e){var l=s[0].quantity+1;r(ya({productId:t,price:a,quantity:l}))}else if("decrease"===e){var u=s[0].quantity-1;r(ya({productId:t,price:a,quantity:u}))}};return(0,e.useEffect)((function(){r(Qi())}),[]),(0,kh.jsxs)("div",{className:"",children:[(0,kh.jsxs)("div",{className:"aspect-square rounded-xl border-[1px] bg-[#f4f5f5] flex items-center shadow-lg relative",children:[(0,kh.jsx)(Ue,{to:"/product/".concat(n._id),children:(0,kh.jsx)("img",{src:n.image,className:"aspect-video object-contain p-5 rounded-2xl bg-transparent mix-blend-multiply",alt:"Product Here..."})}),(0,kh.jsx)("div",{className:"absolute right-[20px] top-[20px] bg-white p-2 rounded-[50%] cursor-pointer hover:bg-[#f9dcdc] duration-300",children:(0,kh.jsx)("img",{width:"18",height:"18",src:Rh,alt:"..."})})]}),(0,kh.jsxs)("div",{className:"py-4",children:[(0,kh.jsx)("h1",{className:"tracking-[0.5px] font-semibold  font-[font1] h-[30px] whitespace-nowrap overflow-hidden text-ellipsis text-[#050505]",children:(0,kh.jsx)(Ue,{to:"/product/".concat(n._id),className:"text-lg hover:underline",children:n.title})}),(0,kh.jsxs)("h1",{className:"flex mt-3 items-center relative",children:[(0,kh.jsx)("img",{width:"14",height:"14",src:"https://img.icons8.com/material-rounded/24/rupee.png",className:"inline-block absolute top-[25%] left-0",alt:"rupee"}),(0,kh.jsxs)("span",{className:"text-xl ms-3",children:[Number(Math.floor(n.price)).toLocaleString("en-in",{maximumFractionDigits:2}),".00"]})]}),(0,kh.jsxs)("h1",{className:"flex justify-between items-center",children:[(0,kh.jsx)(Oh.Z,{value:n.rating,isHalf:!0,edit:!1,activeColor:"#ffd400",color:"#cccccc",size:24}),0===s.length?(0,kh.jsx)("button",{className:"py-2 px-7 text-lg text-center hover:bg-black hover:text-white duration-300 bg-transparent border-[1px] border-black",onClick:function(){return l("new")},children:"Add to Cart"}):(0,kh.jsxs)("div",{className:"item-quanity flex justify-center items-center gap-6 p-2 w-fit h-fit border-[1px] border-black",children:[(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:s[0].quantity<=1,onClick:function(){return l("decrease")},children:(0,kh.jsx)(ih,{icon:_h,className:""})}),(0,kh.jsx)("span",{className:"text-lg",children:s[0].quantity}),(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:s[0].quantity>=n.stock,onClick:function(){return l("increase")},children:(0,kh.jsx)(ih,{icon:uh,className:""})})]})]})]})]})};function Nh(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function Bh(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length===r.length&&(JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every((function(n){var r=e[n],i=t[n];return"function"===typeof r?"".concat(r)==="".concat(i):Nh(r)&&Nh(i)?Bh(r,i):r===i})))}function Fh(e){return e.concat().sort((function(e,t){return e.name>t.name?1:-1})).map((function(e){return e.options}))}function $h(e){return"number"===typeof e}function Vh(e){return"string"===typeof e}function Uh(e){return"boolean"===typeof e}function Zh(e){return"[object Object]"===Object.prototype.toString.call(e)}function Hh(e){return Math.abs(e)}function Wh(e){return Math.sign(e)}function qh(e,t){return Hh(e-t)}function Gh(e){return Jh(e).map(Number)}function Xh(e){return e[Kh(e)]}function Kh(e){return Math.max(0,e.length-1)}function Yh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Array.from(Array(e),(function(e,n){return t+n}))}function Jh(e){return Object.keys(e)}function Qh(e,t){return[e,t].reduce((function(e,t){return Jh(t).forEach((function(n){var r=e[n],i=t[n],a=Zh(r)&&Zh(i);e[n]=a?Qh(r,i):i})),e}),{})}function ef(e,t){return"undefined"!==typeof t.MouseEvent&&e instanceof t.MouseEvent}function tf(e,t){var n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}var i={measure:function(r){return $h(e)?t*Number(e):n[e](r)}};return i}function nf(e,t){var n=Hh(e-t);function r(t){return t<e}function i(e){return e>t}function a(e){return r(e)||i(e)}var o={length:n,max:t,min:e,constrain:function(n){return a(n)?r(n)?e:t:n},reachedAny:a,reachedMax:i,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}};return o}function rf(e,t,n){var r=nf(0,e).constrain,i=e+1,a=o(t);function o(e){return n?Hh((i+e)%i):r(e)}function s(){return a}function l(){return rf(e,s(),n)}var u={get:s,set:function(e){return a=o(e),u},add:function(e){return l().set(s()+e)},clone:l};return u}function af(){var e=[];var t={add:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return n.addEventListener(r,i,a),e.push((function(){return n.removeEventListener(r,i,a)})),t},clear:function(){e=e.filter((function(e){return e()}))}};return t}function of(e,t,n,r,i,a,o,s,l,u,c,h,f,d,p,m,v,g,y,_){var x=e.cross,b=["INPUT","SELECT","TEXTAREA"],w={passive:!1},k=af(),E=af(),S=nf(50,225).constrain(p.measure(20)),T={mouse:300,touch:400},C={mouse:500,touch:600},M=m?43:25,A=!1,P=0,I=0,z=!1,L=!1,D=!1,R=!1;function O(e){var n=o.readPoint(e),r=o.readPoint(e,x),i=qh(n,P),s=qh(r,I);if(!L&&!R){if(!e.cancelable)return j(e);if(!(L=i>s))return j(e)}var u=o.pointerMove(e);i>v&&(D=!0),c.useFriction(.3).useDuration(1),l.start(),a.add(t.apply(u)),e.preventDefault()}function j(e){var n=h.byDistance(0,!1).index!==f.get(),r=o.pointerUp(e)*(m?C:T)[R?"mouse":"touch"],i=function(e,t){var n=f.add(-1*Wh(e)),r=h.byDistance(e,!m).distance;return m||Hh(e)<S?r:g&&t?.5*r:h.byIndex(n.get(),0).distance}(t.apply(r),n),a=function(e,t){if(0===e||0===t)return 0;if(Hh(e)<=Hh(t))return 0;var n=qh(Hh(e),Hh(t));return Hh(n/e)}(r,i),s=M-10*a,l=y+a/50;L=!1,z=!1,E.clear(),c.useDuration(s).useFriction(l),u.distance(i,!m),R=!1,d.emit("pointerUp")}function N(e){D&&(e.stopPropagation(),e.preventDefault())}return{init:function(e){if(_){var t=n;k.add(t,"dragstart",(function(e){return e.preventDefault()}),w).add(t,"touchmove",(function(){}),w).add(t,"touchend",(function(){})).add(t,"touchstart",l).add(t,"mousedown",l).add(t,"touchcancel",j).add(t,"contextmenu",j).add(t,"click",N,!0)}function l(t){(Uh(_)||_(e,t))&&function(e){var t=ef(e,i);if(R=t,t&&0!==e.button)return;if(function(e){var t=e.nodeName||"";return b.includes(t)}(e.target))return;D=m&&t&&!e.buttons&&A,A=qh(a.get(),s.get())>=2,z=!0,o.pointerDown(e),c.useFriction(0).useDuration(0),a.set(s),function(){var e=R?r:n;E.add(e,"touchmove",O,w).add(e,"touchend",j).add(e,"mousemove",O,w).add(e,"mouseup",j)}(),P=o.readPoint(e),I=o.readPoint(e,x),d.emit("pointerDown")}(t)}},pointerDown:function(){return z},destroy:function(){k.clear(),E.clear()}}}function sf(e,t){var n,r;function i(e){return e.timeStamp}function a(n,r){var i=r||e.scroll,a="client".concat("x"===i?"X":"Y");return(ef(n,t)?n:n.touches[0])[a]}return{pointerDown:function(e){return n=e,r=e,a(e)},pointerMove:function(e){var t=a(e)-a(r),o=i(e)-i(n)>170;return r=e,o&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;var t=a(r)-a(n),o=i(e)-i(n),s=i(e)-i(r)>170,l=t/o;return o&&!s&&Hh(l)>.1?l:0},readPoint:a}}function lf(e,t,n,r,i,a){var o,s,l=[],u=!1;function c(e){return i.measureSize(e.getBoundingClientRect())}return{init:function(i){a&&(s=c(e),l=r.map(c),o=new ResizeObserver((function(o){u||(Uh(a)||a(i,o))&&function(a){var o,u=(0,w.Z)(a);try{for(u.s();!(o=u.n()).done;){var h=o.value,f=h.target===e,d=r.indexOf(h.target);if((f?s:l[d])!==c(f?e:r[d])){n.requestAnimationFrame((function(){i.reInit(),t.emit("resize")}));break}}}catch(p){u.e(p)}finally{u.f()}}(o)})),[e].concat(r).forEach((function(e){return o.observe(e)})))},destroy:function(){o&&o.disconnect(),u=!0}}}function uf(e,t,n,r,i){var a=i.measure(10),o=i.measure(50),s=nf(.1,.99),l=!1;return{constrain:function(i){if(!l&&e.reachedAny(n.get())&&e.reachedAny(t.get())){var u=e.reachedMin(t.get())?"min":"max",c=Hh(e[u]-t.get()),h=n.get()-t.get(),f=s.constrain(c/o);n.subtract(h*f),!i&&Hh(h)<a&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}},toggleActive:function(e){l=!e}}}function cf(e,t,n,r){var i=nf(t.min+.1,t.max+.1),a=i.reachedMin,o=i.reachedMax;var s={loop:function(t){if(function(e){return 1===e?o(n.get()):-1===e&&a(n.get())}(t)){var i=e*(-1*t);r.forEach((function(e){return e.add(i)}))}}};return s}function hf(e,t,n,r,i){var a=r.reachedAny,o=r.removeOffset,s=r.constrain;function l(e){return e.concat().sort((function(e,t){return Hh(e)-Hh(t)}))[0]}function u(t,r){var i=[t,t+n,t-n];if(!e)return i[0];if(!r)return l(i);var a=i.filter((function(e){return Wh(e)===r}));return a.length?l(a):Xh(i)-n}var c={byDistance:function(n,r){var l=i.get()+n,c=function(n){var r=e?o(n):s(n),i=t.map((function(e){return e-r})).map((function(e){return u(e,0)})).map((function(e,t){return{diff:e,index:t}})).sort((function(e,t){return Hh(e.diff)-Hh(t.diff)}));return{index:i[0].index,distance:r}}(l),h=c.index,f=c.distance,d=!e&&a(l);return!r||d?{index:h,distance:n}:{index:h,distance:n+u(t[h]-f,0)}},byIndex:function(e,n){return{index:e,distance:u(t[e]-i.get(),n)}},shortcut:u};return c}function ff(e){var t=e;function n(e){return $h(e)?e:e.get()}var r={get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}};return r}function df(e,t,n){var r="x"===e.scroll?function(e){return"translate3d(".concat(e,"px,0px,0px)")}:function(e){return"translate3d(0px,".concat(e,"px,0px)")},i=n.style,a=!1;return{clear:function(){a||(i.transform="",n.getAttribute("style")||n.removeAttribute("style"))},to:function(e){a||(i.transform=r(t.apply(e)))},toggleActive:function(e){a=!e}}}function pf(e,t,n,r,i,a,o,s,l,u){var c=.5,h=Gh(a),f=Gh(a).reverse(),d=function(){var e=s[0]-1;return v(m(f,e),r,!1)}().concat(function(){var e=n-s[0]-1;return v(m(h,e),-r,!0)}());function p(e,t){return e.reduce((function(e,t){return e-a[t]}),t)}function m(e,t){return e.reduce((function(e,n){return p(e,t)>0?e.concat([n]):e}),[])}function v(a,s,h){var f=function(e){return o.map((function(t,r){return{start:t-i[r]+c+e,end:t+n-c+e}}))}(s);return a.map((function(n){var i=h?0:-r,a=h?r:0,o=h?"end":"start",s=f[n][o];return{index:n,slideLocation:ff(-1),translate:df(e,t,u[n]),target:function(){return l.get()>s?i:a}}}))}var g={canLoop:function(){return d.every((function(e){var t=e.index,r=h.filter((function(e){return e!==t}));return p(r,n)<=.1}))},clear:function(){d.forEach((function(e){return e.translate.clear()}))},loop:function(){d.forEach((function(e){var t=e.target,n=e.translate,r=e.slideLocation,i=t();i!==r.get()&&(n.to(i),r.set(i))}))},loopPoints:d};return g}function mf(e,t,n){var r,i=!1;return{init:function(a){n&&(r=new MutationObserver((function(e){i||(Uh(n)||n(a,e))&&function(e){var n,r=(0,w.Z)(e);try{for(r.s();!(n=r.n()).done;)if("childList"===n.value.type){a.reInit(),t.emit("slidesChanged");break}}catch(i){r.e(i)}finally{r.f()}}(e)}))).observe(e,{childList:!0})},destroy:function(){r&&r.disconnect(),i=!0}}}function vf(e,t,n,r){var i,a={},o=null,s=null,l=!1;var u={init:function(){i=new IntersectionObserver((function(e){l||(e.forEach((function(e){var n=t.indexOf(e.target);a[n]=e})),o=null,s=null,n.emit("slidesInView"))}),{root:e.parentElement,threshold:r}),t.forEach((function(e){return i.observe(e)}))},destroy:function(){i&&i.disconnect(),l=!0},get:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e&&o)return o;if(!e&&s)return s;var t=function(e){return Jh(a).reduce((function(t,n){var r=parseInt(n),i=a[r].isIntersecting;return(e&&i||!e&&!i)&&t.push(r),t}),[])}(e);return e&&(o=t),e||(s=t),t}};return u}function gf(e,t,n,r,i,a,o,s,l){var u=e.startEdge,c=e.endEdge,h=$h(r);var f={groupSlides:function(e){return h?function(e,t){return Gh(e).filter((function(e){return e%t===0})).map((function(n){return e.slice(n,n+t)}))}(e,r):function(e){return e.length?Gh(e).reduce((function(r,h){var f=Xh(r)||0,d=0===f,p=h===Kh(e),m=a[u]-o[f][u],v=a[u]-o[h][c],g=!i&&d?t.apply(s):0;return Hh(v-(!i&&p?t.apply(l):0)-(m+g))>n&&r.push(h),p&&r.push(e.length),r}),[]).map((function(t,n,r){var i=Math.max(r[n-1]||0);return e.slice(i,t)})):[]}(e)}};return f}function yf(e,t,n,r,i,a,o,s){var l=a.align,u=a.axis,c=a.direction,h=a.startIndex,f=a.loop,d=a.duration,p=a.dragFree,m=a.dragThreshold,v=a.inViewThreshold,g=a.slidesToScroll,y=a.skipSnaps,_=a.containScroll,x=a.watchResize,b=a.watchSlides,w=a.watchDrag,k=t.getBoundingClientRect(),E=n.map((function(e){return e.getBoundingClientRect()})),S=function(e){var t="rtl"===e?-1:1,n={apply:function(e){return e*t}};return n}(c),T=function(e,t){var n="y"===e?"y":"x";return{scroll:n,cross:"y"===e?"x":"y",startEdge:"y"===n?"top":"rtl"===t?"right":"left",endEdge:"y"===n?"bottom":"rtl"===t?"left":"right",measureSize:function(e){var t=e.width,r=e.height;return"x"===n?t:r}}}(u,c),C=T.measureSize(k),M=function(e){var t={measure:function(t){return e*(t/100)}};return t}(C),A=tf(l,C),P=!f&&!!_,I=function(e,t,n,r,i,a){var o=e.measureSize,s=e.startEdge,l=e.endEdge,u=n[0]&&i,c=function(){if(!u)return 0;var e=n[0];return Hh(t[s]-e[s])}(),h=function(){if(!u)return 0;var e=a.getComputedStyle(Xh(r));return parseFloat(e.getPropertyValue("margin-".concat(l)))}(),f=n.map(o),d=n.map((function(e,t,n){var r=!t,i=t===Kh(n);return r?f[t]+c:i?f[t]+h:n[t+1][s]-e[s]})).map(Hh);return{slideSizes:f,slideSizesWithGaps:d,startGap:c,endGap:h}}(T,k,E,n,f||!!_,i),z=I.slideSizes,L=I.slideSizesWithGaps,D=gf(T,S,C,g,f,k,E,I.startGap,I.endGap),R=function(e,t,n,r,i){var a=e.startEdge,o=e.endEdge,s=i.groupSlides,l=s(r).map((function(e){return Xh(e)[o]-e[0][a]})).map(Hh).map(t.measure),u=r.map((function(e){return n[a]-e[a]})).map((function(e){return-Hh(e)})),c=s(u).map((function(e){return e[0]})).map((function(e,t){return e+l[t]}));return{snaps:u,snapsAligned:c}}(T,A,k,E,D),O=R.snaps,j=R.snapsAligned,N=-Xh(O)+Xh(L),B=function(e,t,n,r){var i=nf(-t+e,0),a=n.map(i.constrain).map((function(e){return parseFloat(e.toFixed(3))})),o=function(){var e=a[0],t=Xh(a);return nf(a.lastIndexOf(e),a.indexOf(t)+1)}();return{snapsContained:function(){if(t<=e)return[i.max];if("keepSnaps"===r)return a;var n=o.min,s=o.max;return a.slice(n,s)}(),scrollContainLimit:o}}(C,N,j,_),F=B.snapsContained,$=B.scrollContainLimit,V=P?F:j,U=function(e,t,n){var r=t[0];return{limit:nf(n?r-e:Xh(t),r)}}(N,V,f),Z=U.limit,H=rf(Kh(V),h,f),W=H.clone(),q=Gh(n),G={start:function(){return s.start(le)},stop:function(){return s.stop(le)},update:function(){return function(e){var t=e.dragHandler,n=e.scrollBody,r=e.scrollBounds,i=e.eventHandler,a=e.animation,o=e.options.loop,s=t.pointerDown();o||r.constrain(s);var l=n.seek().settled();l&&!s&&(a.stop(),i.emit("settle")),l||i.emit("scroll")}(le)},render:function(e){return function(e,t){var n=e.scrollBody,r=e.translate,i=e.location,a=e.offsetLocation,o=e.scrollLooper,s=e.slideLooper,l=e.options.loop,u=n.velocity();a.set(i.get()-u+u*t),l&&(o.loop(n.direction()),s.loop()),r.to(a.get())}(le,e)}},X=V[H.get()],K=ff(X),Y=ff(X),J=ff(X),Q=function(e,t,n,r){var i=!0,a=0,o=0,s=n,l=r,u=e.get(),c=0;function h(e){return s=e,d}function f(e){return l=e,d}var d={direction:function(){return o},duration:function(){return s},velocity:function(){return a},seek:function(){var n=t.get()-e.get(),r=0;return s?(a+=n/s,u+=a*=l,e.add(a),r=u-c):(a=0,e.set(t),r=n),o=Wh(r),c=u,i=Hh(n)<.001,d},settled:function(){return i},useBaseFriction:function(){return f(r)},useBaseDuration:function(){return h(n)},useFriction:f,useDuration:h};return d}(K,J,d,.68),ee=hf(f,V,N,Z,J),te=function(e,t,n,r,i,a,o){function s(r){var s=r.distance,l=r.index!==t.get();a.add(s),s&&(i.duration()?e.start():(e.update(),e.render(1),e.update())),l&&(n.set(t.get()),t.set(r.index),o.emit("select"))}var l={distance:function(e,t){s(r.byDistance(e,t))},index:function(e,n){var i=t.clone().set(e);s(r.byIndex(i.get(),n))}};return l}(G,H,W,ee,Q,J,o),ne=function(e){var t=e.max,n=e.length,r={get:function(e){return n?(e-t)/-n:0}};return r}(Z),re=af(),ie=vf(t,n,o,v),ae=function(e,t,n,r,i,a){var o=i.groupSlides,s=r.min,l=r.max,u=function(){var r=o(a);return!n||t<=e?r:r.slice(s,l).map((function(e,t,n){var r=!t,i=!r&&t===Kh(n);return r?Yh(Xh(n[0])+1):i?Yh(Kh(a)-Xh(n)[0]+1,Xh(n)[0]):e}))}();return{slideRegistry:u}}(C,N,P,$,D,q),oe=ae.slideRegistry,se=function(e,t,n,r,i,a){var o=0;function s(e){"Tab"===e.code&&(o=(new Date).getTime())}function l(s){a.add(s,"focus",(function(){if(!((new Date).getTime()-o>10)){e.scrollLeft=0;var a=t.indexOf(s),l=n.findIndex((function(e){return e.includes(a)}));$h(l)&&(i.useDuration(0),r.index(l,0))}}),{passive:!0,capture:!0})}return{init:function(){a.add(document,"keydown",s,!1),t.forEach(l)}}}(e,n,oe,te,Q,re),le={ownerDocument:r,ownerWindow:i,eventHandler:o,containerRect:k,slideRects:E,animation:G,axis:T,direction:S,dragHandler:of(T,S,e,r,i,J,sf(T,i),K,G,te,Q,ee,H,o,M,p,m,y,.68,w),eventStore:re,percentOfView:M,index:H,indexPrevious:W,limit:Z,location:K,offsetLocation:Y,options:a,resizeHandler:lf(t,o,i,n,T,x),scrollBody:Q,scrollBounds:uf(Z,K,J,Q,M),scrollLooper:cf(N,Z,Y,[K,Y,J]),scrollProgress:ne,scrollSnapList:V.map(ne.get),scrollSnaps:V,scrollTarget:ee,scrollTo:te,slideLooper:pf(T,S,C,N,z,L,O,V,Y,n),slideFocus:se,slidesHandler:mf(t,o,b),slidesInView:ie,slideIndexes:q,slideRegistry:oe,slidesToScroll:D,target:J,translate:df(T,S,t)};return le}var _f={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function xf(e){function t(e,t){return Qh(e,t||{})}var n={mergeOptions:t,optionsAtMedia:function(n){var r=n.breakpoints||{},i=Jh(r).filter((function(t){return e.matchMedia(t).matches})).map((function(e){return r[e]})).reduce((function(e,n){return t(e,n)}),{});return t(n,i)},optionsMediaQueries:function(t){return t.map((function(e){return Jh(e.breakpoints||{})})).reduce((function(e,t){return e.concat(t)}),[]).map(e.matchMedia)}};return n}function bf(e,t,n){var r,i,o,s,l=e.ownerDocument,u=l.defaultView,c=xf(u),h=function(e){var t=[],n={init:function(n,r){return t=r.filter((function(t){var n=t.options;return!1!==e.optionsAtMedia(n).active})),t.forEach((function(t){return t.init(n,e)})),r.reduce((function(e,t){return Object.assign(e,(0,Ye.Z)({},t.name,t))}),{})},destroy:function(){t=t.filter((function(e){return e.destroy()}))}};return n}(c),f=af(),d=af(),p=function(){var e,t={};function n(e){return t[e]||[]}var r={init:function(t){e=t},emit:function(t){return n(t).forEach((function(n){return n(e,t)})),r},off:function(e,i){return t[e]=n(e).filter((function(e){return e!==i})),r},on:function(e,i){return t[e]=n(e).concat([i]),r}};return r}(),m=bf.animationRealms,v=c.mergeOptions,g=c.optionsAtMedia,y=c.optionsMediaQueries,_=p.on,x=p.off,b=p.emit,w=A,k=!1,E=v(_f,bf.globalOptions),S=v(E),T=[];function C(t,n){var r=yf(e,o,s,l,u,t,p,n);return t.loop&&!r.slideLooper.canLoop()?C(Object.assign({},t,{loop:!1}),n):r}function M(t,n){if(!k){var c=m.find((function(e){return e.window===u})),p=c||function(e){var t=1e3/60,n=[],r=null,i=0,a=0;function o(s){r||(r=s);var l=s-r;for(r=s,i+=l;i>=t;)n.forEach((function(e){return e.animation.update()})),i-=t;var u=Hh(i/t);n.forEach((function(e){return e.animation.render(u)})),a&&e.requestAnimationFrame(o)}var s={start:function(t){n.includes(t)||n.push(t),a||(a=e.requestAnimationFrame(o))},stop:function(t){n=n.filter((function(e){return e!==t})),n.length||(e.cancelAnimationFrame(a),r=null,i=0,a=0)},reset:function(){r=null,i=0},window:e};return s}(u);c||m.push(p),E=v(E,t),S=g(E),T=n||T,function(){var t=S,n=t.container,r=t.slides,i=Vh(n)?e.querySelector(n):n;o=i||e.children[0];var a=Vh(r)?o.querySelectorAll(r):r;s=[].slice.call(a||o.children)}(),r=C(S,p),y([E].concat((0,a.Z)(T.map((function(e){return e.options}))))).forEach((function(e){return f.add(e,"change",A)})),S.active&&(r.translate.to(r.location.get()),r.slidesInView.init(),r.slideFocus.init(),r.eventHandler.init(L),r.resizeHandler.init(L),r.slidesHandler.init(L),d.add(l,"visibilitychange",(function(){l.hidden&&p.reset()})),r.options.loop&&r.slideLooper.loop(),o.offsetParent&&s.length&&r.dragHandler.init(L),i=h.init(L,T))}}function A(e,t){var n=z();P(),M(v({startIndex:n},e),t),p.emit("reInit")}function P(){r.dragHandler.destroy(),r.animation.stop(),r.eventStore.clear(),r.translate.clear(),r.slideLooper.clear(),r.resizeHandler.destroy(),r.slidesHandler.destroy(),h.destroy(),f.clear(),d.clear()}function I(e,t,n){S.active&&!k&&(r.scrollBody.useBaseFriction().useDuration(t?0:S.duration),r.scrollTo.index(e,n||0))}function z(){return r.index.get()}var L={canScrollNext:function(){return r.index.add(1).get()!==z()},canScrollPrev:function(){return r.index.add(-1).get()!==z()},containerNode:function(){return o},internalEngine:function(){return r},destroy:function(){k||(k=!0,f.clear(),P(),p.emit("destroy"))},off:x,on:_,emit:b,plugins:function(){return i},previousScrollSnap:function(){return r.indexPrevious.get()},reInit:w,rootNode:function(){return e},scrollNext:function(e){I(r.index.add(1).get(),!0===e,-1)},scrollPrev:function(e){I(r.index.add(-1).get(),!0===e,1)},scrollProgress:function(){return r.scrollProgress.get(r.location.get())},scrollSnapList:function(){return r.scrollSnapList},scrollTo:I,selectedScrollSnap:z,slideNodes:function(){return s},slidesInView:function(){return r.slidesInView.get()},slidesNotInView:function(){return r.slidesInView.get(!1)}};return M(t,n),setTimeout((function(){return p.emit("init")}),0),L}function wf(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(0,e.useRef)(t),a=(0,e.useRef)(n),o=(0,e.useState)(),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,e.useState)(),h=(0,i.Z)(c,2),f=h[0],d=h[1],p=(0,e.useCallback)((function(){l&&l.reInit(r.current,a.current)}),[l]);return(0,e.useEffect)((function(){if("undefined"!==typeof window&&window.document&&window.document.createElement&&f){bf.globalOptions=wf.globalOptions;var e=bf(f,r.current,a.current);return u(e),function(){return e.destroy()}}u(void 0)}),[f,u]),(0,e.useEffect)((function(){Bh(r.current,t)||(r.current=t,p())}),[t,p]),(0,e.useEffect)((function(){(function(e,t){if(e.length!==t.length)return!1;var n=Fh(e),r=Fh(t);return n.every((function(e,t){return Bh(e,r[t])}))})(a.current,n)||(a.current=n,p())}),[n,p]),[d,l]}bf.animationRealms=[],bf.globalOptions=void 0,wf.globalOptions=void 0;var kf=function(){var t=(0,e.useState)([]),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=(0,e.useState)([]),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=wf({align:"start",dragFree:!0}),h=(0,i.Z)(c,1)[0],f=wf({align:"start",dragFree:!0}),d=(0,i.Z)(f,1)[0],p=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.get("http://localhost:5000/products/filter?category=null&filter=price(high)");case 3:(t=e.sent).data.success&&a(t.data.products.splice(0,5)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.get("http://localhost:5000/products/filter?category=null&filter=price(low)");case 3:(t=e.sent).data.success&&u(t.data.products.splice(0,6)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){p(),m()}),[]),(0,kh.jsxs)("div",{children:[(0,kh.jsx)(Dh,{}),(0,kh.jsxs)("div",{className:"best-seller my-10",children:[(0,kh.jsx)("h1",{className:"text-2xl md:text-3xl mx-6 my-12 font-[font1] font-semibold",children:"Most Selling Products"}),(0,kh.jsx)("div",{className:"embla m-6",ref:d,children:(0,kh.jsx)("div",{className:"embla__container gap-7",children:r.length>0&&r.map((function(e){return(0,kh.jsx)(jh,{className:"embla__slide",product:e},e._id)}))})})]}),(0,kh.jsx)("div",{className:"discount my-6 relative",children:(0,kh.jsxs)("div",{className:"rounded-xl shadow-xl p-8 w-full md:w-[60%] lg:w-[40%] text-center text-white absolute top-[30%] right-[5%]",children:[(0,kh.jsxs)("h1",{className:"text-2xl md:text-4xl tracking-wide font-sans font-bold my-3 mx-6",children:["Get 5% Cash ",(0,kh.jsx)("br",{})," Back On"," ",(0,kh.jsx)("span",{className:"font-sans",children:"\u20b9 50,000"}),"."]}),(0,kh.jsx)("p",{className:"font-[font1] text-xl m-6 text-center",children:"Shopping is a bit of a relaxing hobby for me, which is sometimes troubling for the bank balance."})]})}),(0,kh.jsxs)("div",{className:"best-deals my-10",children:[(0,kh.jsx)("h1",{className:"text-2xl md:text-3xl mx-6 my-12 font-[font1] font-semibold",children:"Today's Best Deals For You!"}),(0,kh.jsx)("div",{className:"embla m-6",ref:h,children:(0,kh.jsx)("div",{className:"embla__container gap-7",children:l.length>0&&l.map((function(e){return(0,kh.jsx)(jh,{className:"embla__slide",product:e},e._id)}))})})]}),(0,kh.jsxs)("div",{className:"info flex justify-evenly bg-[#F0F0F0] w-full h-[65vh] items-center",children:[(0,kh.jsxs)("div",{className:"ship flex flex-col gap-4 items-center p-8",children:[(0,kh.jsxs)("svg",{preserveAspectRatio:"xMidYMid meet","data-bbox":"73.983 86.133 54.427 41.592",viewBox:"73.983 86.133 54.427 41.592",height:"32",width:"32",xmlns:"http://www.w3.org/2000/svg","data-type":"color",role:"presentation","aria-hidden":"true",fill:"#000000",children:[(0,kh.jsx)("defs",{}),(0,kh.jsxs)("g",{children:[(0,kh.jsx)("path",{d:"M89.713 102.942a1.158 1.158 0 0 0-1.628.143l-5.845 6.972c-.583-4.157.267-8.381 2.496-12.101 2.727-4.551 7.188-7.839 12.239-9.023a18.465 18.465 0 0 1 18.088 5.778 1.156 1.156 0 0 0 1.733-1.528 20.777 20.777 0 0 0-20.349-6.499c-5.655 1.325-10.646 5.001-13.693 10.085a20.825 20.825 0 0 0-2.989 11.164l-3.676-5.498a1.155 1.155 0 0 0-1.92 1.284l6.42 9.602c.202.302.535.492.898.511.02.002.042.002.062.002.341 0 .665-.15.885-.413l7.421-8.851a1.155 1.155 0 0 0-.142-1.628z",fill:"#2E3192","data-color":"1"}),(0,kh.jsx)("path",{d:"M128.214 112.472l-6.366-9.526c-.011-.017-.021-.033-.033-.049l-.018-.027c-.026-.04-.071-.059-.101-.095-.063-.066-.12-.134-.196-.183a1.124 1.124 0 0 0-.599-.233 1.153 1.153 0 0 0-.949.411l-7.424 8.852a1.156 1.156 0 0 0 1.771 1.485l5.688-6.783c.228 8.402-5.954 16.574-14.578 18.594-6.229 1.462-12.673-.356-17.232-4.868a1.154 1.154 0 1 0-1.624 1.642c3.961 3.919 9.186 6.033 14.591 6.033a21.028 21.028 0 0 0 4.792-.558c9.163-2.146 15.868-10.503 16.341-19.421l4.017 6.011a1.152 1.152 0 0 0 1.602.318c.53-.355.674-1.073.318-1.603z",fill:"#2E3192","data-color":"1"})]})]}),(0,kh.jsx)("h1",{className:"tracking-wide font-[font1]",children:"Shipping and Returns"})]}),(0,kh.jsxs)("div",{className:"payment flex flex-col gap-4 items-center p-8",children:[(0,kh.jsx)(ih,{icon:vh,className:"text-2xl"}),(0,kh.jsx)("h1",{className:"tracking-wide font-[font1]",children:"Secured Payments"})]}),(0,kh.jsxs)("div",{className:"customer flex flex-col gap-4 items-center p-8",children:[(0,kh.jsx)("img",{width:"32",height:"32",src:"https://img.icons8.com/3d-fluency/32/online-support--v1.png",alt:"online-support--v1"}),(0,kh.jsx)("h1",{className:"tracking-wide font-[font1]",children:"24/7 Customer Service"})]})]})]})},Ef=n.p+"static/media/Profile.5faf09a7795d28bf5a2b.png",Sf=function(e){var t=e.user,n=e.fetchUsers,r=new Date(t.createdAt.split("T")[0]),i=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.put("http://localhost:5000/admin/dashboard/change-status",{id:t._id},{withCredentials:!0});case 3:e.sent.data.success&&n(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,kh.jsxs)("div",{className:"h-fit bg-[#FFFFFF] shadow-xl overflow-hidden rounded-t-3xl rounded-b-2xl",children:[(0,kh.jsxs)("div",{className:"info-header flex justify-evenly items-center bg-[#6036E8] p-1 border-b-[1px]",children:[(0,kh.jsx)("img",{src:Ef,alt:"Profile",className:"my-6 w-12 rounded-full"}),(0,kh.jsx)("h1",{className:"text-white font-sans text-xl md:text-2xl tracking-wider",children:t.isAdmin?"Admin":t.name}),(0,kh.jsx)("h1",{className:"text-[#A4A3BC] font-[font text-sm uppercase",children:r.getDate()+" "+r.toLocaleString("default",{month:"short"})})]}),(0,kh.jsxs)("div",{className:"info-body p-5 m-4",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-lg",children:t.email}),(0,kh.jsxs)("h1",{className:"text-sm text-[#737586] font-[font1] my-2",children:[t.phone_no?t.phone_no:"No Phone No!",(0,kh.jsx)("span",{className:"mx-3 font-[font4]",children:t.gender})]}),(0,kh.jsx)("h1",{className:"".concat(t.blocked?"text-red-500":"text-green-600"," font-[font1]"),children:t.blocked?"Blocked":"Active"}),t.isAdmin?"":(0,kh.jsx)("div",{className:"operation my-4 flex gap-5 items-center",children:(0,kh.jsx)("button",{onClick:function(){return i()},className:"px-5 py-2 text-white ".concat(t.blocked?"bg-green-500":"bg-red-500"," font-[font4] text-sm"),children:t.blocked?"Unblock":"Block"})})]})]})};function Tf(){return Tf="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Tf.apply(this,arguments)}function Cf(e){return e+.5|0}var Mf=function(e,t,n){return Math.max(Math.min(e,n),t)};function Af(e){return Mf(Cf(2.55*e),0,255)}function Pf(e){return Mf(Cf(255*e),0,255)}function If(e){return Mf(Cf(e/2.55)/100,0,1)}function zf(e){return Mf(Cf(100*e),0,100)}var Lf={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Df=(0,a.Z)("0123456789ABCDEF"),Rf=function(e){return Df[15&e]},Of=function(e){return Df[(240&e)>>4]+Df[15&e]},jf=function(e){return(240&e)>>4===(15&e)};function Nf(e){var t=function(e){return jf(e.r)&&jf(e.g)&&jf(e.b)&&jf(e.a)}(e)?Rf:Of;return e?"#"+t(e.r)+t(e.g)+t(e.b)+function(e,t){return e<255?t(e):""}(e.a,t):void 0}var Bf=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ff(e,t,n){var r=t*Math.min(n,1-n),i=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function $f(e,t,n){var r=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function Vf(e,t,n){var r,i=Ff(e,1,.5);for(t+n>1&&(t*=r=1/(t+n),n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function Uf(e){var t,n,r,i=e.r/255,a=e.g/255,o=e.b/255,s=Math.max(i,a,o),l=Math.min(i,a,o),u=(s+l)/2;return s!==l&&(r=s-l,n=u>.5?r/(2-s-l):r/(s+l),t=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(i,a,o,r,s),t=60*t+.5),[0|t,n||0,u]}function Zf(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Pf)}function Hf(e,t,n){return Zf(Ff,e,t,n)}function Wf(e){return(e%360+360)%360}function qf(e){var t,n=Bf.exec(e),r=255;if(n){n[5]!==t&&(r=n[6]?Af(+n[5]):Pf(+n[5]));var i=Wf(+n[2]),a=+n[3]/100,o=+n[4]/100;return t="hwb"===n[1]?function(e,t,n){return Zf(Vf,e,t,n)}(i,a,o):"hsv"===n[1]?function(e,t,n){return Zf($f,e,t,n)}(i,a,o):Hf(i,a,o),{r:t[0],g:t[1],b:t[2],a:r}}}var Gf,Xf={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Kf={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Yf(e){Gf||(Gf=function(){var e,t,n,r,i,a={},o=Object.keys(Kf),s=Object.keys(Xf);for(e=0;e<o.length;e++){for(r=i=o[e],t=0;t<s.length;t++)n=s[t],i=i.replace(n,Xf[n]);n=parseInt(Kf[r],16),a[i]=[n>>16&255,n>>8&255,255&n]}return a}(),Gf.transparent=[0,0,0,0]);var t=Gf[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}var Jf=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var Qf=function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055},ed=function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)};function td(e,t,n){if(e){var r=Uf(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=Hf(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function nd(e,t){return e?Object.assign(t||{},e):e}function rd(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Pf(e[3]))):(t=nd(e,{r:0,g:0,b:0,a:1})).a=Pf(t.a),t}function id(e){return"r"===e.charAt(0)?function(e){var t,n,r,i=Jf.exec(e),a=255;if(i){if(i[7]!==t){var o=+i[7];a=i[8]?Af(o):Mf(255*o,0,255)}return t=+i[1],n=+i[3],r=+i[5],{r:t=255&(i[2]?Af(t):Mf(t,0,255)),g:n=255&(i[4]?Af(n):Mf(n,0,255)),b:r=255&(i[6]?Af(r):Mf(r,0,255)),a:a}}}(e):qf(e)}var ad=function(){function e(t){if((0,o.Z)(this,e),t instanceof e)return t;var n,r=typeof t;"object"===r?n=rd(t):"string"===r&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Lf[e[1]],g:255&17*Lf[e[2]],b:255&17*Lf[e[3]],a:5===n?17*Lf[e[4]]:255}:7!==n&&9!==n||(t={r:Lf[e[1]]<<4|Lf[e[2]],g:Lf[e[3]]<<4|Lf[e[4]],b:Lf[e[5]]<<4|Lf[e[6]],a:9===n?Lf[e[7]]<<4|Lf[e[8]]:255})),t}(t)||Yf(t)||id(t)),this._rgb=n,this._valid=!!n}return(0,s.Z)(e,[{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var e=nd(this._rgb);return e&&(e.a=If(e.a)),e},set:function(e){this._rgb=rd(e)}},{key:"rgbString",value:function(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(If(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}},{key:"hexString",value:function(){return this._valid?Nf(this._rgb):void 0}},{key:"hslString",value:function(){return this._valid?function(e){if(e){var t=Uf(e),n=t[0],r=zf(t[1]),i=zf(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(If(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}}(this._rgb):void 0}},{key:"mix",value:function(e,t){if(e){var n,r=this.rgb,i=e.rgb,a=t===n?.5:t,o=2*a-1,s=r.a-i.a,l=((o*s===-1?o:(o+s)/(1+o*s))+1)/2;n=1-l,r.r=255&l*r.r+n*i.r+.5,r.g=255&l*r.g+n*i.g+.5,r.b=255&l*r.b+n*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}},{key:"interpolate",value:function(e,t){return e&&(this._rgb=function(e,t,n){var r=ed(If(e.r)),i=ed(If(e.g)),a=ed(If(e.b));return{r:Pf(Qf(r+n*(ed(If(t.r))-r))),g:Pf(Qf(i+n*(ed(If(t.g))-i))),b:Pf(Qf(a+n*(ed(If(t.b))-a))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}},{key:"clone",value:function(){return new e(this.rgb)}},{key:"alpha",value:function(e){return this._rgb.a=Pf(e),this}},{key:"clearer",value:function(e){return this._rgb.a*=1-e,this}},{key:"greyscale",value:function(){var e=this._rgb,t=Cf(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}},{key:"opaquer",value:function(e){return this._rgb.a*=1+e,this}},{key:"negate",value:function(){var e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}},{key:"lighten",value:function(e){return td(this._rgb,2,e),this}},{key:"darken",value:function(e){return td(this._rgb,2,-e),this}},{key:"saturate",value:function(e){return td(this._rgb,1,e),this}},{key:"desaturate",value:function(e){return td(this._rgb,1,-e),this}},{key:"rotate",value:function(e){return function(e,t){var n=Uf(e);n[0]=Wf(n[0]+t),n=Hf(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}]),e}();function od(){}var sd=function(){var e=0;return function(){return e++}}();function ld(e){return null===e||"undefined"===typeof e}function ud(e){if(Array.isArray&&Array.isArray(e))return!0;var t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function cd(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function hd(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function fd(e,t){return hd(e)?e:t}function dd(e,t){return"undefined"===typeof e?t:e}var pd=function(e,t){return"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e};function md(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function vd(e,t,n,r){var i,a,o;if(ud(e))if(a=e.length,r)for(i=a-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<a;i++)t.call(n,e[i],i);else if(cd(e))for(a=(o=Object.keys(e)).length,i=0;i<a;i++)t.call(n,e[o[i]],o[i])}function gd(e,t){var n,r,i,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],a=t[n],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function yd(e){if(ud(e))return e.map(yd);if(cd(e)){for(var t=Object.create(null),n=Object.keys(e),r=n.length,i=0;i<r;++i)t[n[i]]=yd(e[n[i]]);return t}return e}function _d(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function xd(e,t,n,r){if(_d(e)){var i=t[e],a=n[e];cd(i)&&cd(a)?bd(i,a,r):t[e]=yd(a)}}function bd(e,t,n){var r=ud(t)?t:[t],i=r.length;if(!cd(e))return e;for(var a,o=(n=n||{}).merger||xd,s=0;s<i;++s)if(cd(a=r[s]))for(var l=Object.keys(a),u=0,c=l.length;u<c;++u)o(l[u],e,a,n);return e}function wd(e,t){return bd(e,t,{merger:kd})}function kd(e,t,n){if(_d(e)){var r=t[e],i=n[e];cd(r)&&cd(i)?wd(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=yd(i))}}var Ed={"":function(e){return e},x:function(e){return e.x},y:function(e){return e.y}};function Sd(e){var t=function(e){var t,n=e.split("."),r=[],i="",a=(0,w.Z)(n);try{for(a.s();!(t=a.n()).done;)(i+=t.value).endsWith("\\")?i=i.slice(0,-1)+".":(r.push(i),i="")}catch(o){a.e(o)}finally{a.f()}return r}(e);return function(e){var n,r=(0,w.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(""===i)break;e=e&&e[i]}}catch(a){r.e(a)}finally{r.f()}return e}}function Td(e,t){return(Ed[t]||(Ed[t]=Sd(t)))(e)}function Cd(e){return e.charAt(0).toUpperCase()+e.slice(1)}var Md=function(e){return"undefined"!==typeof e},Ad=function(e){return"function"===typeof e},Pd=function(e,t){if(e.size!==t.size)return!1;var n,r=(0,w.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!t.has(i))return!1}}catch(a){r.e(a)}finally{r.f()}return!0};var Id=Math.PI,zd=2*Id,Ld=zd+Id,Dd=Number.POSITIVE_INFINITY,Rd=Id/180,Od=Id/2,jd=Id/4,Nd=2*Id/3,Bd=Math.log10,Fd=Math.sign;function $d(e,t,n){return Math.abs(e-t)<n}function Vd(e){var t=Math.round(e);e=$d(e,t,e/1e3)?t:e;var n=Math.pow(10,Math.floor(Bd(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Ud(e){return!isNaN(parseFloat(e))&&isFinite(e)}function Zd(e,t,n){var r,i,a;for(r=0,i=e.length;r<i;r++)a=e[r][n],isNaN(a)||(t.min=Math.min(t.min,a),t.max=Math.max(t.max,a))}function Hd(e){return e*(Id/180)}function Wd(e){return e*(180/Id)}function qd(e){if(hd(e)){for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}}function Gd(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),a=Math.atan2(r,n);return a<-.5*Id&&(a+=zd),{angle:a,distance:i}}function Xd(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Kd(e,t){return(e-t+Ld)%zd-Id}function Yd(e){return(e%zd+zd)%zd}function Jd(e,t,n,r){var i=Yd(e),a=Yd(t),o=Yd(n),s=Yd(a-i),l=Yd(o-i),u=Yd(i-a),c=Yd(i-o);return i===a||i===o||r&&a===o||s>l&&u<c}function Qd(e,t,n){return Math.max(t,Math.min(n,e))}function ep(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function tp(e,t,n){n=n||function(n){return e[n]<t};for(var r,i=e.length-1,a=0;i-a>1;)n(r=a+i>>1)?a=r:i=r;return{lo:a,hi:i}}var np=function(e,t,n,r){return tp(e,n,r?function(r){var i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:function(r){return e[r][t]<n})},rp=function(e,t,n){return tp(e,n,(function(r){return e[r][t]>=n}))};var ip=["push","pop","shift","splice","unshift"];function ap(e,t){var n=e._chartjs;if(n){var r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(ip.forEach((function(t){delete e[t]})),delete e._chartjs)}}function op(e){var t=new Set(e);return t.size===e.length?e:Array.from(t)}var sp="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function lp(e,t){var n=[],r=!1;return function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];n=a,r||(r=!0,sp.call(window,(function(){r=!1,e.apply(t,n)})))}}var up=function(e){return"start"===e?"left":"end"===e?"right":"center"},cp=function(e,t,n){return"start"===e?t:"end"===e?n:(t+n)/2};function hp(e,t,n){var r=t.length,i=0,a=r;if(e._sorted){var o=e.iScale,s=e._parsed,l=o.axis,u=o.getUserBounds(),c=u.min,h=u.max,f=u.minDefined,d=u.maxDefined;f&&(i=Qd(Math.min(np(s,l,c).lo,n?r:np(t,l,o.getPixelForValue(c)).lo),0,r-1)),a=d?Qd(Math.max(np(s,o.axis,h,!0).hi+1,n?0:np(t,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:r-i}return{start:i,count:a}}function fp(e){var t=e.xScale,n=e.yScale,r=e._scaleRanges,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;var a=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),a}var dp=function(e){return 0===e||1===e},pp=function(e,t,n){return-Math.pow(2,10*(e-=1))*Math.sin((e-t)*zd/n)},mp=function(e,t,n){return Math.pow(2,-10*e)*Math.sin((e-t)*zd/n)+1},vp={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*Od)},easeOutSine:function(e){return Math.sin(e*Od)},easeInOutSine:function(e){return-.5*(Math.cos(Id*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return dp(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1)))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){return dp(e)?e:pp(e,.075,.3)},easeOutElastic:function(e){return dp(e)?e:mp(e,.075,.3)},easeInOutElastic:function(e){var t=.1125;return dp(e)?e:e<.5?.5*pp(2*e,t,.45):.5+.5*mp(2*e-1,t,.45)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-vp.easeOutBounce(1-e)},easeOutBounce:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*vp.easeInBounce(2*e):.5*vp.easeOutBounce(2*e-1)+.5}};function gp(e){if(e&&"object"===typeof e){var t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function yp(e){return gp(e)?e:new ad(e)}function _p(e){return gp(e)?e:new ad(e).saturate(.5).darken(.1).hexString()}var xp=["x","y","borderWidth","radius","tension"],bp=["color","borderColor","backgroundColor"];var wp=new Map;function kp(e,t,n){return function(e,t){t=t||{};var n=e+JSON.stringify(t),r=wp.get(n);return r||(r=new Intl.NumberFormat(e,t),wp.set(n,r)),r}(t,n).format(e)}var Ep={values:function(e){return ud(e)?e:""+e},numeric:function(e,t,n){if(0===e)return"0";var r,i=this.chart.options.locale,a=e;if(n.length>1){var o=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(o<1e-4||o>1e15)&&(r="scientific"),a=function(e,t){var n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}var s=Bd(Math.abs(a)),l=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),kp(e,i,u)},logarithmic:function(e,t,n){if(0===e)return"0";var r=n[t].significand||e/Math.pow(10,Math.floor(Bd(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Ep.numeric.call(this,e,t,n):""}};var Sp={formatters:Ep};var Tp=Object.create(null),Cp=Object.create(null);function Mp(e,t){if(!t)return e;for(var n=t.split("."),r=0,i=n.length;r<i;++r){var a=n[r];e=e[a]||(e[a]=Object.create(null))}return e}function Ap(e,t,n){return"string"===typeof t?bd(Mp(e,t),n):bd(Mp(e,""),t)}var Pp=function(){function e(t,n){(0,o.Z)(this,e),this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=function(e){return e.chart.platform.getDevicePixelRatio()},this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=function(e,t){return _p(t.backgroundColor)},this.hoverBorderColor=function(e,t){return _p(t.borderColor)},this.hoverColor=function(e,t){return _p(t.color)},this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(n)}return(0,s.Z)(e,[{key:"set",value:function(e,t){return Ap(this,e,t)}},{key:"get",value:function(e){return Mp(this,e)}},{key:"describe",value:function(e,t){return Ap(Cp,e,t)}},{key:"override",value:function(e,t){return Ap(Tp,e,t)}},{key:"route",value:function(e,t,n,r){var i,a=Mp(this,e),o=Mp(this,n),s="_"+t;Object.defineProperties(a,(i={},(0,Ye.Z)(i,s,{value:a[t],writable:!0}),(0,Ye.Z)(i,t,{enumerable:!0,get:function(){var e=this[s],t=o[r];return cd(e)?Object.assign({},t,e):dd(e,t)},set:function(e){this[s]=e}}),i))}},{key:"apply",value:function(e){var t=this;e.forEach((function(e){return e(t)}))}}]),e}(),Ip=new Pp({_scriptable:function(e){return!e.startsWith("on")},_indexable:function(e){return"events"!==e},hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:function(e){return"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}}),e.set("animations",{colors:{type:"color",properties:bp},numbers:{type:"number",properties:xp}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:function(e){return 0|e}}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:function(e,t){return t.lineWidth},tickColor:function(e,t){return t.color},offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sp.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:function(e){return!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e},_indexable:function(e){return"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:function(e){return"backdropPadding"!==e&&"callback"!==e},_indexable:function(e){return"backdropPadding"!==e}})}]);function zp(e,t,n,r,i){var a=t[i];return a||(a=t[i]=e.measureText(i).width,n.push(i)),a>r&&(r=a),r}function Lp(e,t,n,r){var i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.save(),e.font=t;var o,s,l,u,c,h=0,f=n.length;for(o=0;o<f;o++)if(void 0===(u=n[o])||null===u||ud(u)){if(ud(u))for(s=0,l=u.length;s<l;s++)void 0===(c=u[s])||null===c||ud(c)||(h=zp(e,i,a,h,c))}else h=zp(e,i,a,h,u);e.restore();var d=a.length/2;if(d>n.length){for(o=0;o<d;o++)delete i[a[o]];a.splice(0,d)}return h}function Dp(e,t,n){var r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Rp(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function Op(e,t,n,r){jp(e,t,n,r,null)}function jp(e,t,n,r,i){var a,o,s,l,u,c,h,f,d=t.pointStyle,p=t.rotation,m=t.radius,v=(p||0)*Rd;if(d&&"object"===typeof d&&("[object HTMLImageElement]"===(a=d.toString())||"[object HTMLCanvasElement]"===a))return e.save(),e.translate(n,r),e.rotate(v),e.drawImage(d,-d.width/2,-d.height/2,d.width,d.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),d){default:i?e.ellipse(n,r,i/2,m,0,0,zd):e.arc(n,r,m,0,zd),e.closePath();break;case"triangle":c=i?i/2:m,e.moveTo(n+Math.sin(v)*c,r-Math.cos(v)*m),v+=Nd,e.lineTo(n+Math.sin(v)*c,r-Math.cos(v)*m),v+=Nd,e.lineTo(n+Math.sin(v)*c,r-Math.cos(v)*m),e.closePath();break;case"rectRounded":l=m-(u=.516*m),o=Math.cos(v+jd)*l,h=Math.cos(v+jd)*(i?i/2-u:l),s=Math.sin(v+jd)*l,f=Math.sin(v+jd)*(i?i/2-u:l),e.arc(n-h,r-s,u,v-Id,v-Od),e.arc(n+f,r-o,u,v-Od,v),e.arc(n+h,r+s,u,v,v+Od),e.arc(n-f,r+o,u,v+Od,v+Id),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,c=i?i/2:l,e.rect(n-c,r-l,2*c,2*l);break}v+=jd;case"rectRot":h=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,s=Math.sin(v)*m,f=Math.sin(v)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+f,r-o),e.lineTo(n+h,r+s),e.lineTo(n-f,r+o),e.closePath();break;case"crossRot":v+=jd;case"cross":h=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,s=Math.sin(v)*m,f=Math.sin(v)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"star":h=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,s=Math.sin(v)*m,f=Math.sin(v)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o),v+=jd,h=Math.cos(v)*(i?i/2:m),o=Math.cos(v)*m,s=Math.sin(v)*m,f=Math.sin(v)*(i?i/2:m),e.moveTo(n-h,r-s),e.lineTo(n+h,r+s),e.moveTo(n+f,r-o),e.lineTo(n-f,r+o);break;case"line":o=i?i/2:Math.cos(v)*m,s=Math.sin(v)*m,e.moveTo(n-o,r-s),e.lineTo(n+o,r+s);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(v)*(i?i/2:m),r+Math.sin(v)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Np(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Bp(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Fp(e){e.restore()}function $p(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){var a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Vp(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Up(e,t,n,r,i){if(i.strikethrough||i.underline){var a=e.measureText(r),o=t-a.actualBoundingBoxLeft,s=t+a.actualBoundingBoxRight,l=n-a.actualBoundingBoxAscent,u=n+a.actualBoundingBoxDescent,c=i.strikethrough?(l+u)/2:u;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(o,c),e.lineTo(s,c),e.stroke()}}function Zp(e,t){var n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Hp(e,t,n,r,i){var a,o,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},l=ud(t)?t:[t],u=s.strokeWidth>0&&""!==s.strokeColor;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ld(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),a=0;a<l.length;++a)o=l[a],s.backdrop&&Zp(e,s.backdrop),u&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),ld(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(o,n,r,s.maxWidth)),e.fillText(o,n,r,s.maxWidth),Up(e,n,r,o,s),r+=Number(i.lineHeight);e.restore()}function Wp(e,t){var n=t.x,r=t.y,i=t.w,a=t.h,o=t.radius;e.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Id,Id,!0),e.lineTo(n,r+a-o.bottomLeft),e.arc(n+o.bottomLeft,r+a-o.bottomLeft,o.bottomLeft,Id,Od,!0),e.lineTo(n+i-o.bottomRight,r+a),e.arc(n+i-o.bottomRight,r+a-o.bottomRight,o.bottomRight,Od,0,!0),e.lineTo(n+i,r+o.topRight),e.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Od,!0),e.lineTo(n+o.topLeft,r)}var qp=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Gp=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Xp(e,t){var n=(""+e).match(qp);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}var Kp=function(e){return+e||0};function Yp(e,t){var n,r={},i=cd(t),a=i?Object.keys(t):t,o=cd(e)?i?function(n){return dd(e[n],e[t[n]])}:function(t){return e[t]}:function(){return e},s=(0,w.Z)(a);try{for(s.s();!(n=s.n()).done;){var l=n.value;r[l]=Kp(o(l))}}catch(u){s.e(u)}finally{s.f()}return r}function Jp(e){return Yp(e,{top:"y",right:"x",bottom:"y",left:"x"})}function Qp(e){return Yp(e,["topLeft","topRight","bottomLeft","bottomRight"])}function em(e){var t=Jp(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function tm(e,t){e=e||{},t=t||Ip.font;var n=dd(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));var r=dd(e.style,t.style);r&&!(""+r).match(Gp)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);var i={family:dd(e.family,t.family),lineHeight:Xp(dd(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:dd(e.weight,t.weight),string:""};return i.string=function(e){return!e||ld(e.size)||ld(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function nm(e,t,n,r){var i,a,o,s=!0;for(i=0,a=e.length;i<a;++i)if(void 0!==(o=e[i])&&(void 0!==t&&"function"===typeof o&&(o=o(t),s=!1),void 0!==n&&ud(o)&&(o=o[n%o.length],s=!1),void 0!==o))return r&&!s&&(r.cacheable=!1),o}function rm(e,t){return Object.assign(Object.create(e),t)}function im(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return e[0]},o=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof r&&(r=mm("_fallback",e));var s=(t={},(0,Ye.Z)(t,Symbol.toStringTag,"Object"),(0,Ye.Z)(t,"_cacheable",!0),(0,Ye.Z)(t,"_scopes",e),(0,Ye.Z)(t,"_rootScopes",o),(0,Ye.Z)(t,"_fallback",r),(0,Ye.Z)(t,"_getTarget",i),(0,Ye.Z)(t,"override",(function(t){return im([t].concat((0,a.Z)(e)),n,o,r)})),t);return new Proxy(s,{deleteProperty:function(t,n){return delete t[n],delete t._keys,delete e[0][n],!0},get:function(t,r){return um(t,r,(function(){return function(e,t,n,r){var i,a,o=(0,w.Z)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;if("undefined"!==typeof(i=mm(sm(s,e),n)))return lm(e,i)?dm(n,r,e,i):i}}catch(l){o.e(l)}finally{o.f()}}(r,n,e,t)}))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(e._scopes[0],t)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e[0])},has:function(e,t){return vm(e).includes(t)},ownKeys:function(e){return vm(e)},set:function(e,t,n){var r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function am(e,t,n,r){var i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:om(e,r),setContext:function(t){return am(e,t,n,r)},override:function(i){return am(e.override(i),t,n,r)}};return new Proxy(i,{deleteProperty:function(t,n){return delete t[n],delete e[n],!0},get:function(e,t,n){return um(e,t,(function(){return function(e,t,n){var r=e._proxy,i=e._context,a=e._subProxy,o=e._descriptors,s=r[t];Ad(s)&&o.isScriptable(t)&&(s=function(e,t,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._stack;if(s.has(e))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+e);s.add(e);var l=t(a,o||r);s.delete(e),lm(e,l)&&(l=dm(i._scopes,i,e,l));return l}(t,s,e,n));ud(s)&&s.length&&(s=function(e,t,n,r){var i=n._proxy,a=n._context,o=n._subProxy,s=n._descriptors;if("undefined"!==typeof a.index&&r(e))return t[a.index%t.length];if(cd(t[0])){var l=t,u=i._scopes.filter((function(e){return e!==l}));t=[];var c,h=(0,w.Z)(l);try{for(h.s();!(c=h.n()).done;){var f=dm(u,i,e,c.value);t.push(am(f,a,o&&o[e],s))}}catch(d){h.e(d)}finally{h.f()}}return t}(t,s,e,o.isIndexable));lm(t,s)&&(s=am(s,i,a&&a[t],o));return s}(e,t,n)}))},getOwnPropertyDescriptor:function(t,n){return t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n)},getPrototypeOf:function(){return Reflect.getPrototypeOf(e)},has:function(t,n){return Reflect.has(e,n)},ownKeys:function(){return Reflect.ownKeys(e)},set:function(t,n,r){return e[n]=r,delete t[n],!0}})}function om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0},n=e._scriptable,r=void 0===n?t.scriptable:n,i=e._indexable,a=void 0===i?t.indexable:i,o=e._allKeys;return{allKeys:void 0===o?t.allKeys:o,scriptable:r,indexable:a,isScriptable:Ad(r)?r:function(){return r},isIndexable:Ad(a)?a:function(){return a}}}var sm=function(e,t){return e?e+Cd(t):t},lm=function(e,t){return cd(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object)};function um(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];var r=n();return e[t]=r,r}function cm(e,t,n){return Ad(e)?e(t,n):e}var hm=function(e,t){return!0===e?t:"string"===typeof e?Td(t,e):void 0};function fm(e,t,n,r,i){var a,o=(0,w.Z)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,l=hm(n,s);if(l){e.add(l);var u=cm(l._fallback,n,i);if("undefined"!==typeof u&&u!==n&&u!==r)return u}else if(!1===l&&"undefined"!==typeof r&&n!==r)return null}}catch(c){o.e(c)}finally{o.f()}return!1}function dm(e,t,n,r){var i=t._rootScopes,o=cm(t._fallback,n,r),s=[].concat((0,a.Z)(e),(0,a.Z)(i)),l=new Set;l.add(r);var u=pm(l,s,n,o||n,r);return null!==u&&(("undefined"===typeof o||o===n||null!==(u=pm(l,s,o,u,r)))&&im(Array.from(l),[""],i,o,(function(){return function(e,t,n){var r=e._getTarget();t in r||(r[t]={});var i=r[t];if(ud(i)&&cd(n))return n;return i||{}}(t,n,r)})))}function pm(e,t,n,r,i){for(;n;)n=fm(e,t,n,r,i);return n}function mm(e,t){var n,r=(0,w.Z)(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i){var a=i[e];if("undefined"!==typeof a)return a}}}catch(o){r.e(o)}finally{r.f()}}function vm(e){var t=e._keys;return t||(t=e._keys=function(e){var t,n=new Set,r=(0,w.Z)(e);try{for(r.s();!(t=r.n()).done;){var i,a=t.value,o=(0,w.Z)(Object.keys(a).filter((function(e){return!e.startsWith("_")})));try{for(o.s();!(i=o.n()).done;){var s=i.value;n.add(s)}}catch(l){o.e(l)}finally{o.f()}}}catch(l){r.e(l)}finally{r.f()}return Array.from(n)}(e._scopes)),t}function gm(e,t,n,r){var i,a,o,s,l=e.iScale,u=this._parsing.key,c=void 0===u?"r":u,h=new Array(r);for(i=0,a=r;i<a;++i)s=t[o=i+n],h[i]={r:l.parse(Td(s,c),o)};return h}var ym=Number.EPSILON||1e-14,_m=function(e,t){return t<e.length&&!e[t].skip&&e[t]},xm=function(e){return"x"===e?"y":"x"};function bm(e,t,n,r){var i=e.skip?t:e,a=t,o=n.skip?t:n,s=Xd(a,i),l=Xd(o,a),u=s/(s+l),c=l/(s+l),h=r*(u=isNaN(u)?0:u),f=r*(c=isNaN(c)?0:c);return{previous:{x:a.x-h*(o.x-i.x),y:a.y-h*(o.y-i.y)},next:{x:a.x+f*(o.x-i.x),y:a.y+f*(o.y-i.y)}}}function wm(e){var t,n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",a=xm(i),o=e.length,s=Array(o).fill(0),l=Array(o),u=_m(e,0);for(t=0;t<o;++t)if(n=r,r=u,u=_m(e,t+1),r){if(u){var c=u[i]-r[i];s[t]=0!==c?(u[a]-r[a])/c:0}l[t]=n?u?Fd(s[t-1])!==Fd(s[t])?0:(s[t-1]+s[t])/2:s[t-1]:s[t]}!function(e,t,n){for(var r,i,a,o,s,l=e.length,u=_m(e,0),c=0;c<l-1;++c)s=u,u=_m(e,c+1),s&&u&&($d(t[c],0,ym)?n[c]=n[c+1]=0:(r=n[c]/t[c],i=n[c+1]/t[c],(o=Math.pow(r,2)+Math.pow(i,2))<=9||(a=3/Math.sqrt(o),n[c]=r*a*t[c],n[c+1]=i*a*t[c])))}(e,s,l),function(e,t){for(var n,r,i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x",o=xm(a),s=e.length,l=_m(e,0),u=0;u<s;++u)if(r=i,i=l,l=_m(e,u+1),i){var c=i[a],h=i[o];r&&(n=(c-r[a])/3,i["cp1".concat(a)]=c-n,i["cp1".concat(o)]=h-n*t[u]),l&&(n=(l[a]-c)/3,i["cp2".concat(a)]=c+n,i["cp2".concat(o)]=h+n*t[u])}}(e,l,i)}function km(e,t,n){return Math.max(Math.min(e,n),t)}function Em(e,t,n,r,i){var a,o,s,l;if(t.spanGaps&&(e=e.filter((function(e){return!e.skip}))),"monotone"===t.cubicInterpolationMode)wm(e,i);else{var u=r?e[e.length-1]:e[0];for(a=0,o=e.length;a<o;++a)l=bm(u,s=e[a],e[Math.min(a+1,o-(r?0:1))%o],t.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,u=s}t.capBezierPoints&&function(e,t){var n,r,i,a,o,s=Np(e[0],t);for(n=0,r=e.length;n<r;++n)o=a,a=s,s=n<r-1&&Np(e[n+1],t),a&&(i=e[n],o&&(i.cp1x=km(i.cp1x,t.left,t.right),i.cp1y=km(i.cp1y,t.top,t.bottom)),s&&(i.cp2x=km(i.cp2x,t.left,t.right),i.cp2y=km(i.cp2y,t.top,t.bottom)))}(e,n)}function Sm(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Tm(e){var t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Cm(e,t,n){var r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}var Mm=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};var Am=["top","right","bottom","left"];function Pm(e,t,n){var r={};n=n?"-"+n:"";for(var i=0;i<4;i++){var a=Am[i];r[a]=parseFloat(e[t+"-"+a+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var Im=function(e,t,n){return(e>0||t>0)&&(!n||!n.shadowRoot)};function zm(e,t){if("native"in e)return e;var n=t.canvas,r=t.currentDevicePixelRatio,i=Mm(n),a="border-box"===i.boxSizing,o=Pm(i,"padding"),s=Pm(i,"border","width"),l=function(e,t){var n,r,i=e.touches,a=i&&i.length?i[0]:e,o=a.offsetX,s=a.offsetY,l=!1;if(Im(o,s,e.target))n=o,r=s;else{var u=t.getBoundingClientRect();n=a.clientX-u.left,r=a.clientY-u.top,l=!0}return{x:n,y:r,box:l}}(e,n),u=l.x,c=l.y,h=l.box,f=o.left+(h&&s.left),d=o.top+(h&&s.top),p=t.width,m=t.height;return a&&(p-=o.width+s.width,m-=o.height+s.height),{x:Math.round((u-f)/p*n.width/r),y:Math.round((c-d)/m*n.height/r)}}var Lm=function(e){return Math.round(10*e)/10};function Dm(e,t,n,r){var i=Mm(e),a=Pm(i,"margin"),o=Cm(i.maxWidth,e,"clientWidth")||Dd,s=Cm(i.maxHeight,e,"clientHeight")||Dd,l=function(e,t,n){var r,i;if(void 0===t||void 0===n){var a=Tm(e);if(a){var o=a.getBoundingClientRect(),s=Mm(a),l=Pm(s,"border","width"),u=Pm(s,"padding");t=o.width-u.width-l.width,n=o.height-u.height-l.height,r=Cm(s.maxWidth,a,"clientWidth"),i=Cm(s.maxHeight,a,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Dd,maxHeight:i||Dd}}(e,t,n),u=l.width,c=l.height;if("content-box"===i.boxSizing){var h=Pm(i,"border","width"),f=Pm(i,"padding");u-=f.width+h.width,c-=f.height+h.height}return u=Math.max(0,u-a.width),c=Math.max(0,r?u/r:c-a.height),u=Lm(Math.min(u,o,l.maxWidth)),c=Lm(Math.min(c,s,l.maxHeight)),u&&!c&&(c=Lm(u/2)),(void 0!==t||void 0!==n)&&r&&l.height&&c>l.height&&(c=l.height,u=Lm(Math.floor(c*r))),{width:u,height:c}}function Rm(e,t,n){var r=t||1,i=Math.floor(e.height*r),a=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);var o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||o.height!==i||o.width!==a)&&(e.currentDevicePixelRatio=r,o.height=i,o.width=a,e.ctx.setTransform(r,0,0,r,0,0),!0)}var Om=function(){var e=!1;try{var t={get passive(){return e=!0,!1}};window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(n){}return e}();function jm(e,t){var n=function(e,t){return Mm(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Nm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Bm(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Fm(e,t,n,r){var i={x:e.cp2x,y:e.cp2y},a={x:t.cp1x,y:t.cp1y},o=Nm(e,i,n),s=Nm(i,a,n),l=Nm(a,t,n),u=Nm(o,s,n),c=Nm(s,l,n);return Nm(u,c,n)}function $m(e,t,n){return e?function(e,t){return{x:function(n){return e+e+t-n},setWidth:function(e){t=e},textAlign:function(e){return"center"===e?e:"right"===e?"left":"right"},xPlus:function(e,t){return e-t},leftForLtr:function(e,t){return e-t}}}(t,n):{x:function(e){return e},setWidth:function(e){},textAlign:function(e){return e},xPlus:function(e,t){return e+t},leftForLtr:function(e,t){return e}}}function Vm(e,t){var n,r;"ltr"!==t&&"rtl"!==t||(r=[(n=e.canvas.style).getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function Um(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Zm(e){return"angle"===e?{between:Jd,compare:Kd,normalize:Yd}:{between:ep,compare:function(e,t){return e-t},normalize:function(e){return e}}}function Hm(e){var t=e.start,n=e.end,r=e.count;return{start:t%r,end:n%r,loop:e.loop&&(n-t+1)%r===0,style:e.style}}function Wm(e,t,n){if(!n)return[e];for(var r,i,a,o=n.property,s=n.start,l=n.end,u=t.length,c=Zm(o),h=c.compare,f=c.between,d=c.normalize,p=function(e,t,n){var r,i,a=n.property,o=n.start,s=n.end,l=Zm(a),u=l.between,c=l.normalize,h=t.length,f=e.start,d=e.end,p=e.loop;if(p){for(f+=h,d+=h,r=0,i=h;r<i&&u(c(t[f%h][a]),o,s);++r)f--,d--;f%=h,d%=h}return d<f&&(d+=h),{start:f,end:d,loop:p,style:e.style}}(e,t,n),m=p.start,v=p.end,g=p.loop,y=p.style,_=[],x=!1,b=null,w=function(){return x||f(s,a,r)&&0!==h(s,a)},k=function(){return!x||0===h(l,r)||f(l,a,r)},E=m,S=m;E<=v;++E)(i=t[E%u]).skip||(r=d(i[o]))!==a&&(x=f(r,s,l),null===b&&w()&&(b=0===h(r,s)?E:S),null!==b&&k()&&(_.push(Hm({start:b,end:E,loop:g,count:u,style:y})),b=null),S=E,a=r);return null!==b&&_.push(Hm({start:b,end:v,loop:g,count:u,style:y})),_}function qm(e,t){for(var n=[],r=e.segments,i=0;i<r.length;i++){var o=Wm(r[i],e.points,t);o.length&&n.push.apply(n,(0,a.Z)(o))}return n}function Gm(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){var i=e._chart.getContext(),a=Xm(e.options),o=e._datasetIndex,s=e.options.spanGaps,l=n.length,u=[],c=a,h=t[0].start,f=h;function d(e,t,r,i){var a=s?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=a;for(;n[t%l].skip;)t+=a;e%l!==t%l&&(u.push({start:e%l,end:t%l,loop:r,style:i}),c=i,h=t%l)}}var p,m=(0,w.Z)(t);try{for(m.s();!(p=m.n()).done;){var v=p.value;h=s?h:v.start;var g=n[h%l],y=void 0;for(f=h+1;f<=v.end;f++){var _=n[f%l];Km(y=Xm(r.setContext(rm(i,{type:"segment",p0:g,p1:_,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),c)&&d(h,f-1,v.loop,c),g=_,c=y}h<f-1&&d(h,f-1,v.loop,c)}}catch(x){m.e(x)}finally{m.f()}return u}(e,t,n,r):t}function Xm(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Km(e,t){if(!t)return!1;var n=[],r=function(e,t){return gp(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}var Ym=function(){function e(){(0,o.Z)(this,e),this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}return(0,s.Z)(e,[{key:"_notify",value:function(e,t,n,r){var i=t.listeners[r],a=t.duration;i.forEach((function(r){return r({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(n-t.start,a)})}))}},{key:"_refresh",value:function(){var e=this;this._request||(this._running=!0,this._request=sp.call(window,(function(){e._update(),e._request=null,e._running&&e._refresh()})))}},{key:"_update",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),n=0;this._charts.forEach((function(r,i){if(r.running&&r.items.length){for(var a,o=r.items,s=o.length-1,l=!1;s>=0;--s)(a=o[s])._active?(a._total>r.duration&&(r.duration=a._total),a.tick(t),l=!0):(o[s]=o[o.length-1],o.pop());l&&(i.draw(),e._notify(i,r,t,"progress")),o.length||(r.running=!1,e._notify(i,r,t,"complete"),r.initial=!1),n+=o.length}})),this._lastDate=t,0===n&&(this._running=!1)}},{key:"_getAnims",value:function(e){var t=this._charts,n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}},{key:"listen",value:function(e,t,n){this._getAnims(e).listeners[t].push(n)}},{key:"add",value:function(e,t){var n;t&&t.length&&(n=this._getAnims(e).items).push.apply(n,(0,a.Z)(t))}},{key:"has",value:function(e){return this._getAnims(e).items.length>0}},{key:"start",value:function(e){var t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((function(e,t){return Math.max(e,t._duration)}),0),this._refresh())}},{key:"running",value:function(e){if(!this._running)return!1;var t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}},{key:"stop",value:function(e){var t=this._charts.get(e);if(t&&t.items.length){for(var n=t.items,r=n.length-1;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}}},{key:"remove",value:function(e){return this._charts.delete(e)}}]),e}(),Jm=new Ym,Qm="transparent",ev={boolean:function(e,t,n){return n>.5?t:e},color:function(e,t,n){var r=yp(e||Qm),i=r.valid&&yp(t||Qm);return i&&i.valid?i.mix(r,n).hexString():t},number:function(e,t,n){return e+(t-e)*n}},tv=function(){function e(t,n,r,i){(0,o.Z)(this,e);var a=n[r];i=nm([t.to,i,a,t.from]);var s=nm([t.from,a,i]);this._active=!0,this._fn=t.fn||ev[t.type||typeof s],this._easing=vp[t.easing]||vp.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=n,this._prop=r,this._from=s,this._to=i,this._promises=void 0}return(0,s.Z)(e,[{key:"active",value:function(){return this._active}},{key:"update",value:function(e,t,n){if(this._active){this._notify(!1);var r=this._target[this._prop],i=n-this._start,a=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=nm([e.to,t,r,e.from]),this._from=nm([e.from,r,t])}}},{key:"cancel",value:function(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}},{key:"tick",value:function(e){var t,n=e-this._start,r=this._duration,i=this._prop,a=this._from,o=this._loop,s=this._to;if(this._active=a!==s&&(o||n<r),!this._active)return this._target[i]=s,void this._notify(!0);n<0?this._target[i]=a:(t=n/r%2,t=o&&t>1?2-t:t,t=this._easing(Math.min(1,Math.max(0,t))),this._target[i]=this._fn(a,s,t))}},{key:"wait",value:function(){var e=this._promises||(this._promises=[]);return new Promise((function(t,n){e.push({res:t,rej:n})}))}},{key:"_notify",value:function(e){for(var t=e?"res":"rej",n=this._promises||[],r=0;r<n.length;r++)n[r][t]()}}]),e}(),nv=function(){function e(t,n){(0,o.Z)(this,e),this._chart=t,this._properties=new Map,this.configure(n)}return(0,s.Z)(e,[{key:"configure",value:function(e){if(cd(e)){var t=Object.keys(Ip.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((function(r){var i=e[r];if(cd(i)){for(var a={},o=0,s=t;o<s.length;o++){var l=s[o];a[l]=i[l]}(ud(i.properties)&&i.properties||[r]).forEach((function(e){e!==r&&n.has(e)||n.set(e,a)}))}}))}}},{key:"_animateOptions",value:function(e,t){var n=t.options,r=function(e,t){if(!t)return;var n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];var i=this._createAnimations(r,n);return n.$shared&&function(e,t){for(var n=[],r=Object.keys(t),i=0;i<r.length;i++){var a=e[r[i]];a&&a.active()&&n.push(a.wait())}return Promise.all(n)}(e.options.$animations,n).then((function(){e.options=n}),(function(){})),i}},{key:"_createAnimations",value:function(e,t){var n,r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),l=Date.now();for(n=s.length-1;n>=0;--n){var u=s[n];if("$"!==u.charAt(0))if("options"!==u){var c=t[u],h=o[u],f=r.get(u);if(h){if(f&&h.active()){h.update(f,c,l);continue}h.cancel()}f&&f.duration?(o[u]=h=new tv(f,e,u,c),i.push(h)):e[u]=c}else i.push.apply(i,(0,a.Z)(this._animateOptions(e,t)))}return i}},{key:"update",value:function(e,t){if(0!==this._properties.size){var n=this._createAnimations(e,t);return n.length?(Jm.add(this._chart,n),!0):void 0}Object.assign(e,t)}}]),e}();function rv(e,t){var n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,a=void 0===n.max?t:0;return{start:r?a:i,end:r?i:a}}function iv(e,t){var n,r,i=[],a=e._getSortedDatasetMetas(t);for(n=0,r=a.length;n<r;++n)i.push(a[n].index);return i}function av(e,t,n){var r,i,a,o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=e.keys,u="single"===s.mode;if(null!==t){for(r=0,i=l.length;r<i;++r){if((a=+l[r])===n){if(s.all)continue;break}hd(o=e.values[a])&&(u||0===t||Fd(t)===Fd(o))&&(t+=o)}return t}}function ov(e,t){var n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function sv(e,t,n){var r=e[t]||(e[t]={});return r[n]||(r[n]={})}function lv(e,t,n,r){var i,a=(0,w.Z)(t.getMatchingVisibleMetas(r).reverse());try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e[o.index];if(n&&s>0||!n&&s<0)return o.index}}catch(l){a.e(l)}finally{a.f()}return null}function uv(e,t){for(var n,r=e.chart,i=e._cachedMeta,a=r._stacks||(r._stacks={}),o=i.iScale,s=i.vScale,l=i.index,u=o.axis,c=s.axis,h=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(o,s,i),f=t.length,d=0;d<f;++d){var p=t[d],m=p[u],v=p[c];(n=(p._stacks||(p._stacks={}))[c]=sv(a,h,m))[l]=v,n._top=lv(n,s,!0,i.type),n._bottom=lv(n,s,!1,i.type),(n._visualValues||(n._visualValues={}))[l]=v}}function cv(e,t){var n=e.scales;return Object.keys(n).filter((function(e){return n[e].axis===t})).shift()}function hv(e,t){var n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;var i,a=(0,w.Z)(t);try{for(a.s();!(i=a.n()).done;){var o=i.value._stacks;if(!o||void 0===o[r]||void 0===o[r][n])return;delete o[r][n],void 0!==o[r]._visualValues&&void 0!==o[r]._visualValues[n]&&delete o[r]._visualValues[n]}}catch(s){a.e(s)}finally{a.f()}}}var fv=function(e){return"reset"===e||"none"===e},dv=function(e,t){return t?e:Object.assign({},e)},pv=function(){function e(t,n){(0,o.Z)(this,e),this.chart=t,this._ctx=t.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=(this instanceof e?this.constructor:void 0).datasetElementType,this.dataElementType=(this instanceof e?this.constructor:void 0).dataElementType,this.initialize()}return(0,s.Z)(e,[{key:"initialize",value:function(){var e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ov(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}},{key:"updateIndex",value:function(e){this.index!==e&&hv(this._cachedMeta),this.index=e}},{key:"linkScales",value:function(){var e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=function(e,t,n,r){return"x"===e?t:"r"===e?r:n},i=t.xAxisID=dd(n.xAxisID,cv(e,"x")),a=t.yAxisID=dd(n.yAxisID,cv(e,"y")),o=t.rAxisID=dd(n.rAxisID,cv(e,"r")),s=t.indexAxis,l=t.iAxisID=r(s,i,a,o),u=t.vAxisID=r(s,a,i,o);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(u)}},{key:"getDataset",value:function(){return this.chart.data.datasets[this.index]}},{key:"getMeta",value:function(){return this.chart.getDatasetMeta(this.index)}},{key:"getScaleForId",value:function(e){return this.chart.scales[e]}},{key:"_getOtherScale",value:function(e){var t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}},{key:"reset",value:function(){this._update("reset")}},{key:"_destroy",value:function(){var e=this._cachedMeta;this._data&&ap(this._data,this),e._stacked&&hv(e)}},{key:"_dataCheck",value:function(){var e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(cd(t))this._data=function(e){var t,n,r,i=Object.keys(e),a=new Array(i.length);for(t=0,n=i.length;t<n;++t)r=i[t],a[t]={x:r,y:e[r]};return a}(t);else if(n!==t){if(n){ap(n,this);var r=this._cachedMeta;hv(r),r._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ip.forEach((function(t){var n="_onData"+Cd(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=r.apply(this,i);return e._chartjs.listeners.forEach((function(e){"function"===typeof e[n]&&e[n].apply(e,i)})),o}})})))}(t,this),this._syncList=[],this._data=t}}},{key:"addElements",value:function(){var e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}},{key:"buildOrUpdateElements",value:function(e){var t=this._cachedMeta,n=this.getDataset(),r=!1;this._dataCheck();var i=t._stacked;t._stacked=ov(t.vScale,t),t.stack!==n.stack&&(r=!0,hv(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&uv(this,t._parsed)}},{key:"configure",value:function(){var e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}},{key:"parse",value:function(e,t){var n,r,i,a=this._cachedMeta,o=this._data,s=a.iScale,l=a._stacked,u=s.axis,c=0===e&&t===o.length||a._sorted,h=e>0&&a._parsed[e-1];if(!1===this._parsing)a._parsed=o,a._sorted=!0,i=o;else{i=ud(o[e])?this.parseArrayData(a,o,e,t):cd(o[e])?this.parseObjectData(a,o,e,t):this.parsePrimitiveData(a,o,e,t);for(n=0;n<t;++n)a._parsed[n+e]=r=i[n],c&&((null===r[u]||h&&r[u]<h[u])&&(c=!1),h=r);a._sorted=c}l&&uv(this,i)}},{key:"parsePrimitiveData",value:function(e,t,n,r){var i,a,o,s=e.iScale,l=e.vScale,u=s.axis,c=l.axis,h=s.getLabels(),f=s===l,d=new Array(r);for(i=0,a=r;i<a;++i){var p;o=i+n,d[i]=(p={},(0,Ye.Z)(p,u,f||s.parse(h[o],o)),(0,Ye.Z)(p,c,l.parse(t[o],o)),p)}return d}},{key:"parseArrayData",value:function(e,t,n,r){var i,a,o,s,l=e.xScale,u=e.yScale,c=new Array(r);for(i=0,a=r;i<a;++i)s=t[o=i+n],c[i]={x:l.parse(s[0],o),y:u.parse(s[1],o)};return c}},{key:"parseObjectData",value:function(e,t,n,r){var i,a,o,s,l=e.xScale,u=e.yScale,c=this._parsing,h=c.xAxisKey,f=void 0===h?"x":h,d=c.yAxisKey,p=void 0===d?"y":d,m=new Array(r);for(i=0,a=r;i<a;++i)s=t[o=i+n],m[i]={x:l.parse(Td(s,f),o),y:u.parse(Td(s,p),o)};return m}},{key:"getParsed",value:function(e){return this._cachedMeta._parsed[e]}},{key:"getDataElement",value:function(e){return this._cachedMeta.data[e]}},{key:"applyStack",value:function(e,t,n){var r=this.chart,i=this._cachedMeta,a=t[e.axis];return av({keys:iv(r,!0),values:t._stacks[e.axis]._visualValues},a,i.index,{mode:n})}},{key:"updateRangeFromParsed",value:function(e,t,n,r){var i=n[t.axis],a=null===i?NaN:i,o=r&&n._stacks[t.axis];r&&o&&(r.values=o,a=av(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}},{key:"getMinMax",value:function(e,t){var n,r,i=this._cachedMeta,a=i._parsed,o=i._sorted&&e===i.iScale,s=a.length,l=this._getOtherScale(e),u=function(e,t,n){return e&&!t.hidden&&t._stacked&&{keys:iv(n,!0),values:null}}(t,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},h=function(e){var t=e.getUserBounds(),n=t.min,r=t.max,i=t.minDefined,a=t.maxDefined;return{min:i?n:Number.NEGATIVE_INFINITY,max:a?r:Number.POSITIVE_INFINITY}}(l),f=h.min,d=h.max;function p(){var t=(r=a[n])[l.axis];return!hd(r[e.axis])||f>t||d<t}for(n=0;n<s&&(p()||(this.updateRangeFromParsed(c,e,r,u),!o));++n);if(o)for(n=s-1;n>=0;--n)if(!p()){this.updateRangeFromParsed(c,e,r,u);break}return c}},{key:"getAllParsedValues",value:function(e){var t,n,r,i=this._cachedMeta._parsed,a=[];for(t=0,n=i.length;t<n;++t)hd(r=i[t][e.axis])&&a.push(r);return a}},{key:"getMaxOverflow",value:function(){return!1}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}},{key:"_update",value:function(e){var t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){var t,n,r,i;return cd(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(dd(this.options.clip,function(e,t,n){if(!1===n)return!1;var r=rv(e,n),i=rv(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}},{key:"update",value:function(e){}},{key:"draw",value:function(){var e,t=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],a=n.chartArea,o=[],s=this._drawStart||0,l=this._drawCount||i.length-s,u=this.options.drawActiveElementsOnTop;for(r.dataset&&r.dataset.draw(t,a,s,l),e=s;e<s+l;++e){var c=i[e];c.hidden||(c.active&&u?o.push(c):c.draw(t,a))}for(e=0;e<o.length;++e)o[e].draw(t,a)}},{key:"getStyle",value:function(e,t){var n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}},{key:"getContext",value:function(e,t,n){var r,i=this.getDataset();if(e>=0&&e<this._cachedMeta.data.length){var a=this._cachedMeta.data[e];r=a.$context||(a.$context=function(e,t,n){return rm(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return rm(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}},{key:"resolveDatasetElementOptions",value:function(e){return this._resolveElementOptions(this.datasetElementType.id,e)}},{key:"resolveDataElementOptions",value:function(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}},{key:"_resolveElementOptions",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",r=arguments.length>2?arguments[2]:void 0,i="active"===n,a=this._cachedDataOpts,o=e+"-"+n,s=a[o],l=this.enableOptionSharing&&Md(r);if(s)return dv(s,l);var u=this.chart.config,c=u.datasetElementScopeKeys(this._type,e),h=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),c),d=Object.keys(Ip.elements[e]),p=u.resolveNamedOptions(f,d,(function(){return t.getContext(r,i,n)}),h);return p.$shared&&(p.$shared=l,a[o]=Object.freeze(dv(p,l))),p}},{key:"_resolveAnimations",value:function(e,t,n){var r,i=this.chart,a=this._cachedDataOpts,o="animation-".concat(t),s=a[o];if(s)return s;if(!1!==i.options.animation){var l=this.chart.config,u=l.datasetAnimationScopeKeys(this._type,t),c=l.getOptionScopes(this.getDataset(),u);r=l.createResolver(c,this.getContext(e,n,t))}var h=new nv(i,r&&r.animations);return r&&r._cacheable&&(a[o]=Object.freeze(h)),h}},{key:"getSharedOptions",value:function(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}},{key:"includeOptions",value:function(e,t){return!t||fv(e)||this.chart._animationsDisabled}},{key:"_getSharedOptions",value:function(e,t){var n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),a=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:a}}},{key:"updateElement",value:function(e,t,n,r){fv(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}},{key:"updateSharedOptions",value:function(e,t,n){e&&!fv(t)&&this._resolveAnimations(void 0,t).update(e,n)}},{key:"_setStyle",value:function(e,t,n,r){e.active=r;var i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}},{key:"removeHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!1)}},{key:"setHoverStyle",value:function(e,t,n){this._setStyle(e,n,"active",!0)}},{key:"_removeDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}},{key:"_setDatasetHoverStyle",value:function(){var e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}},{key:"_resyncElements",value:function(e){var t,n=this._data,r=this._cachedMeta.data,a=(0,w.Z)(this._syncList);try{for(a.s();!(t=a.n()).done;){var o=(0,i.Z)(t.value,3),s=o[0],l=o[1],u=o[2];this[s](l,u)}}catch(d){a.e(d)}finally{a.f()}this._syncList=[];var c=r.length,h=n.length,f=Math.min(h,c);f&&this.parse(0,f),h>c?this._insertElements(c,h-c,e):h<c&&this._removeElements(h,c-h)}},{key:"_insertElements",value:function(e,t){var n,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this._cachedMeta,a=i.data,o=e+t,s=function(e){for(e.length+=t,n=e.length-1;n>=o;n--)e[n]=e[n-t]};for(s(a),n=e;n<o;++n)a[n]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(e,t),r&&this.updateElements(a,e,t,"reset")}},{key:"updateElements",value:function(e,t,n,r){}},{key:"_removeElements",value:function(e,t){var n=this._cachedMeta;if(this._parsing){var r=n._parsed.splice(e,t);n._stacked&&hv(n,r)}n.data.splice(e,t)}},{key:"_sync",value:function(e){if(this._parsing)this._syncList.push(e);else{var t=(0,i.Z)(e,3),n=t[0],r=t[1],o=t[2];this[n](r,o)}this.chart._dataChanges.push([this.index].concat((0,a.Z)(e)))}},{key:"_onDataPush",value:function(){var e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}},{key:"_onDataPop",value:function(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}},{key:"_onDataShift",value:function(){this._sync(["_removeElements",0,1])}},{key:"_onDataSplice",value:function(e,t){t&&this._sync(["_removeElements",e,t]);var n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}},{key:"_onDataUnshift",value:function(){this._sync(["_insertElements",0,arguments.length])}}]),e}();function mv(e){var t,n,r,i,a=e.iScale,o=function(e,t){if(!e._cache.$bar){for(var n=e.getMatchingVisibleMetas(t),r=[],i=0,a=n.length;i<a;i++)r=r.concat(n[i].controller.getAllParsedValues(e));e._cache.$bar=op(r.sort((function(e,t){return e-t})))}return e._cache.$bar}(a,e.type),s=a._length,l=function(){32767!==r&&-32768!==r&&(Md(i)&&(s=Math.min(s,Math.abs(r-i)||s)),i=r)};for(t=0,n=o.length;t<n;++t)r=a.getPixelForValue(o[t]),l();for(i=void 0,t=0,n=a.ticks.length;t<n;++t)r=a.getPixelForTick(t),l();return s}function vv(e,t,n,r){return ud(e)?function(e,t,n,r){var i=n.parse(e[0],r),a=n.parse(e[1],r),o=Math.min(i,a),s=Math.max(i,a),l=o,u=s;Math.abs(o)>Math.abs(s)&&(l=s,u=o),t[n.axis]=u,t._custom={barStart:l,barEnd:u,start:i,end:a,min:o,max:s}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function gv(e,t,n,r){var i,a,o,s,l=e.iScale,u=e.vScale,c=l.getLabels(),h=l===u,f=[];for(i=n,a=n+r;i<a;++i)s=t[i],(o={})[l.axis]=h||l.parse(c[i],i),f.push(vv(s,o,u,i));return f}function yv(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function _v(e,t,n,r){var i=t.borderSkipped,a={};if(i)if(!0!==i){var o=function(e){var t,n,r,i,a;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",a="start"):(i="start",a="end"),{start:n,end:r,reverse:t,top:i,bottom:a}}(e),s=o.start,l=o.end,u=o.reverse,c=o.top,h=o.bottom;"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(a[xv(h,s,l,u)]=!0,i=c)),a[xv(i,s,l,u)]=!0,e.borderSkipped=a}else e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};else e.borderSkipped=a}function xv(e,t,n,r){var i,a,o;return r?(o=n,e=bv(e=(i=e)===(a=t)?o:i===o?a:i,n,t)):e=bv(e,t,n),e}function bv(e,t,n){return"start"===e?t:"end"===e?n:e}function wv(e,t,n){var r=t.inflateAmount;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,Ye.Z)(pv,"defaults",{}),(0,Ye.Z)(pv,"datasetElementType",null),(0,Ye.Z)(pv,"dataElementType",null);var kv=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"parsePrimitiveData",value:function(e,t,n,r){return gv(e,t,n,r)}},{key:"parseArrayData",value:function(e,t,n,r){return gv(e,t,n,r)}},{key:"parseObjectData",value:function(e,t,n,r){var i,a,o,s,l=e.iScale,u=e.vScale,c=this._parsing,h=c.xAxisKey,f=void 0===h?"x":h,d=c.yAxisKey,p=void 0===d?"y":d,m="x"===l.axis?f:p,v="x"===u.axis?f:p,g=[];for(i=n,a=n+r;i<a;++i)s=t[i],(o={})[l.axis]=l.parse(Td(s,m),i),g.push(vv(Td(s,v),o,u,i));return g}},{key:"updateRangeFromParsed",value:function(e,t,r,i){Tf(c(n.prototype),"updateRangeFromParsed",this).call(this,e,t,r,i);var a=r._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}},{key:"getMaxOverflow",value:function(){return 0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e),a=i._custom,o=yv(a)?"["+a.start+", "+a.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:o}}},{key:"initialize",value:function(){this.enableOptionSharing=!0,Tf(c(n.prototype),"initialize",this).call(this),this._cachedMeta.stack=this.getDataset().stack}},{key:"update",value:function(e){var t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this.index,o=this._cachedMeta.vScale,s=o.getBasePixel(),l=o.isHorizontal(),u=this._getRuler(),c=this._getSharedOptions(t,r),h=c.sharedOptions,f=c.includeOptions,d=t;d<t+n;d++){var p=this.getParsed(d),m=i||ld(p[o.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),v=this._calculateBarIndexPixels(d,u),g=(p._stacks||{})[o.axis],y={horizontal:l,base:m.base,enableBorderRadius:!g||yv(p._custom)||a===g._top||a===g._bottom,x:l?m.head:v.center,y:l?v.center:m.head,height:l?v.size:Math.abs(m.size),width:l?Math.abs(m.size):v.size};f&&(y.options=h||this.resolveDataElementOptions(d,e[d].active?"active":r));var _=y.options||e[d].options;_v(y,_,g,a),wv(y,_,u.ratio),this.updateElement(e[d],d,y,r)}}},{key:"_getStacks",value:function(e,t){var n,r=this._cachedMeta.iScale,i=r.getMatchingVisibleMetas(this._type).filter((function(e){return e.controller.options.grouped})),a=r.options.stacked,o=[],s=function(e){var n=e.controller.getParsed(t),r=n&&n[e.vScale.axis];if(ld(r)||isNaN(r))return!0},l=(0,w.Z)(i);try{for(l.s();!(n=l.n()).done;){var u=n.value;if((void 0===t||!s(u))&&((!1===a||-1===o.indexOf(u.stack)||void 0===a&&void 0===u.stack)&&o.push(u.stack),u.index===e))break}}catch(c){l.e(c)}finally{l.f()}return o.length||o.push(void 0),o}},{key:"_getStackCount",value:function(e){return this._getStacks(void 0,e).length}},{key:"_getStackIndex",value:function(e,t,n){var r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}},{key:"_getRuler",value:function(){var e,t,n=this.options,r=this._cachedMeta,i=r.iScale,a=[];for(e=0,t=r.data.length;e<t;++e)a.push(i.getPixelForValue(this.getParsed(e)[i.axis],e));var o=n.barThickness;return{min:o||mv(r),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:n.grouped,ratio:o?1:n.categoryPercentage*n.barPercentage}}},{key:"_calculateBarValuePixels",value:function(e){var t,n,r=this._cachedMeta,i=r.vScale,a=r._stacked,o=r.index,s=this.options,l=s.base,u=s.minBarLength,c=l||0,h=this.getParsed(e),f=h._custom,d=yv(f),p=h[i.axis],m=0,v=a?this.applyStack(i,h,a):p;v!==p&&(m=v-p,v=p),d&&(p=f.barStart,v=f.barEnd-f.barStart,0!==p&&Fd(p)!==Fd(f.barEnd)&&(m=0),m+=p);var g=ld(l)||d?m:l,y=i.getPixelForValue(g);if(n=(t=this.chart.getDataVisibility(e)?i.getPixelForValue(m+v):y)-y,Math.abs(n)<u){n=function(e,t,n){return 0!==e?Fd(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(n,i,c)*u,p===c&&(y-=n/2);var _=i.getPixelForDecimal(0),x=i.getPixelForDecimal(1),b=Math.min(_,x),w=Math.max(_,x);t=(y=Math.max(Math.min(y,w),b))+n,a&&!d&&(h._stacks[i.axis]._visualValues[o]=i.getValueForPixel(t)-i.getValueForPixel(y))}if(y===i.getPixelForValue(c)){var k=Fd(n)*i.getLineWidthForValue(c)/2;y+=k,n-=k}return{size:n,base:y,head:t,center:t+n/2}}},{key:"_calculateBarIndexPixels",value:function(e,t){var n,r,i=t.scale,a=this.options,o=a.skipNull,s=dd(a.maxBarThickness,1/0);if(t.grouped){var l=o?this._getStackCount(e):t.stackCount,u="flex"===a.barThickness?function(e,t,n,r){var i=t.pixels,a=i[e],o=e>0?i[e-1]:null,s=e<i.length-1?i[e+1]:null,l=n.categoryPercentage;null===o&&(o=a-(null===s?t.end-t.start:s-a)),null===s&&(s=a+a-o);var u=a-(a-Math.min(o,s))/2*l;return{chunk:Math.abs(s-o)/2*l/r,ratio:n.barPercentage,start:u}}(e,t,a,l):function(e,t,n,r){var i,a,o=n.barThickness;return ld(o)?(i=t.min*n.categoryPercentage,a=n.barPercentage):(i=o*r,a=1),{chunk:i/r,ratio:a,start:t.pixels[e]-i/2}}(e,t,a,l),c=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);n=u.start+u.chunk*c+u.chunk/2,r=Math.min(s,u.chunk*u.ratio)}else n=i.getPixelForValue(this.getParsed(e)[i.axis],e),r=Math.min(s,t.min*t.ratio);return{base:n-r/2,head:n+r/2,center:n,size:r}}},{key:"draw",value:function(){for(var e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length,i=0;i<r;++i)null!==this.getParsed(i)[t.axis]&&n[i].draw(this._ctx)}}]),n}(pv);(0,Ye.Z)(kv,"id","bar"),(0,Ye.Z)(kv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Ye.Z)(kv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});var Ev=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,Tf(c(n.prototype),"initialize",this).call(this)}},{key:"parsePrimitiveData",value:function(e,t,r,i){for(var a=Tf(c(n.prototype),"parsePrimitiveData",this).call(this,e,t,r,i),o=0;o<a.length;o++)a[o]._custom=this.resolveDataElementOptions(o+r).radius;return a}},{key:"parseArrayData",value:function(e,t,r,i){for(var a=Tf(c(n.prototype),"parseArrayData",this).call(this,e,t,r,i),o=0;o<a.length;o++){var s=t[r+o];a[o]._custom=dd(s[2],this.resolveDataElementOptions(o+r).radius)}return a}},{key:"parseObjectData",value:function(e,t,r,i){for(var a=Tf(c(n.prototype),"parseObjectData",this).call(this,e,t,r,i),o=0;o<a.length;o++){var s=t[r+o];a[o]._custom=dd(s&&s.r&&+s.r,this.resolveDataElementOptions(o+r).radius)}return a}},{key:"getMaxOverflow",value:function(){for(var e=this._cachedMeta.data,t=0,n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],r=t.xScale,i=t.yScale,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y),l=a._custom;return{label:n[e]||"",value:"("+o+", "+s+(l?", "+l:"")+")"}}},{key:"update",value:function(e){var t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=this._getSharedOptions(t,r),u=l.sharedOptions,c=l.includeOptions,h=o.axis,f=s.axis,d=t;d<t+n;d++){var p=e[d],m=!i&&this.getParsed(d),v={},g=v[h]=i?o.getPixelForDecimal(.5):o.getPixelForValue(m[h]),y=v[f]=i?s.getBasePixel():s.getPixelForValue(m[f]);v.skip=isNaN(g)||isNaN(y),c&&(v.options=u||this.resolveDataElementOptions(d,p.active?"active":r),i&&(v.options.radius=0)),this.updateElement(p,d,v,r)}}},{key:"resolveDataElementOptions",value:function(e,t){var r=this.getParsed(e),i=Tf(c(n.prototype),"resolveDataElementOptions",this).call(this,e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));var a=i.radius;return"active"!==t&&(i.radius=0),i.radius+=dd(r&&r._custom,a),i}}]),n}(pv);(0,Ye.Z)(Ev,"id","bubble"),(0,Ye.Z)(Ev,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Ye.Z)(Ev,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});var Sv=function(e){u(n,e);var t=p(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this,e,r)).enableOptionSharing=!0,i.innerRadius=void 0,i.outerRadius=void 0,i.offsetX=void 0,i.offsetY=void 0,i}return(0,s.Z)(n,[{key:"linkScales",value:function(){}},{key:"parse",value:function(e,t){var n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{var i,a,o=function(e){return+n[e]};if(cd(n[e])){var s=this._parsing.key,l=void 0===s?"value":s;o=function(e){return+Td(n[e],l)}}for(i=e,a=e+t;i<a;++i)r._parsed[i]=o(i)}}},{key:"_getRotation",value:function(){return Hd(this.options.rotation-90)}},{key:"_getCircumference",value:function(){return Hd(this.options.circumference)}},{key:"_getRotationExtents",value:function(){for(var e=zd,t=-zd,n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){var r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),a=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+a)}return{rotation:e,circumference:t-e}}},{key:"update",value:function(e){var t,n,r=this.chart.chartArea,i=this._cachedMeta,a=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,s=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min((t=this.options.cutout,n=s,"string"===typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/n),1),u=this._getRingWeight(this.index),c=this._getRotationExtents(),h=c.circumference,f=function(e,t,n){var r=1,i=1,a=0,o=0;if(t<zd){var s=e,l=s+t,u=Math.cos(s),c=Math.sin(s),h=Math.cos(l),f=Math.sin(l),d=function(e,t,r){return Jd(e,s,l,!0)?1:Math.max(t,t*n,r,r*n)},p=function(e,t,r){return Jd(e,s,l,!0)?-1:Math.min(t,t*n,r,r*n)},m=d(0,u,h),v=d(Od,c,f),g=p(Id,u,h),y=p(Id+Od,c,f);r=(m-g)/2,i=(v-y)/2,a=-(m+g)/2,o=-(v+y)/2}return{ratioX:r,ratioY:i,offsetX:a,offsetY:o}}(c.rotation,h,l),d=f.ratioX,p=f.ratioY,m=f.offsetX,v=f.offsetY,g=(r.width-o)/d,y=(r.height-o)/p,_=Math.max(Math.min(g,y)/2,0),x=pd(this.options.radius,_),b=(x-Math.max(x*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*x,this.offsetY=v*x,i.total=this.calculateTotal(),this.outerRadius=x-b*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-b*u,0),this.updateElements(a,0,a.length,e)}},{key:"_circumference",value:function(e,t){var n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/zd)}},{key:"updateElements",value:function(e,t,n,r){var i,a="reset"===r,o=this.chart,s=o.chartArea,l=o.options.animation,u=(s.left+s.right)/2,c=(s.top+s.bottom)/2,h=a&&l.animateScale,f=h?0:this.innerRadius,d=h?0:this.outerRadius,p=this._getSharedOptions(t,r),m=p.sharedOptions,v=p.includeOptions,g=this._getRotation();for(i=0;i<t;++i)g+=this._circumference(i,a);for(i=t;i<t+n;++i){var y=this._circumference(i,a),_=e[i],x={x:u+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+y,circumference:y,outerRadius:d,innerRadius:f};v&&(x.options=m||this.resolveDataElementOptions(i,_.active?"active":r)),g+=y,this.updateElement(_,i,x,r)}}},{key:"calculateTotal",value:function(){var e,t=this._cachedMeta,n=t.data,r=0;for(e=0;e<n.length;e++){var i=t._parsed[e];null===i||isNaN(i)||!this.chart.getDataVisibility(e)||n[e].hidden||(r+=Math.abs(i))}return r}},{key:"calculateCircumference",value:function(e){var t=this._cachedMeta.total;return t>0&&!isNaN(e)?zd*(Math.abs(e)/t):0}},{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=kp(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}},{key:"getMaxBorderWidth",value:function(e){var t,n,r,i,a,o=0,s=this.chart;if(!e)for(t=0,n=s.data.datasets.length;t<n;++t)if(s.isDatasetVisible(t)){e=(r=s.getDatasetMeta(t)).data,i=r.controller;break}if(!e)return 0;for(t=0,n=e.length;t<n;++t)"inner"!==(a=i.resolveDataElementOptions(t)).borderAlign&&(o=Math.max(o,a.borderWidth||0,a.hoverBorderWidth||0));return o}},{key:"getMaxOffset",value:function(e){for(var t=0,n=0,r=e.length;n<r;++n){var i=this.resolveDataElementOptions(n);t=Math.max(t,i.offset||0,i.hoverOffset||0)}return t}},{key:"_getRingWeightOffset",value:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}},{key:"_getRingWeight",value:function(e){return Math.max(dd(this.chart.data.datasets[e].weight,1),0)}},{key:"_getVisibleDatasetWeightTotal",value:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}]),n}(pv);(0,Ye.Z)(Sv,"id","doughnut"),(0,Ye.Z)(Sv,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Ye.Z)(Sv,"descriptors",{_scriptable:function(e){return"spacing"!==e},_indexable:function(e){return"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}}),(0,Ye.Z)(Sv,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,r=n.pointStyle,i=n.color;return t.labels.map((function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});var Tv=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"initialize",value:function(){this.enableOptionSharing=!0,this.supportsDecimation=!0,Tf(c(n.prototype),"initialize",this).call(this)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data,i=void 0===r?[]:r,a=t._dataset,o=this.chart._animationsDisabled,s=hp(t,i,o),l=s.start,u=s.count;this._drawStart=l,this._drawCount=u,fp(t)&&(l=0,u=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=i;var c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:c},e),this.updateElements(i,l,u,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=a._stacked,u=a._dataset,c=this._getSharedOptions(t,r),h=c.sharedOptions,f=c.includeOptions,d=o.axis,p=s.axis,m=this.options,v=m.spanGaps,g=m.segment,y=Ud(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||"none"===r,x=t+n,b=e.length,w=t>0&&this.getParsed(t-1),k=0;k<b;++k){var E=e[k],S=_?E:{};if(k<t||k>=x)S.skip=!0;else{var T=this.getParsed(k),C=ld(T[p]),M=S[d]=o.getPixelForValue(T[d],k),A=S[p]=i||C?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,T,l):T[p],k);S.skip=isNaN(M)||isNaN(A)||C,S.stop=k>0&&Math.abs(T[d]-w[d])>y,g&&(S.parsed=T,S.raw=u.data[k]),f&&(S.options=h||this.resolveDataElementOptions(k,E.active?"active":r)),_||this.updateElement(E,k,S,r),w=T}}}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;var i=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,a)/2}},{key:"draw",value:function(){var e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),Tf(c(n.prototype),"draw",this).call(this)}}]),n}(pv);(0,Ye.Z)(Tv,"id","line"),(0,Ye.Z)(Tv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Ye.Z)(Tv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});var Cv=function(e){u(n,e);var t=p(n);function n(e,r){var i;return(0,o.Z)(this,n),(i=t.call(this,e,r)).innerRadius=void 0,i.outerRadius=void 0,i}return(0,s.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=kp(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}},{key:"parseObjectData",value:function(e,t,n,r){return gm.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}},{key:"getMinMax",value:function(){var e=this,t=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((function(t,r){var i=e.getParsed(r).r;!isNaN(i)&&e.chart.getDataVisibility(r)&&(i<n.min&&(n.min=i),i>n.max&&(n.max=i))})),n}},{key:"_updateRadius",value:function(){var e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),a=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-a*this.index,this.innerRadius=this.outerRadius-a}},{key:"updateElements",value:function(e,t,n,r){var i,a="reset"===r,o=this.chart,s=o.options.animation,l=this._cachedMeta.rScale,u=l.xCenter,c=l.yCenter,h=l.getIndexAngle(0)-.5*Id,f=h,d=360/this.countVisibleElements();for(i=0;i<t;++i)f+=this._computeAngle(i,r,d);for(i=t;i<t+n;i++){var p=e[i],m=f,v=f+this._computeAngle(i,r,d),g=o.getDataVisibility(i)?l.getDistanceFromCenterForValue(this.getParsed(i).r):0;f=v,a&&(s.animateScale&&(g=0),s.animateRotate&&(m=v=h));var y={x:u,y:c,innerRadius:0,outerRadius:g,startAngle:m,endAngle:v,options:this.resolveDataElementOptions(i,p.active?"active":r)};this.updateElement(p,i,y,r)}}},{key:"countVisibleElements",value:function(){var e=this,t=this._cachedMeta,n=0;return t.data.forEach((function(t,r){!isNaN(e.getParsed(r).r)&&e.chart.getDataVisibility(r)&&n++})),n}},{key:"_computeAngle",value:function(e,t,n){return this.chart.getDataVisibility(e)?Hd(this.resolveDataElementOptions(e,t).angle||n):0}}]),n}(pv);(0,Ye.Z)(Cv,"id","polarArea"),(0,Ye.Z)(Cv,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Ye.Z)(Cv,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels:function(e){var t=e.data;if(t.labels.length&&t.datasets.length){var n=e.legend.options.labels,r=n.pointStyle,i=n.color;return t.labels.map((function(t,n){var a=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,fontColor:i,lineWidth:a.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick:function(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});var Mv=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n)}(Sv);(0,Ye.Z)(Mv,"id","pie"),(0,Ye.Z)(Mv,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});var Av=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}},{key:"parseObjectData",value:function(e,t,n,r){return gm.bind(this)(e,t,n,r)}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){var a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);var o={_loop:!0,_fullLoop:i.length===r.length,options:a};this.updateElement(n,void 0,o,e)}this.updateElements(r,0,r.length,e)}},{key:"updateElements",value:function(e,t,n,r){for(var i=this._cachedMeta.rScale,a="reset"===r,o=t;o<t+n;o++){var s=e[o],l=this.resolveDataElementOptions(o,s.active?"active":r),u=i.getPointPositionForValue(o,this.getParsed(o).r),c=a?i.xCenter:u.x,h=a?i.yCenter:u.y,f={x:c,y:h,angle:u.angle,skip:isNaN(c)||isNaN(h),options:l};this.updateElement(s,o,f,r)}}}]),n}(pv);(0,Ye.Z)(Av,"id","radar"),(0,Ye.Z)(Av,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Ye.Z)(Av,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});var Pv=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"getLabelAndValue",value:function(e){var t=this._cachedMeta,n=this.chart.data.labels||[],r=t.xScale,i=t.yScale,a=this.getParsed(e),o=r.getLabelForValue(a.x),s=i.getLabelForValue(a.y);return{label:n[e]||"",value:"("+o+", "+s+")"}}},{key:"update",value:function(e){var t=this._cachedMeta,n=t.data,r=void 0===n?[]:n,i=this.chart._animationsDisabled,a=hp(t,r,i),o=a.start,s=a.count;if(this._drawStart=o,this._drawCount=s,fp(t)&&(o=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();var l=t.dataset,u=t._dataset;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!u._decimated,l.points=r;var c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(l,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,o,s,e)}},{key:"addElements",value:function(){var e=this.options.showLine;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),Tf(c(n.prototype),"addElements",this).call(this)}},{key:"updateElements",value:function(e,t,n,r){for(var i="reset"===r,a=this._cachedMeta,o=a.iScale,s=a.vScale,l=a._stacked,u=a._dataset,c=this.resolveDataElementOptions(t,r),h=this.getSharedOptions(c),f=this.includeOptions(r,h),d=o.axis,p=s.axis,m=this.options,v=m.spanGaps,g=m.segment,y=Ud(v)?v:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||i||"none"===r,x=t>0&&this.getParsed(t-1),b=t;b<t+n;++b){var w=e[b],k=this.getParsed(b),E=_?w:{},S=ld(k[p]),T=E[d]=o.getPixelForValue(k[d],b),C=E[p]=i||S?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,k,l):k[p],b);E.skip=isNaN(T)||isNaN(C)||S,E.stop=b>0&&Math.abs(k[d]-x[d])>y,g&&(E.parsed=k,E.raw=u.data[b]),f&&(E.options=h||this.resolveDataElementOptions(b,w.active?"active":r)),_||this.updateElement(w,b,E,r),x=k}this.updateSharedOptions(h,r,c)}},{key:"getMaxOverflow",value:function(){var e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){for(var n=0,r=t.length-1;r>=0;--r)n=Math.max(n,t[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}var i=e.dataset,a=i.options&&i.options.borderWidth||0;if(!t.length)return a;var o=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(a,o,s)/2}}]),n}(pv);(0,Ye.Z)(Pv,"id","scatter"),(0,Ye.Z)(Pv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Ye.Z)(Pv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Iv(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var zv=function(){function e(t){(0,o.Z)(this,e),(0,Ye.Z)(this,"options",void 0),this.options=t||{}}return(0,s.Z)(e,[{key:"init",value:function(){}},{key:"formats",value:function(){return Iv()}},{key:"parse",value:function(){return Iv()}},{key:"format",value:function(){return Iv()}},{key:"add",value:function(){return Iv()}},{key:"diff",value:function(){return Iv()}},{key:"startOf",value:function(){return Iv()}},{key:"endOf",value:function(){return Iv()}}],[{key:"override",value:function(t){Object.assign(e.prototype,t)}}]),e}(),Lv={_date:zv};function Dv(e,t,n,r){var i=e.controller,a=e.data,o=e._sorted,s=i._cachedMeta.iScale;if(s&&t===s.axis&&"r"!==t&&o&&a.length){var l=s._reversePixels?rp:np;if(!r)return l(a,t,n);if(i._sharedOptions){var u=a[0],c="function"===typeof u.getRange&&u.getRange(t);if(c){var h=l(a,t,n-c),f=l(a,t,n+c);return{lo:h.lo,hi:f.hi}}}}return{lo:0,hi:a.length-1}}function Rv(e,t,n,r,i){for(var a=e.getSortedVisibleDatasetMetas(),o=n[t],s=0,l=a.length;s<l;++s)for(var u=a[s],c=u.index,h=u.data,f=Dv(a[s],t,o,i),d=f.lo,p=f.hi,m=d;m<=p;++m){var v=h[m];v.skip||r(v,c,m)}}function Ov(e,t,n,r,i){var a=[];if(!i&&!e.isPointInArea(t))return a;return Rv(e,n,t,(function(n,o,s){(i||Np(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&a.push({element:n,datasetIndex:o,index:s})}),!0),a}function jv(e,t,n,r,i,a){var o=[],s=function(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var i=t?Math.abs(e.x-r.x):0,a=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(a,2))}}(n),l=Number.POSITIVE_INFINITY;return Rv(e,n,t,(function(n,u,c){var h=n.inRange(t.x,t.y,i);if(!r||h){var f=n.getCenterPoint(i);if(!!a||e.isPointInArea(f)||h){var d=s(t,f);d<l?(o=[{element:n,datasetIndex:u,index:c}],l=d):d===l&&o.push({element:n,datasetIndex:u,index:c})}}})),o}function Nv(e,t,n,r,i,a){return a||e.isPointInArea(t)?"r"!==n||r?jv(e,t,n,r,i,a):function(e,t,n,r){var i=[];return Rv(e,n,t,(function(e,n,a){var o=e.getProps(["startAngle","endAngle"],r),s=o.startAngle,l=o.endAngle;Jd(Gd(e,{x:t.x,y:t.y}).angle,s,l)&&i.push({element:e,datasetIndex:n,index:a})})),i}(e,t,n,i):[]}function Bv(e,t,n,r,i){var a=[],o="x"===n?"inXRange":"inYRange",s=!1;return Rv(e,n,t,(function(e,r,l){e[o](t[n],i)&&(a.push({element:e,datasetIndex:r,index:l}),s=s||e.inRange(t.x,t.y,i))})),r&&!s?[]:a}var Fv={evaluateInteractionItems:Rv,modes:{index:function(e,t,n,r){var i=zm(t,e),a=n.axis||"x",o=n.includeInvisible||!1,s=n.intersect?Ov(e,i,a,r,o):Nv(e,i,a,!1,r,o),l=[];return s.length?(e.getSortedVisibleDatasetMetas().forEach((function(e){var t=s[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset:function(e,t,n,r){var i=zm(t,e),a=n.axis||"xy",o=n.includeInvisible||!1,s=n.intersect?Ov(e,i,a,r,o):Nv(e,i,a,!1,r,o);if(s.length>0){var l=s[0].datasetIndex,u=e.getDatasetMeta(l).data;s=[];for(var c=0;c<u.length;++c)s.push({element:u[c],datasetIndex:l,index:c})}return s},point:function(e,t,n,r){return Ov(e,zm(t,e),n.axis||"xy",r,n.includeInvisible||!1)},nearest:function(e,t,n,r){var i=zm(t,e),a=n.axis||"xy",o=n.includeInvisible||!1;return Nv(e,i,a,n.intersect,r,o)},x:function(e,t,n,r){return Bv(e,zm(t,e),"x",n.intersect,r)},y:function(e,t,n,r){return Bv(e,zm(t,e),"y",n.intersect,r)}}},$v=["left","top","right","bottom"];function Vv(e,t){return e.filter((function(e){return e.pos===t}))}function Uv(e,t){return e.filter((function(e){return-1===$v.indexOf(e.pos)&&e.box.axis===t}))}function Zv(e,t){return e.sort((function(e,n){var r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight}))}function Hv(e,t){var n,r,i,a=function(e){var t,n={},r=(0,w.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=i.stack,o=i.pos,s=i.stackWeight;if(a&&$v.includes(o)){var l=n[a]||(n[a]={count:0,placed:0,weight:0,size:0});l.count++,l.weight+=s}}}catch(u){r.e(u)}finally{r.f()}return n}(e),o=t.vBoxMaxWidth,s=t.hBoxMaxHeight;for(n=0,r=e.length;n<r;++n){var l=(i=e[n]).box.fullSize,u=a[i.stack],c=u&&i.stackWeight/u.weight;i.horizontal?(i.width=c?c*o:l&&t.availableWidth,i.height=s):(i.width=o,i.height=c?c*s:l&&t.availableHeight)}return a}function Wv(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function qv(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function Gv(e,t,n,r){var i=n.pos,a=n.box,o=e.maxPadding;if(!cd(i)){n.size&&(e[i]-=n.size);var s=r[n.stack]||{size:0,count:1};s.size=Math.max(s.size,n.horizontal?a.height:a.width),n.size=s.size/s.count,e[i]+=n.size}a.getPadding&&qv(o,a.getPadding());var l=Math.max(0,t.outerWidth-Wv(o,e,"left","right")),u=Math.max(0,t.outerHeight-Wv(o,e,"top","bottom")),c=l!==e.w,h=u!==e.h;return e.w=l,e.h=u,n.horizontal?{same:c,other:h}:{same:h,other:c}}function Xv(e,t){var n=t.maxPadding;function r(e){var r={left:0,top:0,right:0,bottom:0};return e.forEach((function(e){r[e]=Math.max(t[e],n[e])})),r}return r(e?["left","right"]:["top","bottom"])}function Kv(e,t,n,r){var i,a,o,s,l,u,c=[];for(i=0,a=e.length,l=0;i<a;++i){(s=(o=e[i]).box).update(o.width||t.w,o.height||t.h,Xv(o.horizontal,t));var h=Gv(t,n,o,r),f=h.same,d=h.other;l|=f&&c.length,u=u||d,s.fullSize||c.push(o)}return l&&Kv(c,t,n,r)||u}function Yv(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function Jv(e,t,n,r){var i,a=n.padding,o=t.x,s=t.y,l=(0,w.Z)(e);try{for(l.s();!(i=l.n()).done;){var u=i.value,c=u.box,h=r[u.stack]||{count:1,placed:0,weight:1},f=u.stackWeight/h.weight||1;if(u.horizontal){var d=t.w*f,p=h.size||c.height;Md(h.start)&&(s=h.start),c.fullSize?Yv(c,a.left,s,n.outerWidth-a.right-a.left,p):Yv(c,t.left+h.placed,s,d,p),h.start=s,h.placed+=d,s=c.bottom}else{var m=t.h*f,v=h.size||c.width;Md(h.start)&&(o=h.start),c.fullSize?Yv(c,o,a.top,v,n.outerHeight-a.bottom-a.top):Yv(c,o,t.top+h.placed,v,m),h.start=o,h.placed+=m,o=c.right}}}catch(g){l.e(g)}finally{l.f()}t.x=o,t.y=s}var Qv=function(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw:function(e){t.draw(e)}}]},e.boxes.push(t)},eg=function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},tg=function(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},ng=function(e,t,n,r){if(e){var i=em(e.options.layout.padding),a=Math.max(t-i.width,0),o=Math.max(n-i.height,0),s=function(e){var t=function(e){var t,n,r,i,a,o,s=[];for(t=0,n=(e||[]).length;t<n;++t){var l=r=e[t];i=l.position;var u=l.options;a=u.stack;var c=u.stackWeight;o=void 0===c?1:c,s.push({index:t,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&i+a,stackWeight:o})}return s}(e),n=Zv(t.filter((function(e){return e.box.fullSize})),!0),r=Zv(Vv(t,"left"),!0),i=Zv(Vv(t,"right")),a=Zv(Vv(t,"top"),!0),o=Zv(Vv(t,"bottom")),s=Uv(t,"x"),l=Uv(t,"y");return{fullSize:n,leftAndTop:r.concat(a),rightAndBottom:i.concat(l).concat(o).concat(s),chartArea:Vv(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:a.concat(o).concat(s)}}(e.boxes),l=s.vertical,u=s.horizontal;vd(e.boxes,(function(e){"function"===typeof e.beforeLayout&&e.beforeLayout()}));var c=l.reduce((function(e,t){return t.box.options&&!1===t.box.options.display?e:e+1}),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/c,hBoxMaxHeight:o/2}),f=Object.assign({},i);qv(f,em(r));var d=Object.assign({maxPadding:f,w:a,h:o,x:i.left,y:i.top},i),p=Hv(l.concat(u),h);Kv(s.fullSize,d,h,p),Kv(l,d,h,p),Kv(u,d,h,p)&&Kv(l,d,h,p),function(e){var t=e.maxPadding;function n(n){var r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(d),Jv(s.leftAndTop,d,h,p),d.x+=d.w,d.y+=d.h,Jv(s.rightAndBottom,d,h,p),e.chartArea={left:d.left,top:d.top,right:d.left+d.w,bottom:d.top+d.h,height:d.h,width:d.w},vd(s.chartArea,(function(t){var n=t.box;Object.assign(n,e.chartArea),n.update(d.w,d.h,{left:0,top:0,right:0,bottom:0})}))}},rg=function(){function e(){(0,o.Z)(this,e)}return(0,s.Z)(e,[{key:"acquireContext",value:function(e,t){}},{key:"releaseContext",value:function(e){return!1}},{key:"addEventListener",value:function(e,t,n){}},{key:"removeEventListener",value:function(e,t,n){}},{key:"getDevicePixelRatio",value:function(){return 1}},{key:"getMaximumSize",value:function(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}},{key:"isAttached",value:function(e){return!0}},{key:"updateConfig",value:function(e){}}]),e}(),ig=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"acquireContext",value:function(e){return e&&e.getContext&&e.getContext("2d")||null}},{key:"updateConfig",value:function(e){e.options.animation=!1}}]),n}(rg),ag="$chartjs",og={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sg=function(e){return null===e||""===e};var lg=!!Om&&{passive:!0};function ug(e,t,n){e.canvas.removeEventListener(t,n,lg)}function cg(e,t){var n,r=(0,w.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i===t||i.contains(t))return!0}}catch(a){r.e(a)}finally{r.f()}}function hg(e,t,n){var r=e.canvas,i=new MutationObserver((function(e){var t,i=!1,a=(0,w.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;i=(i=i||cg(o.addedNodes,r))&&!cg(o.removedNodes,r)}}catch(s){a.e(s)}finally{a.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}function fg(e,t,n){var r=e.canvas,i=new MutationObserver((function(e){var t,i=!1,a=(0,w.Z)(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;i=(i=i||cg(o.removedNodes,r))&&!cg(o.addedNodes,r)}}catch(s){a.e(s)}finally{a.f()}i&&n()}));return i.observe(document,{childList:!0,subtree:!0}),i}var dg=new Map,pg=0;function mg(){var e=window.devicePixelRatio;e!==pg&&(pg=e,dg.forEach((function(t,n){n.currentDevicePixelRatio!==e&&t()})))}function vg(e,t,n){var r=e.canvas,i=r&&Tm(r);if(i){var a=lp((function(e,t){var r=i.clientWidth;n(e,t),r<i.clientWidth&&n()}),window),o=new ResizeObserver((function(e){var t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||a(n,r)}));return o.observe(i),function(e,t){dg.size||window.addEventListener("resize",mg),dg.set(e,t)}(e,a),o}}function gg(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){dg.delete(e),dg.size||window.removeEventListener("resize",mg)}(e)}function yg(e,t,n){var r=e.canvas,i=lp((function(t){null!==e.ctx&&n(function(e,t){var n=og[e.type]||e.type,r=zm(e,t),i=r.x,a=r.y;return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==a?a:null}}(t,e))}),e);return function(e,t,n){e.addEventListener(t,n,lg)}(r,t,i),i}var _g=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"acquireContext",value:function(e,t){var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){var n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[ag]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",sg(i)){var a=jm(e,"width");void 0!==a&&(e.width=a)}if(sg(r))if(""===e.style.height)e.height=e.width/(t||2);else{var o=jm(e,"height");void 0!==o&&(e.height=o)}}(e,t),n):null}},{key:"releaseContext",value:function(e){var t=e.canvas;if(!t[ag])return!1;var n=t[ag].initial;["height","width"].forEach((function(e){var r=n[e];ld(r)?t.removeAttribute(e):t.setAttribute(e,r)}));var r=n.style||{};return Object.keys(r).forEach((function(e){t.style[e]=r[e]})),t.width=t.width,delete t[ag],!0}},{key:"addEventListener",value:function(e,t,n){this.removeEventListener(e,t);var r=e.$proxies||(e.$proxies={}),i={attach:hg,detach:fg,resize:vg}[t]||yg;r[t]=i(e,t,n)}},{key:"removeEventListener",value:function(e,t){var n=e.$proxies||(e.$proxies={}),r=n[t];r&&(({attach:gg,detach:gg,resize:gg}[t]||ug)(e,t,r),n[t]=void 0)}},{key:"getDevicePixelRatio",value:function(){return window.devicePixelRatio}},{key:"getMaximumSize",value:function(e,t,n,r){return Dm(e,t,n,r)}},{key:"isAttached",value:function(e){var t=Tm(e);return!(!t||!t.isConnected)}}]),n}(rg);var xg=function(){function e(){(0,o.Z)(this,e),(0,Ye.Z)(this,"x",void 0),(0,Ye.Z)(this,"y",void 0),(0,Ye.Z)(this,"active",!1),(0,Ye.Z)(this,"options",void 0),(0,Ye.Z)(this,"$animations",void 0)}return(0,s.Z)(e,[{key:"tooltipPosition",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"hasValue",value:function(){return Ud(this.x)&&Ud(this.y)}},{key:"getProps",value:function(e,t){var n=this,r=this.$animations;if(!t||!r)return this;var i={};return e.forEach((function(e){i[e]=r[e]&&r[e].active()?r[e]._to:n[e]})),i}}]),e}();function bg(e,t){var n=e.options.ticks,r=function(e){var t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(e){var t,n,r=[];for(t=0,n=e.length;t<n;t++)e[t].major&&r.push(t);return r}(t):[],o=a.length,s=a[0],l=a[o-1],u=[];if(o>i)return function(e,t,n,r){var i,a=0,o=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===o&&(t.push(e[i]),o=n[++a*r])}(t,u,a,o/i),u;var c=function(e,t,n){var r=function(e){var t,n,r=e.length;if(r<2)return!1;for(n=e[0],t=1;t<r;++t)if(e[t]-e[t-1]!==n)return!1;return n}(e),i=t.length/n;if(!r)return Math.max(i,1);for(var a=function(e){var t,n=[],r=Math.sqrt(e);for(t=1;t<r;t++)e%t===0&&(n.push(t),n.push(e/t));return r===(0|r)&&n.push(r),n.sort((function(e,t){return e-t})).pop(),n}(r),o=0,s=a.length-1;o<s;o++){var l=a[o];if(l>i)return l}return Math.max(i,1)}(a,t,i);if(o>0){var h,f,d=o>1?Math.round((l-s)/(o-1)):null;for(wg(t,u,c,ld(d)?0:s-d,s),h=0,f=o-1;h<f;h++)wg(t,u,c,a[h],a[h+1]);return wg(t,u,c,l,ld(d)?t.length:l+d),u}return wg(t,u,c),u}function wg(e,t,n,r,i){var a,o,s,l=dd(r,0),u=Math.min(dd(i,e.length),e.length),c=0;for(n=Math.ceil(n),i&&(n=(a=i-r)/Math.floor(a/n)),s=l;s<0;)c++,s=Math.round(l+c*n);for(o=Math.max(l,0);o<u;o++)o===s&&(t.push(e[o]),c++,s=Math.round(l+c*n))}(0,Ye.Z)(xg,"defaults",{}),(0,Ye.Z)(xg,"defaultRoutes",void 0);var kg=function(e,t,n){return"top"===t||"left"===t?e[t]+n:e[t]-n},Eg=function(e,t){return Math.min(t||e,e)};function Sg(e,t){for(var n=[],r=e.length/t,i=e.length,a=0;a<i;a+=r)n.push(e[Math.floor(a)]);return n}function Tg(e,t,n){var r,i=e.ticks.length,a=Math.min(t,i-1),o=e._startPixel,s=e._endPixel,l=1e-6,u=e.getPixelForTick(a);if(!(n&&(r=1===i?Math.max(u-o,s-u):0===t?(e.getPixelForTick(1)-u)/2:(u-e.getPixelForTick(a-1))/2,(u+=a<t?r:-r)<o-l||u>s+l)))return u}function Cg(e){return e.drawTicks?e.tickLength:0}function Mg(e,t){if(!e.display)return 0;var n=tm(e.font,t),r=em(e.padding);return(ud(e.text)?e.text.length:1)*n.lineHeight+r.height}function Ag(e,t,n){var r=up(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=function(e){return"left"===e?"right":"right"===e?"left":e}(r)),r}var Pg=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).id=e.id,r.type=e.type,r.options=void 0,r.ctx=e.ctx,r.chart=e.chart,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r._margins={left:0,right:0,top:0,bottom:0},r.maxWidth=void 0,r.maxHeight=void 0,r.paddingTop=void 0,r.paddingBottom=void 0,r.paddingLeft=void 0,r.paddingRight=void 0,r.axis=void 0,r.labelRotation=void 0,r.min=void 0,r.max=void 0,r._range=void 0,r.ticks=[],r._gridLineItems=null,r._labelItems=null,r._labelSizes=null,r._length=0,r._maxLength=0,r._longestTextCache={},r._startPixel=void 0,r._endPixel=void 0,r._reversePixels=!1,r._userMax=void 0,r._userMin=void 0,r._suggestedMax=void 0,r._suggestedMin=void 0,r._ticksLength=0,r._borderValue=0,r._cache={},r._dataLimitsCached=!1,r.$context=void 0,r}return(0,s.Z)(n,[{key:"init",value:function(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}},{key:"parse",value:function(e,t){return e}},{key:"getUserBounds",value:function(){var e=this._userMin,t=this._userMax,n=this._suggestedMin,r=this._suggestedMax;return e=fd(e,Number.POSITIVE_INFINITY),t=fd(t,Number.NEGATIVE_INFINITY),n=fd(n,Number.POSITIVE_INFINITY),r=fd(r,Number.NEGATIVE_INFINITY),{min:fd(e,n),max:fd(t,r),minDefined:hd(e),maxDefined:hd(t)}}},{key:"getMinMax",value:function(e){var t,n=this.getUserBounds(),r=n.min,i=n.max,a=n.minDefined,o=n.maxDefined;if(a&&o)return{min:r,max:i};for(var s=this.getMatchingVisibleMetas(),l=0,u=s.length;l<u;++l)t=s[l].controller.getMinMax(this,e),a||(r=Math.min(r,t.min)),o||(i=Math.max(i,t.max));return{min:fd(r=o&&r>i?i:r,fd(i=a&&r>i?r:i,r)),max:fd(i,fd(r,i))}}},{key:"getPadding",value:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}},{key:"getTicks",value:function(){return this.ticks}},{key:"getLabels",value:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}},{key:"getLabelItems",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}},{key:"beforeLayout",value:function(){this._cache={},this._dataLimitsCached=!1}},{key:"beforeUpdate",value:function(){md(this.options.beforeUpdate,[this])}},{key:"update",value:function(e,t,n){var r=this.options,i=r.beginAtZero,a=r.grace,o=r.ticks,s=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){var r=e.min,i=e.max,a=pd(t,(i-r)/2),o=function(e,t){return n&&0===e?0:e+t};return{min:o(r,-Math.abs(a)),max:o(i,a)}}(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();var l=s<this.ticks.length;this._convertTicksToLabels(l?Sg(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=bg(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}},{key:"configure",value:function(){var e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}},{key:"afterUpdate",value:function(){md(this.options.afterUpdate,[this])}},{key:"beforeSetDimensions",value:function(){md(this.options.beforeSetDimensions,[this])}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}},{key:"afterSetDimensions",value:function(){md(this.options.afterSetDimensions,[this])}},{key:"_callHooks",value:function(e){this.chart.notifyPlugins(e,this.getContext()),md(this.options[e],[this])}},{key:"beforeDataLimits",value:function(){this._callHooks("beforeDataLimits")}},{key:"determineDataLimits",value:function(){}},{key:"afterDataLimits",value:function(){this._callHooks("afterDataLimits")}},{key:"beforeBuildTicks",value:function(){this._callHooks("beforeBuildTicks")}},{key:"buildTicks",value:function(){return[]}},{key:"afterBuildTicks",value:function(){this._callHooks("afterBuildTicks")}},{key:"beforeTickToLabelConversion",value:function(){md(this.options.beforeTickToLabelConversion,[this])}},{key:"generateTickLabels",value:function(e){var t,n,r,i=this.options.ticks;for(t=0,n=e.length;t<n;t++)(r=e[t]).label=md(i.callback,[r.value,t,e],this)}},{key:"afterTickToLabelConversion",value:function(){md(this.options.afterTickToLabelConversion,[this])}},{key:"beforeCalculateLabelRotation",value:function(){md(this.options.beforeCalculateLabelRotation,[this])}},{key:"calculateLabelRotation",value:function(){var e,t,n,r=this.options,i=r.ticks,a=Eg(this.ticks.length,r.ticks.maxTicksLimit),o=i.minRotation||0,s=i.maxRotation,l=o;if(!this._isVisible()||!i.display||o>=s||a<=1||!this.isHorizontal())this.labelRotation=o;else{var u=this._getLabelSizes(),c=u.widest.width,h=u.highest.height,f=Qd(this.chart.width-c,0,this.maxWidth);c+6>(e=r.offset?this.maxWidth/a:f/(a-1))&&(e=f/(a-(r.offset?.5:1)),t=this.maxHeight-Cg(r.grid)-i.padding-Mg(r.title,this.chart.options.font),n=Math.sqrt(c*c+h*h),l=Wd(Math.min(Math.asin(Qd((u.highest.height+6)/e,-1,1)),Math.asin(Qd(t/n,-1,1))-Math.asin(Qd(h/n,-1,1)))),l=Math.max(o,Math.min(s,l))),this.labelRotation=l}}},{key:"afterCalculateLabelRotation",value:function(){md(this.options.afterCalculateLabelRotation,[this])}},{key:"afterAutoSkip",value:function(){}},{key:"beforeFit",value:function(){md(this.options.beforeFit,[this])}},{key:"fit",value:function(){var e={width:0,height:0},t=this.chart,n=this.options,r=n.ticks,i=n.title,a=n.grid,o=this._isVisible(),s=this.isHorizontal();if(o){var l=Mg(i,t.options.font);if(s?(e.width=this.maxWidth,e.height=Cg(a)+l):(e.height=this.maxHeight,e.width=Cg(a)+l),r.display&&this.ticks.length){var u=this._getLabelSizes(),c=u.first,h=u.last,f=u.widest,d=u.highest,p=2*r.padding,m=Hd(this.labelRotation),v=Math.cos(m),g=Math.sin(m);if(s){var y=r.mirror?0:g*f.width+v*d.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{var _=r.mirror?0:v*f.width+g*d.height;e.width=Math.min(this.maxWidth,e.width+_+p)}this._calculatePadding(c,h,g,v)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}},{key:"_calculatePadding",value:function(e,t,n,r){var i=this.options,a=i.ticks,o=a.align,s=a.padding,l=i.position,u=0!==this.labelRotation,c="top"!==l&&"x"===this.axis;if(this.isHorizontal()){var h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),d=0,p=0;u?c?(d=r*e.width,p=n*t.height):(d=n*e.height,p=r*t.width):"start"===o?p=t.width:"end"===o?d=e.width:"inner"!==o&&(d=e.width/2,p=t.width/2),this.paddingLeft=Math.max((d-h+s)*this.width/(this.width-h),0),this.paddingRight=Math.max((p-f+s)*this.width/(this.width-f),0)}else{var m=t.height/2,v=e.height/2;"start"===o?(m=0,v=e.height):"end"===o&&(m=t.height,v=0),this.paddingTop=m+s,this.paddingBottom=v+s}}},{key:"_handleMargins",value:function(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}},{key:"afterFit",value:function(){md(this.options.afterFit,[this])}},{key:"isHorizontal",value:function(){var e=this.options,t=e.axis,n=e.position;return"top"===n||"bottom"===n||"x"===t}},{key:"isFullSize",value:function(){return this.options.fullSize}},{key:"_convertTicksToLabels",value:function(e){var t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)ld(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}},{key:"_getLabelSizes",value:function(){var e=this._labelSizes;if(!e){var t=this.options.ticks.sampleSize,n=this.ticks;t<n.length&&(n=Sg(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}},{key:"_computeLabelSizes",value:function(e,t,n){var r,i,a,o,s,l,u,c,h,f,d,p=this.ctx,m=this._longestTextCache,v=[],g=[],y=Math.floor(t/Eg(t,n)),_=0,x=0;for(r=0;r<t;r+=y){if(o=e[r].label,s=this._resolveTickFontOptions(r),p.font=l=s.string,u=m[l]=m[l]||{data:{},gc:[]},c=s.lineHeight,h=f=0,ld(o)||ud(o)){if(ud(o))for(i=0,a=o.length;i<a;++i)ld(d=o[i])||ud(d)||(h=zp(p,u.data,u.gc,h,d),f+=c)}else h=zp(p,u.data,u.gc,h,o),f=c;v.push(h),g.push(f),_=Math.max(h,_),x=Math.max(f,x)}!function(e,t){vd(e,(function(e){var n,r=e.gc,i=r.length/2;if(i>t){for(n=0;n<i;++n)delete e.data[r[n]];r.splice(0,i)}}))}(m,t);var b=v.indexOf(_),w=g.indexOf(x),k=function(e){return{width:v[e]||0,height:g[e]||0}};return{first:k(0),last:k(t-1),widest:k(b),highest:k(w),widths:v,heights:g}}},{key:"getLabelForValue",value:function(e){return e}},{key:"getPixelForValue",value:function(e,t){return NaN}},{key:"getValueForPixel",value:function(e){}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getPixelForDecimal",value:function(e){this._reversePixels&&(e=1-e);var t=this._startPixel+e*this._length;return Qd(this._alignToPixels?Dp(this.chart,t,0):t,-32768,32767)}},{key:"getDecimalForPixel",value:function(e){var t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}},{key:"getBasePixel",value:function(){return this.getPixelForValue(this.getBaseValue())}},{key:"getBaseValue",value:function(){var e=this.min,t=this.max;return e<0&&t<0?t:e>0&&t>0?e:0}},{key:"getContext",value:function(e){var t=this.ticks||[];if(e>=0&&e<t.length){var n=t[e];return n.$context||(n.$context=function(e,t,n){return rm(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return rm(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}},{key:"_tickSize",value:function(){var e=this.options.ticks,t=Hd(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),a=e.autoSkipPadding||0,o=i?i.widest.width+a:0,s=i?i.highest.height+a:0;return this.isHorizontal()?s*n>o*r?o/n:s/r:s*r<o*n?s/n:o/r}},{key:"_isVisible",value:function(){var e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}},{key:"_computeGridLineItems",value:function(e){var t,n,r,i,a,o,s,l,u,c,h,f,d=this.axis,p=this.chart,m=this.options,v=m.grid,g=m.position,y=m.border,_=v.offset,x=this.isHorizontal(),b=this.ticks.length+(_?1:0),w=Cg(v),k=[],E=y.setContext(this.getContext()),S=E.display?E.width:0,T=S/2,C=function(e){return Dp(p,e,S)};if("top"===g)t=C(this.bottom),o=this.bottom-w,l=t-T,c=C(e.top)+T,f=e.bottom;else if("bottom"===g)t=C(this.top),c=e.top,f=C(e.bottom)-T,o=t+T,l=this.top+w;else if("left"===g)t=C(this.right),a=this.right-w,s=t-T,u=C(e.left)+T,h=e.right;else if("right"===g)t=C(this.left),u=e.left,h=C(e.right)-T,a=t+T,s=this.left+w;else if("x"===d){if("center"===g)t=C((e.top+e.bottom)/2+.5);else if(cd(g)){var M=Object.keys(g)[0],A=g[M];t=C(this.chart.scales[M].getPixelForValue(A))}c=e.top,f=e.bottom,l=(o=t+T)+w}else if("y"===d){if("center"===g)t=C((e.left+e.right)/2);else if(cd(g)){var P=Object.keys(g)[0],I=g[P];t=C(this.chart.scales[P].getPixelForValue(I))}s=(a=t-T)-w,u=e.left,h=e.right}var z=dd(m.ticks.maxTicksLimit,b),L=Math.max(1,Math.ceil(b/z));for(n=0;n<b;n+=L){var D=this.getContext(n),R=v.setContext(D),O=y.setContext(D),j=R.lineWidth,N=R.color,B=O.dash||[],F=O.dashOffset,$=R.tickWidth,V=R.tickColor,U=R.tickBorderDash||[],Z=R.tickBorderDashOffset;void 0!==(r=Tg(this,n,_))&&(i=Dp(p,r,j),x?a=s=u=h=i:o=l=c=f=i,k.push({tx1:a,ty1:o,tx2:s,ty2:l,x1:u,y1:c,x2:h,y2:f,width:j,color:N,borderDash:B,borderDashOffset:F,tickWidth:$,tickColor:V,tickBorderDash:U,tickBorderDashOffset:Z}))}return this._ticksLength=b,this._borderValue=t,k}},{key:"_computeLabelItems",value:function(e){var t,n,r,i,a,o,s,l,u,c,h,f=this.axis,d=this.options,p=d.position,m=d.ticks,v=this.isHorizontal(),g=this.ticks,y=m.align,_=m.crossAlign,x=m.padding,b=m.mirror,w=Cg(d.grid),k=w+x,E=b?-x:k,S=-Hd(this.labelRotation),T=[],C="middle";if("top"===p)a=this.bottom-E,o=this._getXAxisLabelAlignment();else if("bottom"===p)a=this.top+E,o=this._getXAxisLabelAlignment();else if("left"===p){var M=this._getYAxisLabelAlignment(w);o=M.textAlign,i=M.x}else if("right"===p){var A=this._getYAxisLabelAlignment(w);o=A.textAlign,i=A.x}else if("x"===f){if("center"===p)a=(e.top+e.bottom)/2+k;else if(cd(p)){var P=Object.keys(p)[0],I=p[P];a=this.chart.scales[P].getPixelForValue(I)+k}o=this._getXAxisLabelAlignment()}else if("y"===f){if("center"===p)i=(e.left+e.right)/2-k;else if(cd(p)){var z=Object.keys(p)[0],L=p[z];i=this.chart.scales[z].getPixelForValue(L)}o=this._getYAxisLabelAlignment(w).textAlign}"y"===f&&("start"===y?C="top":"end"===y&&(C="bottom"));var D=this._getLabelSizes();for(t=0,n=g.length;t<n;++t){r=g[t].label;var R=m.setContext(this.getContext(t));s=this.getPixelForTick(t)+m.labelOffset,u=(l=this._resolveTickFontOptions(t)).lineHeight;var O=(c=ud(r)?r.length:1)/2,j=R.color,N=R.textStrokeColor,B=R.textStrokeWidth,F=o;v?(i=s,"inner"===o&&(F=t===n-1?this.options.reverse?"left":"right":0===t?this.options.reverse?"right":"left":"center"),h="top"===p?"near"===_||0!==S?-c*u+u/2:"center"===_?-D.highest.height/2-O*u+u:-D.highest.height+u/2:"near"===_||0!==S?u/2:"center"===_?D.highest.height/2-O*u:D.highest.height-c*u,b&&(h*=-1),0===S||R.showLabelBackdrop||(i+=u/2*Math.sin(S))):(a=s,h=(1-c)*u/2);var $=void 0;if(R.showLabelBackdrop){var V=em(R.backdropPadding),U=D.heights[t],Z=D.widths[t],H=h-V.top,W=0-V.left;switch(C){case"middle":H-=U/2;break;case"bottom":H-=U}switch(o){case"center":W-=Z/2;break;case"right":W-=Z}$={left:W,top:H,width:Z+V.width,height:U+V.height,color:R.backdropColor}}T.push({label:r,font:l,textOffset:h,options:{rotation:S,color:j,strokeColor:N,strokeWidth:B,textAlign:F,textBaseline:C,translation:[i,a],backdrop:$}})}return T}},{key:"_getXAxisLabelAlignment",value:function(){var e=this.options,t=e.position,n=e.ticks;if(-Hd(this.labelRotation))return"top"===t?"left":"right";var r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}},{key:"_getYAxisLabelAlignment",value:function(e){var t,n,r=this.options,i=r.position,a=r.ticks,o=a.crossAlign,s=a.mirror,l=a.padding,u=e+l,c=this._getLabelSizes().widest.width;return"left"===i?s?(n=this.right+l,"near"===o?t="left":"center"===o?(t="center",n+=c/2):(t="right",n+=c)):(n=this.right-u,"near"===o?t="right":"center"===o?(t="center",n-=c/2):(t="left",n=this.left)):"right"===i?s?(n=this.left+l,"near"===o?t="right":"center"===o?(t="center",n-=c/2):(t="left",n-=c)):(n=this.left+u,"near"===o?t="left":"center"===o?(t="center",n+=c/2):(t="right",n=this.right)):t="right",{textAlign:t,x:n}}},{key:"_computeLabelArea",value:function(){if(!this.options.ticks.mirror){var e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}}},{key:"drawBackground",value:function(){var e=this.ctx,t=this.options.backgroundColor,n=this.left,r=this.top,i=this.width,a=this.height;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,a),e.restore())}},{key:"getLineWidthForValue",value:function(e){var t=this.options.grid;if(!this._isVisible()||!t.display)return 0;var n=this.ticks.findIndex((function(t){return t.value===e}));return n>=0?t.setContext(this.getContext(n)).lineWidth:0}},{key:"drawGrid",value:function(e){var t,n,r=this.options.grid,i=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o=function(e,t,n){n.width&&n.color&&(i.save(),i.lineWidth=n.width,i.strokeStyle=n.color,i.setLineDash(n.borderDash||[]),i.lineDashOffset=n.borderDashOffset,i.beginPath(),i.moveTo(e.x,e.y),i.lineTo(t.x,t.y),i.stroke(),i.restore())};if(r.display)for(t=0,n=a.length;t<n;++t){var s=a[t];r.drawOnChartArea&&o({x:s.x1,y:s.y1},{x:s.x2,y:s.y2},s),r.drawTicks&&o({x:s.tx1,y:s.ty1},{x:s.tx2,y:s.ty2},{color:s.tickColor,width:s.tickWidth,borderDash:s.tickBorderDash,borderDashOffset:s.tickBorderDashOffset})}}},{key:"drawBorder",value:function(){var e=this.chart,t=this.ctx,n=this.options,r=n.border,i=n.grid,a=r.setContext(this.getContext()),o=r.display?a.width:0;if(o){var s,l,u,c,h=i.setContext(this.getContext(0)).lineWidth,f=this._borderValue;this.isHorizontal()?(s=Dp(e,this.left,o)-o/2,l=Dp(e,this.right,h)+h/2,u=c=f):(u=Dp(e,this.top,o)-o/2,c=Dp(e,this.bottom,h)+h/2,s=l=f),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(s,u),t.lineTo(l,c),t.stroke(),t.restore()}}},{key:"drawLabels",value:function(e){if(this.options.ticks.display){var t=this.ctx,n=this._computeLabelArea();n&&Bp(t,n);var r,i=this.getLabelItems(e),a=(0,w.Z)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.options,l=o.font;Hp(t,o.label,0,o.textOffset,l,s)}}catch(u){a.e(u)}finally{a.f()}n&&Fp(t)}}},{key:"drawTitle",value:function(){var e=this.ctx,t=this.options,n=t.position,r=t.title,i=t.reverse;if(r.display){var a=tm(r.font),o=em(r.padding),s=r.align,l=a.lineHeight/2;"bottom"===n||"center"===n||cd(n)?(l+=o.bottom,ud(r.text)&&(l+=a.lineHeight*(r.text.length-1))):l+=o.top;var u=function(e,t,n,r){var i,a,o,s=e.top,l=e.left,u=e.bottom,c=e.right,h=e.chart,f=h.chartArea,d=h.scales,p=0,m=u-s,v=c-l;if(e.isHorizontal()){if(a=cp(r,l,c),cd(n)){var g=Object.keys(n)[0],y=n[g];o=d[g].getPixelForValue(y)+m-t}else o="center"===n?(f.bottom+f.top)/2+m-t:kg(e,n,t);i=c-l}else{if(cd(n)){var _=Object.keys(n)[0],x=n[_];a=d[_].getPixelForValue(x)-v+t}else a="center"===n?(f.left+f.right)/2-v+t:kg(e,n,t);o=cp(r,u,s),p="left"===n?-Od:Od}return{titleX:a,titleY:o,maxWidth:i,rotation:p}}(this,l,n,s),c=u.titleX,h=u.titleY,f=u.maxWidth,d=u.rotation;Hp(e,r.text,0,0,a,{color:r.color,maxWidth:f,rotation:d,textAlign:Ag(s,n,i),textBaseline:"middle",translation:[c,h]})}}},{key:"draw",value:function(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}},{key:"_layers",value:function(){var e=this,t=this.options,r=t.ticks&&t.ticks.z||0,i=dd(t.grid&&t.grid.z,-1),a=dd(t.border&&t.border.z,0);return this._isVisible()&&this.draw===n.prototype.draw?[{z:i,draw:function(t){e.drawBackground(),e.drawGrid(t),e.drawTitle()}},{z:a,draw:function(){e.drawBorder()}},{z:r,draw:function(t){e.drawLabels(t)}}]:[{z:r,draw:function(t){e.draw(t)}}]}},{key:"getMatchingVisibleMetas",value:function(e){var t,n,r=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",a=[];for(t=0,n=r.length;t<n;++t){var o=r[t];o[i]!==this.id||e&&o.type!==e||a.push(o)}return a}},{key:"_resolveTickFontOptions",value:function(e){return tm(this.options.ticks.setContext(this.getContext(e)).font)}},{key:"_maxDigits",value:function(){var e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}]),n}(xg),Ig=function(){function e(t,n,r){(0,o.Z)(this,e),this.type=t,this.scope=n,this.override=r,this.items=Object.create(null)}return(0,s.Z)(e,[{key:"isForType",value:function(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}},{key:"register",value:function(e){var t,n=Object.getPrototypeOf(e);(function(e){return"id"in e&&"defaults"in e})(n)&&(t=this.register(n));var r=this.items,i=e.id,a=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){var r=bd(Object.create(null),[n?Ip.get(n):{},Ip.get(t),e.defaults]);Ip.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((function(n){var r=n.split("."),i=r.pop(),a=[e].concat(r).join("."),o=t[n].split("."),s=o.pop(),l=o.join(".");Ip.route(a,i,l,s)}))}(t,e.defaultRoutes);e.descriptors&&Ip.describe(t,e.descriptors)}(e,a,t),this.override&&Ip.override(e.id,e.overrides)),a}},{key:"get",value:function(e){return this.items[e]}},{key:"unregister",value:function(e){var t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Ip[r]&&(delete Ip[r][n],this.override&&delete Tp[n])}}]),e}();var zg=function(){function e(){(0,o.Z)(this,e),this.controllers=new Ig(pv,"datasets",!0),this.elements=new Ig(xg,"elements"),this.plugins=new Ig(Object,"plugins"),this.scales=new Ig(Pg,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}return(0,s.Z)(e,[{key:"add",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}},{key:"remove",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}},{key:"addControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}},{key:"addElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}},{key:"addPlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}},{key:"addScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}},{key:"getController",value:function(e){return this._get(e,this.controllers,"controller")}},{key:"getElement",value:function(e){return this._get(e,this.elements,"element")}},{key:"getPlugin",value:function(e){return this._get(e,this.plugins,"plugin")}},{key:"getScale",value:function(e){return this._get(e,this.scales,"scale")}},{key:"removeControllers",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}},{key:"removeElements",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}},{key:"removePlugins",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}},{key:"removeScales",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}},{key:"_each",value:function(e,t,n){var r=this;(0,a.Z)(t).forEach((function(t){var i=n||r._getRegistryForType(t);n||i.isForType(t)||i===r.plugins&&t.id?r._exec(e,i,t):vd(t,(function(t){var i=n||r._getRegistryForType(t);r._exec(e,i,t)}))}))}},{key:"_exec",value:function(e,t,n){var r=Cd(e);md(n["before"+r],[],n),t[e](n),md(n["after"+r],[],n)}},{key:"_getRegistryForType",value:function(e){for(var t=0;t<this._typedRegistries.length;t++){var n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}},{key:"_get",value:function(e,t,n){var r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}]),e}(),Lg=new zg,Dg=function(){function e(){(0,o.Z)(this,e),this._init=[]}return(0,s.Z)(e,[{key:"notify",value:function(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));var i=r?this._descriptors(e).filter(r):this._descriptors(e),a=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),a}},{key:"_notify",value:function(e,t,n,r){r=r||{};var i,a=(0,w.Z)(e);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=o.plugin;if(!1===md(s[n],[t,r,o.options],s)&&r.cancelable)return!1}}catch(l){a.e(l)}finally{a.f()}return!0}},{key:"invalidate",value:function(){ld(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}},{key:"_descriptors",value:function(e){if(this._cache)return this._cache;var t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}},{key:"_createDescriptors",value:function(e,t){var n=e&&e.config,r=dd(n.options&&n.options.plugins,{}),i=function(e){for(var t={},n=[],r=Object.keys(Lg.plugins.items),i=0;i<r.length;i++)n.push(Lg.getPlugin(r[i]));for(var a=e.plugins||[],o=0;o<a.length;o++){var s=a[o];-1===n.indexOf(s)&&(n.push(s),t[s.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){var i,a=t.plugins,o=t.localIds,s=[],l=e.getContext(),u=(0,w.Z)(a);try{for(u.s();!(i=u.n()).done;){var c=i.value,h=c.id,f=Rg(n[h],r);null!==f&&s.push({plugin:c,options:Og(e.config,{plugin:c,local:o[h]},f,l)})}}catch(d){u.e(d)}finally{u.f()}return s}(e,i,r,t):[]}},{key:"_notifyStateChanges",value:function(e){var t=this._oldCache||[],n=this._cache,r=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.plugin.id===t.plugin.id}))}))};this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}]),e}();function Rg(e,t){return t||!1!==e?!0===e?{}:e:null}function Og(e,t,n,r){var i=t.plugin,a=t.local,o=e.pluginScopeKeys(i),s=e.getOptionScopes(n,o);return a&&i.defaults&&s.push(i.defaults),e.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jg(e,t){var n=Ip.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Ng(e){if("x"===e||"y"===e||"r"===e)return e}function Bg(e){if(Ng(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i],s=o.axis||("top"===(l=o.position)||"bottom"===l?"x":"left"===l||"right"===l?"y":void 0)||e.length>1&&Ng(e[0].toLowerCase());if(s)return s}var l;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Fg(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function $g(e,t){var n=Tp[e.type]||{scales:{}},r=t.scales||{},i=jg(e.type,t),a=Object.create(null);return Object.keys(r).forEach((function(t){var o=r[t];if(!cd(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));var s=Bg(t,o,function(e,t){if(t.data&&t.data.datasets){var n=t.data.datasets.filter((function(t){return t.xAxisID===e||t.yAxisID===e}));if(n.length)return Fg(e,"x",n[0])||Fg(e,"y",n[0])}return{}}(t,e),Ip.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(s,i),u=n.scales||{};a[t]=wd(Object.create(null),[{axis:s},o,u[s],u[l]])})),e.data.datasets.forEach((function(n){var i=n.type||e.type,o=n.indexAxis||jg(i,t),s=(Tp[i]||{}).scales||{};Object.keys(s).forEach((function(e){var t=function(e,t){var n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),i=n[t+"AxisID"]||t;a[i]=a[i]||Object.create(null),wd(a[i],[{axis:t},r[i],s[e]])}))})),Object.keys(a).forEach((function(e){var t=a[e];wd(t,[Ip.scales[t.type],Ip.scale])})),a}function Vg(e){var t=e.options||(e.options={});t.plugins=dd(t.plugins,{}),t.scales=$g(e,t)}function Ug(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}var Zg=new Map,Hg=new Set;function Wg(e,t){var n=Zg.get(e);return n||(n=t(),Zg.set(e,n),Hg.add(n)),n}var qg=function(e,t,n){var r=Td(t,n);void 0!==r&&e.add(r)},Gg=function(){function e(t){(0,o.Z)(this,e),this._config=function(e){return(e=e||{}).data=Ug(e.data),Vg(e),e}(t),this._scopeCache=new Map,this._resolverCache=new Map}return(0,s.Z)(e,[{key:"platform",get:function(){return this._config.platform}},{key:"type",get:function(){return this._config.type},set:function(e){this._config.type=e}},{key:"data",get:function(){return this._config.data},set:function(e){this._config.data=Ug(e)}},{key:"options",get:function(){return this._config.options},set:function(e){this._config.options=e}},{key:"plugins",get:function(){return this._config.plugins}},{key:"update",value:function(){var e=this._config;this.clearCache(),Vg(e)}},{key:"clearCache",value:function(){this._scopeCache.clear(),this._resolverCache.clear()}},{key:"datasetScopeKeys",value:function(e){return Wg(e,(function(){return[["datasets.".concat(e),""]]}))}},{key:"datasetAnimationScopeKeys",value:function(e,t){return Wg("".concat(e,".transition.").concat(t),(function(){return[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]}))}},{key:"datasetElementScopeKeys",value:function(e,t){return Wg("".concat(e,"-").concat(t),(function(){return[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]}))}},{key:"pluginScopeKeys",value:function(e){var t=e.id,n=this.type;return Wg("".concat(n,"-plugin-").concat(t),(function(){return[["plugins.".concat(t)].concat((0,a.Z)(e.additionalOptionScopes||[]))]}))}},{key:"_cachedScopes",value:function(e,t){var n=this._scopeCache,r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}},{key:"getOptionScopes",value:function(e,t,n){var r=this.options,i=this.type,a=this._cachedScopes(e,n),o=a.get(t);if(o)return o;var s=new Set;t.forEach((function(t){e&&(s.add(e),t.forEach((function(t){return qg(s,e,t)}))),t.forEach((function(e){return qg(s,r,e)})),t.forEach((function(e){return qg(s,Tp[i]||{},e)})),t.forEach((function(e){return qg(s,Ip,e)})),t.forEach((function(e){return qg(s,Cp,e)}))}));var l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),Hg.has(t)&&a.set(t,l),l}},{key:"chartOptionScopes",value:function(){var e=this.options,t=this.type;return[e,Tp[t]||{},Ip.datasets[t]||{},{type:t},Ip,Cp]}},{key:"resolveNamedOptions",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""],i={$shared:!0},a=Xg(this._resolverCache,e,r),o=a.resolver,s=a.subPrefixes,l=o;(function(e,t){var n,r=om(e),i=r.isScriptable,a=r.isIndexable,o=(0,w.Z)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=i(s),u=a(s),c=(u||l)&&e[s];if(l&&(Ad(c)||Kg(c))||u&&ud(c))return!0}}catch(h){o.e(h)}finally{o.f()}return!1})(o,t)&&(i.$shared=!1,l=am(o,n=Ad(n)?n():n,this.createResolver(e,n,s)));var u,c=(0,w.Z)(t);try{for(c.s();!(u=c.n()).done;){var h=u.value;i[h]=l[h]}}catch(f){c.e(f)}finally{c.f()}return i}},{key:"createResolver",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0,i=Xg(this._resolverCache,e,n).resolver;return cd(t)?am(i,t,void 0,r):i}}]),e}();function Xg(e,t,n){var r=e.get(t);r||(r=new Map,e.set(t,r));var i=n.join(),a=r.get(i);a||(a={resolver:im(t,n),subPrefixes:n.filter((function(e){return!e.toLowerCase().includes("hover")}))},r.set(i,a));return a}var Kg=function(e){return cd(e)&&Object.getOwnPropertyNames(e).reduce((function(t,n){return t||Ad(e[n])}),!1)};var Yg=["top","bottom","left","right","chartArea"];function Jg(e,t){return"top"===e||"bottom"===e||-1===Yg.indexOf(e)&&"x"===t}function Qg(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function ey(e){var t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),md(n&&n.onComplete,[e],t)}function ty(e){var t=e.chart,n=t.options.animation;md(n&&n.onProgress,[e],t)}function ny(e){return Sm()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}var ry={},iy=function(e){var t=ny(e);return Object.values(ry).filter((function(e){return e.canvas===t})).pop()};function ay(e,t,n){for(var r=0,i=Object.keys(e);r<i.length;r++){var a=i[r],o=+a;if(o>=t){var s=e[a];delete e[a],(n>0||o>t)&&(e[o+n]=s)}}}function oy(e,t,n){return e.options.clip?e[n]:t[n]}var sy=function(){function e(t,n){var r=this;(0,o.Z)(this,e);var i=this.config=new Gg(n),a=ny(t),s=iy(a);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");var l=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(e){return!Sm()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ig:_g}(a)),this.platform.updateConfig(i);var u=this.platform.acquireContext(a,l.aspectRatio),c=u&&u.canvas,h=c&&c.height,f=c&&c.width;this.id=sd(),this.ctx=u,this.canvas=c,this.width=f,this.height=h,this._options=l,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Dg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){var n;return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}((function(e){return r.update(e)}),l.resizeDelay||0),this._dataChanges=[],ry[this.id]=this,u&&c?(Jm.listen(this,"complete",ey),Jm.listen(this,"progress",ty),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}return(0,s.Z)(e,[{key:"aspectRatio",get:function(){var e=this.options,t=e.aspectRatio,n=e.maintainAspectRatio,r=this.width,i=this.height,a=this._aspectRatio;return ld(t)?n&&a?a:i?r/i:null:t}},{key:"data",get:function(){return this.config.data},set:function(e){this.config.data=e}},{key:"options",get:function(){return this._options},set:function(e){this.config.options=e}},{key:"registry",get:function(){return Lg}},{key:"_initialize",value:function(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Rm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}},{key:"clear",value:function(){return Rp(this.canvas,this.ctx),this}},{key:"stop",value:function(){return Jm.stop(this),this}},{key:"resize",value:function(e,t){Jm.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}},{key:"_resize",value:function(e,t){var n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(r,e,t,i),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Rm(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),md(n.onResize,[this,a],this),this.attached&&this._doResize(s)&&this.render())}},{key:"ensureScalesHaveIDs",value:function(){vd(this.options.scales||{},(function(e,t){e.id=t}))}},{key:"buildOrUpdateScales",value:function(){var e=this,t=this.options,n=t.scales,r=this.scales,i=Object.keys(r).reduce((function(e,t){return e[t]=!1,e}),{}),a=[];n&&(a=a.concat(Object.keys(n).map((function(e){var t=n[e],r=Bg(e,t),i="r"===r,a="x"===r;return{options:t,dposition:i?"chartArea":a?"bottom":"left",dtype:i?"radialLinear":a?"category":"linear"}})))),vd(a,(function(n){var a=n.options,o=a.id,s=Bg(o,a),l=dd(a.type,n.dtype);void 0!==a.position&&Jg(a.position,s)===Jg(n.dposition)||(a.position=n.dposition),i[o]=!0;var u=null;o in r&&r[o].type===l?u=r[o]:(u=new(Lg.getScale(l))({id:o,type:l,ctx:e.ctx,chart:e}),r[u.id]=u);u.init(a,t)})),vd(i,(function(e,t){e||delete r[t]})),vd(r,(function(t){tg(e,t,t.options),Qv(e,t)}))}},{key:"_updateMetasets",value:function(){var e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((function(e,t){return e.index-t.index})),n>t){for(var r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(Qg("order","index"))}},{key:"_removeUnreferencedMetasets",value:function(){var e=this,t=this._metasets,n=this.data.datasets;t.length>n.length&&delete this._stacks,t.forEach((function(t,r){0===n.filter((function(e){return e===t._dataset})).length&&e._destroyDatasetMeta(r)}))}},{key:"buildOrUpdateControllers",value:function(){var e,t,n=[],r=this.data.datasets;for(this._removeUnreferencedMetasets(),e=0,t=r.length;e<t;e++){var i=r[e],a=this.getDatasetMeta(e),o=i.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(e),a=this.getDatasetMeta(e)),a.type=o,a.indexAxis=i.indexAxis||jg(o,this.options),a.order=i.order||0,a.index=e,a.label=""+i.label,a.visible=this.isDatasetVisible(e),a.controller)a.controller.updateIndex(e),a.controller.linkScales();else{var s=Lg.getController(o),l=Ip.datasets[o],u=l.datasetElementType,c=l.dataElementType;Object.assign(s,{dataElementType:Lg.getElement(c),datasetElementType:u&&Lg.getElement(u)}),a.controller=new s(this,e),n.push(a.controller)}}return this._updateMetasets(),n}},{key:"_resetElements",value:function(){var e=this;vd(this.data.datasets,(function(t,n){e.getDatasetMeta(n).controller.reset()}),this)}},{key:"reset",value:function(){this._resetElements(),this.notifyPlugins("reset")}},{key:"update",value:function(e){var t=this.config;t.update();var n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1!==this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})){var i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");for(var a=0,o=0,s=this.data.datasets.length;o<s;o++){var l=this.getDatasetMeta(o).controller,u=!r&&-1===i.indexOf(l);l.buildOrUpdateElements(u),a=Math.max(+l.getMaxOverflow(),a)}a=this._minPadding=n.layout.autoPadding?a:0,this._updateLayout(a),r||vd(i,(function(e){e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Qg("z","_idx"));var c=this._active,h=this._lastEvent;h?this._eventHandler(h,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}}},{key:"_updateScales",value:function(){var e=this;vd(this.scales,(function(t){eg(e,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}},{key:"_checkEventBindings",value:function(){var e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Pd(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}},{key:"_updateHiddenIndices",value:function(){var e,t=this._hiddenIndices,n=this._getUniformDataChanges()||[],r=(0,w.Z)(n);try{for(r.s();!(e=r.n()).done;){var i=e.value,a=i.method,o=i.start,s=i.count;ay(t,o,"_removeElements"===a?-s:s)}}catch(l){r.e(l)}finally{r.f()}}},{key:"_getUniformDataChanges",value:function(){var e=this._dataChanges;if(e&&e.length){this._dataChanges=[];for(var t=this.data.datasets.length,n=function(t){return new Set(e.filter((function(e){return e[0]===t})).map((function(e,t){return t+","+e.splice(1).join(",")})))},r=n(0),i=1;i<t;i++)if(!Pd(r,n(i)))return;return Array.from(r).map((function(e){return e.split(",")})).map((function(e){return{method:e[1],start:+e[2],count:+e[3]}}))}}},{key:"_updateLayout",value:function(e){var t=this;if(!1!==this.notifyPlugins("beforeLayout",{cancelable:!0})){ng(this,this.width,this.height,e);var n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],vd(this.boxes,(function(e){var n;r&&"chartArea"===e.position||(e.configure&&e.configure(),(n=t._layers).push.apply(n,(0,a.Z)(e._layers())))}),this),this._layers.forEach((function(e,t){e._idx=t})),this.notifyPlugins("afterLayout")}}},{key:"_updateDatasets",value:function(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(var t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(var r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,Ad(e)?e({datasetIndex:r}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}},{key:"_updateDataset",value:function(e,t){var n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}},{key:"render",value:function(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Jm.has(this)?this.attached&&!Jm.running(this)&&Jm.start(this):(this.draw(),ey({chart:this})))}},{key:"draw",value:function(){var e;if(this._resizeBeforeDraw){var t=this._resizeBeforeDraw,n=t.width,r=t.height;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),!(this.width<=0||this.height<=0)&&!1!==this.notifyPlugins("beforeDraw",{cancelable:!0})){var i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}}},{key:"_getSortedDatasetMetas",value:function(e){var t,n,r=this._sortedMetasets,i=[];for(t=0,n=r.length;t<n;++t){var a=r[t];e&&!a.visible||i.push(a)}return i}},{key:"getSortedVisibleDatasetMetas",value:function(){return this._getSortedDatasetMetas(!0)}},{key:"_drawDatasets",value:function(){if(!1!==this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})){for(var e=this.getSortedVisibleDatasetMetas(),t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}}},{key:"_drawDataset",value:function(e){var t=this.ctx,n=e._clip,r=!n.disabled,i=function(e,t){var n=e.xScale,r=e.yScale;return n&&r?{left:oy(n,t,"left"),right:oy(n,t,"right"),top:oy(r,t,"top"),bottom:oy(r,t,"bottom")}:t}(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(r&&Bp(t,{left:!1===n.left?0:i.left-n.left,right:!1===n.right?this.width:i.right+n.right,top:!1===n.top?0:i.top-n.top,bottom:!1===n.bottom?this.height:i.bottom+n.bottom}),e.controller.draw(),r&&Fp(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}},{key:"isPointInArea",value:function(e){return Np(e,this.chartArea,this._minPadding)}},{key:"getElementsAtEventForMode",value:function(e,t,n,r){var i=Fv.modes[t];return"function"===typeof i?i(this,e,n,r):[]}},{key:"getDatasetMeta",value:function(e){var t=this.data.datasets[e],n=this._metasets,r=n.filter((function(e){return e&&e._dataset===t})).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}},{key:"getContext",value:function(){return this.$context||(this.$context=rm(null,{chart:this,type:"chart"}))}},{key:"getVisibleDatasetCount",value:function(){return this.getSortedVisibleDatasetMetas().length}},{key:"isDatasetVisible",value:function(e){var t=this.data.datasets[e];if(!t)return!1;var n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}},{key:"setDatasetVisibility",value:function(e,t){this.getDatasetMeta(e).hidden=!t}},{key:"toggleDataVisibility",value:function(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}},{key:"getDataVisibility",value:function(e){return!this._hiddenIndices[e]}},{key:"_updateVisibility",value:function(e,t,n){var r=n?"show":"hide",i=this.getDatasetMeta(e),a=i.controller._resolveAnimations(void 0,r);Md(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),a.update(i,{visible:n}),this.update((function(t){return t.datasetIndex===e?r:void 0})))}},{key:"hide",value:function(e,t){this._updateVisibility(e,t,!1)}},{key:"show",value:function(e,t){this._updateVisibility(e,t,!0)}},{key:"_destroyDatasetMeta",value:function(e){var t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}},{key:"_stop",value:function(){var e,t;for(this.stop(),Jm.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}},{key:"destroy",value:function(){this.notifyPlugins("beforeDestroy");var e=this.canvas,t=this.ctx;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Rp(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ry[this.id],this.notifyPlugins("afterDestroy")}},{key:"toBase64Image",value:function(){var e;return(e=this.canvas).toDataURL.apply(e,arguments)}},{key:"bindEvents",value:function(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}},{key:"bindUserEvents",value:function(){var e=this,t=this._listeners,n=this.platform,r=function(t,n,r){t.offsetX=n,t.offsetY=r,e._eventHandler(t)};vd(this.options.events,(function(i){return function(r,i){n.addEventListener(e,r,i),t[r]=i}(i,r)}))}},{key:"bindResponsiveEvents",value:function(){var e=this;this._responsiveListeners||(this._responsiveListeners={});var t,n=this._responsiveListeners,r=this.platform,i=function(t,i){r.addEventListener(e,t,i),n[t]=i},a=function(t,i){n[t]&&(r.removeEventListener(e,t,i),delete n[t])},o=function(t,n){e.canvas&&e.resize(t,n)},s=function n(){a("attach",n),e.attached=!0,e.resize(),i("resize",o),i("detach",t)};t=function(){e.attached=!1,a("resize",o),e._stop(),e._resize(0,0),i("attach",s)},r.isAttached(this.canvas)?s():t()}},{key:"unbindEvents",value:function(){var e=this;vd(this._listeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._listeners={},vd(this._responsiveListeners,(function(t,n){e.platform.removeEventListener(e,n,t)})),this._responsiveListeners=void 0}},{key:"updateHoverStyle",value:function(e,t,n){var r,i,a,o=n?"set":"remove";for("dataset"===t&&this.getDatasetMeta(e[0].datasetIndex).controller["_"+o+"DatasetHoverStyle"](),i=0,a=e.length;i<a;++i){var s=(r=e[i])&&this.getDatasetMeta(r.datasetIndex).controller;s&&s[o+"HoverStyle"](r.element,r.datasetIndex,r.index)}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e){var t=this,n=this._active||[],r=e.map((function(e){var n=e.datasetIndex,r=e.index,i=t.getDatasetMeta(n);if(!i)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:i.data[r],index:r}}));!gd(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}},{key:"notifyPlugins",value:function(e,t,n){return this._plugins.notify(this,e,t,n)}},{key:"isPluginEnabled",value:function(e){return 1===this._plugins._cache.filter((function(t){return t.plugin.id===e})).length}},{key:"_updateHoverStyles",value:function(e,t,n){var r=this.options.hover,i=function(e,t){return e.filter((function(e){return!t.some((function(t){return e.datasetIndex===t.datasetIndex&&e.index===t.index}))}))},a=i(t,e),o=n?e:i(e,t);a.length&&this.updateHoverStyle(a,r.mode,!1),o.length&&r.mode&&this.updateHoverStyle(o,r.mode,!0)}},{key:"_eventHandler",value:function(e,t){var n=this,r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=function(t){return(t.options.events||n.options.events).includes(e.native.type)};if(!1!==this.notifyPlugins("beforeEvent",r,i)){var a=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(a||r.changed)&&this.render(),this}}},{key:"_handleEvent",value:function(e,t,n){var r=this._active,i=void 0===r?[]:r,a=this.options,o=t,s=this._getActiveElements(e,i,n,o),l=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),u=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,l);n&&(this._lastEvent=null,md(a.onHover,[e,s,this],this),l&&md(a.onClick,[e,s,this],this));var c=!gd(s,i);return(c||t)&&(this._active=s,this._updateHoverStyles(s,i,t)),this._lastEvent=u,c}},{key:"_getActiveElements",value:function(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;var i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}],[{key:"register",value:function(){Lg.add.apply(Lg,arguments),ly()}},{key:"unregister",value:function(){Lg.remove.apply(Lg,arguments),ly()}}]),e}();function ly(){return vd(sy.instances,(function(e){return e._plugins.invalidate()}))}function uy(e,t,n,r){var i=Yp(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),a=(n-t)/2,o=Math.min(a,r*t/2),s=function(e){var t=(n-Math.min(a,e))*r/2;return Qd(e,0,Math.min(a,t))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:Qd(i.innerStart,0,o),innerEnd:Qd(i.innerEnd,0,o)}}function cy(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function hy(e,t,n,r,i,a){var o=t.x,s=t.y,l=t.startAngle,u=t.pixelMargin,c=t.innerRadius,h=Math.max(t.outerRadius+r+n-u,0),f=c>0?c+r+n+u:0,d=0,p=i-l;if(r){var m=((c>0?c-r:0)+(h>0?h-r:0))/2;d=(p-(0!==m?p*m/(m+r):p))/2}var v=(p-Math.max(.001,p*h-n/Id)/h)/2,g=l+v+d,y=i-v-d,_=uy(t,f,h,y-g),x=_.outerStart,b=_.outerEnd,w=_.innerStart,k=_.innerEnd,E=h-x,S=h-b,T=g+x/E,C=y-b/S,M=f+w,A=f+k,P=g+w/M,I=y-k/A;if(e.beginPath(),a){var z=(T+C)/2;if(e.arc(o,s,h,T,z),e.arc(o,s,h,z,C),b>0){var L=cy(S,C,o,s);e.arc(L.x,L.y,b,C,y+Od)}var D=cy(A,y,o,s);if(e.lineTo(D.x,D.y),k>0){var R=cy(A,I,o,s);e.arc(R.x,R.y,k,y+Od,I+Math.PI)}var O=(y-k/f+(g+w/f))/2;if(e.arc(o,s,f,y-k/f,O,!0),e.arc(o,s,f,O,g+w/f,!0),w>0){var j=cy(M,P,o,s);e.arc(j.x,j.y,w,P+Math.PI,g-Od)}var N=cy(E,g,o,s);if(e.lineTo(N.x,N.y),x>0){var B=cy(E,T,o,s);e.arc(B.x,B.y,x,g-Od,T)}}else{e.moveTo(o,s);var F=Math.cos(T)*h+o,$=Math.sin(T)*h+s;e.lineTo(F,$);var V=Math.cos(C)*h+o,U=Math.sin(C)*h+s;e.lineTo(V,U)}e.closePath()}function fy(e,t,n,r,i){var a=t.fullCircles,o=t.startAngle,s=t.circumference,l=t.options,u=l.borderWidth,c=l.borderJoinStyle,h=l.borderDash,f=l.borderDashOffset,d="inner"===l.borderAlign;if(u){e.setLineDash(h||[]),e.lineDashOffset=f,d?(e.lineWidth=2*u,e.lineJoin=c||"round"):(e.lineWidth=u,e.lineJoin=c||"bevel");var p=t.endAngle;if(a){hy(e,t,n,r,p,i);for(var m=0;m<a;++m)e.stroke();isNaN(s)||(p=o+(s%zd||zd))}d&&function(e,t,n){var r=t.startAngle,i=t.pixelMargin,a=t.x,o=t.y,s=t.outerRadius,l=t.innerRadius,u=i/s;e.beginPath(),e.arc(a,o,s,r-u,n+u),l>i?(u=i/l,e.arc(a,o,l,n+u,r-u,!0)):e.arc(a,o,i,n+Od,r-Od),e.closePath(),e.clip()}(e,t,p),a||(hy(e,t,n,r,p,i),e.stroke())}}(0,Ye.Z)(sy,"defaults",Ip),(0,Ye.Z)(sy,"instances",ry),(0,Ye.Z)(sy,"overrides",Tp),(0,Ye.Z)(sy,"registry",Lg),(0,Ye.Z)(sy,"version","4.4.0"),(0,Ye.Z)(sy,"getChart",iy);var dy=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this),(0,Ye.Z)(d(r),"circumference",void 0),(0,Ye.Z)(d(r),"endAngle",void 0),(0,Ye.Z)(d(r),"fullCircles",void 0),(0,Ye.Z)(d(r),"innerRadius",void 0),(0,Ye.Z)(d(r),"outerRadius",void 0),(0,Ye.Z)(d(r),"pixelMargin",void 0),(0,Ye.Z)(d(r),"startAngle",void 0),r.options=void 0,r.circumference=void 0,r.startAngle=void 0,r.endAngle=void 0,r.innerRadius=void 0,r.outerRadius=void 0,r.pixelMargin=0,r.fullCircles=0,e&&Object.assign(d(r),e),r}return(0,s.Z)(n,[{key:"inRange",value:function(e,t,n){var r=Gd(this.getProps(["x","y"],n),{x:e,y:t}),i=r.angle,a=r.distance,o=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),s=o.startAngle,l=o.endAngle,u=o.innerRadius,c=o.outerRadius,h=o.circumference,f=(this.options.spacing+this.options.borderWidth)/2,d=dd(h,l-s)>=zd||Jd(i,s,l),p=ep(a,u+f,c+f);return d&&p}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),n=t.x,r=t.y,i=t.startAngle,a=t.endAngle,o=t.innerRadius,s=t.outerRadius,l=this.options,u=l.offset,c=(i+a)/2,h=(o+s+l.spacing+u)/2;return{x:n+Math.cos(c)*h,y:r+Math.sin(c)*h}}},{key:"tooltipPosition",value:function(e){return this.getCenterPoint(e)}},{key:"draw",value:function(e){var t=this.options,n=this.circumference,r=(t.offset||0)/4,i=(t.spacing||0)/2,a=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>zd?Math.floor(n/zd):0,!(0===n||this.innerRadius<0||this.outerRadius<0)){e.save();var o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*r,Math.sin(o)*r);var s=r*(1-Math.sin(Math.min(Id,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){var a=t.fullCircles,o=t.startAngle,s=t.circumference,l=t.endAngle;if(a){hy(e,t,n,r,l,i);for(var u=0;u<a;++u)e.fill();isNaN(s)||(l=o+(s%zd||zd))}hy(e,t,n,r,l,i),e.fill()}(e,this,s,i,a),fy(e,this,s,i,a),e.restore()}}}]),n}(xg);function py(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=dd(n.borderCapStyle,t.borderCapStyle),e.setLineDash(dd(n.borderDash,t.borderDash)),e.lineDashOffset=dd(n.borderDashOffset,t.borderDashOffset),e.lineJoin=dd(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=dd(n.borderWidth,t.borderWidth),e.strokeStyle=dd(n.borderColor,t.borderColor)}function my(e,t,n){e.lineTo(n.x,n.y)}function vy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.length,i=n.start,a=void 0===i?0:i,o=n.end,s=void 0===o?r-1:o,l=t.start,u=t.end,c=Math.max(a,l),h=Math.min(s,u),f=a<l&&s<l||a>u&&s>u;return{count:r,start:c,loop:t.loop,ilen:h<c&&!f?r+h-c:h-c}}function gy(e,t,n,r){var i,a,o,s=t.points,l=t.options,u=vy(s,n,r),c=u.count,h=u.start,f=u.loop,d=u.ilen,p=function(e){return e.stepped?$p:e.tension||"monotone"===e.cubicInterpolationMode?Vp:my}(l),m=r||{},v=m.move,g=void 0===v||v,y=m.reverse;for(i=0;i<=d;++i)(a=s[(h+(y?d-i:i))%c]).skip||(g?(e.moveTo(a.x,a.y),g=!1):p(e,o,a,y,l.stepped),o=a);return f&&p(e,o,a=s[(h+(y?d:0))%c],y,l.stepped),!!f}function yy(e,t,n,r){var i,a,o,s,l,u,c=t.points,h=vy(c,n,r),f=h.count,d=h.start,p=h.ilen,m=r||{},v=m.move,g=void 0===v||v,y=m.reverse,_=0,x=0,b=function(e){return(d+(y?p-e:e))%f},w=function(){s!==l&&(e.lineTo(_,l),e.lineTo(_,s),e.lineTo(_,u))};for(g&&(a=c[b(0)],e.moveTo(a.x,a.y)),i=0;i<=p;++i)if(!(a=c[b(i)]).skip){var k=a.x,E=a.y,S=0|k;S===o?(E<s?s=E:E>l&&(l=E),_=(x*_+k)/++x):(w(),e.lineTo(k,E),o=S,x=0,s=l=E),u=E}w()}function _y(e){var t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?yy:gy}(0,Ye.Z)(dy,"id","arc"),(0,Ye.Z)(dy,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,Ye.Z)(dy,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Ye.Z)(dy,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e}});var xy="function"===typeof Path2D;function by(e,t,n,r){xy&&!t.options.segment?function(e,t,n,r){var i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),py(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){var i,a=t.segments,o=t.options,s=_y(t),l=(0,w.Z)(a);try{for(l.s();!(i=l.n()).done;){var u=i.value;py(e,o,u.style),e.beginPath(),s(e,t,u,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}}catch(c){l.e(c)}finally{l.f()}}(e,t,n,r)}var wy=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).animated=!0,r.options=void 0,r._chart=void 0,r._loop=void 0,r._fullLoop=void 0,r._path=void 0,r._points=void 0,r._segments=void 0,r._decimated=!1,r._pointsUpdated=!1,r._datasetIndex=void 0,e&&Object.assign(d(r),e),r}return(0,s.Z)(n,[{key:"updateControlPoints",value:function(e,t){var n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){var r=n.spanGaps?this._loop:this._fullLoop;Em(this._points,n,e,r,t),this._pointsUpdated=!0}}},{key:"points",get:function(){return this._points},set:function(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}},{key:"segments",get:function(){return this._segments||(this._segments=function(e,t){var n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];var a=!!e._loop,o=function(e,t,n,r){var i=0,a=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(a+=i);a>i&&e[a%t].skip;)a--;return{start:i,end:a%=t}}(n,i,a,r),s=o.start,l=o.end;return Gm(e,!0===r?[{start:s,end:l,loop:a}]:function(e,t,n,r){var i,a=e.length,o=[],s=t,l=e[t];for(i=t+1;i<=n;++i){var u=e[i%a];u.skip||u.stop?l.skip||(r=!1,o.push({start:t%a,end:(i-1)%a,loop:r}),t=s=u.stop?i:null):(s=i,l.skip&&(t=i)),l=u}return null!==s&&o.push({start:t%a,end:s%a,loop:r}),o}(n,s,l<s?l+i:l,!!e._fullLoop&&0===s&&l===i-1),n,t)}(this,this.options.segment))}},{key:"first",value:function(){var e=this.segments,t=this.points;return e.length&&t[e[0].start]}},{key:"last",value:function(){var e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}},{key:"interpolate",value:function(e,t){var n=this.options,r=e[t],i=this.points,a=qm(this,{property:t,start:r,end:r});if(a.length){var o,s,l=[],u=function(e){return e.stepped?Bm:e.tension||"monotone"===e.cubicInterpolationMode?Fm:Nm}(n);for(o=0,s=a.length;o<s;++o){var c=a[o],h=c.start,f=c.end,d=i[h],p=i[f];if(d!==p){var m=u(d,p,Math.abs((r-d[t])/(p[t]-d[t])),n.stepped);m[t]=e[t],l.push(m)}else l.push(d)}return 1===l.length?l[0]:l}}},{key:"pathSegment",value:function(e,t,n){return _y(this)(e,this,t,n)}},{key:"path",value:function(e,t,n){var r=this.segments,i=_y(this),a=this._loop;t=t||0,n=n||this.points.length-t;var o,s=(0,w.Z)(r);try{for(s.s();!(o=s.n()).done;){a&=i(e,this,o.value,{start:t,end:t+n-1})}}catch(l){s.e(l)}finally{s.f()}return!!a}},{key:"draw",value:function(e,t,n,r){var i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),by(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}]),n}(xg);function ky(e,t,n,r){var i=e.options,a=e.getProps([n],r)[n];return Math.abs(t-a)<i.radius+i.hitRadius}(0,Ye.Z)(wy,"id","line"),(0,Ye.Z)(wy,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Ye.Z)(wy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Ye.Z)(wy,"descriptors",{_scriptable:!0,_indexable:function(e){return"borderDash"!==e&&"fill"!==e}});var Ey=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this),(0,Ye.Z)(d(r),"parsed",void 0),(0,Ye.Z)(d(r),"skip",void 0),(0,Ye.Z)(d(r),"stop",void 0),r.options=void 0,r.parsed=void 0,r.skip=void 0,r.stop=void 0,e&&Object.assign(d(r),e),r}return(0,s.Z)(n,[{key:"inRange",value:function(e,t,n){var r=this.options,i=this.getProps(["x","y"],n),a=i.x,o=i.y;return Math.pow(e-a,2)+Math.pow(t-o,2)<Math.pow(r.hitRadius+r.radius,2)}},{key:"inXRange",value:function(e,t){return ky(this,e,"x",t)}},{key:"inYRange",value:function(e,t){return ky(this,e,"y",t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y"],e);return{x:t.x,y:t.y}}},{key:"size",value:function(e){var t=(e=e||this.options||{}).radius||0;return 2*((t=Math.max(t,t&&e.hoverRadius||0))+(t&&e.borderWidth||0))}},{key:"draw",value:function(e,t){var n=this.options;this.skip||n.radius<.1||!Np(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Op(e,n,this.x,this.y))}},{key:"getRange",value:function(){var e=this.options||{};return e.radius+e.hitRadius}}]),n}(xg);function Sy(e,t){var n,r,i,a,o,s=e.getProps(["x","y","base","width","height"],t),l=s.x,u=s.y,c=s.base,h=s.width,f=s.height;return e.horizontal?(o=f/2,n=Math.min(l,c),r=Math.max(l,c),i=u-o,a=u+o):(n=l-(o=h/2),r=l+o,i=Math.min(u,c),a=Math.max(u,c)),{left:n,top:i,right:r,bottom:a}}function Ty(e,t,n,r){return e?0:Qd(t,n,r)}function Cy(e){var t=Sy(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){var r=e.options.borderWidth,i=e.borderSkipped,a=Jp(r);return{t:Ty(i.top,a.top,0,n),r:Ty(i.right,a.right,0,t),b:Ty(i.bottom,a.bottom,0,n),l:Ty(i.left,a.left,0,t)}}(e,n/2,r/2),a=function(e,t,n){var r=e.getProps(["enableBorderRadius"]).enableBorderRadius,i=e.options.borderRadius,a=Qp(i),o=Math.min(t,n),s=e.borderSkipped,l=r||cd(i);return{topLeft:Ty(!l||s.top||s.left,a.topLeft,0,o),topRight:Ty(!l||s.top||s.right,a.topRight,0,o),bottomLeft:Ty(!l||s.bottom||s.left,a.bottomLeft,0,o),bottomRight:Ty(!l||s.bottom||s.right,a.bottomRight,0,o)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:a},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function My(e,t,n,r){var i=null===t,a=null===n,o=e&&!(i&&a)&&Sy(e,r);return o&&(i||ep(t,o.left,o.right))&&(a||ep(n,o.top,o.bottom))}function Ay(e,t){e.rect(t.x,t.y,t.w,t.h)}function Py(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,a=(e.x+e.w!==n.x+n.w?t:0)-r,o=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+a,h:e.h+o,radius:e.radius}}(0,Ye.Z)(Ey,"id","point"),(0,Ye.Z)(Ey,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Ye.Z)(Ey,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Iy=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).options=void 0,r.horizontal=void 0,r.base=void 0,r.width=void 0,r.height=void 0,r.inflateAmount=void 0,e&&Object.assign(d(r),e),r}return(0,s.Z)(n,[{key:"draw",value:function(e){var t,n=this.inflateAmount,r=this.options,i=r.borderColor,a=r.backgroundColor,o=Cy(this),s=o.inner,l=o.outer,u=(t=l.radius).topLeft||t.topRight||t.bottomLeft||t.bottomRight?Wp:Ay;e.save(),l.w===s.w&&l.h===s.h||(e.beginPath(),u(e,Py(l,n,s)),e.clip(),u(e,Py(s,-n,l)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),u(e,Py(s,n)),e.fillStyle=a,e.fill(),e.restore()}},{key:"inRange",value:function(e,t,n){return My(this,e,t,n)}},{key:"inXRange",value:function(e,t){return My(this,e,null,t)}},{key:"inYRange",value:function(e,t){return My(this,null,e,t)}},{key:"getCenterPoint",value:function(e){var t=this.getProps(["x","y","base","horizontal"],e),n=t.x,r=t.y,i=t.base,a=t.horizontal;return{x:a?(n+i)/2:n,y:a?r:(r+i)/2}}},{key:"getRange",value:function(e){return"x"===e?this.width/2:this.height/2}}]),n}(xg);(0,Ye.Z)(Iy,"id","bar"),(0,Ye.Z)(Iy,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Ye.Z)(Iy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var zy=function(e,t){var n=e.boxHeight,r=void 0===n?t:n,i=e.boxWidth,a=void 0===i?t:i;return e.usePointStyle&&(r=Math.min(r,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:r,itemHeight:Math.max(t,r)}},Ly=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this))._added=!1,r.legendHitBoxes=[],r._hoveredItem=null,r.doughnutMode=!1,r.chart=e.chart,r.options=e.options,r.ctx=e.ctx,r.legendItems=void 0,r.columnSizes=void 0,r.lineWidths=void 0,r.maxHeight=void 0,r.maxWidth=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.height=void 0,r.width=void 0,r._margins=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,s.Z)(n,[{key:"update",value:function(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}},{key:"setDimensions",value:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}},{key:"buildLabels",value:function(){var e=this,t=this.options.labels||{},n=md(t.generateLabels,[this.chart],this)||[];t.filter&&(n=n.filter((function(n){return t.filter(n,e.chart.data)}))),t.sort&&(n=n.sort((function(n,r){return t.sort(n,r,e.chart.data)}))),this.options.reverse&&n.reverse(),this.legendItems=n}},{key:"fit",value:function(){var e=this.options,t=this.ctx;if(e.display){var n,r,i=e.labels,a=tm(i.font),o=a.size,s=this._computeTitleHeight(),l=zy(i,o),u=l.boxWidth,c=l.itemHeight;t.font=a.string,this.isHorizontal()?(n=this.maxWidth,r=this._fitRows(s,o,u,c)+10):(r=this.maxHeight,n=this._fitCols(s,a,u,c)+10),this.width=Math.min(n,e.maxWidth||this.maxWidth),this.height=Math.min(r,e.maxHeight||this.maxHeight)}else this.width=this.height=0}},{key:"_fitRows",value:function(e,t,n,r){var i=this.ctx,a=this.maxWidth,o=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.lineWidths=[0],u=r+o,c=e;i.textAlign="left",i.textBaseline="middle";var h=-1,f=-u;return this.legendItems.forEach((function(e,d){var p=n+t/2+i.measureText(e.text).width;(0===d||l[l.length-1]+p+2*o>a)&&(c+=u,l[l.length-(d>0?0:1)]=0,f+=u,h++),s[d]={left:0,top:f,row:h,width:p,height:r},l[l.length-1]+=p+o})),c}},{key:"_fitCols",value:function(e,t,n,r){var i=this.ctx,a=this.maxHeight,o=this.options.labels.padding,s=this.legendHitBoxes=[],l=this.columnSizes=[],u=a-e,c=o,h=0,f=0,d=0,p=0;return this.legendItems.forEach((function(e,a){var m=function(e,t,n,r,i){var a=function(e,t,n,r){var i=e.text;i&&"string"!==typeof i&&(i=i.reduce((function(e,t){return e.length>t.length?e:t})));return t+n.size/2+r.measureText(i).width}(r,e,t,n),o=function(e,t,n){var r=e;"string"!==typeof t.text&&(r=Dy(t,n));return r}(i,r,t.lineHeight);return{itemWidth:a,itemHeight:o}}(n,t,i,e,r),v=m.itemWidth,g=m.itemHeight;a>0&&f+g+2*o>u&&(c+=h+o,l.push({width:h,height:f}),d+=h+o,p++,h=f=0),s[a]={left:d,top:f,col:p,width:v,height:g},h=Math.max(h,v),f+=g+o})),c+=h,l.push({width:h,height:f}),c}},{key:"adjustHitBoxes",value:function(){if(this.options.display){var e=this._computeTitleHeight(),t=this.legendHitBoxes,n=this.options,r=n.align,i=n.labels.padding,a=$m(n.rtl,this.left,this.width);if(this.isHorizontal()){var o,s=0,l=cp(r,this.left+i,this.right-this.lineWidths[s]),u=(0,w.Z)(t);try{for(u.s();!(o=u.n()).done;){var c=o.value;s!==c.row&&(s=c.row,l=cp(r,this.left+i,this.right-this.lineWidths[s])),c.top+=this.top+e+i,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+i}}catch(v){u.e(v)}finally{u.f()}}else{var h,f=0,d=cp(r,this.top+e+i,this.bottom-this.columnSizes[f].height),p=(0,w.Z)(t);try{for(p.s();!(h=p.n()).done;){var m=h.value;m.col!==f&&(f=m.col,d=cp(r,this.top+e+i,this.bottom-this.columnSizes[f].height)),m.top=d,m.left+=this.left+i,m.left=a.leftForLtr(a.x(m.left),m.width),d+=m.height+i}}catch(v){p.e(v)}finally{p.f()}}}}},{key:"isHorizontal",value:function(){return"top"===this.options.position||"bottom"===this.options.position}},{key:"draw",value:function(){if(this.options.display){var e=this.ctx;Bp(e,this),this._draw(),Fp(e)}}},{key:"_draw",value:function(){var e,t=this,n=this.options,r=this.columnSizes,i=this.lineWidths,a=this.ctx,o=n.align,s=n.labels,l=Ip.color,u=$m(n.rtl,this.left,this.width),c=tm(s.font),h=s.padding,f=c.size,d=f/2;this.drawTitle(),a.textAlign=u.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=c.string;var p=zy(s,f),m=p.boxWidth,v=p.boxHeight,g=p.itemHeight,y=this.isHorizontal(),_=this._computeTitleHeight();e=y?{x:cp(o,this.left+h,this.right-i[0]),y:this.top+h+_,line:0}:{x:this.left+h,y:cp(o,this.top+_+h,this.bottom-r[0].height),line:0},Vm(this.ctx,n.textDirection);var x=g+h;this.legendItems.forEach((function(p,b){a.strokeStyle=p.fontColor,a.fillStyle=p.fontColor;var w=a.measureText(p.text).width,k=u.textAlign(p.textAlign||(p.textAlign=s.textAlign)),E=m+d+w,S=e.x,T=e.y;if(u.setWidth(t.width),y?b>0&&S+E+h>t.right&&(T=e.y+=x,e.line++,S=e.x=cp(o,t.left+h,t.right-i[e.line])):b>0&&T+x>t.bottom&&(S=e.x=S+r[e.line].width+h,e.line++,T=e.y=cp(o,t.top+_+h,t.bottom-r[e.line].height)),function(e,t,n){if(!(isNaN(m)||m<=0||isNaN(v)||v<0)){a.save();var r=dd(n.lineWidth,1);if(a.fillStyle=dd(n.fillStyle,l),a.lineCap=dd(n.lineCap,"butt"),a.lineDashOffset=dd(n.lineDashOffset,0),a.lineJoin=dd(n.lineJoin,"miter"),a.lineWidth=r,a.strokeStyle=dd(n.strokeStyle,l),a.setLineDash(dd(n.lineDash,[])),s.usePointStyle){var i={radius:v*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},o=u.xPlus(e,m/2);jp(a,i,o,t+d,s.pointStyleWidth&&m)}else{var c=t+Math.max((f-v)/2,0),h=u.leftForLtr(e,m),p=Qp(n.borderRadius);a.beginPath(),Object.values(p).some((function(e){return 0!==e}))?Wp(a,{x:h,y:c,w:m,h:v,radius:p}):a.rect(h,c,m,v),a.fill(),0!==r&&a.stroke()}a.restore()}}(u.x(S),T,p),S=function(e,t,n,r){return e===(r?"left":"right")?n:"center"===e?(t+n)/2:t}(k,S+m+d,y?S+E:t.right,n.rtl),function(e,t,n){Hp(a,n.text,e,t+g/2,c,{strikethrough:n.hidden,textAlign:u.textAlign(n.textAlign)})}(u.x(S),T,p),y)e.x+=E+h;else if("string"!==typeof p.text){var C=c.lineHeight;e.y+=Dy(p,C)+h}else e.y+=x})),Um(this.ctx,n.textDirection)}},{key:"drawTitle",value:function(){var e=this.options,t=e.title,n=tm(t.font),r=em(t.padding);if(t.display){var i,o=$m(e.rtl,this.left,this.width),s=this.ctx,l=t.position,u=n.size/2,c=r.top+u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max.apply(Math,(0,a.Z)(this.lineWidths)),i=this.top+c,h=cp(e.align,h,this.right-f);else{var d=this.columnSizes.reduce((function(e,t){return Math.max(e,t.height)}),0);i=c+cp(e.align,this.top,this.bottom-d-e.labels.padding-this._computeTitleHeight())}var p=cp(l,h,h+f);s.textAlign=o.textAlign(up(l)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Hp(s,t.text,p,i,n)}}},{key:"_computeTitleHeight",value:function(){var e=this.options.title,t=tm(e.font),n=em(e.padding);return e.display?t.lineHeight+n.height:0}},{key:"_getLegendItemAt",value:function(e,t){var n,r,i;if(ep(e,this.left,this.right)&&ep(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(ep(e,(r=i[n]).left,r.left+r.width)&&ep(t,r.top,r.top+r.height))return this.legendItems[n];return null}},{key:"handleEvent",value:function(e){var t=this.options;if(function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t)){var n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){var r=this._hoveredItem,i=function(e,t){return null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index}(r,n);r&&!i&&md(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&md(t.onHover,[e,n,this],this)}else n&&md(t.onClick,[e,n,this],this)}}}]),n}(xg);function Dy(e,t){return t*(e.text?e.text.length:0)}var Ry={id:"legend",_element:Ly,start:function(e,t,n){var r=e.legend=new Ly({ctx:e.ctx,options:n,chart:e});tg(e,r,n),Qv(e,r)},stop:function(e){eg(e,e.legend),delete e.legend},beforeUpdate:function(e,t,n){var r=e.legend;tg(e,r,n),r.options=n},afterUpdate:function(e){var t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent:function(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick:function(e,t,n){var r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:function(e){return e.chart.options.color},boxWidth:40,padding:10,generateLabels:function(e){var t=e.data.datasets,n=e.legend.options.labels,r=n.usePointStyle,i=n.pointStyle,a=n.textAlign,o=n.color,s=n.useBorderRadius,l=n.borderRadius;return e._getSortedDatasetMetas().map((function(e){var n=e.controller.getStyle(r?0:void 0),u=em(n.borderWidth);return{text:t[e.index].label,fillStyle:n.backgroundColor,fontColor:o,hidden:!e.visible,lineCap:n.borderCapStyle,lineDash:n.borderDash,lineDashOffset:n.borderDashOffset,lineJoin:n.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:n.borderColor,pointStyle:i||n.pointStyle,rotation:n.rotation,textAlign:a||n.textAlign,borderRadius:s&&(l||n.borderRadius),datasetIndex:e.index}}),this)}},title:{color:function(e){return e.chart.options.color},display:!1,position:"center",text:""}},descriptors:{_scriptable:function(e){return!e.startsWith("on")},labels:{_scriptable:function(e){return!["generateLabels","filter","sort"].includes(e)}}}},Oy=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).chart=e.chart,r.options=e.options,r.ctx=e.ctx,r._padding=void 0,r.top=void 0,r.bottom=void 0,r.left=void 0,r.right=void 0,r.width=void 0,r.height=void 0,r.position=void 0,r.weight=void 0,r.fullSize=void 0,r}return(0,s.Z)(n,[{key:"update",value:function(e,t){var n=this.options;if(this.left=0,this.top=0,n.display){this.width=this.right=e,this.height=this.bottom=t;var r=ud(n.text)?n.text.length:1;this._padding=em(n.padding);var i=r*tm(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}else this.width=this.height=this.right=this.bottom=0}},{key:"isHorizontal",value:function(){var e=this.options.position;return"top"===e||"bottom"===e}},{key:"_drawArgs",value:function(e){var t,n,r,i=this.top,a=this.left,o=this.bottom,s=this.right,l=this.options,u=l.align,c=0;return this.isHorizontal()?(n=cp(u,a,s),r=i+e,t=s-a):("left"===l.position?(n=a+e,r=cp(u,o,i),c=-.5*Id):(n=s-e,r=cp(u,i,o),c=.5*Id),t=o-i),{titleX:n,titleY:r,maxWidth:t,rotation:c}}},{key:"draw",value:function(){var e=this.ctx,t=this.options;if(t.display){var n=tm(t.font),r=n.lineHeight/2+this._padding.top,i=this._drawArgs(r),a=i.titleX,o=i.titleY,s=i.maxWidth,l=i.rotation;Hp(e,t.text,0,0,n,{color:t.color,maxWidth:s,rotation:l,textAlign:up(t.align),textBaseline:"middle",translation:[a,o]})}}}]),n}(xg);var jy={id:"title",_element:Oy,start:function(e,t,n){!function(e,t){var n=new Oy({ctx:e.ctx,options:t,chart:e});tg(e,n,t),Qv(e,n),e.titleBlock=n}(e,n)},stop:function(e){var t=e.titleBlock;eg(e,t),delete e.titleBlock},beforeUpdate:function(e,t,n){var r=e.titleBlock;tg(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ny=(new WeakMap,{average:function(e){if(!e.length)return!1;var t,n,r=0,i=0,a=0;for(t=0,n=e.length;t<n;++t){var o=e[t].element;if(o&&o.hasValue()){var s=o.tooltipPosition();r+=s.x,i+=s.y,++a}}return{x:r/a,y:i/a}},nearest:function(e,t){if(!e.length)return!1;var n,r,i,a=t.x,o=t.y,s=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var l=e[n].element;if(l&&l.hasValue()){var u=Xd(t,l.getCenterPoint());u<s&&(s=u,i=l)}}if(i){var c=i.tooltipPosition();a=c.x,o=c.y}return{x:a,y:o}}});function By(e,t){return t&&(ud(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Fy(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function $y(e,t){var n=t.element,r=t.datasetIndex,i=t.index,a=e.getDatasetMeta(r).controller,o=a.getLabelAndValue(i),s=o.label,l=o.value;return{chart:e,label:s,parsed:a.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:l,dataset:a.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Vy(e,t){var n=e.chart.ctx,r=e.body,i=e.footer,a=e.title,o=t.boxWidth,s=t.boxHeight,l=tm(t.bodyFont),u=tm(t.titleFont),c=tm(t.footerFont),h=a.length,f=i.length,d=r.length,p=em(t.padding),m=p.height,v=0,g=r.reduce((function(e,t){return e+t.before.length+t.lines.length+t.after.length}),0);(g+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*u.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),g)&&(m+=d*(t.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(g-d)*l.lineHeight+(g-1)*t.bodySpacing);f&&(m+=t.footerMarginTop+f*c.lineHeight+(f-1)*t.footerSpacing);var y=0,_=function(e){v=Math.max(v,n.measureText(e).width+y)};return n.save(),n.font=u.string,vd(e.title,_),n.font=l.string,vd(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?o+2+t.boxPadding:0,vd(r,(function(e){vd(e.before,_),vd(e.lines,_),vd(e.after,_)})),y=0,n.font=c.string,vd(e.footer,_),n.restore(),{width:v+=p.width,height:m}}function Uy(e,t,n,r){var i=n.x,a=n.width,o=e.width,s=e.chartArea,l=s.left,u=s.right,c="center";return"center"===r?c=i<=(l+u)/2?"left":"right":i<=a/2?c="left":i>=o-a/2&&(c="right"),function(e,t,n,r){var i=r.x,a=r.width,o=n.caretSize+n.caretPadding;return"left"===e&&i+a+o>t.width||"right"===e&&i-a-o<0||void 0}(c,e,t,n)&&(c="center"),c}function Zy(e,t,n){var r=n.yAlign||t.yAlign||function(e,t){var n=t.y,r=t.height;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Uy(e,t,n,r),yAlign:r}}function Hy(e,t,n,r){var i=e.caretSize,a=e.caretPadding,o=e.cornerRadius,s=n.xAlign,l=n.yAlign,u=i+a,c=Qp(o),h=c.topLeft,f=c.topRight,d=c.bottomLeft,p=c.bottomRight,m=function(e,t){var n=e.x,r=e.width;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,s),v=function(e,t,n){var r=e.y,i=e.height;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,u);return"center"===l?"left"===s?m+=u:"right"===s&&(m-=u):"left"===s?m-=Math.max(h,d)+i:"right"===s&&(m+=Math.max(f,p)+i),{x:Qd(m,0,r.width-t.width),y:Qd(v,0,r.height-t.height)}}function Wy(e,t,n){var r=em(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function qy(e){return By([],Fy(e))}function Gy(e,t){var n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}var Xy={beforeTitle:od,title:function(e){if(e.length>0){var t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:od,beforeBody:od,beforeLabel:od,label:function(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;var t=e.dataset.label||"";t&&(t+=": ");var n=e.formattedValue;return ld(n)||(t+=n),t},labelColor:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor:function(){return this.options.bodyColor},labelPointStyle:function(e){var t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:od,afterBody:od,beforeFooter:od,footer:od,afterFooter:od};function Ky(e,t,n,r){var i=e[t].call(n,r);return"undefined"===typeof i?Xy[t].call(n,r):i}var Yy=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this)).opacity=0,r._active=[],r._eventPosition=void 0,r._size=void 0,r._cachedAnimations=void 0,r._tooltipItems=[],r.$animations=void 0,r.$context=void 0,r.chart=e.chart,r.options=e.options,r.dataPoints=void 0,r.title=void 0,r.beforeBody=void 0,r.body=void 0,r.afterBody=void 0,r.footer=void 0,r.xAlign=void 0,r.yAlign=void 0,r.x=void 0,r.y=void 0,r.height=void 0,r.width=void 0,r.caretX=void 0,r.caretY=void 0,r.labelColors=void 0,r.labelPointStyles=void 0,r.labelTextColors=void 0,r}return(0,s.Z)(n,[{key:"initialize",value:function(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}},{key:"_resolveAnimations",value:function(){var e=this._cachedAnimations;if(e)return e;var t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new nv(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}},{key:"getContext",value:function(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,rm(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}},{key:"getTitle",value:function(e,t){var n=t.callbacks,r=Ky(n,"beforeTitle",this,e),i=Ky(n,"title",this,e),a=Ky(n,"afterTitle",this,e),o=[];return o=By(o,Fy(r)),o=By(o,Fy(i)),o=By(o,Fy(a))}},{key:"getBeforeBody",value:function(e,t){return qy(Ky(t.callbacks,"beforeBody",this,e))}},{key:"getBody",value:function(e,t){var n=this,r=t.callbacks,i=[];return vd(e,(function(e){var t={before:[],lines:[],after:[]},a=Gy(r,e);By(t.before,Fy(Ky(a,"beforeLabel",n,e))),By(t.lines,Ky(a,"label",n,e)),By(t.after,Fy(Ky(a,"afterLabel",n,e))),i.push(t)})),i}},{key:"getAfterBody",value:function(e,t){return qy(Ky(t.callbacks,"afterBody",this,e))}},{key:"getFooter",value:function(e,t){var n=t.callbacks,r=Ky(n,"beforeFooter",this,e),i=Ky(n,"footer",this,e),a=Ky(n,"afterFooter",this,e),o=[];return o=By(o,Fy(r)),o=By(o,Fy(i)),o=By(o,Fy(a))}},{key:"_createItems",value:function(e){var t,n,r=this,i=this._active,a=this.chart.data,o=[],s=[],l=[],u=[];for(t=0,n=i.length;t<n;++t)u.push($y(this.chart,i[t]));return e.filter&&(u=u.filter((function(t,n,r){return e.filter(t,n,r,a)}))),e.itemSort&&(u=u.sort((function(t,n){return e.itemSort(t,n,a)}))),vd(u,(function(t){var n=Gy(e.callbacks,t);o.push(Ky(n,"labelColor",r,t)),s.push(Ky(n,"labelPointStyle",r,t)),l.push(Ky(n,"labelTextColor",r,t))})),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=l,this.dataPoints=u,u}},{key:"update",value:function(e,t){var n,r=this.options.setContext(this.getContext()),i=this._active,a=[];if(i.length){var o=Ny[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);var s=this._size=Vy(this,r),l=Object.assign({},o,s),u=Zy(this.chart,r,l),c=Hy(r,l,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,n={opacity:1,x:c.x,y:c.y,width:s.width,height:s.height,caretX:o.x,caretY:o.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=a,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}},{key:"drawCaret",value:function(e,t,n,r){var i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}},{key:"getCaretPosition",value:function(e,t,n){var r,i,a,o,s,l,u=this.xAlign,c=this.yAlign,h=n.caretSize,f=Qp(n.cornerRadius),d=f.topLeft,p=f.topRight,m=f.bottomLeft,v=f.bottomRight,g=e.x,y=e.y,_=t.width,x=t.height;return"center"===c?(s=y+x/2,"left"===u?(i=(r=g)-h,o=s+h,l=s-h):(i=(r=g+_)+h,o=s-h,l=s+h),a=r):(i="left"===u?g+Math.max(d,m)+h:"right"===u?g+_-Math.max(p,v)-h:this.caretX,"top"===c?(s=(o=y)-h,r=i-h,a=i+h):(s=(o=y+x)+h,r=i+h,a=i-h),l=o),{x1:r,x2:i,x3:a,y1:o,y2:s,y3:l}}},{key:"drawTitle",value:function(e,t,n){var r,i,a,o=this.title,s=o.length;if(s){var l=$m(n.rtl,this.x,this.width);for(e.x=Wy(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",r=tm(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=r.string,a=0;a<s;++a)t.fillText(o[a],l.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i,a+1===s&&(e.y+=n.titleMarginBottom-i)}}},{key:"_drawColorBox",value:function(e,t,n,r,i){var o=this.labelColors[n],s=this.labelPointStyles[n],l=i.boxHeight,u=i.boxWidth,c=tm(i.bodyFont),h=Wy(this,"left",i),f=r.x(h),d=l<c.lineHeight?(c.lineHeight-l)/2:0,p=t.y+d;if(i.usePointStyle){var m={radius:Math.min(u,l)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},v=r.leftForLtr(f,u)+u/2,g=p+l/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,Op(e,m,v,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Op(e,m,v,g)}else{e.lineWidth=cd(o.borderWidth)?Math.max.apply(Math,(0,a.Z)(Object.values(o.borderWidth))):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;var y=r.leftForLtr(f,u),_=r.leftForLtr(r.xPlus(f,1),u-2),x=Qp(o.borderRadius);Object.values(x).some((function(e){return 0!==e}))?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Wp(e,{x:y,y:p,w:u,h:l,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Wp(e,{x:_,y:p+1,w:u-2,h:l-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(y,p,u,l),e.strokeRect(y,p,u,l),e.fillStyle=o.backgroundColor,e.fillRect(_,p+1,u-2,l-2))}e.fillStyle=this.labelTextColors[n]}},{key:"drawBody",value:function(e,t,n){var r,i,a,o,s,l,u,c=this.body,h=n.bodySpacing,f=n.bodyAlign,d=n.displayColors,p=n.boxHeight,m=n.boxWidth,v=n.boxPadding,g=tm(n.bodyFont),y=g.lineHeight,_=0,x=$m(n.rtl,this.x,this.width),b=function(n){t.fillText(n,x.x(e.x+_),e.y+y/2),e.y+=y+h},w=x.textAlign(f);for(t.textAlign=f,t.textBaseline="middle",t.font=g.string,e.x=Wy(this,w,n),t.fillStyle=n.bodyColor,vd(this.beforeBody,b),_=d&&"right"!==w?"center"===f?m/2+v:m+2+v:0,o=0,l=c.length;o<l;++o){for(r=c[o],i=this.labelTextColors[o],t.fillStyle=i,vd(r.before,b),a=r.lines,d&&a.length&&(this._drawColorBox(t,e,o,x,n),y=Math.max(g.lineHeight,p)),s=0,u=a.length;s<u;++s)b(a[s]),y=g.lineHeight;vd(r.after,b)}_=0,y=g.lineHeight,vd(this.afterBody,b),e.y-=h}},{key:"drawFooter",value:function(e,t,n){var r,i,a=this.footer,o=a.length;if(o){var s=$m(n.rtl,this.x,this.width);for(e.x=Wy(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=s.textAlign(n.footerAlign),t.textBaseline="middle",r=tm(n.footerFont),t.fillStyle=n.footerColor,t.font=r.string,i=0;i<o;++i)t.fillText(a[i],s.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+n.footerSpacing}}},{key:"drawBackground",value:function(e,t,n,r){var i=this.xAlign,a=this.yAlign,o=e.x,s=e.y,l=n.width,u=n.height,c=Qp(r.cornerRadius),h=c.topLeft,f=c.topRight,d=c.bottomLeft,p=c.bottomRight;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(o+h,s),"top"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+l-f,s),t.quadraticCurveTo(o+l,s,o+l,s+f),"center"===a&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(o+l,s+u-p),t.quadraticCurveTo(o+l,s+u,o+l-p,s+u),"bottom"===a&&this.drawCaret(e,t,n,r),t.lineTo(o+d,s+u),t.quadraticCurveTo(o,s+u,o,s+u-d),"center"===a&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(o,s+h),t.quadraticCurveTo(o,s,o+h,s),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}},{key:"_updateAnimationTarget",value:function(e){var t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){var a=Ny[e.position].call(this,this._active,this._eventPosition);if(!a)return;var o=this._size=Vy(this,e),s=Object.assign({},a,this._size),l=Zy(t,e,s),u=Hy(e,s,l,t);r._to===u.x&&i._to===u.y||(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}},{key:"_willRender",value:function(){return!!this.opacity}},{key:"draw",value:function(e){var t=this.options.setContext(this.getContext()),n=this.opacity;if(n){this._updateAnimationTarget(t);var r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;var a=em(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Vm(e,t.textDirection),i.y+=a.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),Um(e,t.textDirection),e.restore())}}},{key:"getActiveElements",value:function(){return this._active||[]}},{key:"setActiveElements",value:function(e,t){var n=this,r=this._active,i=e.map((function(e){var t=e.datasetIndex,r=e.index,i=n.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[r],index:r}})),a=!gd(r,i),o=this._positionChanged(i,t);(a||o)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}},{key:"handleEvent",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;var r=this.options,i=this._active||[],a=this._getActiveElements(e,i,t,n),o=this._positionChanged(a,e),s=t||!gd(a,i)||o;return s&&(this._active=a,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),s}},{key:"_getActiveElements",value:function(e,t,n,r){var i=this.options;if("mouseout"===e.type)return[];if(!r)return t;var a=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&a.reverse(),a}},{key:"_positionChanged",value:function(e,t){var n=this.caretX,r=this.caretY,i=this.options,a=Ny[i.position].call(this,e,t);return!1!==a&&(n!==a.x||r!==a.y)}}]),n}(xg);(0,Ye.Z)(Yy,"positioners",Ny);var Jy={id:"tooltip",_element:Yy,positioners:Ny,afterInit:function(e,t,n){n&&(e.tooltip=new Yy({chart:e,options:n}))},beforeUpdate:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset:function(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw:function(e){var t=e.tooltip;if(t&&t._willRender()){var n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",_n(_n({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent:function(e,t){if(e.tooltip){var n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:function(e,t){return t.bodyFont.size},boxWidth:function(e,t){return t.bodyFont.size},multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Xy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:function(e){return"filter"!==e&&"itemSort"!==e&&"external"!==e},_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function Qy(e,t,n,r){var i=e.indexOf(t);return-1===i?function(e,t,n,r){return"string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n}(e,t,n,r):i!==e.lastIndexOf(t)?n:i}function e_(e){var t=this.getLabels();return e>=0&&e<t.length?t[e]:e}var t_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e))._startValue=void 0,r._valueRange=0,r._addedLabels=[],r}return(0,s.Z)(n,[{key:"init",value:function(e){var t=this._addedLabels;if(t.length){var r,i=this.getLabels(),a=(0,w.Z)(t);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.index,l=o.label;i[s]===l&&i.splice(s,1)}}catch(u){a.e(u)}finally{a.f()}this._addedLabels=[]}Tf(c(n.prototype),"init",this).call(this,e)}},{key:"parse",value:function(e,t){if(ld(e))return null;var n=this.getLabels();return function(e,t){return null===e?null:Qd(Math.round(e),0,t)}(t=isFinite(t)&&n[t]===e?t:Qy(n,e,dd(t,e),this._addedLabels),n.length-1)}},{key:"determineDataLimits",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.getMinMax(!0),i=r.min,a=r.max;"ticks"===this.options.bounds&&(t||(i=0),n||(a=this.getLabels().length-1)),this.min=i,this.max=a}},{key:"buildTicks",value:function(){var e=this.min,t=this.max,n=this.options.offset,r=[],i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(var a=e;a<=t;a++)r.push({value:a});return r}},{key:"getLabelForValue",value:function(e){return e_.call(this,e)}},{key:"configure",value:function(){Tf(c(n.prototype),"configure",this).call(this),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}},{key:"getPixelForValue",value:function(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getPixelForTick",value:function(e){var t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}},{key:"getValueForPixel",value:function(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}},{key:"getBasePixel",value:function(){return this.bottom}}]),n}(Pg);function n_(e,t){var n,r,i,a,o=[],s=e.bounds,l=e.step,u=e.min,c=e.max,h=e.precision,f=e.count,d=e.maxTicks,p=e.maxDigits,m=e.includeBounds,v=l||1,g=d-1,y=t.min,_=t.max,x=!ld(u),b=!ld(c),w=!ld(f),k=(_-y)/(p+1),E=Vd((_-y)/g/v)*v;if(E<1e-14&&!x&&!b)return[{value:y},{value:_}];(a=Math.ceil(_/E)-Math.floor(y/E))>g&&(E=Vd(a*E/g/v)*v),ld(h)||(n=Math.pow(10,h),E=Math.ceil(E*n)/n),"ticks"===s?(r=Math.floor(y/E)*E,i=Math.ceil(_/E)*E):(r=y,i=_),x&&b&&l&&function(e,t){var n=Math.round(e);return n-t<=e&&n+t>=e}((c-u)/l,E/1e3)?(E=(c-u)/(a=Math.round(Math.min((c-u)/E,d))),r=u,i=c):w?E=((i=b?c:i)-(r=x?u:r))/(a=f-1):a=$d(a=(i-r)/E,Math.round(a),E/1e3)?Math.round(a):Math.ceil(a);var S=Math.max(qd(E),qd(r));n=Math.pow(10,ld(h)?S:h),r=Math.round(r*n)/n,i=Math.round(i*n)/n;var T=0;for(x&&(m&&r!==u?(o.push({value:u}),r<u&&T++,$d(Math.round((r+T*E)*n)/n,u,r_(u,k,e))&&T++):r<u&&T++);T<a;++T){var C=Math.round((r+T*E)*n)/n;if(b&&C>c)break;o.push({value:C})}return b&&m&&i!==c?o.length&&$d(o[o.length-1].value,c,r_(c,k,e))?o[o.length-1].value=c:o.push({value:c}):b&&i!==c||o.push({value:i}),o}function r_(e,t,n){var r=n.horizontal,i=Hd(n.minRotation),a=(r?Math.sin(i):Math.cos(i))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,Ye.Z)(t_,"id","category"),(0,Ye.Z)(t_,"defaults",{ticks:{callback:e_}});var i_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._endValue=void 0,r._valueRange=0,r}return(0,s.Z)(n,[{key:"parse",value:function(e,t){return ld(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}},{key:"handleTickRangeOptions",value:function(){var e=this.options.beginAtZero,t=this.getUserBounds(),n=t.minDefined,r=t.maxDefined,i=this.min,a=this.max,o=function(e){return i=n?i:e},s=function(e){return a=r?a:e};if(e){var l=Fd(i),u=Fd(a);l<0&&u<0?s(0):l>0&&u>0&&o(0)}if(i===a){var c=0===a?1:Math.abs(.05*a);s(a+c),e||o(i-c)}this.min=i,this.max=a}},{key:"getTickLimit",value:function(){var e,t=this.options.ticks,n=t.maxTicksLimit,r=t.stepSize;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1)>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(e," ticks. Limiting to 1000.")),e=1e3):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}},{key:"computeTickLimit",value:function(){return Number.POSITIVE_INFINITY}},{key:"buildTicks",value:function(){var e=this.options,t=e.ticks,n=this.getTickLimit(),r=n_({maxTicks:n=Math.max(2,n),bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Zd(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}},{key:"configure",value:function(){var e=this.ticks,t=this.min,r=this.max;if(Tf(c(n.prototype),"configure",this).call(this),this.options.offset&&e.length){var i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}},{key:"getLabelForValue",value:function(e){return kp(e,this.chart.options.locale,this.options.ticks.format)}}]),n}(Pg),a_=function(e){u(n,e);var t=p(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=hd(t)?t:0,this.max=hd(n)?n:1,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){var e=this.isHorizontal(),t=e?this.width:this.height,n=Hd(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}},{key:"getPixelForValue",value:function(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}]),n}(i_);(0,Ye.Z)(a_,"id","linear"),(0,Ye.Z)(a_,"defaults",{ticks:{callback:Sp.formatters.numeric}});var o_=function(e){return Math.floor(Bd(e))},s_=function(e,t){return Math.pow(10,o_(e)+t)};function l_(e){return 1===e/Math.pow(10,o_(e))}function u_(e,t,n){var r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function c_(e,t){var n=t.min,r=t.max;n=fd(e.min,n);for(var i=[],a=o_(n),o=function(e,t){for(var n=o_(t-e);u_(e,t,n)>10;)n++;for(;u_(e,t,n)<10;)n--;return Math.min(n,o_(e))}(n,r),s=o<0?Math.pow(10,Math.abs(o)):1,l=Math.pow(10,o),u=a>o?Math.pow(10,a):0,c=Math.round((n-u)*s)/s,h=Math.floor((n-u)/l/10)*l*10,f=Math.floor((c-h)/Math.pow(10,o)),d=fd(e.min,Math.round((u+h+f*Math.pow(10,o))*s)/s);d<r;)i.push({value:d,major:l_(d),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(f=2,s=++o>=0?1:s),d=Math.round((u+h+f*Math.pow(10,o))*s)/s;var p=fd(e.max,d);return i.push({value:p,major:l_(p),significand:f}),i}var h_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).start=void 0,r.end=void 0,r._startValue=void 0,r._valueRange=0,r}return(0,s.Z)(n,[{key:"parse",value:function(e,t){var n=i_.prototype.parse.apply(this,[e,t]);if(0!==n)return hd(n)&&n>0?n:null;this._zero=!0}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!0),t=e.min,n=e.max;this.min=hd(t)?Math.max(0,t):null,this.max=hd(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!hd(this._userMin)&&(this.min=t===s_(this.min,0)?s_(this.min,-1):s_(this.min,0)),this.handleTickRangeOptions()}},{key:"handleTickRangeOptions",value:function(){var e=this.getUserBounds(),t=e.minDefined,n=e.maxDefined,r=this.min,i=this.max,a=function(e){return r=t?r:e},o=function(e){return i=n?i:e};r===i&&(r<=0?(a(1),o(10)):(a(s_(r,-1)),o(s_(i,1)))),r<=0&&a(s_(i,-1)),i<=0&&o(s_(r,1)),this.min=r,this.max=i}},{key:"buildTicks",value:function(){var e=this.options,t=c_({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Zd(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}},{key:"getLabelForValue",value:function(e){return void 0===e?"0":kp(e,this.chart.options.locale,this.options.ticks.format)}},{key:"configure",value:function(){var e=this.min;Tf(c(n.prototype),"configure",this).call(this),this._startValue=Bd(e),this._valueRange=Bd(this.max)-Bd(e)}},{key:"getPixelForValue",value:function(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Bd(e)-this._startValue)/this._valueRange)}},{key:"getValueForPixel",value:function(e){var t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}]),n}(Pg);function f_(e){var t=e.ticks;if(t.display&&e.display){var n=em(t.backdropPadding);return dd(t.font&&t.font.size,Ip.font.size)+n.height}return 0}function d_(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function p_(e){for(var t,n,r,i={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},a=Object.assign({},i),o=[],s=[],l=e._pointLabels.length,u=e.options.pointLabels,c=u.centerPointLabels?Id/l:0,h=0;h<l;h++){var f=u.setContext(e.getPointLabelContext(h));s[h]=f.padding;var d=e.getPointPosition(h,e.drawingArea+s[h],c),p=tm(f.font),m=(t=e.ctx,n=p,r=ud(r=e._pointLabels[h])?r:[r],{w:Lp(t,n.string,r),h:r.length*n.lineHeight});o[h]=m;var v=Yd(e.getIndexAngle(h)+c),g=Math.round(Wd(v));m_(a,i,v,d_(g,d.x,m.w,0,180),d_(g,d.y,m.h,90,270))}e.setCenterPoint(i.l-a.l,a.r-i.r,i.t-a.t,a.b-i.b),e._pointLabelItems=function(e,t,n){for(var r,i=[],a=e._pointLabels.length,o=e.options,s=o.pointLabels,l=s.centerPointLabels,u=s.display,c={extra:f_(o)/2,additionalAngle:l?Id/a:0},h=0;h<a;h++){c.padding=n[h],c.size=t[h];var f=v_(e,h,c);i.push(f),"auto"===u&&(f.visible=g_(f,r),f.visible&&(r=f))}return i}(e,o,s)}function m_(e,t,n,r,i){var a=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n)),s=0,l=0;r.start<t.l?(s=(t.l-r.start)/a,e.l=Math.min(e.l,t.l-s)):r.end>t.r&&(s=(r.end-t.r)/a,e.r=Math.max(e.r,t.r+s)),i.start<t.t?(l=(t.t-i.start)/o,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function v_(e,t,n){var r=e.drawingArea,i=n.extra,a=n.additionalAngle,o=n.padding,s=n.size,l=e.getPointPosition(t,r+i+o,a),u=Math.round(Wd(Yd(l.angle+Od))),c=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,s.h,u),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(u),f=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,s.w,h);return{visible:!0,x:l.x,y:c,textAlign:h,left:f,top:c,right:f+s.w,bottom:c+s.h}}function g_(e,t){if(!t)return!0;var n=e.left,r=e.top,i=e.right,a=e.bottom;return!(Np({x:n,y:r},t)||Np({x:n,y:a},t)||Np({x:i,y:r},t)||Np({x:i,y:a},t))}function y_(e,t,n){var r=n.left,i=n.top,a=n.right,o=n.bottom,s=t.backdropColor;if(!ld(s)){var l=Qp(t.borderRadius),u=em(t.backdropPadding);e.fillStyle=s;var c=r-u.left,h=i-u.top,f=a-r+u.width,d=o-i+u.height;Object.values(l).some((function(e){return 0!==e}))?(e.beginPath(),Wp(e,{x:c,y:h,w:f,h:d,radius:l}),e.fill()):e.fillRect(c,h,f,d)}}function __(e,t,n,r){var i=e.ctx;if(n)i.arc(e.xCenter,e.yCenter,t,0,zd);else{var a=e.getPointPosition(0,t);i.moveTo(a.x,a.y);for(var o=1;o<r;o++)a=e.getPointPosition(o,t),i.lineTo(a.x,a.y)}}(0,Ye.Z)(h_,"id","logarithmic"),(0,Ye.Z)(h_,"defaults",{ticks:{callback:Sp.formatters.logarithmic,major:{enabled:!0}}});var x_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e)).xCenter=void 0,r.yCenter=void 0,r.drawingArea=void 0,r._pointLabels=[],r._pointLabelItems=[],r}return(0,s.Z)(n,[{key:"setDimensions",value:function(){var e=this._padding=em(f_(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}},{key:"determineDataLimits",value:function(){var e=this.getMinMax(!1),t=e.min,n=e.max;this.min=hd(t)&&!isNaN(t)?t:0,this.max=hd(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}},{key:"computeTickLimit",value:function(){return Math.ceil(this.drawingArea/f_(this.options))}},{key:"generateTickLabels",value:function(e){var t=this;i_.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((function(e,n){var r=md(t.options.pointLabels.callback,[e,n],t);return r||0===r?r:""})).filter((function(e,n){return t.chart.getDataVisibility(n)}))}},{key:"fit",value:function(){var e=this.options;e.display&&e.pointLabels.display?p_(this):this.setCenterPoint(0,0,0,0)}},{key:"setCenterPoint",value:function(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}},{key:"getIndexAngle",value:function(e){return Yd(e*(zd/(this._pointLabels.length||1))+Hd(this.options.startAngle||0))}},{key:"getDistanceFromCenterForValue",value:function(e){if(ld(e))return NaN;var t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}},{key:"getValueForDistanceFromCenter",value:function(e){if(ld(e))return NaN;var t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}},{key:"getPointLabelContext",value:function(e){var t=this._pointLabels||[];if(e>=0&&e<t.length){var n=t[e];return function(e,t,n){return rm(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}},{key:"getPointPosition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getIndexAngle(e)-Od+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}},{key:"getPointPositionForValue",value:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}},{key:"getBasePosition",value:function(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}},{key:"getPointLabelPosition",value:function(e){var t=this._pointLabelItems[e];return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}},{key:"drawBackground",value:function(){var e=this.options,t=e.backgroundColor,n=e.grid.circular;if(t){var r=this.ctx;r.save(),r.beginPath(),__(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}},{key:"drawGrid",value:function(){var e,t,n,r=this,i=this.ctx,a=this.options,o=a.angleLines,s=a.grid,l=a.border,u=this._pointLabels.length;if(a.pointLabels.display&&function(e,t){for(var n=e.ctx,r=e.options.pointLabels,i=t-1;i>=0;i--){var a=e._pointLabelItems[i];if(a.visible){var o=r.setContext(e.getPointLabelContext(i));y_(n,o,a);var s=tm(o.font),l=a.x,u=a.y,c=a.textAlign;Hp(n,e._pointLabels[i],l,u+s.lineHeight/2,s,{color:o.color,textAlign:c,textBaseline:"middle"})}}}(this,u),s.display&&this.ticks.forEach((function(e,n){if(0!==n){t=r.getDistanceFromCenterForValue(e.value);var i=r.getContext(n),a=s.setContext(i),o=l.setContext(i);!function(e,t,n,r,i){var a=e.ctx,o=t.circular,s=t.color,l=t.lineWidth;!o&&!r||!s||!l||n<0||(a.save(),a.strokeStyle=s,a.lineWidth=l,a.setLineDash(i.dash),a.lineDashOffset=i.dashOffset,a.beginPath(),__(e,n,o,r),a.closePath(),a.stroke(),a.restore())}(r,a,t,u,o)}})),o.display){for(i.save(),e=u-1;e>=0;e--){var c=o.setContext(this.getPointLabelContext(e)),h=c.color,f=c.lineWidth;f&&h&&(i.lineWidth=f,i.strokeStyle=h,i.setLineDash(c.borderDash),i.lineDashOffset=c.borderDashOffset,t=this.getDistanceFromCenterForValue(a.ticks.reverse?this.min:this.max),n=this.getPointPosition(e,t),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(n.x,n.y),i.stroke())}i.restore()}}},{key:"drawBorder",value:function(){}},{key:"drawLabels",value:function(){var e=this,t=this.ctx,n=this.options,r=n.ticks;if(r.display){var i,a,o=this.getIndexAngle(0);t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(o),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((function(o,s){if(0!==s||n.reverse){var l=r.setContext(e.getContext(s)),u=tm(l.font);if(i=e.getDistanceFromCenterForValue(e.ticks[s].value),l.showLabelBackdrop){t.font=u.string,a=t.measureText(o.label).width,t.fillStyle=l.backdropColor;var c=em(l.backdropPadding);t.fillRect(-a/2-c.left,-i-u.size/2-c.top,a+c.width,u.size+c.height)}Hp(t,o.label,0,-i,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}})),t.restore()}}},{key:"drawTitle",value:function(){}}]),n}(i_);(0,Ye.Z)(x_,"id","radialLinear"),(0,Ye.Z)(x_,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Sp.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:function(e){return e},padding:5,centerPointLabels:!1}}),(0,Ye.Z)(x_,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Ye.Z)(x_,"descriptors",{angleLines:{_fallback:"grid"}});var b_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},w_=Object.keys(b_);function k_(e,t){return e-t}function E_(e,t){if(ld(t))return null;var n=e._adapter,r=e._parseOpts,i=r.parser,a=r.round,o=r.isoWeekday,s=t;return"function"===typeof i&&(s=i(s)),hd(s)||(s="string"===typeof i?n.parse(s,i):n.parse(s)),null===s?null:(a&&(s="week"!==a||!Ud(o)&&!0!==o?n.startOf(s,a):n.startOf(s,"isoWeek",o)),+s)}function S_(e,t,n,r){for(var i=w_.length,a=w_.indexOf(e);a<i-1;++a){var o=b_[w_[a]],s=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-t)/(s*o.size))<=r)return w_[a]}return w_[i-1]}function T_(e,t,n){if(n){if(n.length){var r=tp(n,t),i=r.lo,a=r.hi;e[n[i]>=t?n[i]:n[a]]=!0}}else e[t]=!0}function C_(e,t,n){var r,i,a=[],o={},s=t.length;for(r=0;r<s;++r)o[i=t[r]]=r,a.push({value:i,major:!1});return 0!==s&&n?function(e,t,n,r){var i,a,o=e._adapter,s=+o.startOf(t[0].value,r),l=t[t.length-1].value;for(i=s;i<=l;i=+o.add(i,1,r))(a=n[i])>=0&&(t[a].major=!0);return t}(e,a,o,n):a}var M_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e))._cache={data:[],labels:[],all:[]},r._unit="day",r._majorUnit=void 0,r._offsets={},r._normalized=!1,r._parseOpts=void 0,r}return(0,s.Z)(n,[{key:"init",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.time||(e.time={}),i=this._adapter=new Lv._date(e.adapters.date);i.init(t),wd(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},Tf(c(n.prototype),"init",this).call(this,e),this._normalized=t.normalized}},{key:"parse",value:function(e,t){return void 0===e?null:E_(this,e)}},{key:"beforeLayout",value:function(){Tf(c(n.prototype),"beforeLayout",this).call(this),this._cache={data:[],labels:[],all:[]}}},{key:"determineDataLimits",value:function(){var e=this.options,t=this._adapter,n=e.time.unit||"day",r=this.getUserBounds(),i=r.min,a=r.max,o=r.minDefined,s=r.maxDefined;function l(e){o||isNaN(e.min)||(i=Math.min(i,e.min)),s||isNaN(e.max)||(a=Math.max(a,e.max))}o&&s||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),i=hd(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),a=hd(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,a-1),this.max=Math.max(i+1,a)}},{key:"_getLabelBounds",value:function(){var e=this.getLabelTimestamps(),t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}},{key:"buildTicks",value:function(){var e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);var i=this.min,a=function(e,t,n){for(var r=0,i=e.length;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?S_(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(var a=w_.length-1;a>=w_.indexOf(n);a--){var o=w_[a];if(b_[o].common&&e._adapter.diff(i,r,o)>=t-1)return o}return w_[n?w_.indexOf(n):0]}(this,a.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(var t=w_.indexOf(e)+1,n=w_.length;t<n;++t)if(b_[w_[t]].common)return w_[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&a.reverse(),C_(this,a,this._majorUnit)}},{key:"afterAutoSkip",value:function(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((function(e){return+e.value})))}},{key:"initOffsets",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);var a=n.length<3?.5:.25;r=Qd(r,0,a),i=Qd(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}},{key:"_generate",value:function(){var e,t,n=this._adapter,r=this.min,i=this.max,a=this.options,o=a.time,s=o.unit||S_(o.minUnit,r,i,this._getLabelCapacity(r)),l=dd(a.ticks.stepSize,1),u="week"===s&&o.isoWeekday,c=Ud(u)||!0===u,h={},f=r;if(c&&(f=+n.startOf(f,"isoWeek",u)),f=+n.startOf(f,c?"day":s),n.diff(i,r,s)>1e5*l)throw new Error(r+" and "+i+" are too far apart with stepSize of "+l+" "+s);var d="data"===a.ticks.source&&this.getDataTimestamps();for(e=f,t=0;e<i;e=+n.add(e,l,s),t++)T_(h,e,d);return e!==i&&"ticks"!==a.bounds&&1!==t||T_(h,e,d),Object.keys(h).sort(k_).map((function(e){return+e}))}},{key:"getLabelForValue",value:function(e){var t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}},{key:"format",value:function(e,t){var n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}},{key:"_tickFormatFunction",value:function(e,t,n,r){var i=this.options,a=i.ticks.callback;if(a)return md(a,[e,t,n],this);var o=i.time.displayFormats,s=this._unit,l=this._majorUnit,u=s&&o[s],c=l&&o[l],h=n[t],f=l&&c&&h&&h.major;return this._adapter.format(e,r||(f?c:u))}},{key:"generateTickLabels",value:function(e){var t,n,r;for(t=0,n=e.length;t<n;++t)(r=e[t]).label=this._tickFormatFunction(r.value,t,e)}},{key:"getDecimalForValue",value:function(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}},{key:"getPixelForValue",value:function(e){var t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}},{key:"_getLabelSize",value:function(e){var t=this.options.ticks,n=this.ctx.measureText(e).width,r=Hd(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),a=Math.sin(r),o=this._resolveTickFontOptions(0).size;return{w:n*i+o*a,h:n*a+o*i}}},{key:"_getLabelCapacity",value:function(e){var t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,C_(this,[e],this._majorUnit),r),a=this._getLabelSize(i),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}},{key:"getDataTimestamps",value:function(){var e,t,n=this._cache.data||[];if(n.length)return n;var r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}},{key:"getLabelTimestamps",value:function(){var e,t,n=this._cache.labels||[];if(n.length)return n;var r=this.getLabels();for(e=0,t=r.length;e<t;++e)n.push(E_(this,r[e]));return this._cache.labels=this._normalized?n:this.normalize(n)}},{key:"normalize",value:function(e){return op(e.sort(k_))}}]),n}(Pg);function A_(e,t,n){var r,i,a,o,s=0,l=e.length-1;if(n){if(t>=e[s].pos&&t<=e[l].pos){var u=np(e,"pos",t);s=u.lo,l=u.hi}var c=e[s];r=c.pos,a=c.time;var h=e[l];i=h.pos,o=h.time}else{if(t>=e[s].time&&t<=e[l].time){var f=np(e,"time",t);s=f.lo,l=f.hi}var d=e[s];r=d.time,a=d.pos;var p=e[l];i=p.time,o=p.pos}var m=i-r;return m?a+(o-a)*(t-r)/m:a}(0,Ye.Z)(M_,"id","time"),(0,Ye.Z)(M_,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});var P_=function(e){u(n,e);var t=p(n);function n(e){var r;return(0,o.Z)(this,n),(r=t.call(this,e))._table=[],r._minPos=void 0,r._tableRange=void 0,r}return(0,s.Z)(n,[{key:"initOffsets",value:function(){var e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=A_(t,this.min),this._tableRange=A_(t,this.max)-this._minPos,Tf(c(n.prototype),"initOffsets",this).call(this,e)}},{key:"buildLookupTable",value:function(e){var t,n,r,i,a,o=this.min,s=this.max,l=[],u=[];for(t=0,n=e.length;t<n;++t)(i=e[t])>=o&&i<=s&&l.push(i);if(l.length<2)return[{time:o,pos:0},{time:s,pos:1}];for(t=0,n=l.length;t<n;++t)a=l[t+1],r=l[t-1],i=l[t],Math.round((a+r)/2)!==i&&u.push({time:i,pos:t/(n-1)});return u}},{key:"_generate",value:function(){var e=this.min,t=this.max,r=Tf(c(n.prototype),"getDataTimestamps",this).call(this);return r.includes(e)&&r.length||r.splice(0,0,e),r.includes(t)&&1!==r.length||r.push(t),r.sort((function(e,t){return e-t}))}},{key:"_getTimestampsForTable",value:function(){var e=this._cache.all||[];if(e.length)return e;var t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e}},{key:"getDecimalForValue",value:function(e){return(A_(this._table,e)-this._minPos)/this._tableRange}},{key:"getValueForPixel",value:function(e){var t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return A_(this._table,n*this._tableRange+this._minPos,!0)}}]),n}(M_);(0,Ye.Z)(P_,"id","timeseries"),(0,Ye.Z)(P_,"defaults",M_.defaults);var I_=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],z_="label";function L_(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function D_(e,t){e.labels=t}function R_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z_,r=[];e.datasets=t.map((function(t){var i=e.datasets.find((function(e){return e[n]===t[n]}));return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):_n({},t)}))}function O_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z_,n={labels:[],datasets:[]};return D_(n,e.labels),R_(n,e.datasets,t),n}function j_(t,n){var r=t.height,i=void 0===r?150:r,a=t.width,o=void 0===a?300:a,s=t.redraw,l=void 0!==s&&s,u=t.datasetIdKey,c=t.type,h=t.data,f=t.options,d=t.plugins,p=void 0===d?[]:d,m=t.fallbackContent,v=t.updateMode,g=ka(t,I_),y=(0,e.useRef)(null),_=(0,e.useRef)(),x=function(){y.current&&(_.current=new sy(y.current,{type:c,data:O_(h,u),options:f&&_n({},f),plugins:p}),L_(n,_.current))},b=function(){L_(n,null),_.current&&(_.current.destroy(),_.current=null)};return(0,e.useEffect)((function(){!l&&_.current&&f&&function(e,t){var n=e.options;n&&t&&Object.assign(n,t)}(_.current,f)}),[l,f]),(0,e.useEffect)((function(){!l&&_.current&&D_(_.current.config.data,h.labels)}),[l,h.labels]),(0,e.useEffect)((function(){!l&&_.current&&h.datasets&&R_(_.current.config.data,h.datasets,u)}),[l,h.datasets]),(0,e.useEffect)((function(){_.current&&(l?(b(),setTimeout(x)):_.current.update(v))}),[l,f,h.labels,h.datasets,v]),(0,e.useEffect)((function(){_.current&&(b(),setTimeout(x))}),[c]),(0,e.useEffect)((function(){return x(),function(){return b()}}),[]),e.createElement("canvas",Object.assign({ref:y,role:"img",height:i,width:o},g),m)}var N_=(0,e.forwardRef)(j_);function B_(t,n){return sy.register(n),(0,e.forwardRef)((function(n,r){return e.createElement(N_,Object.assign({},n,{ref:r,type:t}))}))}var F_=B_("bar",kv);sy.register(t_,a_,Iy,jy,Jy,Ry);var $_=function(){var t=(0,e.useState)(null),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=(0,e.useState)(null),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,e.useState)(null),h=(0,i.Z)(c,2),f=h[0],d=h[1],p=(0,e.useState)(null),m=(0,i.Z)(p,2),v=m[0],g=m[1],y=0,_={1:"January",2:"February",3:"March",4:"April",5:"May",6:"June",7:"July",8:"August",9:"September",10:"October",11:"November",12:"December"},x="http://localhost:5000/admin/dashboard",b={labels:null!==f?f.data.map((function(e){return _[e._id.month]})):[],datasets:[{barThickness:110,label:"Sales",data:null!==f?f.data.map((function(e){return e.totalAmount/100})):null,backgroundColor:"#0045a5"}]},w=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yi.get("".concat(x,"/users"),{withCredentials:!0});case 2:t=e.sent,g(t.data.users);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){function e(){return(e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.get("".concat(x,"/total"),{withCredentials:!0});case 3:return t=e.sent,e.next=6,Yi.get("".concat(x,"/sales-month"),{withCredentials:!0});case 6:return n=e.sent,e.next=9,Yi.get("".concat(x,"/orders"),{withCredentials:!0});case 9:return r=e.sent,e.next=12,Yi.get("".concat(x,"/users"),{withCredentials:!0});case 12:i=e.sent,a(t.data),d(n.data),u(r.data),g(i.data.users),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(0),console.error(e.t0);case 22:case"end":return e.stop()}}),e,null,[[0,19]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,kh.jsxs)("div",{className:"p-8 bg-[#f5f5f5]",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-2xl font-bold my-6",children:"Dashboard"}),(0,kh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 my-6",children:[(0,kh.jsxs)("div",{className:"sales bg-white shadow-md rounded-md p-6 flex items-center gap-8",children:[(0,kh.jsx)("img",{width:"64",height:"64",src:"https://img.icons8.com/color/96/rupee--v1.png",className:"drop-shadow-xl",alt:"rupee--v1"}),(0,kh.jsxs)("div",{className:"flex flex-col",children:[(0,kh.jsx)("h1",{className:"font-[font4]",children:"Total Sales"}),(0,kh.jsxs)("p",{className:"text-lg",children:[(0,kh.jsx)("span",{className:"me-1 font-sans",children:"\u20b9"}),r&&Number(Math.floor(r.totalSales[0].totalSales/100)).toLocaleString("en-in")]})]})]}),(0,kh.jsxs)("div",{className:"orders bg-white shadow-md rounded-md p-6 flex items-center gap-8",children:[(0,kh.jsx)("img",{width:"64",height:"64",src:"https://img.icons8.com/3d-fluency/94/shopping-cart-loaded.png",className:"drop-shadow-xl",alt:"shopping-cart-loaded"}),(0,kh.jsxs)("div",{className:"flex flex-col",children:[(0,kh.jsx)("h1",{className:"font-[font4]",children:"Total Orders"}),(0,kh.jsx)("p",{className:"text-lg",children:r&&r.totalOrders})]})]}),(0,kh.jsxs)("div",{className:"products bg-white shadow-md rounded-md p-6 flex items-center gap-8",children:[(0,kh.jsx)("img",{width:"64",height:"64",src:"https://img.icons8.com/arcade/64/fast-moving-consumer-goods.png",className:"drop-shadow-xl",alt:"fast-moving-consumer-goods"}),(0,kh.jsxs)("div",{className:"flex flex-col",children:[(0,kh.jsx)("h1",{className:"font-[font4]",children:"Total Products"}),(0,kh.jsx)("p",{className:"text-lg",children:r&&r.totalProducts})]})]})]}),(0,kh.jsxs)("div",{className:"statistics hidden md:block my-10",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-2xl font-bold",children:"Sales Statistics"}),(0,kh.jsx)("div",{className:"chart m-6",children:(0,kh.jsx)(F_,{options:{responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"Yearly Sales"}}},data:b})})]}),(0,kh.jsxs)("div",{className:"orders my-6 mx-3 p-4 md:m-6 md:p-6 bg-white rounded-xl",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-xl font-bold my-3",children:"Latest Orders"}),(0,kh.jsx)("div",{className:"list w-full p-2",children:l&&l.ordersDetails.map((function(e){return y++,(0,kh.jsxs)("div",{className:"grid grid-cols-3 md:grid-cols-5 p-2 md:p-6 border-b-[1px]",children:[(0,kh.jsxs)("h1",{className:"text-sm md:text-lg text-slate-600 font-[font1]",children:[y,"."]}),(0,kh.jsx)("h1",{className:"text-sm md:text-lg font-[font1] font-bold",children:e.user}),(0,kh.jsx)("h1",{className:"hidden md:block font-[font1] text-slate-600",children:e.email}),(0,kh.jsxs)("h1",{className:"text-xs md:text-lg font-[font1]",children:[(0,kh.jsx)("span",{className:"font-[font1] me-1",children:"\u20b9"}),Number(Math.round(e.total/100)).toLocaleString("en-in"),".00"]}),(0,kh.jsx)("div",{children:(0,kh.jsx)("h1",{className:"font-[font1] capitalize hidden md:block font-bold py-2 px-4 mx-12 text-sm text-center rounded-2xl ".concat("delivered"===e.status?"bg-green-100 text-green-600":"bg-red-100 text-red-700"),children:e.status})})]},e._id)}))})]}),(0,kh.jsx)("div",{className:"users-info my-6 mx-3 p-4 md:m-6 grid grid-cols-1 md:grid-cols-3 gap-6 w-full",children:v&&v.map((function(e){return(0,kh.jsx)(Sf,{fetchUsers:w,user:e},e._id)}))}),(0,kh.jsxs)("div",{className:"m-6",children:[(0,kh.jsx)(Ue,{className:"py-2 px-5 text-center hover:bg-transparent hover:text-black duration-300 bg-black text-white border-[1px] border-black",to:"products/create",children:"Add a Product"}),(0,kh.jsx)(Ue,{className:"py-2 px-5 text-center hover:bg-transparent hover:text-black duration-300 bg-black text-white border-[1px] border-black mx-4",to:"products/edit",children:"Edit a Product"})]})]})},V_=["name"],U_=["_f"],Z_=["_f"],H_=function(e){return"checkbox"===e.type},W_=function(e){return e instanceof Date},q_=function(e){return null==e},G_=function(e){return"object"===typeof e},X_=function(e){return!q_(e)&&!Array.isArray(e)&&G_(e)&&!W_(e)},K_=function(e){return X_(e)&&e.target?H_(e.target)?e.target.checked:e.target.value:e},Y_=function(e,t){return e.has(function(e){return e.substring(0,e.search(/\.\d+(\.|$)/))||e}(t))},J_=function(e){var t=e.constructor&&e.constructor.prototype;return X_(t)&&t.hasOwnProperty("isPrototypeOf")},Q_="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function ex(e){var t,n=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else{if(Q_&&(e instanceof Blob||e instanceof FileList)||!n&&!X_(e))return e;if(t=n?[]:{},n||J_(e))for(var r in e)e.hasOwnProperty(r)&&(t[r]=ex(e[r]));else t=e}return t}var tx=function(e){return Array.isArray(e)?e.filter(Boolean):[]},nx=function(e){return void 0===e},rx=function(e,t,n){if(!t||!X_(e))return n;var r=tx(t.split(/[,[\].]+?/)).reduce((function(e,t){return q_(e)?e:e[t]}),e);return nx(r)||r===e?nx(e[t])?n:e[t]:r},ix={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},ax={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ox="max",sx="min",lx="maxLength",ux="minLength",cx="pattern",hx="required",fx="validate",dx=(e.createContext(null),function(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i={defaultValues:t._defaultValues},a=function(a){Object.defineProperty(i,a,{get:function(){var i=a;return t._proxyFormState[i]!==ax.all&&(t._proxyFormState[i]=!r||ax.all),n&&(n[i]=!0),e[i]}})};for(var o in e)a(o);return i}),px=function(e){return X_(e)&&!Object.keys(e).length},mx=function(e,t,n,r){n(e);e.name;var i=ka(e,V_);return px(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find((function(e){return t[e]===(!r||ax.all)}))},vx=function(e){return Array.isArray(e)?e:[e]};function gx(t){var n=e.useRef(t);n.current=t,e.useEffect((function(){var e=!t.disabled&&n.current.subject&&n.current.subject.subscribe({next:n.current.next});return function(){e&&e.unsubscribe()}}),[t.disabled])}var yx=function(e){return"string"===typeof e},_x=function(e,t,n,r,i){return yx(e)?(r&&t.watch.add(e),rx(n,e,i)):Array.isArray(e)?e.map((function(e){return r&&t.watch.add(e),rx(n,e)})):(r&&(t.watchAll=!0),n)};var xx=function(e){return/^\w*$/.test(e)},bx=function(e){return tx(e.replace(/["|']|\]/g,"").split(/\.|\[/))};function wx(e,t,n){for(var r=-1,i=xx(t)?[t]:bx(t),a=i.length,o=a-1;++r<a;){var s=i[r],l=n;if(r!==o){var u=e[s];l=X_(u)||Array.isArray(u)?u:isNaN(+i[r+1])?{}:[]}e[s]=l,e=e[s]}return e}var kx=function(e,t,n,r,i){return t?_n(_n({},n[e]),{},{types:_n(_n({},n[e]&&n[e].types?n[e].types:{}),{},(0,Ye.Z)({},r,i||!0))}):{}},Ex=function e(t,n,r){var i,a=(0,w.Z)(r||Object.keys(t));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=rx(t,o);if(s){var l=s._f,u=ka(s,U_);if(l&&n(l.name)){if(l.ref.focus){l.ref.focus();break}if(l.refs&&l.refs[0].focus){l.refs[0].focus();break}}else X_(u)&&e(u,n)}}}catch(c){a.e(c)}finally{a.f()}},Sx=function(e){return{isOnSubmit:!e||e===ax.onSubmit,isOnBlur:e===ax.onBlur,isOnChange:e===ax.onChange,isOnAll:e===ax.all,isOnTouch:e===ax.onTouched}},Tx=function(e,t,n){return!n&&(t.watchAll||t.watch.has(e)||(0,a.Z)(t.watch).some((function(t){return e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))})))},Cx=function(e,t,n){var r=tx(rx(e,n));return wx(r,"root",t[n]),wx(e,n,r),e},Mx=function(e){return"boolean"===typeof e},Ax=function(e){return"file"===e.type},Px=function(e){return"function"===typeof e},Ix=function(e){if(!Q_)return!1;var t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},zx=function(e){return yx(e)},Lx=function(e){return"radio"===e.type},Dx=function(e){return e instanceof RegExp},Rx={value:!1,isValid:!1},Ox={value:!0,isValid:!0},jx=function(e){if(Array.isArray(e)){if(e.length>1){var t=e.filter((function(e){return e&&e.checked&&!e.disabled})).map((function(e){return e.value}));return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!nx(e[0].attributes.value)?nx(e[0].value)||""===e[0].value?Ox:{value:e[0].value,isValid:!0}:Ox:Rx}return Rx},Nx={isValid:!1,value:null},Bx=function(e){return Array.isArray(e)?e.reduce((function(e,t){return t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e}),Nx):Nx};function Fx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(zx(e)||Array.isArray(e)&&e.every(zx)||Mx(e)&&!e)return{type:n,message:zx(e)?e:"",ref:t}}var $x=function(e){return X_(e)&&!Dx(e)?e:{value:e,message:""}},Vx=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n,r,i,a){var o,s,l,u,c,h,f,d,p,m,v,g,y,_,x,b,w,k,E,S,T,C,M,A,P,I,z,L,D,R,O,j,N,B,F,$,V,U,Z,H,W,q,G,X,K,Y,J,Q;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t._f,s=o.ref,l=o.refs,u=o.required,c=o.maxLength,h=o.minLength,f=o.min,d=o.max,p=o.pattern,m=o.validate,v=o.name,g=o.valueAsNumber,y=o.mount,_=o.disabled,x=rx(n,v),y&&!_){e.next=4;break}return e.abrupt("return",{});case 4:if(b=l?l[0]:s,w=function(e){i&&b.reportValidity&&(b.setCustomValidity(Mx(e)?"":e||""),b.reportValidity())},k={},E=Lx(s),S=H_(s),T=E||S,C=(g||Ax(s))&&nx(s.value)&&nx(x)||Ix(s)&&""===s.value||""===x||Array.isArray(x)&&!x.length,M=kx.bind(null,v,r,k),A=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:lx,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ux,a=e?t:n;k[v]=_n({type:e?r:i,message:a,ref:s},M(e?r:i,a))},!(a?!Array.isArray(x)||!x.length:u&&(!T&&(C||q_(x))||Mx(x)&&!x||S&&!jx(l).isValid||E&&!Bx(l).isValid))){e.next=20;break}if(P=zx(u)?{value:!!u,message:u}:$x(u),I=P.value,z=P.message,!I){e.next=20;break}if(k[v]=_n({type:hx,message:z,ref:b},M(hx,z)),r){e.next=20;break}return w(z),e.abrupt("return",k);case 20:if(C||q_(f)&&q_(d)){e.next=29;break}if(R=$x(d),O=$x(f),q_(x)||isNaN(x)?(N=s.valueAsDate||new Date(x),B=function(e){return new Date((new Date).toDateString()+" "+e)},F="time"==s.type,$="week"==s.type,yx(R.value)&&x&&(L=F?B(x)>B(R.value):$?x>R.value:N>new Date(R.value)),yx(O.value)&&x&&(D=F?B(x)<B(O.value):$?x<O.value:N<new Date(O.value))):(j=s.valueAsNumber||(x?+x:x),q_(R.value)||(L=j>R.value),q_(O.value)||(D=j<O.value)),!L&&!D){e.next=29;break}if(A(!!L,R.message,O.message,ox,sx),r){e.next=29;break}return w(k[v].message),e.abrupt("return",k);case 29:if(!c&&!h||C||!(yx(x)||a&&Array.isArray(x))){e.next=39;break}if(V=$x(c),U=$x(h),Z=!q_(V.value)&&x.length>+V.value,H=!q_(U.value)&&x.length<+U.value,!Z&&!H){e.next=39;break}if(A(Z,V.message,U.message),r){e.next=39;break}return w(k[v].message),e.abrupt("return",k);case 39:if(!p||C||!yx(x)){e.next=46;break}if(W=$x(p),q=W.value,G=W.message,!Dx(q)||x.match(q)){e.next=46;break}if(k[v]=_n({type:cx,message:G,ref:s},M(cx,G)),r){e.next=46;break}return w(G),e.abrupt("return",k);case 46:if(!m){e.next=80;break}if(!Px(m)){e.next=59;break}return e.next=50,m(x,n);case 50:if(X=e.sent,!(K=Fx(X,b))){e.next=57;break}if(k[v]=_n(_n({},K),M(fx,K.message)),r){e.next=57;break}return w(K.message),e.abrupt("return",k);case 57:e.next=80;break;case 59:if(!X_(m)){e.next=80;break}Y={},e.t0=(0,cr.Z)().keys(m);case 62:if((e.t1=e.t0()).done){e.next=76;break}if(J=e.t1.value,px(Y)||r){e.next=66;break}return e.abrupt("break",76);case 66:return e.t2=Fx,e.next=69,m[J](x,n);case 69:e.t3=e.sent,e.t4=b,e.t5=J,(Q=(0,e.t2)(e.t3,e.t4,e.t5))&&(Y=_n(_n({},Q),M(J,Q.message)),w(Q.message),r&&(k[v]=Y)),e.next=62;break;case 76:if(px(Y)){e.next=80;break}if(k[v]=_n({ref:b},Y),r){e.next=80;break}return e.abrupt("return",k);case 80:return w(!0),e.abrupt("return",k);case 82:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();function Ux(e,t){var n=Array.isArray(t)?t:xx(t)?[t]:bx(t),r=1===n.length?e:function(e,t){for(var n=t.slice(0,-1).length,r=0;r<n;)e=nx(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,a=n[i];return r&&delete r[a],0!==i&&(X_(r)&&px(r)||Array.isArray(r)&&function(e){for(var t in e)if(e.hasOwnProperty(t)&&!nx(e[t]))return!1;return!0}(r))&&Ux(e,n.slice(0,-1)),e}function Zx(){var e=[];return{get observers(){return e},next:function(t){var n,r=(0,w.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.next&&i.next(t)}}catch(a){r.e(a)}finally{r.f()}},subscribe:function(t){return e.push(t),{unsubscribe:function(){e=e.filter((function(e){return e!==t}))}}},unsubscribe:function(){e=[]}}}var Hx=function(e){return q_(e)||!G_(e)};function Wx(e,t){if(Hx(e)||Hx(t))return e===t;if(W_(e)&&W_(t))return e.getTime()===t.getTime();var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0,a=n;i<a.length;i++){var o=a[i],s=e[o];if(!r.includes(o))return!1;if("ref"!==o){var l=t[o];if(W_(s)&&W_(l)||X_(s)&&X_(l)||Array.isArray(s)&&Array.isArray(l)?!Wx(s,l):s!==l)return!1}}return!0}var qx=function(e){return"select-multiple"===e.type},Gx=function(e){return Lx(e)||H_(e)},Xx=function(e){return Ix(e)&&e.isConnected},Kx=function(e){for(var t in e)if(Px(e[t]))return!0;return!1};function Yx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e);if(X_(e)||n)for(var r in e)Array.isArray(e[r])||X_(e[r])&&!Kx(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Yx(e[r],t[r])):q_(e[r])||(t[r]=!0);return t}function Jx(e,t,n){var r=Array.isArray(e);if(X_(e)||r)for(var i in e)Array.isArray(e[i])||X_(e[i])&&!Kx(e[i])?nx(t)||Hx(n[i])?n[i]=Array.isArray(e[i])?Yx(e[i],[]):_n({},Yx(e[i])):Jx(e[i],q_(t)?{}:t[i],n[i]):n[i]=!Wx(e[i],t[i]);return n}var Qx=function(e,t){return Jx(e,t,Yx(t))},eb=function(e,t){var n=t.valueAsNumber,r=t.valueAsDate,i=t.setValueAs;return nx(e)?e:n?""===e?NaN:e?+e:e:r&&yx(e)?new Date(e):i?i(e):e};function tb(e){var t=e.ref;if(!(e.refs?e.refs.every((function(e){return e.disabled})):t.disabled))return Ax(t)?t.files:Lx(t)?Bx(e.refs).value:qx(t)?(0,a.Z)(t.selectedOptions).map((function(e){return e.value})):H_(t)?jx(e.refs).value:eb(nx(t.value)?e.ref.value:t.value,e)}var nb=function(e,t,n,r){var i,o={},s=(0,w.Z)(e);try{for(s.s();!(i=s.n()).done;){var l=i.value,u=rx(t,l);u&&wx(o,l,u._f)}}catch(c){s.e(c)}finally{s.f()}return{criteriaMode:n,names:(0,a.Z)(e),fields:o,shouldUseNativeValidation:r}},rb=function(e){return nx(e)?e:Dx(e)?e.source:X_(e)?Dx(e.value)?e.value.source:e.value:e},ib=function(e){return e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate)};function ab(e,t,n){var r=rx(e,n);if(r||xx(n))return{error:r,name:n};for(var i=n.split(".");i.length;){var a=i.join("."),o=rx(t,a),s=rx(e,a);if(o&&!Array.isArray(o)&&n!==a)return{name:n};if(s&&s.type)return{name:a,error:s};i.pop()}return{name:n}}var ob=function(e,t,n,r,i){return!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e)},sb=function(e,t){return!tx(rx(e,t)).length&&Ux(e,t)},lb={mode:ax.onSubmit,reValidateMode:ax.onChange,shouldFocusError:!0};function ub(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=_n(_n({},lb),t),i={submitCount:0,isDirty:!1,isLoading:Px(r.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},o={},s=(X_(r.defaultValues)||X_(r.values))&&ex(r.defaultValues||r.values)||{},l=r.shouldUnregister?{}:ex(s),u={action:!1,mount:!1,watch:!1},c={mount:new Set,unMount:new Set,array:new Set,watch:new Set},h=0,f={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},d={values:Zx(),array:Zx(),state:Zx()},p=t.resetOptions&&t.resetOptions.keepDirtyValues,m=Sx(r.mode),v=Sx(r.reValidateMode),g=r.criteriaMode===ax.all,y=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f.isValid&&!t){e.next=14;break}if(!r.resolver){e.next=9;break}return e.t1=px,e.next=5,E();case 5:e.t2=e.sent.errors,e.t0=(0,e.t1)(e.t2),e.next=12;break;case 9:return e.next=11,T(o,!0);case 11:e.t0=e.sent;case 12:(n=e.t0)!==i.isValid&&d.state.next({isValid:n});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(e){return f.isValidating&&d.state.next({isValidating:e})},x=function(e,t,n,r){var i=rx(o,e);if(i){var a=rx(l,e,nx(n)?rx(s,e):n);nx(a)||r&&r.defaultChecked||t?wx(l,e,t?a:tb(i._f)):A(e,a),u.mount&&y()}},b=function(e,t,n,r,a){var o=!1,l=!1,u={name:e};if(!n||r){f.isDirty&&(l=i.isDirty,i.isDirty=u.isDirty=C(),o=l!==u.isDirty);var c=Wx(rx(s,e),t);l=rx(i.dirtyFields,e),c?Ux(i.dirtyFields,e):wx(i.dirtyFields,e,!0),u.dirtyFields=i.dirtyFields,o=o||f.dirtyFields&&l!==!c}if(n){var h=rx(i.touchedFields,e);h||(wx(i.touchedFields,e,n),u.touchedFields=i.touchedFields,o=o||f.touchedFields&&h!==n)}return o&&a&&d.state.next(u),o?u:{}},k=function(n,r,a,o){var s=rx(i.errors,n),l=f.isValid&&Mx(r)&&i.isValid!==r;if(t.delayError&&a?(e=function(e){return function(t){clearTimeout(h),h=setTimeout(e,t)}}((function(){return function(e,t){wx(i.errors,e,t),d.state.next({errors:i.errors})}(n,a)})),e(t.delayError)):(clearTimeout(h),e=null,a?wx(i.errors,n,a):Ux(i.errors,n)),(a?!Wx(s,a):s)||!px(o)||l){var u=_n(_n(_n({},o),l&&Mx(r)?{isValid:r}:{}),{},{errors:i.errors,name:n});i=_n(_n({},i),u),d.state.next(u)}_(!1)},E=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.resolver(l,r.context,nb(t||c.mount,o,r.criteriaMode,r.shouldUseNativeValidation)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,a,o,s,l;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:if(n=e.sent,r=n.errors,t){a=(0,w.Z)(t);try{for(a.s();!(o=a.n()).done;)s=o.value,(l=rx(r,s))?wx(i.errors,s,l):Ux(i.errors,s)}catch(u){a.e(u)}finally{a.f()}}else i.errors=r;return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t,n){var a,o,s,u,h,f,d,p=arguments;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=p.length>2&&void 0!==p[2]?p[2]:{valid:!0},e.t0=(0,cr.Z)().keys(t);case 2:if((e.t1=e.t0()).done){e.next=23;break}if(o=e.t1.value,!(s=t[o])){e.next=21;break}if(u=s._f,h=ka(s,Z_),!u){e.next=17;break}return f=c.array.has(u.name),e.next=11,Vx(s,l,g,r.shouldUseNativeValidation&&!n,f);case 11:if(!(d=e.sent)[u.name]){e.next=16;break}if(a.valid=!1,!n){e.next=16;break}return e.abrupt("break",23);case 16:!n&&(rx(d,u.name)?f?Cx(i.errors,d,u.name):wx(i.errors,u.name,d[u.name]):Ux(i.errors,u.name));case 17:if(e.t2=h,!e.t2){e.next=21;break}return e.next=21,T(h,n,a);case 21:e.next=2;break;case 23:return e.abrupt("return",a.valid);case 24:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C=function(e,t){return e&&t&&wx(l,e,t),!Wx(D(),s)},M=function(e,t,n){return _x(e,c,_n({},u.mount?l:nx(t)?s:yx(e)?(0,Ye.Z)({},e,t):t),n,t)},A=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=rx(o,e),i=t;if(r){var s=r._f;s&&(!s.disabled&&wx(l,e,eb(t,s)),i=Ix(s.ref)&&q_(t)?"":t,qx(s.ref)?(0,a.Z)(s.ref.options).forEach((function(e){return e.selected=i.includes(e.value)})):s.refs?H_(s.ref)?s.refs.length>1?s.refs.forEach((function(e){return(!e.defaultChecked||!e.disabled)&&(e.checked=Array.isArray(i)?!!i.find((function(t){return t===e.value})):i===e.value)})):s.refs[0]&&(s.refs[0].checked=!!i):s.refs.forEach((function(e){return e.checked=e.value===i})):Ax(s.ref)?s.ref.value="":(s.ref.value=i,s.ref.type||d.values.next({name:e,values:_n({},l)})))}(n.shouldDirty||n.shouldTouch)&&b(e,i,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&L(e)},P=function e(t,n,r){for(var i in n){var a=n[i],s="".concat(t,".").concat(i),l=rx(o,s);!c.array.has(t)&&Hx(a)&&(!l||l._f)||W_(a)?A(s,a,r):e(s,a,r)}},I=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=rx(o,e),h=c.array.has(e),p=ex(t);wx(l,e,p),h?(d.array.next({name:e,values:_n({},l)}),(f.isDirty||f.dirtyFields)&&r.shouldDirty&&d.state.next({name:e,dirtyFields:Qx(s,l),isDirty:C(e,p)})):!a||a._f||q_(p)?A(e,p,r):P(e,p,r),Tx(e,c)&&d.state.next(_n({},i)),d.values.next({name:e,values:_n({},l)}),!u.mount&&n()},z=function(){var t=(0,hr.Z)((0,cr.Z)().mark((function t(n){var a,s,u,h,p,x,w,S,C,M,A,P,I,z,D,R,O;return(0,cr.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.target,s=a.name,u=!0,h=rx(o,s),p=function(){return a.type?tb(h._f):K_(n)},!h){t.next=47;break}if(S=p(),C=n.type===ix.BLUR||n.type===ix.FOCUS_OUT,M=!ib(h._f)&&!r.resolver&&!rx(i.errors,s)&&!h._f.deps||ob(C,rx(i.touchedFields,s),i.isSubmitted,v,m),A=Tx(s,c,C),wx(l,s,S),C?(h._f.onBlur&&h._f.onBlur(n),e&&e(0)):h._f.onChange&&h._f.onChange(n),P=b(s,S,C,!1),I=!px(P)||A,!C&&d.values.next({name:s,type:n.type,values:_n({},l)}),!M){t.next=18;break}return f.isValid&&y(),t.abrupt("return",I&&d.state.next(_n({name:s},A?{}:P)));case 18:if(!C&&A&&d.state.next(_n({},i)),_(!0),!r.resolver){t.next=32;break}return t.next=23,E([s]);case 23:z=t.sent,D=z.errors,R=ab(i.errors,o,s),O=ab(D,o,R.name||s),x=O.error,s=O.name,w=px(D),t.next=46;break;case 32:return t.next=34,Vx(h,l,g,r.shouldUseNativeValidation);case 34:if(t.t0=s,x=t.sent[t.t0],!(u=isNaN(S)||S===rx(l,s,S))){t.next=46;break}if(!x){t.next=42;break}w=!1,t.next=46;break;case 42:if(!f.isValid){t.next=46;break}return t.next=45,T(o,!0);case 45:w=t.sent;case 46:u&&(h._f.deps&&L(h._f.deps),k(s,w,x,P));case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,a,s,l,u,h=arguments;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:{},l=vx(t),_(!0),!r.resolver){e.next=11;break}return e.next=6,S(nx(t)?t:l);case 6:u=e.sent,a=px(u),s=t?!l.some((function(e){return rx(u,e)})):a,e.next=21;break;case 11:if(!t){e.next=18;break}return e.next=14,Promise.all(l.map(function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=rx(o,t),e.next=3,T(n&&n._f?(0,Ye.Z)({},t,n):n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 14:((s=e.sent.every(Boolean))||i.isValid)&&y(),e.next=21;break;case 18:return e.next=20,T(o);case 20:s=a=e.sent;case 21:return d.state.next(_n(_n(_n({},!yx(t)||f.isValid&&a!==i.isValid?{}:{name:t}),r.resolver||!t?{isValid:a}:{}),{},{errors:i.errors,isValidating:!1})),n.shouldFocus&&!s&&Ex(o,(function(e){return e&&rx(i.errors,e)}),t?l:c.mount),e.abrupt("return",s);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=_n(_n({},s),u.mount?l:{});return nx(e)?t:yx(e)?rx(t,e):e.map((function(e){return rx(t,e)}))},R=function(e,t){return{invalid:!!rx((t||i).errors,e),isDirty:!!rx((t||i).dirtyFields,e),isTouched:!!rx((t||i).touchedFields,e),error:rx((t||i).errors,e)}},O=function(e,t,n){var r=(rx(o,e,{_f:{}})._f||{}).ref;wx(i.errors,e,_n(_n({},t),{},{ref:r})),d.state.next({name:e,errors:i.errors,isValid:!1}),n&&n.shouldFocus&&r&&r.focus&&r.focus()},j=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=(0,w.Z)(e?vx(e):c.mount);try{for(a.s();!(t=a.n()).done;){var u=t.value;c.mount.delete(u),c.array.delete(u),n.keepValue||(Ux(o,u),Ux(l,u)),!n.keepError&&Ux(i.errors,u),!n.keepDirty&&Ux(i.dirtyFields,u),!n.keepTouched&&Ux(i.touchedFields,u),!r.shouldUnregister&&!n.keepDefaultValue&&Ux(s,u)}}catch(h){a.e(h)}finally{a.f()}d.values.next({values:_n({},l)}),d.state.next(_n(_n({},i),n.keepDirty?{isDirty:C()}:{})),!n.keepIsValid&&y()},N=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=rx(o,t),h=Mx(n.disabled);return wx(o,t,_n(_n({},i||{}),{},{_f:_n(_n({},i&&i._f?i._f:{ref:{name:t}}),{},{name:t,mount:!0},n)})),c.mount.add(t),i?h&&wx(l,t,n.disabled?void 0:rx(l,t,tb(i._f))):x(t,!0,n.value),_n(_n(_n({},h?{disabled:n.disabled}:{}),r.progressive?{required:!!n.required,min:rb(n.min),max:rb(n.max),minLength:rb(n.minLength),maxLength:rb(n.maxLength),pattern:rb(n.pattern)}:{}),{},{name:t,onChange:z,onBlur:z,ref:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(l){if(l){e(t,n),i=rx(o,t);var h=nx(l.value)&&l.querySelectorAll&&l.querySelectorAll("input,select,textarea")[0]||l,f=Gx(h),d=i._f.refs||[];if(f?d.find((function(e){return e===h})):h===i._f.ref)return;wx(o,t,{_f:_n(_n({},i._f),f?{refs:[].concat((0,a.Z)(d.filter(Xx)),[h],(0,a.Z)(Array.isArray(rx(s,t))?[{}]:[])),ref:{type:h.type,name:t}}:{ref:h})}),x(t,!1,void 0,h)}else(i=rx(o,t,{}))._f&&(i._f.mount=!1),(r.shouldUnregister||n.shouldUnregister)&&(!Y_(c.array,t)||!u.action)&&c.unMount.add(t)}))})},B=function(){return r.shouldFocusError&&Ex(o,(function(e){return e&&rx(i.errors,e)}),c.mount)},F=function(e,t){return function(){var n=(0,hr.Z)((0,cr.Z)().mark((function n(a){var s,u,c,h;return(0,cr.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a&&(a.preventDefault&&a.preventDefault(),a.persist&&a.persist()),s=ex(l),d.state.next({isSubmitting:!0}),!r.resolver){n.next=13;break}return n.next=6,E();case 6:u=n.sent,c=u.errors,h=u.values,i.errors=c,s=h,n.next=15;break;case 13:return n.next=15,T(o);case 15:if(Ux(i.errors,"root"),!px(i.errors)){n.next=22;break}return d.state.next({errors:{}}),n.next=20,e(s,a);case 20:n.next=27;break;case 22:if(!t){n.next=25;break}return n.next=25,t(_n({},i.errors),a);case 25:B(),setTimeout(B);case 27:d.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:px(i.errors),submitCount:i.submitCount+1,errors:i.errors});case 28:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},$=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e||s,h=ex(a),m=e&&!px(e)?h:s;if(r.keepDefaultValues||(s=a),!r.keepValues){if(r.keepDirtyValues||p){var v,g=(0,w.Z)(c.mount);try{for(g.s();!(v=g.n()).done;){var y=v.value;rx(i.dirtyFields,y)?wx(m,y,rx(l,y)):I(y,rx(m,y))}}catch(T){g.e(T)}finally{g.f()}}else{if(Q_&&nx(e)){var _,x=(0,w.Z)(c.mount);try{for(x.s();!(_=x.n()).done;){var b=_.value,k=rx(o,b);if(k&&k._f){var E=Array.isArray(k._f.refs)?k._f.refs[0]:k._f.ref;if(Ix(E)){var S=E.closest("form");if(S){S.reset();break}}}}}catch(T){x.e(T)}finally{x.f()}}o={}}l=t.shouldUnregister?r.keepDefaultValues?ex(s):{}:ex(m),d.array.next({values:_n({},m)}),d.values.next({values:_n({},m)})}c={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!u.mount&&n(),u.mount=!f.isValid||!!r.keepIsValid,u.watch=!!t.shouldUnregister,d.state.next({submitCount:r.keepSubmitCount?i.submitCount:0,isDirty:r.keepDirty?i.isDirty:!(!r.keepDefaultValues||Wx(e,s)),isSubmitted:!!r.keepIsSubmitted&&i.isSubmitted,dirtyFields:r.keepDirtyValues?i.dirtyFields:r.keepDefaultValues&&e?Qx(s,e):{},touchedFields:r.keepTouched?i.touchedFields:{},errors:r.keepErrors?i.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},V=function(e,t){return $(Px(e)?e(l):e,t)};return{control:{register:N,unregister:j,getFieldState:R,handleSubmit:F,setError:O,_executeSchema:E,_getWatch:M,_getDirty:C,_updateValid:y,_removeUnmounted:function(){var e,t=(0,w.Z)(c.unMount);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=rx(o,n);r&&(r._f.refs?r._f.refs.every((function(e){return!Xx(e)})):!Xx(r._f.ref))&&j(n)}}catch(i){t.e(i)}finally{t.f()}c.unMount=new Set},_updateFieldArray:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],c=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(r&&n){if(u.action=!0,c&&Array.isArray(rx(o,e))){var h=n(rx(o,e),r.argA,r.argB);a&&wx(o,e,h)}if(c&&Array.isArray(rx(i.errors,e))){var p=n(rx(i.errors,e),r.argA,r.argB);a&&wx(i.errors,e,p),sb(i.errors,e)}if(f.touchedFields&&c&&Array.isArray(rx(i.touchedFields,e))){var m=n(rx(i.touchedFields,e),r.argA,r.argB);a&&wx(i.touchedFields,e,m)}f.dirtyFields&&(i.dirtyFields=Qx(s,l)),d.state.next({name:e,isDirty:C(e,t),dirtyFields:i.dirtyFields,errors:i.errors,isValid:i.isValid})}else wx(l,e,t)},_getFieldArray:function(e){return tx(rx(u.mount?l:s,e,t.shouldUnregister?rx(s,e,[]):[]))},_reset:$,_resetDefaultValues:function(){return Px(r.defaultValues)&&r.defaultValues().then((function(e){V(e,r.resetOptions),d.state.next({isLoading:!1})}))},_updateFormState:function(e){i=_n(_n({},i),e)},_subjects:d,_proxyFormState:f,get _fields(){return o},get _formValues(){return l},get _state(){return u},set _state(e){u=e},get _defaultValues(){return s},get _names(){return c},set _names(e){c=e},get _formState(){return i},set _formState(e){i=e},get _options(){return r},set _options(e){r=_n(_n({},r),e)}},trigger:L,register:N,handleSubmit:F,watch:function(e,t){return Px(e)?d.values.subscribe({next:function(n){return e(M(void 0,t),n)}}):M(e,t,!0)},setValue:I,getValues:D,reset:V,resetField:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};rx(o,e)&&(nx(t.defaultValue)?I(e,rx(s,e)):(I(e,t.defaultValue),wx(s,e,t.defaultValue)),t.keepTouched||Ux(i.touchedFields,e),t.keepDirty||(Ux(i.dirtyFields,e),i.isDirty=t.defaultValue?C(e,rx(s,e)):C()),t.keepError||(Ux(i.errors,e),f.isValid&&y()),d.state.next(_n({},i)))},clearErrors:function(e){e&&vx(e).forEach((function(e){return Ux(i.errors,e)})),d.state.next({errors:e?i.errors:{}})},unregister:j,setError:O,setFocus:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rx(o,e),r=n&&n._f;if(r){var i=r.refs?r.refs[0]:r.ref;i.focus&&(i.focus(),t.shouldSelect&&i.select())}},getFieldState:R}}function cb(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.useRef(),r=e.useRef(),a=e.useState({isDirty:!1,isValidating:!1,isLoading:Px(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:Px(t.defaultValues)?void 0:t.defaultValues}),o=(0,i.Z)(a,2),s=o[0],l=o[1];n.current||(n.current=_n(_n({},ub(t,(function(){return l((function(e){return _n({},e)}))}))),{},{formState:s}));var u=n.current.control;return u._options=t,gx({subject:u._subjects.state,next:function(e){mx(e,u._proxyFormState,u._updateFormState,!0)&&l(_n({},u._formState))}}),e.useEffect((function(){t.values&&!Wx(t.values,r.current)?(u._reset(t.values,u._options.resetOptions),r.current=t.values):u._resetDefaultValues()}),[t.values,u]),e.useEffect((function(){u._state.mount||(u._updateValid(),u._state.mount=!0),u._state.watch&&(u._state.watch=!1,u._subjects.state.next(_n({},u._formState))),u._removeUnmounted()})),n.current.formState=dx(s,u),n.current}var hb=function(){var t=ot((function(e){return e.categories})),n=(0,e.useState)([]),r=(0,i.Z)(n,2),o=r[0],s=r[1],l=new FormData,u=mt(),c=(0,e.useRef)([]),h=cb(),f=h.formState.errors,d=h.getValues,p=h.setValue,m=h.register,v=h.handleSubmit,g=h.reset,y=m("category",{required:{value:!0,message:"Product Category is Required!"}}).ref,_=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,w.Z)(o),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=13;break}return r=n.value,l.append("file",r.file),l.append("upload_preset","Products"),e.next=9,fetch("https://api.cloudinary.com/v1_1/dsgvwvgks/image/upload",{method:"POST",body:l}).then((function(e){return e.json()}));case 9:i=e.sent,c.current=[].concat((0,a.Z)(c.current),[i.url]);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:return e.abrupt("return",c.current);case 22:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:console.log(_n(_n({},t),{},{image:c.current[0]})),u(ca({data:_n(_n({},t),{},{image:c.current[0]})})),g(),p("rating",0),s([]),c.current=[];case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,kh.jsxs)("div",{className:"min-h-[100vh] m-4",children:[(0,kh.jsx)("h1",{className:"text-3xl font-[font1] p-4 font-[700]",children:"Add Product"}),(0,kh.jsxs)("div",{className:"grid lg:grid-cols-2 grid-cols-1 gap-7",children:[(0,kh.jsxs)("div",{className:"images my-4 p-8 border-[0.5px] rounded-xl shadow-lg h-fit",children:[(0,kh.jsx)("h1",{className:"font-[font1] font-[750] text-2xl my-3",children:"Add Image"}),(0,kh.jsxs)("div",{children:[(0,kh.jsx)("div",{className:"",children:(0,kh.jsx)("main",{className:"container mx-auto max-w-screen-lg h-full",children:(0,kh.jsx)("article",{"aria-label":"File Upload Modal",className:"relative h-full flex flex-col bg-white  rounded-md",children:(0,kh.jsxs)("section",{className:"h-full overflow-auto p-8 w-full flex flex-col",children:[(0,kh.jsxs)("header",{className:"border-dashed border-2 border-[#d1d1d1] py-12 rounded-xl flex flex-col justify-center items-center",children:[(0,kh.jsxs)("p",{className:"mb-3 font-semibold text-gray-900 flex flex-wrap justify-center",children:[(0,kh.jsx)("span",{children:"Drag and drop your"}),"\xa0",(0,kh.jsx)("span",{children:"files anywhere or"})]}),(0,kh.jsx)("input",{id:"hidden-input",type:"file",className:"hidden",onChange:function(e){return function(e){var t,n=(0,w.Z)(e.target.files);try{for(n.s();!(t=n.n()).done;){var r=t.value;s([{src:URL.createObjectURL(r),file:r}])}}catch(i){n.e(i)}finally{n.f()}}(e)}}),(0,kh.jsx)("button",{type:"button",id:"button",className:"mt-2 rounded-sm px-3 py-1 bg-gray-200 hover:bg-gray-300 focus:shadow-outline focus:outline-none",onClick:function(){return document.getElementById("hidden-input").click()},children:"Upload a file"})]}),(0,kh.jsx)("h1",{className:"pt-8 pb-3 font-semibold sm:text-lg text-gray-900",children:"To Upload"}),(0,kh.jsxs)("ul",{id:"gallery",className:"flex flex-1 flex-wrap -m-1",children:[o.length>0&&o.map((function(e){return(0,kh.jsxs)("li",{className:"mx-3",children:[(0,kh.jsx)("img",{src:e.src,className:"w-24 h-24",alt:"..."}),(0,kh.jsx)(ih,{icon:bh,className:"m-1 text-lg cursor-pointer",onClick:function(){s([])}})]},e.src)})),0===o.length&&(0,kh.jsxs)("li",{id:"empty",className:"h-full w-full text-center flex flex-col  justify-center items-center",children:[(0,kh.jsx)("img",{className:"mx-auto w-32",src:"https://user-images.githubusercontent.com/507615/54591670-ac0a0180-4a65-11e9-846c-e55ffce0fe7b.png",alt:"no data"}),(0,kh.jsx)("span",{className:"text-small text-gray-500",children:"No files selected"})]})]})]})})})}),(0,kh.jsx)("template",{id:"file-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline elative bg-gray-100 cursor-pointer relative shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview hidden w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1 text-blue-800",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs text-gray-700"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md text-gray-800",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})}),(0,kh.jsx)("template",{id:"image-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group hasImage w-full h-full rounded-md focus:outline-none focus:shadow-outline bg-gray-100 cursor-pointer relative text-transparent hover:text-white shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})})]})]}),(0,kh.jsxs)("form",{action:"",className:"",onSubmit:v(x),children:[(0,kh.jsxs)("div",{className:"product-info my-4 p-8 border-[0.5px] rounded-xl shadow-lg",children:[(0,kh.jsxs)("div",{className:"prod_name my-4 p-4",children:[(0,kh.jsx)("label",{htmlFor:"name",className:"font-[font1] font-[750] text-xl",children:"Product Name *"}),(0,kh.jsx)("input",_n({type:"text",id:"name",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},m("name",{required:{value:!0,message:"Product Name is Required!"}}))),f.name&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.name.message]})]}),(0,kh.jsxs)("div",{className:"prod_desc my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"description",className:"font-[font1] font-[750] text-xl",children:"Description *"}),(0,kh.jsx)("textarea",_n({id:"description",className:"resize-none py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block",rows:"3"},m("description",{required:{value:!0,message:"Product Description is Required!"},minLength:{value:10,message:"Description must be longer than 10 characters!"}}))),f.description&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.description.message]})]}),(0,kh.jsxs)("div",{className:"prod_price my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"price",className:"font-[font1] font-[750] text-xl",children:"Price *"}),(0,kh.jsx)("input",_n({type:"number",id:"price",step:".10",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},m("price",{required:{value:!0,message:"Product Price is Required!"},min:{value:1,message:"Price must be greater than 0!"}}))),f.price&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.price.message]})]}),(0,kh.jsxs)("div",{className:"prod_rating my-2 p-4",children:[(0,kh.jsx)("h1",{className:"text-xl font-[750] font-[font1]",children:"Overall rating *"}),(0,kh.jsx)(Oh.Z,_n(_n({},m("rating",{required:{value:!0,message:"Please select a Rating!"},min:{value:1,message:"Please select a Rating!"},max:{value:5,message:"Please select a Rating!"}})),{},{ref:null,value:d("rating"),edit:!0,isHalf:!0,activeColor:"#ffd400",color:"#cccccc",size:32,classNames:"outline-none",onChange:function(e){return p("rating",e)}})),f.rating&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg  flex items-center gap-3",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.rating.message]})]}),(0,kh.jsxs)("div",{className:"prod_category my-2 p-4",children:[(0,kh.jsx)("h1",{className:"text-xl font-[750] font-[font1]",children:"Category *"}),(0,kh.jsxs)("select",{ref:y,onChange:function(e){return function(e){var t=e.target.value;"Other"===t?document.getElementById("categoryInput").classList.remove("hidden"):(document.getElementById("categoryInput").classList.add("hidden"),p("category",t))}(e)},className:"border border-black capitalize py-2 px-3 my-4 text-lg focus:outline-none",children:[(0,kh.jsx)("option",{value:"",selected:!0,hidden:!0,children:"Select a Category"}),t&&t.map((function(e){return(0,kh.jsx)("option",{className:"capitalize p-2",value:e,children:e},e)})),(0,kh.jsx)("option",{className:"capitalize p-2",value:"Other",children:"Other"},"Other")]}),(0,kh.jsx)("input",{ref:y,type:"text",placeholder:"Add Category",className:"hidden py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg md:mx-3",id:"categoryInput",onChange:function(e){return p("category",e.target.value)}}),f.category&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.category.message]})]}),(0,kh.jsxs)("div",{className:"prod_stock my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"stock",className:"font-[font1] font-[750] text-xl",children:"Stock *"}),(0,kh.jsx)("input",_n({type:"number",id:"stock",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},m("stock",{required:{value:!0,message:"Product Stock is Required!"},min:{value:10,message:"Stock must be greater than 10!"}}))),f.stock&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),f.stock.message]})]})]}),(0,kh.jsx)("div",{className:"flex justify-end",children:(0,kh.jsx)("input",{type:"submit",className:"bg-[#007AFF] text-lg text-white py-2 px-5 me-1 my-2 rounded-md",value:"Add Product"})})]})]})]})},fb=function(e){var t=e.acc,n=e.icon;return(0,kh.jsx)("div",{children:(0,kh.jsxs)("div",{className:"w-full bg-[#f5f5f5] border-b-[1px] border-white",children:[(0,kh.jsxs)("div",{className:"header flex justify-between items-center p-6 shadow-lg",children:[(0,kh.jsx)("p",{className:"text-slate-900 text-xl md:text-2xl",children:t.header}),(0,kh.jsx)(ih,{icon:uh,id:t.id,className:"text-2xl cursor-pointer",onClick:function(e){return function(e){e.target.icon=e.target.icon===uh?_h:uh;var t=e.target.id;document.getElementsByClassName("content").item(t-1).classList.toggle("hidden")}(e)}})]}),(0,kh.jsxs)("div",{className:"content animation text-base md:text-xl p-6 bg-[#fff] border-[2px] border-t-0 hidden border-[#f0f0f0]",children:[t.content,n&&(0,kh.jsxs)("div",{className:"flex gap-5 my-4",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M480 257.35c0-123.7-100.3-224-224-224s-224 100.3-224 224c0 111.8 81.9 204.47 189 221.29V322.12h-56.89v-64.77H221V208c0-56.13 33.45-87.16 84.61-87.16 24.51 0 50.15 4.38 50.15 4.38v55.13H327.5c-27.81 0-36.51 17.26-36.51 35v42h62.12l-9.92 64.77H291v156.54c107.1-16.81 189-109.48 189-221.31z' fill-rule='evenodd'/></svg>",className:"accordion-icon"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M349.33 69.33a93.62 93.62 0 0193.34 93.34v186.66a93.62 93.62 0 01-93.34 93.34H162.67a93.62 93.62 0 01-93.34-93.34V162.67a93.62 93.62 0 0193.34-93.34h186.66m0-37.33H162.67C90.8 32 32 90.8 32 162.67v186.66C32 421.2 90.8 480 162.67 480h186.66C421.2 480 480 421.2 480 349.33V162.67C480 90.8 421.2 32 349.33 32z'/><path d='M377.33 162.67a28 28 0 1128-28 27.94 27.94 0 01-28 28zM256 181.33A74.67 74.67 0 11181.33 256 74.75 74.75 0 01256 181.33m0-37.33a112 112 0 10112 112 112 112 0 00-112-112z'/></svg>",className:"accordion-icon"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M444.17 32H70.28C49.85 32 32 46.7 32 66.89v374.72C32 461.91 49.85 480 70.28 480h373.78c20.54 0 35.94-18.21 35.94-38.39V66.89C480.12 46.7 464.6 32 444.17 32zm-273.3 373.43h-64.18V205.88h64.18zM141 175.54h-.46c-20.54 0-33.84-15.29-33.84-34.43 0-19.49 13.65-34.42 34.65-34.42s33.85 14.82 34.31 34.42c-.01 19.14-13.31 34.43-34.66 34.43zm264.43 229.89h-64.18V296.32c0-26.14-9.34-44-32.56-44-17.74 0-28.24 12-32.91 23.69-1.75 4.2-2.22 9.92-2.22 15.76v113.66h-64.18V205.88h64.18v27.77c9.34-13.3 23.93-32.44 57.88-32.44 42.13 0 74 27.77 74 87.64z'/></svg>",className:"accordion-icon"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M496 109.5a201.8 201.8 0 01-56.55 15.3 97.51 97.51 0 0043.33-53.6 197.74 197.74 0 01-62.56 23.5A99.14 99.14 0 00348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 002.54 22.1 280.7 280.7 0 01-203-101.3A95.69 95.69 0 0036 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0135.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 01-25.94 3.4 94.38 94.38 0 01-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0139.5 405.6a203 203 0 01-23.5-1.4A278.68 278.68 0 00166.74 448c181.36 0 280.44-147.7 280.44-275.8 0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 00496 109.5z'/></svg>",className:"accordion-icon"})]})]},t.id)]},t.id)})},db=function(){return(0,kh.jsxs)("div",{className:"p-10 flex flex-col justify-center mx-3 md:mx-12 my-6 gap-6",children:[(0,kh.jsx)("h1",{className:"text-3xl md:text-5xl text-slate-800",children:"About Swiftshop"}),(0,kh.jsx)("div",{className:"text-justify my-6 text-base md:text-xl md:w-[50%]",children:(0,kh.jsx)("p",{children:"Welcome to our commerce website! We are dedicated to providing you with a seamless and enjoyable online shopping experience. Here's some information about us:"})}),(0,kh.jsx)("div",{children:[{id:1,header:"Our Vision",content:"At our commerce website, our vision is to become your go-to destination for all your shopping needs. We strive to offer an    extensive range of high-quality products, competitive prices, and exceptional customer service."},{id:2,header:"Our Product Range",content:"We curate a diverse selection of products across various categories to cater to your unique preferences and requirements. From electronics, fashion, home appliances, and beauty to sports, toys, books, and more, you'll find an extensive range of products to choose from."},{id:3,header:"Quality and Authenticity",content:"We understand the importance of quality and authenticity when it comes to online shopping. That's why we partner with reputable suppliers and brands to ensure that every product we offer meets the highest standards of quality. We are committed to delivering genuine and reliable products to our valued customers."},{id:4,header:"Competitive Pricing",content:"We believe that everyone deserves access to affordable and competitive prices. That's why we work hard to negotiate the best possible deals with our suppliers, enabling us to offer you products at competitive prices. We aim to provide excellent value for your money, ensuring your satisfaction with every purchase."},{id:5,header:"User-Friendly Experience",content:"We prioritize providing you with a user-friendly and intuitive website interface. Our website is designed to be easily navigable, allowing you to find products quickly and effortlessly. We continually work on enhancing your online shopping experience, making it convenient, efficient, and enjoyable."},{id:6,header:"Secure Shopping Environment",content:"We value your trust and take the security of your personal and financial information seriously. Our website utilizes the latest security measures and encryption technologies to safeguard your data. You can shop with confidence, knowing that your privacy and security are protected."},{id:7,header:"Exceptional Customer Service",content:"We believe in building long-lasting relationships with our customers. Our dedicated customer service team is here to assist you with any queries, concerns, or feedback you may have. We strive to provide prompt and helpful support, ensuring your satisfaction throughout your shopping journey."}].map((function(e){return(0,kh.jsx)(fb,{acc:e,icon:!1},e.id)}))})]})},pb="https://js.stripe.com/v3",mb=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,vb="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",gb=null,yb=function(e){return null!==gb||(gb=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(vb),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(pb,'"]')),t=0;t<e.length;t++){var n=e[t];if(mb.test(n.src))return n}return null}();r&&e?console.warn(vb):r||(r=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(pb).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n}(e)),r.addEventListener("load",(function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))})),r.addEventListener("error",(function(){n(new Error("Failed to load Stripe.js"))}))}catch(i){return void n(i)}else t(null)}))),gb},_b=Promise.resolve().then((function(){return yb(null)})),xb=!1;_b.catch((function(e){xb||console.warn(e)}));var bb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];xb=!0;var r=Date.now();return _b.then((function(e){return function(e,t,n){if(null===e)return null;var r=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"2.0.0",startTime:t})}(r,n),r}(e,t,r)}))};var wb=n.p+"static/media/Cart.52093bcbc87edb17ef6ea6ab010dda4e.svg",kb=function(){var t=ot((function(e){return e.user})),n=ot((function(e){return e.products})),r=ot((function(e){return e.cart})),i=mt(),a=ve();return(0,e.useEffect)((function(){null!==t?(i(ga()),i(oa())):a("/login")}),[t,i,a]),(0,kh.jsx)("div",{className:"flex flex-col lg:flex-row justify-center mx-2 md:mx-8",children:null===r||0===r.products.length?(0,kh.jsxs)("div",{className:"w-full flex flex-col items-center justify-center p-6 gap-5",children:[(0,kh.jsx)("img",{src:wb,className:"aspect-square md:w-1/4",alt:"..."}),(0,kh.jsx)("h1",{className:"text-2xl md:text-3xl font-[font4]",children:"Your shopping cart is empty"}),(0,kh.jsx)("p",{className:"font-[font1] text-[#8B6985] w-2/3 text-center",children:"Return to the store to add items for your delivery slot. Before proceed to checkout you must add some products to your shopping cart."}),(0,kh.jsx)("button",{className:"px-6 py-2 bg-black text-white",children:(0,kh.jsxs)(Ue,{to:"/shop",className:"text-center flex gap-2 items-center w-full",children:[(0,kh.jsx)(ih,{icon:ch,className:"text-white"}),(0,kh.jsx)("span",{className:"font-medium font-[font1] text-white",children:"Continue Shopping"})]})})]}):(0,kh.jsxs)("div",{className:"w-full",children:[(0,kh.jsx)("div",{className:"cart my-10 w-full lg:w-[70%]",children:(0,kh.jsxs)("div",{className:"cart-items flex flex-col gap-4",children:[(0,kh.jsx)("h1",{className:"text-3xl font-semibold tracking-wide",children:"My Cart"}),null!==r?0===r.products.length?"":r.products.map((function(e){var t=n.find((function(t){return t._id===e.productId}));return t&&(0,kh.jsxs)("div",{className:"cart-item grid grid-cols-4 my-8 gap-4",children:[(0,kh.jsx)("div",{className:"w-fit",children:t&&(0,kh.jsx)("img",{src:t.image,alt:"...",className:"object-contain w-20 md:w-28"})}),(0,kh.jsxs)("div",{className:"flex flex-col justify-start gap-5",children:[(0,kh.jsx)("h1",{className:"font-semibold font-[font1] md:text-xl",children:t&&t.title}),(0,kh.jsxs)("p",{className:"font-sans text-lg",children:["\u20b9",(0,kh.jsx)("span",{className:"font-[font2] mx-1",children:Number(e.price).toLocaleString("en-in")})]})]}),(0,kh.jsxs)("div",{className:"item-quanity flex justify-center items-center gap-4 md:gap-6 p-1 w-fit h-fit border-[1px] border-black",children:[(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:e.quantity<=1,onClick:function(){return function(e){try{var t=e.productId,n=e.quantity,r=e.price;i(ya({productId:t,quantity:n-=1,price:r}))}catch(a){console.error(a)}}(e)},children:(0,kh.jsx)(ih,{icon:_h,className:""})}),(0,kh.jsx)("span",{className:"text-lg",children:e.quantity}),t&&(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:e.quantity>=t.stock,onClick:function(){return function(e){try{var t=e.productId,n=e.quantity,r=e.price;i(ya({productId:t,quantity:n+=1,price:r}))}catch(a){console.error(a)}}(e)},children:(0,kh.jsx)(ih,{icon:uh,className:""})})]}),(0,kh.jsxs)("div",{className:"item-subtotal flex justify-between items-start",children:[(0,kh.jsxs)("span",{className:"font-semibold text-sm md:text-xl",children:[(0,kh.jsx)("span",{className:"font-sans me-1",children:"\u20b9"}),Number(e.sub_total).toLocaleString("en-in")]}),(0,kh.jsx)(ih,{icon:bh,onClick:function(){return function(e){try{var t=e.productId;i(_a(t))}catch(n){console.error(n)}}(e)},className:"text-lg md:text-2xl my-1 cursor-pointer"})]})]},e.productId)})):""]})}),(0,kh.jsxs)("div",{className:"order-summary flex flex-col gap-7 my-10 lg:w-[30%] p-4",children:[(0,kh.jsx)("h1",{className:"text-3xl font-medium font-[font4] text-center",children:"Order Summary"}),r&&(0,kh.jsxs)(kh.Fragment,{children:[(0,kh.jsxs)("div",{className:"subtotal flex justify-evenly my-8 gap-6",children:[(0,kh.jsx)("span",{className:"text-xl font-[font1] font-semibold",children:"Subtotal"}),(0,kh.jsxs)("span",{className:"text-lg",children:[(0,kh.jsx)("span",{className:"font-sans me-1",children:"\u20b9"}),Number(r.total).toLocaleString("en-in")]})]}),(0,kh.jsxs)("div",{className:"checkout flex flex-col items-center gap-4",children:[(0,kh.jsx)("button",{className:"focus:outline-none py-2 w-[80%] px-6 duration-200 bg-[#A67A4B] text-white text-lg hover:opacity-80",disabled:null===r||r.total<=0,onClick:(0,hr.Z)((0,cr.Z)().mark((function e(){var n,i,a;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.post("http://localhost:5000/orders/create",{cartId:r._id,userId:t._id},{withCredentials:!0});case 3:return n=e.sent,e.next=6,bb("pk_test_51Nady6SCVnRugOGlPA3fATP06mVtgffOCFFGIshsIgjbPHk3dMoAKzR5G6q4PhwO3WncqOiVecqe927dhujQ99af00nFOev6fh");case 6:i=e.sent,a=n.data.session,i.redirectToCheckout({sessionId:a.id}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),children:"Checkout"}),(0,kh.jsxs)("span",{className:"text-center flex gap-2 items-center",children:[(0,kh.jsx)(ih,{icon:vh}),(0,kh.jsx)("span",{className:"text-lg font-medium",children:"Secure Checkout"})]}),(0,kh.jsxs)(Ue,{to:"/shop",className:"text-center flex gap-2 items-center",children:[(0,kh.jsx)(ih,{icon:ch}),(0,kh.jsx)("span",{className:"text-xl font-medium hover:underline",children:"Continue Shopping"})]})]})]})]})]})})},Eb=e.createContext(null);function Sb(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!Sb(e[n],t[n]))return!1;return!0}if(Array.isArray(t))return!1;if("object"===typeof e&&"object"===typeof t){var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(var a=0,o=r;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!Sb(e[s],t[s]))return!1}return!0}return!1}function Tb(e,t){if(e.getProjection){var n=e.getProjection();Sb(n,t.getProjection())||t.setProjection(n)}}function Cb(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function Mb(e,t){var n=t.viewState||t,r=!1;if("longitude"in n&&"latitude"in n){var i=e.center;e.center=new i.constructor(n.longitude,n.latitude),r=r||i!==e.center}if("zoom"in n){var a=e.zoom;e.zoom=n.zoom,r=r||a!==e.zoom}if("bearing"in n){var o=e.bearing;e.bearing=n.bearing,r=r||o!==e.bearing}if("pitch"in n){var s=e.pitch;e.pitch=n.pitch,r=r||s!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}var Ab=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Pb(e){if(!e)return null;if("string"===typeof e)return e;if("toJS"in e&&(e=e.toJS()),!e.layers)return e;var t,n={},r=(0,w.Z)(e.layers);try{for(r.s();!(t=r.n()).done;){var i=t.value;n[i.id]=i}}catch(o){r.e(o)}finally{r.f()}var a=e.layers.map((function(e){var t=null;"interactive"in e&&delete(t=Object.assign({},e)).interactive;var r=n[e.ref];if(r){delete(t=t||Object.assign({},e)).ref;var i,a=(0,w.Z)(Ab);try{for(a.s();!(i=a.n()).done;){var s=i.value;s in r&&(t[s]=r[s])}}catch(o){a.e(o)}finally{a.f()}}return t||e}));return _n(_n({},e),{},{layers:a})}var Ib={version:8,sources:{},layers:[]},zb={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Lb={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Db={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Rb=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Ob=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"],jb=function(){function e(t,n,r){var i=this;(0,o.Z)(this,e),this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=function(e){var t=i.props[Db[e.type]];t?t(e):"error"===e.type&&console.error(e.error)},this._onPointerEvent=function(e){"mousemove"!==e.type&&"mouseout"!==e.type||i._updateHover(e);var t=i.props[zb[e.type]];t&&(i.props.interactiveLayerIds&&"mouseover"!==e.type&&"mouseout"!==e.type&&(e.features=i._hoveredFeatures||i._queryRenderedFeatures(e.point)),t(e),delete e.features)},this._onCameraEvent=function(e){if(!i._internalUpdate){var t=i.props[Lb[e.type]];t&&t(e)}e.type in i._deferredEvents&&(i._deferredEvents[e.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}return(0,s.Z)(e,[{key:"map",get:function(){return this._map}},{key:"transform",get:function(){return this._renderTransform}},{key:"setProps",value:function(e){var t=this.props;this.props=e;var n=this._updateSettings(e,t);n&&this._createShadowTransform(this._map);var r=this._updateSize(e),i=this._updateViewState(e,!0);this._updateStyle(e,t),this._updateStyleComponents(e,t),this._updateHandlers(e,t),(n||r||i&&!this._map.isMoving())&&this.redraw()}},{key:"_initialize",value:function(e){var t=this,n=this.props,r=n.mapStyle,i=void 0===r?Ib:r,a=_n(_n(_n({},n),n.initialViewState),{},{accessToken:n.mapboxAccessToken||Nb()||null,container:e,style:Pb(i)}),o=a.initialViewState||a.viewState||a;if(Object.assign(a,{center:[o.longitude||0,o.latitude||0],zoom:o.zoom||0,pitch:o.pitch||0,bearing:o.bearing||0}),n.gl){var s=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=function(){return HTMLCanvasElement.prototype.getContext=s,n.gl}}var l=new this._MapClass(a);o.padding&&l.setPadding(o.padding),n.cursor&&(l.getCanvas().style.cursor=n.cursor),this._createShadowTransform(l);var u=l._render;l._render=function(e){t._inRender=!0,u.call(l,e),t._inRender=!1};var c=l._renderTaskQueue.run;l._renderTaskQueue.run=function(e){c.call(l._renderTaskQueue,e),t._onBeforeRepaint()},l.on("render",(function(){return t._onAfterRepaint()}));var h=l.fire;for(var f in l.fire=this._fireEvent.bind(this,h),l.on("resize",(function(){t._renderTransform.resize(l.transform.width,l.transform.height)})),l.on("styledata",(function(){t._updateStyleComponents(t.props,{}),Tb(l.transform,t._renderTransform)})),l.on("sourcedata",(function(){return t._updateStyleComponents(t.props,{})})),zb)l.on(f,this._onPointerEvent);for(var d in Lb)l.on(d,this._onCameraEvent);for(var p in Db)l.on(p,this._onEvent);this._map=l}},{key:"recycle",value:function(){var t=this.map.getContainer().querySelector("[mapboxgl-children]");null===t||void 0===t||t.remove(),e.savedMaps.push(this)}},{key:"destroy",value:function(){this._map.remove()}},{key:"redraw",value:function(){var e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}},{key:"_createShadowTransform",value:function(e){var t=function(e){var t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}(e.transform);e.painter.transform=t,this._renderTransform=t}},{key:"_updateSize",value:function(e){var t=e.viewState;if(t){var n=this._map;if(t.width!==n.transform.width||t.height!==n.transform.height)return n.resize(),!0}return!1}},{key:"_updateViewState",value:function(e,t){if(this._internalUpdate)return!1;var n=this._map,r=this._renderTransform,i=r.zoom,a=r.pitch,o=r.bearing,s=n.isMoving();s&&(r.cameraElevationReference="sea");var l=Mb(r,_n(_n({},Cb(n.transform)),e));if(s&&(r.cameraElevationReference="ground"),l&&t){var u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=i!==r.zoom),u.rotate||(u.rotate=o!==r.bearing),u.pitch||(u.pitch=a!==r.pitch)}return s||Mb(n.transform,e),l}},{key:"_updateSettings",value:function(e,t){for(var n=this._map,r=!1,i=0,a=Rb;i<a.length;i++){var o=a[i];if(o in e&&!Sb(e[o],t[o])){r=!0;var s=n["set".concat(o[0].toUpperCase()).concat(o.slice(1))];null===s||void 0===s||s.call(n,e[o])}}return r}},{key:"_updateStyle",value:function(e,t){if(e.cursor!==t.cursor&&(this._map.getCanvas().style.cursor=e.cursor),e.mapStyle!==t.mapStyle){var n=e.mapStyle,r=void 0===n?Ib:n,i=e.styleDiffing,a={diff:void 0===i||i};return"localIdeographFontFamily"in e&&(a.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(Pb(r),a),!0}return!1}},{key:"_updateStyleComponents",value:function(e,t){var n=this._map,r=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!Sb(e.light,t.light)&&(r=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!Sb(e.fog,t.fog)&&(r=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!Sb(e.terrain,t.terrain)&&(e.terrain&&!n.getSource(e.terrain.source)||(r=!0,n.setTerrain(e.terrain)))),r}},{key:"_updateHandlers",value:function(e,t){for(var n,r,i=this._map,a=!1,o=0,s=Ob;o<s.length;o++){var l=s[o],u=null===(n=e[l])||void 0===n||n;Sb(u,null===(r=t[l])||void 0===r||r)||(a=!0,u?i[l].enable(u):i[l].disable())}return a}},{key:"_queryRenderedFeatures",value:function(e){var t=this._map,n=this.props.interactiveLayerIds,r=void 0===n?[]:n;try{return t.queryRenderedFeatures(e,{layers:r.filter(t.getLayer.bind(t))})}catch(i){return[]}}},{key:"_updateHover",value:function(e){var t,n=this.props;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){var r=e.type,i=(null===(t=this._hoveredFeatures)||void 0===t?void 0:t.length)>0,a=this._queryRenderedFeatures(e.point),o=a.length>0;!o&&i&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,o&&!i&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}},{key:"_fireEvent",value:function(e,t,n){var r=this._map,i=r.transform,a="string"===typeof t?t:t.type;return"move"===a&&this._updateViewState(this.props,!1),a in Lb&&("object"===typeof t&&(t.viewState=Cb(i)),this._map.isMoving())?(r.transform=this._renderTransform,e.call(r,t,n),r.transform=i,r):(e.call(r,t,n),r)}},{key:"_onBeforeRepaint",value:function(){var e=this,t=this._map;for(var n in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;var r=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=function(){Tb(e._renderTransform,r),t.transform=r}}}],[{key:"reuse",value:function(t,n){var r=e.savedMaps.pop();if(!r)return null;var i=r.map,a=i.getContainer();for(n.className=a.className;a.childNodes.length>0;)n.appendChild(a.childNodes[0]);i._container=n;var o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps(_n(_n({},t),{},{styleDiffing:!1})),i.resize();var s=t.initialViewState;return s&&(s.bounds?i.fitBounds(s.bounds,_n(_n({},s.fitBoundsOptions),{},{duration:0})):r._updateViewState(s,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",(function(){return i.fire("load")})),i._update(),r}}]),e}();function Nb(){var e=null;if("undefined"!==typeof location){var t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.MapboxAccessToken}catch(n){}try{e=e||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch(r){}return e}jb.savedMaps=[];var Bb=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Fb(e){if(!e)return null;var t,n=e.map,r={getMap:function(){return n},getCenter:function(){return e.transform.center},getZoom:function(){return e.transform.zoom},getBearing:function(){return e.transform.bearing},getPitch:function(){return e.transform.pitch},getPadding:function(){return e.transform.padding},getBounds:function(){return e.transform.getBounds()},project:function(t){var r=n.transform;n.transform=e.transform;var i=n.project(t);return n.transform=r,i},unproject:function(t){var r=n.transform;n.transform=e.transform;var i=n.unproject(t);return n.transform=r,i},queryTerrainElevation:function(t,r){var i=n.transform;n.transform=e.transform;var a=n.queryTerrainElevation(t,r);return n.transform=i,a}},i=(0,w.Z)(function(e){var t=new Set,n=e;for(;n;){var r,i=(0,w.Z)(Object.getOwnPropertyNames(n));try{for(i.s();!(r=i.n()).done;){var a=r.value;"_"!==a[0]&&"function"===typeof e[a]&&"fire"!==a&&"setEventedParent"!==a&&t.add(a)}}catch(o){i.e(o)}finally{i.f()}n=Object.getPrototypeOf(n)}return Array.from(t)}(n));try{for(i.s();!(t=i.n()).done;){var a=t.value;a in r||Bb.includes(a)||(r[a]=n[a].bind(n))}}catch(o){i.e(o)}finally{i.f()}return r}var $b="undefined"!==typeof document?e.useLayoutEffect:e.useEffect,Vb=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];var Ub=e.createContext(null);function Zb(t,n,r){var a=(0,e.useContext)(Eb),o=(0,e.useState)(null),s=(0,i.Z)(o,2),l=s[0],u=s[1],c=(0,e.useRef)(),h=(0,e.useRef)({mapLib:null,map:null}).current;(0,e.useEffect)((function(){var e,n=t.mapLib,i=!0;return Promise.resolve(n||r).then((function(n){if(i){if(!n)throw new Error("Invalid mapLib");var r="Map"in n?n:n.default;if(!r.Map)throw new Error("Invalid mapLib");if(function(e,t){var n,r=(0,w.Z)(Vb);try{for(r.s();!(n=r.n()).done;){var i=n.value;i in t&&(e[i]=t[i])}}catch(s){r.e(s)}finally{r.f()}var a=t.RTLTextPlugin,o=void 0===a?"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js":a;o&&e.getRTLTextPluginStatus&&"unavailable"===e.getRTLTextPluginStatus()&&e.setRTLTextPlugin(o,(function(e){e&&console.error(e)}),!1)}(r,t),r.supported&&!r.supported(t))throw new Error("Map is not supported by this browser");t.reuseMaps&&(e=jb.reuse(t,c.current)),e||(e=new jb(r.Map,t,c.current)),h.map=Fb(e),h.mapLib=r,u(e),null===a||void 0===a||a.onMapMount(h.map,t.id)}})).catch((function(e){var n=t.onError;n?n({type:"error",target:null,originalEvent:null,error:e}):console.error(e)})),function(){i=!1,e&&(null===a||void 0===a||a.onMapUnmount(t.id),t.reuseMaps?e.recycle():e.destroy())}}),[]),$b((function(){l&&l.setProps(t)})),(0,e.useImperativeHandle)(n,(function(){return h.map}),[l]);var f=(0,e.useMemo)((function(){return _n({position:"relative",width:"100%",height:"100%"},t.style)}),[t.style]);return e.createElement("div",{id:t.id,ref:c,style:f},l&&e.createElement(Ub.Provider,{value:h},e.createElement("div",{"mapboxgl-children":"",style:{height:"100%"}},t.children)))}var Hb=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Wb(e,t){if(e&&t){var n=e.style;for(var r in t){var i=t[r];Number.isFinite(i)&&!Hb.test(r)?n[r]="".concat(i,"px"):n[r]=i}}}var qb=(0,e.memo)((0,e.forwardRef)((function(t,n){var r=(0,e.useContext)(Ub),i=r.map,a=r.mapLib,o=(0,e.useRef)({props:t});o.current.props=t;var s=(0,e.useMemo)((function(){var n=!1;e.Children.forEach(t.children,(function(e){e&&(n=!0)}));var r=_n(_n({},t),{},{element:n?document.createElement("div"):null}),i=new a.Marker(r);return i.setLngLat([t.longitude,t.latitude]),i.getElement().addEventListener("click",(function(e){var t,n;null===(n=(t=o.current.props).onClick)||void 0===n||n.call(t,{type:"click",target:i,originalEvent:e})})),i.on("dragstart",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragStart)||void 0===n||n.call(t,r)})),i.on("drag",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDrag)||void 0===n||n.call(t,r)})),i.on("dragend",(function(e){var t,n,r=e;r.lngLat=s.getLngLat(),null===(n=(t=o.current.props).onDragEnd)||void 0===n||n.call(t,r)})),i}),[]);(0,e.useEffect)((function(){return s.addTo(i.getMap()),function(){s.remove()}}),[]);var l=t.longitude,u=t.latitude,c=t.offset,h=t.style,f=t.draggable,d=void 0!==f&&f,p=t.popup,m=void 0===p?null:p,v=t.rotation,g=void 0===v?0:v,y=t.rotationAlignment,_=void 0===y?"auto":y,x=t.pitchAlignment,b=void 0===x?"auto":x;return(0,e.useEffect)((function(){Wb(s.getElement(),h)}),[h]),(0,e.useImperativeHandle)(n,(function(){return s}),[]),s.getLngLat().lng===l&&s.getLngLat().lat===u||s.setLngLat([l,u]),c&&!function(e,t){var n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,i=Array.isArray(t)?t[0]:t?t.x:0,a=Array.isArray(t)?t[1]:t?t.y:0;return n===i&&r===a}(s.getOffset(),c)&&s.setOffset(c),s.isDraggable()!==d&&s.setDraggable(d),s.getRotation()!==g&&s.setRotation(g),s.getRotationAlignment()!==_&&s.setRotationAlignment(_),s.getPitchAlignment()!==b&&s.setPitchAlignment(b),s.getPopup()!==m&&s.setPopup(m),(0,Ge.createPortal)(t.children,s.getElement())})));function Gb(e){return new Set(e?e.trim().split(/\s+/):[])}(0,e.memo)((0,e.forwardRef)((function(t,n){var r=(0,e.useContext)(Ub),i=r.map,a=r.mapLib,o=(0,e.useMemo)((function(){return document.createElement("div")}),[]),s=(0,e.useRef)({props:t});s.current.props=t;var l=(0,e.useMemo)((function(){var e=_n({},t),n=new a.Popup(e);return n.setLngLat([t.longitude,t.latitude]),n.once("open",(function(e){var t,n;null===(n=(t=s.current.props).onOpen)||void 0===n||n.call(t,e)})),n}),[]);if((0,e.useEffect)((function(){var e=function(e){var t,n;null===(n=(t=s.current.props).onClose)||void 0===n||n.call(t,e)};return l.on("close",e),l.setDOMContent(o).addTo(i.getMap()),function(){l.off("close",e),l.isOpen()&&l.remove()}}),[]),(0,e.useEffect)((function(){Wb(l.getElement(),t.style)}),[t.style]),(0,e.useImperativeHandle)(n,(function(){return l}),[]),l.isOpen()&&(l.getLngLat().lng===t.longitude&&l.getLngLat().lat===t.latitude||l.setLngLat([t.longitude,t.latitude]),t.offset&&!Sb(l.options.offset,t.offset)&&l.setOffset(t.offset),l.options.anchor===t.anchor&&l.options.maxWidth===t.maxWidth||(l.options.anchor=t.anchor,l.setMaxWidth(t.maxWidth)),l.options.className!==t.className)){var u,c=Gb(l.options.className),h=Gb(t.className),f=(0,w.Z)(c);try{for(f.s();!(u=f.n()).done;){var d=u.value;h.has(d)||l.removeClassName(d)}}catch(g){f.e(g)}finally{f.f()}var p,m=(0,w.Z)(h);try{for(m.s();!(p=m.n()).done;){var v=p.value;c.has(v)||l.addClassName(v)}}catch(g){m.e(g)}finally{m.f()}l.options.className=t.className}return(0,Ge.createPortal)(t.children,o)})));var Xb=function(t,n,r,i){var a=(0,e.useContext)(Ub),o=(0,e.useMemo)((function(){return t(a)}),[]);return(0,e.useEffect)((function(){var e=i||r||n,t="function"===typeof n&&"function"===typeof r?n:null,s="function"===typeof r?r:"function"===typeof n?n:null,l=a.map;return l.hasControl(o)||(l.addControl(o,null===e||void 0===e?void 0:e.position),t&&t(a)),function(){s&&s(a),l.hasControl(o)&&l.removeControl(o)}}),[]),o};(0,e.memo)((function(t){var n=Xb((function(e){return new e.mapLib.AttributionControl(t)}),{position:t.position});return(0,e.useEffect)((function(){Wb(n._container,t.style)}),[t.style]),null}));(0,e.memo)((function(t){var n=Xb((function(e){return new e.mapLib.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)})}),{position:t.position});return(0,e.useEffect)((function(){Wb(n._controlContainer,t.style)}),[t.style]),null}));(0,e.memo)((0,e.forwardRef)((function(t,n){var r=(0,e.useRef)({props:t}),i=Xb((function(e){var n=new e.mapLib.GeolocateControl(t),i=n._setupUI;return n._setupUI=function(e){n._container.hasChildNodes()||i(e)},n.on("geolocate",(function(e){var t,n;null===(n=(t=r.current.props).onGeolocate)||void 0===n||n.call(t,e)})),n.on("error",(function(e){var t,n;null===(n=(t=r.current.props).onError)||void 0===n||n.call(t,e)})),n.on("outofmaxbounds",(function(e){var t,n;null===(n=(t=r.current.props).onOutOfMaxBounds)||void 0===n||n.call(t,e)})),n.on("trackuserlocationstart",(function(e){var t,n;null===(n=(t=r.current.props).onTrackUserLocationStart)||void 0===n||n.call(t,e)})),n.on("trackuserlocationend",(function(e){var t,n;null===(n=(t=r.current.props).onTrackUserLocationEnd)||void 0===n||n.call(t,e)})),n}),{position:t.position});return r.current.props=t,(0,e.useImperativeHandle)(n,(function(){return i}),[]),(0,e.useEffect)((function(){Wb(i._container,t.style)}),[t.style]),null})));(0,e.memo)((function(t){var n=Xb((function(e){return new e.mapLib.NavigationControl(t)}),{position:t.position});return(0,e.useEffect)((function(){Wb(n._container,t.style)}),[t.style]),null}));(0,e.memo)((function(t){var n=Xb((function(e){return new e.mapLib.ScaleControl(t)}),{position:t.position}),r=(0,e.useRef)(t),i=r.current;r.current=t;var a=t.style;return void 0!==t.maxWidth&&t.maxWidth!==i.maxWidth&&(n.options.maxWidth=t.maxWidth),void 0!==t.unit&&t.unit!==i.unit&&n.setUnit(t.unit),(0,e.useEffect)((function(){Wb(n._container,a)}),[a]),null}));var Kb=Promise.resolve().then(n.t.bind(n,5483,23)),Yb=e.forwardRef((function(e,t){return Zb(e,t,Kb)})),Jb=qb,Qb=Yb,ew=n(5483),tw=n.n(ew),nw=function(){var e=cb(),t=e.register,n=e.formState.errors,r=e.handleSubmit,i=e.reset,a=new(tw().Popup)({offset:25,className:"text-lg text-center font-semibold p-1"}).setText("Swiftshop - Shop Swift.Shop Smart.");return(0,kh.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 bg-[#f7f7f7]",children:[(0,kh.jsxs)("div",{className:"p-6 flex flex-col justify-center",children:[(0,kh.jsx)("h1",{className:"font-sans font-[750] text-4xl p-6",children:"Get in touch!"}),(0,kh.jsxs)("div",{className:"my-6 px-6",children:[(0,kh.jsx)("p",{className:"font-[font1] font-semibold text-lg tracking-wide",children:"Send a Message"}),(0,kh.jsxs)("form",{onSubmit:r((function(e){console.log(e),i()})),className:"my-6 w-full grid grid-cols-1 md:grid-cols-2 gap-5",children:[(0,kh.jsxs)("div",{className:"firstname",children:[(0,kh.jsx)("label",{htmlFor:"fname",className:"font-[font1]",children:"First Name *"}),(0,kh.jsx)("br",{}),(0,kh.jsx)("input",_n({type:"text",id:"fname",className:"input"},t("firstname",{required:{value:!0,message:"First Name is required!"}}))),n.firstname&&(0,kh.jsx)("h1",{className:"text-red-600 my-1",children:n.firstname.message})]}),(0,kh.jsxs)("div",{className:"lastname",children:[(0,kh.jsx)("label",{htmlFor:"lname",className:"font-[font1]",children:"Last Name *"}),(0,kh.jsx)("br",{}),(0,kh.jsx)("input",_n({type:"text",id:"lname",className:"input"},t("lastname",{required:{value:!0,message:"Last Name is required!"}}))),n.lastname&&(0,kh.jsx)("h1",{className:"text-red-600 my-1",children:n.lastname.message})]}),(0,kh.jsxs)("div",{className:"email",children:[(0,kh.jsx)("label",{htmlFor:"email",className:"font-[font1]",children:"Email *"}),(0,kh.jsx)("br",{}),(0,kh.jsx)("input",_n({type:"email",id:"email",className:"input"},t("email",{required:{value:!0,message:"Email is required!"},pattern:{value:/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/i,message:"Please Enter a Valid Email!"}}))),n.email&&(0,kh.jsx)("h1",{className:"text-red-600 my-1",children:n.email.message})]}),(0,kh.jsxs)("div",{className:"phone",children:[(0,kh.jsx)("label",{htmlFor:"phone",className:"font-[font1]",children:"Phone Number *"}),(0,kh.jsx)("br",{}),(0,kh.jsx)("input",_n({type:"text",id:"phone",className:"input"},t("phone_no",{required:{value:!0,message:"Phone Number is required!"},pattern:{value:/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/i,message:"Please Enter a Valid Phone Number!"}}))),n.phone_no&&(0,kh.jsx)("h1",{className:"text-red-600 my-1",children:n.phone_no.message})]}),(0,kh.jsxs)("div",{className:"message col-span-2",children:[(0,kh.jsx)("label",{htmlFor:"message",className:"font-[font1]",children:"Message *"}),(0,kh.jsx)("br",{}),(0,kh.jsx)("textarea",_n({id:"message",className:"input resize-none"},t("message",{required:{value:!0,message:"Message is required!"},minLength:{value:10,message:"Message must be at least 10 characters long!"}}))),n.message&&(0,kh.jsx)("h1",{className:"text-red-600 my-1",children:n.message.message})]}),(0,kh.jsx)("div",{className:"text-end",children:(0,kh.jsx)("input",{type:"submit",value:"Submit",className:"font-[font4] border-black py-2 px-7 bg-black text-white hover:bg-transparent hover:text-black hover:border-black hover:border-[1px] duration-200 focus:outline-none text-lg cursor-pointer"})})]})]})]}),(0,kh.jsx)("div",{className:"map p-6 w-full",children:(0,kh.jsx)(Qb,{mapboxAccessToken:"pk.eyJ1IjoiZGhydXZqYWluIiwiYSI6ImNsbGdwOWVjMjAyeXIzZGxpZDhsajd1d2EifQ.p0of3uufKznWfGr1Wvg0Dw",initialViewState:{longitude:72.831062,latitude:21.17024,zoom:7},mapStyle:"mapbox://styles/mapbox/streets-v11",children:(0,kh.jsx)(Jb,{latitude:21.17024,longitude:72.831062,color:"black",popup:a,children:(0,kh.jsx)("img",{src:"https://img.icons8.com/color/24/000000/marker.png",alt:"..."})})})})]})},rw=function(){var t=(0,e.useState)(!0),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=function(){a((function(e){return!e}))};return(0,kh.jsxs)("div",{className:"bg-[#F0F0F0] p-8 w-full",children:[(0,kh.jsxs)("div",{className:"flex flex-col",children:[r&&(0,kh.jsxs)("div",{className:"flex justify-center items-center gap-12 mx-6 md:mx-12 my-12",children:[(0,kh.jsx)("h1",{className:"font-[font1] text-base ml-auto md:text-xl",children:"Frequently Asked Questions"}),(0,kh.jsx)(ih,{icon:xh,onClick:function(){return o()},className:"text-xl  cursor-pointer ml-auto"})]}),!r&&(0,kh.jsx)("div",{className:"flex justify-center",children:(0,kh.jsxs)("div",{className:"border-b-[1px] border-black p-2 flex items-center md:w-[75%] animate-width my-11",children:[(0,kh.jsx)(ih,{icon:xh,className:"text-xl text-slate-[#2E2E2E] mx-2 cursor-pointer"}),(0,kh.jsx)("input",{type:"text",className:"bg-transparent border-0 py-1 flex-1 outline-none font-[font1] placeholder:text-sm px-2",placeholder:"Looking for something?"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z'/></svg>",onClick:function(){return o()},className:"text-xl text-slate-[#2E2E2E] mx-2 cursor-pointer"})]})})]}),(0,kh.jsx)("div",{children:[{id:1,header:"What is an FAQ section?",content:'An FAQ section can be used to quickly answer common questions about your business like "Where do you ship to?", "What are your opening hours?", or "How can I book a service?". '},{id:2,header:"Why do FAQs matter?",content:"FAQs are a great way to help site visitors find quick answers to common questions about your business and create a better navigation experience."},{id:3,header:"Where can I add my FAQs?",content:"FAQs can be added to any page on your site , giving access to members on the go."}].map((function(e){return(0,kh.jsx)(fb,{acc:e,icon:!0},e.id)}))})]})},iw=n.p+"static/media/ForgotPassword.0082f397cc34a8ef5ee3.png",aw=function(){var t=(0,e.useState)(""),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==r){e.next=4;break}return e.abrupt("return",to.error("Please Enter an Email!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));case 4:if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(r)){e.next=8;break}return e.abrupt("return",to.error("Please Enter a Valid Email!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));case 8:return e.prev=8,e.next=11,Yi.post("http://localhost:5000/user/password/reset",{email:r},{withCredentials:!0});case 11:if(!(t=e.sent).data.success){e.next=16;break}return n="http://localhost:3000/accounts/user/".concat(t.data.link),Ah("service_y5swlvb","template_3vbfmcl",{link:n,to_email:r},"Lub0zc2Mt-alm_jPW").then((function(e){console.log(e.text),a("")})),e.abrupt("return",to.success("Email has been sent successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(8),console.log(e.t0),a(""),e.abrupt("return",to.error(e.t0.response.data.message,{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));case 23:case"end":return e.stop()}}),e,null,[[8,18]])})));return function(){return e.apply(this,arguments)}}();return(0,kh.jsx)("div",{className:"bg-[#f5f5f5]",children:(0,kh.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2",children:[(0,kh.jsx)("div",{className:"bg-pass w-full ps-3",children:(0,kh.jsx)("img",{src:iw,alt:"Forgot Password",className:"w-full mix-blend-multiply"})}),(0,kh.jsxs)("div",{className:"forgot-password p-6 my-6 mx-4 flex flex-col justify-center",children:[(0,kh.jsx)("h1",{className:"text-2xl font-bold font-[font5] text-black ",children:"Forgot Password"}),(0,kh.jsx)("p",{className:"text-base md:text-lg text-gray-500 my-1",children:"Enter your email and we'll send you a link to reset your password."}),(0,kh.jsx)("div",{className:"w-full md:w-[60%]",children:(0,kh.jsxs)("div",{className:"email drop-shadow-xl flex border-[1px] bg-[#ffffff] items-center  py-2 px-4 md:py-3 md:px-5 gap-3 w-full my-6",children:[(0,kh.jsx)(ih,{icon:gh,className:"text-xl"}),(0,kh.jsx)("input",{type:"email",name:"email",value:r,placeholder:"Enter Your Email",onChange:function(e){return a(e.target.value)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2]"})]})}),(0,kh.jsx)("div",{className:"btn-sub w-full md:w-[60%] my-8",children:(0,kh.jsx)("button",{onClick:function(){return o()},className:"w-full font-[font1] font-bold rounded-md bg-green-600 text-white py-3 px-7 text-center",children:"Submit"})}),(0,kh.jsx)("div",{className:"w-full md:w-[60%]",children:(0,kh.jsxs)(Ue,{to:"/login",className:"flex justify-center items-center gap-2",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M328 112L184 256l144 144' class='ionicon-fill-none'/></svg>",className:"text-lg"}),(0,kh.jsx)("span",{className:"text-gray-500 font-[font1] text-sm",children:"Back To Login"})]})})]})]})})},ow=n.p+"static/media/Login.0cb76d1c6868a193d5eb.avif",sw=function(){var t=ve(),n=ot((function(e){return e.user})),r=mt(),a=(0,e.useState)(""),o=(0,i.Z)(a,2),s=o[0],l=o[1],u=(0,e.useState)(""),c=(0,i.Z)(u,2),h=c[0],f=c[1],d=(0,e.useState)("password"),p=(0,i.Z)(d,2),m=p[0],v=p[1],g=(0,e.useState)(!1),y=(0,i.Z)(g,2),_=y[0],x=y[1],b=(0,e.useState)(mh),w=(0,i.Z)(b,2),k=w[0],E=w[1],S=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("http://localhost:5000/user/google/","_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.open("http://localhost:5000/user/github/callback","_self");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yi.post("".concat("http://localhost:5000/user","/login"),{email:s,password:h},{withCredentials:!0});case 3:200===e.sent.status&&(r(Qi()),x(!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),to.error("Invalid Email or Password!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){null!==n&&(t("/"),_&&to.success("Congratulations! You are now Logged in and ready to Explore.",{position:"top-center",autoClose:2500,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"light"}))}),[n]),(0,kh.jsx)(kh.Fragment,{children:(0,kh.jsx)("div",{className:"flex justify-center p-6 sm:p-10",children:(0,kh.jsxs)("div",{className:"w-full lg:w-[90%] grid grid-cols-1 grid-rows-1 lg:grid-cols-2 shadow-2xl rounded-2xl",children:[(0,kh.jsxs)("div",{className:"flex flex-col items-center h-full bg-slate-900 p-8 rounded-none lg:rounded-s-2xl",children:[(0,kh.jsx)("img",{src:lo,alt:"",className:"h-32 w-32"}),(0,kh.jsx)("div",{className:"mb-6",children:(0,kh.jsxs)("button",{onClick:function(){S()},className:"bg-white flex gap-12 items-center justify-evenly p-2 md:p-i3  focus:outline-none",children:[(0,kh.jsx)("img",{width:"32",height:"32",src:"https://img.icons8.com/fluency/48/google-logo.png",alt:"google-logo"}),(0,kh.jsx)("h1",{className:"text-xs sm:text-sm md:text-lg font-[font1] font-medium pe-4",children:"Login with Google"})]})}),(0,kh.jsx)("div",{children:(0,kh.jsxs)("button",{onClick:function(){T()},className:"bg-white flex gap-12 items-center justify-evenly p-2 md:p-i3  focus:outline-none",children:[(0,kh.jsx)("img",{width:"32",height:"32",src:"https://img.icons8.com/ios-filled/50/github.png",alt:"github"}),(0,kh.jsx)("h1",{className:"text-xs sm:text-sm md:text-lg font-[font1] font-medium pe-4",children:"Login with Github"})]})}),(0,kh.jsx)("div",{className:"my-8 relative p-2",children:(0,kh.jsx)("h1",{className:"text-white text-xs sm:text-sm font-[font1] tracking-wide before:content-[''] before:w-[17.5%] md:before:w-[100%] before:border-[1px] before:absolute before:right-[97%] before:top-[50%]  after:content-[''] after:w-[17.5%] md:after:w-[100%] after:border-[1px] after:absolute after:left-[97%] after:top-[50%]",children:"OR"})}),(0,kh.jsxs)("div",{className:"form  md:w-[60%] lg:w-[70%] flex flex-col gap-6 items-center",children:[(0,kh.jsxs)("div",{className:"email flex bg-white items-center  py-2 px-4 md:py-3 md:px-6 gap-3 w-[85%] sm:w-full",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><rect x='48' y='96' width='416' height='320' rx='40' ry='40' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M112 160l144 112 144-112' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-xl hidden sm:block"}),(0,kh.jsx)("input",{type:"email",name:"email",value:s,placeholder:"Enter Your Email",onChange:function(e){return l(e.target.value)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2]"})]}),(0,kh.jsxs)("div",{className:"password flex bg-white items-center py-2 px-4 md:py-3 md:px-6 gap-3 w-[85%] sm:w-full",children:[(0,kh.jsx)(ih,{icon:vh,className:"text-xl hidden sm:block"}),(0,kh.jsx)("input",{type:m,name:"password",value:h,placeholder:"Enter Password",onChange:function(e){return f(e.target.value)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2] p-0"}),(0,kh.jsx)(ih,{icon:k,onClick:function(e){return E((function(e){return e===mh?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='64'/><path d='M394.82 141.18C351.1 111.2 304.31 96 255.76 96c-43.69 0-86.28 13-126.59 38.48C88.52 160.23 48.67 207 16 256c26.42 44 62.56 89.24 100.2 115.18C159.38 400.92 206.33 416 255.76 416c49 0 95.85-15.07 139.3-44.79C433.31 345 469.71 299.82 496 256c-26.38-43.43-62.9-88.56-101.18-114.82zM256 352a96 96 0 1196-96 96.11 96.11 0 01-96 96z'/></svg>":mh})),void v((function(e){return"password"===e?"text":"password"}))},className:"text-xl cursor-pointer hidden sm:block"})]}),(0,kh.jsx)("div",{className:"forgotten",children:(0,kh.jsx)(Ue,{to:"/accounts/password/reset",className:"text-white text-sm font-[font3] underline tracking-wide",children:"Forgotten Password"})}),(0,kh.jsx)("div",{className:"w-full",children:(0,kh.jsxs)("button",{className:"py-2 px-4 btn w-full flex items-center focus:outline-none",onClick:function(){return C()},children:[(0,kh.jsx)("p",{className:"text-xl font-[font3] ml-auto",children:"Log in"}),(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='square' stroke-miterlimit='10' stroke-width='48' d='M268 112l144 144-144 144M392 256H100' class='ionicon-fill-none'/></svg>",className:"text-xl ml-auto"})]})}),(0,kh.jsx)("div",{className:"flex justify-center",children:(0,kh.jsxs)("p",{className:"text-white font-[font1]",children:["Don't have an account?",(0,kh.jsx)(Ue,{to:"/signup",className:"text-blue-100 hover:text-blue-300 hover:underline ms-1 font-[font1]",children:"Sign Up"})]})})]})]}),(0,kh.jsx)("div",{className:"bg-slate-300 hidden lg:block lg:rounded-e-2xl",children:(0,kh.jsx)("img",{src:ow,alt:"",className:"w-full h-full mix-blend-multiply"})})]})})})},lw=function(){var t=ge().productId,n=new FormData,r=ve(),o=mt(),s=ot((function(e){return e.products})),l=ot((function(e){return e.user})),u=(0,e.useState)(null),c=(0,i.Z)(u,2),h=c[0],f=c[1],d=(0,e.useRef)([]),p=(0,e.useState)([]),m=(0,i.Z)(p,2),v=m[0],g=m[1],y=cb(),_=y.register,x=y.handleSubmit,b=y.reset,k=y.formState.errors,E=y.getValues,S=y.setValue,T=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,r,i,o;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,w.Z)(v),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=13;break}return i=r.value,n.append("file",i.file),n.append("upload_preset","Reviews"),e.next=9,fetch("https://api.cloudinary.com/v1_1/dsgvwvgks/image/upload",{method:"POST",body:n}).then((function(e){return e.json()}));case 9:o=e.sent,d.current=[].concat((0,a.Z)(d.current),[{url:o.url,public_id:o.public_id,signature:o.signature}]);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:return e.abrupt("return",d.current);case 22:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=v.filter((function(e){return e.src!==t.src})),g(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,w.Z)(t.target.files),e.prev=1,i=(0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.value,g((function(e){return[].concat((0,a.Z)(e),[{src:URL.createObjectURL(t),file:t}])}));case 2:case"end":return e.stop()}}),e)})),n.s();case 4:if((r=n.n()).done){e.next=8;break}return e.delegateYield(i(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(n){return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:o(ro({dt:n,img:d.current,productId:t})),d.current=[],g([]),b(),S("rating",0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){if(null===l)return r("/login");if(s){var e=s.filter((function(e){return e._id===t}));f(e)}}),[s]),(0,kh.jsx)("div",{className:"flex justify-center my-6 p-5",children:h&&(0,kh.jsx)("div",{className:"w-full lg:w-[75%]",children:(0,kh.jsxs)("form",{onSubmit:x(A),children:[(0,kh.jsxs)("div",{className:"heading p-4 border-b-[1px] border-b-gray-500",children:[(0,kh.jsx)("h1",{className:"font-sans font-bold text-2xl md:text-3xl",children:"Create Review"}),(0,kh.jsxs)("div",{className:"product flex flex-col md:flex-row md:items-center my-6 gap-6",children:[(0,kh.jsx)("img",{src:h[0].image,alt:"...",className:"w-16"}),(0,kh.jsx)("h1",{className:"font-[font1] font-semibold text-lg tracking-[0.5px]  h-[30px] whitespace-nowrap overflow-hidden text-ellipsis text-[#050505] col-span-2",children:h[0].title})]})]}),(0,kh.jsxs)("div",{className:"rating  my-4 p-4 border-b-[1px] border-b-gray-500",children:[(0,kh.jsx)("h1",{className:"text-2xl font-[750] font-[font1]",children:"Overall rating"}),(0,kh.jsx)(Oh.Z,_n(_n({},_("rating",{required:{value:!0,message:"Please select a Rating!"},min:{value:1,message:"Please select a Rating!"},max:{value:5,message:"Please select a Rating!"}})),{},{ref:null,value:E("rating"),isHalf:!0,activeColor:"#ffd400",color:"#cccccc",size:32,onChange:function(e){return S("rating",e)}})),k.rating&&(0,kh.jsx)("h1",{className:"text-red-600 text-lg",children:k.rating.message})]}),(0,kh.jsxs)("div",{className:"headline my-4 p-4 border-b-[1px] border-b-gray-500",children:[(0,kh.jsx)("label",{htmlFor:"headline",className:"font-[font1] font-[750] text-2xl",children:"Add a headline"}),(0,kh.jsx)("input",_n(_n({type:"text",placeholder:"What's most important to know",className:"input my-3 text-lg"},_("headline",{required:{value:!0,message:"Please Enter your headline!"}})),{},{id:"headline"})),k.headline&&(0,kh.jsx)("h1",{className:"text-red-600 text-lg",children:k.headline.message})]}),(0,kh.jsxs)("div",{className:"images my-4 p-4 border-b-[1px] border-b-gray-500",children:[(0,kh.jsx)("h1",{className:"font-[font1] font-[750] text-2xl my-3",children:"Add a Photo or Video"}),(0,kh.jsx)("p",{className:"font-[font1] my-3",children:"Shoppers find images and videos more helpful than text alone."}),(0,kh.jsxs)("div",{children:[(0,kh.jsx)("div",{className:"",children:(0,kh.jsx)("main",{className:"container mx-auto max-w-screen-lg h-full",children:(0,kh.jsx)("article",{"aria-label":"File Upload Modal",className:"relative h-full flex flex-col bg-white shadow-xl rounded-md",children:(0,kh.jsxs)("section",{className:"h-full overflow-auto p-8 w-full flex flex-col",children:[(0,kh.jsxs)("header",{className:"border-dashed border-2 border-gray-400 py-12 flex flex-col justify-center items-center",children:[(0,kh.jsxs)("p",{className:"mb-3 font-semibold text-gray-900 flex flex-wrap justify-center",children:[(0,kh.jsx)("span",{children:"Drag and drop your"}),"\xa0",(0,kh.jsx)("span",{children:"files anywhere or"})]}),(0,kh.jsx)("input",{id:"hidden-input",type:"file",multiple:!0,className:"hidden",onChange:function(e){return M(e)}}),(0,kh.jsx)("button",{type:"button",id:"button",className:"mt-2 rounded-sm px-3 py-1 bg-gray-200 hover:bg-gray-300 focus:shadow-outline focus:outline-none",onClick:function(){return document.getElementById("hidden-input").click()},children:"Upload a file"})]}),(0,kh.jsx)("h1",{className:"pt-8 pb-3 font-semibold sm:text-lg text-gray-900",children:"To Upload"}),(0,kh.jsxs)("ul",{id:"gallery",className:"flex flex-1 flex-wrap -m-1",children:[v.length>0&&v.map((function(e){return(0,kh.jsxs)("li",{className:"mx-3",children:[(0,kh.jsx)("img",{src:e.src,className:"w-24 h-24",alt:"..."}),(0,kh.jsx)(ih,{icon:bh,className:"m-1 text-lg cursor-pointer",onClick:function(){return C(e)}})]},e.src)})),0===v.length&&(0,kh.jsxs)("li",{id:"empty",className:"h-full w-full text-center flex flex-col  justify-center items-center",children:[(0,kh.jsx)("img",{className:"mx-auto w-32",src:"https://user-images.githubusercontent.com/507615/54591670-ac0a0180-4a65-11e9-846c-e55ffce0fe7b.png",alt:"no data"}),(0,kh.jsx)("span",{className:"text-small text-gray-500",children:"No files selected"})]})]})]})})})}),(0,kh.jsx)("template",{id:"file-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline elative bg-gray-100 cursor-pointer relative shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview hidden w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1 text-blue-800",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs text-gray-700"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md text-gray-800",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})}),(0,kh.jsx)("template",{id:"image-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group hasImage w-full h-full rounded-md focus:outline-none focus:shadow-outline bg-gray-100 cursor-pointer relative text-transparent hover:text-white shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})})]})]}),(0,kh.jsxs)("div",{className:"comment p-4 my-4 border-b-[1px] border-b-gray-500",children:[(0,kh.jsx)("label",{htmlFor:"comment",className:"font-[font1] font-[750] text-2xl",children:"Add a written review"}),(0,kh.jsx)("textarea",_n(_n({id:"comment",rows:7},_("comment",{required:{value:!0,message:"Please Enter your Product Comment!"}})),{},{className:"input resize-none text-sm  font-[font1]",placeholder:"What did you like or dislike ? What did you use this product for?"})),k.comment&&(0,kh.jsx)("h1",{className:"text-red-600 text-lg",children:k.comment.message})]}),(0,kh.jsx)("div",{className:"submit flex",children:(0,kh.jsx)("input",{type:"submit",className:"focus:outline-none py-2 px-4 bg-[#F0F0F0] text-slate-700 text-lg hover:bg-[#000] hover:text-white hover:border-[#000] duration-300",value:"Submit Review"})})]})})})},uw=function(){return(0,kh.jsxs)("div",{className:"w-full h-auto md:h-[90vh] flex flex-col md:flex-row",children:[(0,kh.jsx)("div",{className:"w-full md:w-[20%] h-auto md:h-full bg-[#F0F0F0] flex justify-center",children:(0,kh.jsx)("h1",{className:"text-base sm:text-lg md:text-2xl tracking-wider m-8 md:py-14 md:my-14 font-[font1] uppercase",children:"Shipping & Returns"})}),(0,kh.jsxs)("div",{className:"w-full md:w-[80%] h-full bg-[#222A31] flex flex-col md:flex-row md:justify-evenly text-white p-8 md:p-12 gap-12",children:[(0,kh.jsxs)("div",{className:"ship flex flex-col gap-12 my-6 md:my-12 font-[font1] items-center md:items-start ",children:[(0,kh.jsx)("h1",{className:"text-xl tracking-wider",children:"SHIPPING POLICY"}),(0,kh.jsx)("p",{className:"text-base text-center md:text-justify",children:"I'm a shipping policy. I'm a great place to add more information about your shipping methods, packaging and cost. Providing straightforward information about your shipping policy is a great way to build trust and reassure your customers that they can buy from you with confidence."})]}),(0,kh.jsxs)("div",{className:"return flex flex-col gap-12 md:my-12 font-[font1] items-center md:items-start ",children:[(0,kh.jsx)("h1",{className:"text-xl tracking-wider",children:"RETURN & REFUND POLICY"}),(0,kh.jsx)("p",{className:"text-base text-center md:text-justify",children:"I\u2019m a great place to let your customers know what to do in case they are dissatisfied with their purchase. Having a straightforward refund or exchange policy is a great way to build trust and reassure your customers that they can buy with confidence."})]})]})]})},cw=function(){var t=ot((function(e){return e.categories})),n=mt(),r=ot((function(e){return e.products})),a=pe().search,o=(0,e.useMemo)((function(){return new URLSearchParams(a)}),[a]).get("category"),s=(0,e.useState)(0),l=(0,i.Z)(s,2),u=l[0],c=l[1],h=(0,e.useState)(6),f=(0,i.Z)(h,2),d=f[0],p=f[1],m=null!==r?r.slice(u,d):null,v=(0,e.useState)(m),g=(0,i.Z)(v,2),y=g[0],_=g[1];return(0,e.useEffect)((function(){n(oa())}),[]),(0,e.useEffect)((function(){n(null===o?oa():sa(o))}),[o,n]),(0,e.useEffect)((function(){null!==r&&(d>=r.length-1&&null!==o&&(c(0),p(6)),_(r.slice(u,d)))}),[r,u,d]),(0,kh.jsxs)("div",{className:"flex flex-col",children:[(0,kh.jsxs)("div",{className:"p-6 flex gap-6 mx-12 my-6",children:[(0,kh.jsx)("h1",{className:"text-xl lg:text-lg after:content-['>'] after:ms-6 font-[font1]",children:"Home"}),(0,kh.jsx)("h1",{className:"text-xl lg:text-lg font-[font1] capitalize",children:null===o?"All Products":o})]}),(0,kh.jsxs)("div",{className:"flex mx-12 my-4",children:[(0,kh.jsx)("div",{className:"w-[20%] hidden md:block",children:(0,kh.jsxs)("div",{children:[(0,kh.jsx)("h1",{className:"text-3xl px-2 py-5 relative after:content-[''] after:border-[1px] after:border-slate-700 after:absolute after:bottom-0 after:left-0 after:w-[80%]",children:"Browse by"}),(0,kh.jsxs)("ul",{className:"flex flex-col my-2",children:[(0,kh.jsx)("li",{className:"nav-link py-2 px-3 focus:outline-none",children:(0,kh.jsx)(Ue,{to:"/shop",className:"".concat(null===o?"font-semibold text-xl":""),children:"All Products"})}),t&&t.map((function(e){return(0,kh.jsx)("li",{className:"nav-link py-2 px-3 capitalize focus:outline-none",children:(0,kh.jsx)(Ue,{className:"".concat(o===e?"font-semibold text-xl":""),to:"?category=".concat(e),children:e})},e)}))]})]})}),(0,kh.jsxs)("div",{className:"w-full md:w-[80%]",children:[(0,kh.jsxs)("div",{className:"p-3 md:p-5",children:[(0,kh.jsxs)("div",{className:"flex justify-between",children:[(0,kh.jsx)("h1",{className:"text-2xl md:text-4xl capitalize font-[font3] px-3",children:null===o?"All Products":o}),(0,kh.jsxs)("select",{name:"filterBy",id:"filter",onChange:function(e){return function(e){n(la({filter:e,currentCategory:o}))}(e.target.value)},className:"border border-black px-1 md:py-2 md:px-3 text-lg focus:outline-none",children:[(0,kh.jsx)("option",{value:"-1",className:"text-base",hidden:!0,selected:!0,disabled:!0,children:"Filter By"}),(0,kh.jsx)("option",{value:"price(low)",className:"text-base",children:"Price - Low to High"}),(0,kh.jsx)("option",{value:"price(high)",className:"text-base",children:"Price - High to Low"}),(0,kh.jsx)("option",{value:"customer",className:"text-base",children:"Customer Reviews"})]})]}),(0,kh.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 justify-around gap-6 items-center my-8",children:null===y?(0,kh.jsx)("h1",{className:"text-xl",children:"No Products Found!"}):y.map((function(e){return(0,kh.jsx)(jh,{product:e},e._id)}))})]}),(0,kh.jsxs)("div",{className:"flex justify-between items-center p-2",children:[(0,kh.jsx)("button",{onClick:function(){return c((function(e){return e-6})),void p((function(e){return e-6}))},disabled:0===u,className:"py-2 px-4 disabled:bg-red-400 bg-red-500 text-lg text-white focus:outline-none",children:"Previous"}),(0,kh.jsx)("button",{className:"py-2 px-4 disabled:bg-green-400 bg-green-500 text-lg text-white focus:outline-none",disabled:r&&d>=r.length-1,onClick:function(){return c((function(e){return e+6})),void p((function(e){return e+6}))},children:"Next"})]})]})]})]})},hw=[{name:"Afghanistan",flag:"\ud83c\udde6\ud83c\uddeb",code:"AF",dial_code:"+93"},{name:"\xc5land Islands",flag:"\ud83c\udde6\ud83c\uddfd",code:"AX",dial_code:"+358"},{name:"Albania",flag:"\ud83c\udde6\ud83c\uddf1",code:"AL",dial_code:"+355"},{name:"Algeria",flag:"\ud83c\udde9\ud83c\uddff",code:"DZ",dial_code:"+213"},{name:"American Samoa",flag:"\ud83c\udde6\ud83c\uddf8",code:"AS",dial_code:"+1684"},{name:"Andorra",flag:"\ud83c\udde6\ud83c\udde9",code:"AD",dial_code:"+376"},{name:"Angola",flag:"\ud83c\udde6\ud83c\uddf4",code:"AO",dial_code:"+244"},{name:"Anguilla",flag:"\ud83c\udde6\ud83c\uddee",code:"AI",dial_code:"+1264"},{name:"Antarctica",flag:"\ud83c\udde6\ud83c\uddf6",code:"AQ",dial_code:"+672"},{name:"Antigua and Barbuda",flag:"\ud83c\udde6\ud83c\uddec",code:"AG",dial_code:"+1268"},{name:"Argentina",flag:"\ud83c\udde6\ud83c\uddf7",code:"AR",dial_code:"+54"},{name:"Armenia",flag:"\ud83c\udde6\ud83c\uddf2",code:"AM",dial_code:"+374"},{name:"Aruba",flag:"\ud83c\udde6\ud83c\uddfc",code:"AW",dial_code:"+297"},{name:"Australia",flag:"\ud83c\udde6\ud83c\uddfa",code:"AU",dial_code:"+61"},{name:"Austria",flag:"\ud83c\udde6\ud83c\uddf9",code:"AT",dial_code:"+43"},{name:"Azerbaijan",flag:"\ud83c\udde6\ud83c\uddff",code:"AZ",dial_code:"+994"},{name:"Bahamas",flag:"\ud83c\udde7\ud83c\uddf8",code:"BS",dial_code:"+1242"},{name:"Bahrain",flag:"\ud83c\udde7\ud83c\udded",code:"BH",dial_code:"+973"},{name:"Bangladesh",flag:"\ud83c\udde7\ud83c\udde9",code:"BD",dial_code:"+880"},{name:"Barbados",flag:"\ud83c\udde7\ud83c\udde7",code:"BB",dial_code:"+1246"},{name:"Belarus",flag:"\ud83c\udde7\ud83c\uddfe",code:"BY",dial_code:"+375"},{name:"Belgium",flag:"\ud83c\udde7\ud83c\uddea",code:"BE",dial_code:"+32"},{name:"Belize",flag:"\ud83c\udde7\ud83c\uddff",code:"BZ",dial_code:"+501"},{name:"Benin",flag:"\ud83c\udde7\ud83c\uddef",code:"BJ",dial_code:"+229"},{name:"Bermuda",flag:"\ud83c\udde7\ud83c\uddf2",code:"BM",dial_code:"+1441"},{name:"Bhutan",flag:"\ud83c\udde7\ud83c\uddf9",code:"BT",dial_code:"+975"},{name:"Bolivia, Plurinational State of bolivia",flag:"\ud83c\udde7\ud83c\uddf4",code:"BO",dial_code:"+591"},{name:"Bosnia and Herzegovina",flag:"\ud83c\udde7\ud83c\udde6",code:"BA",dial_code:"+387"},{name:"Botswana",flag:"\ud83c\udde7\ud83c\uddfc",code:"BW",dial_code:"+267"},{name:"Bouvet Island",flag:"\ud83c\udde7\ud83c\uddfb",code:"BV",dial_code:"+47"},{name:"Brazil",flag:"\ud83c\udde7\ud83c\uddf7",code:"BR",dial_code:"+55"},{name:"British Indian Ocean Territory",flag:"\ud83c\uddee\ud83c\uddf4",code:"IO",dial_code:"+246"},{name:"Brunei Darussalam",flag:"\ud83c\udde7\ud83c\uddf3",code:"BN",dial_code:"+673"},{name:"Bulgaria",flag:"\ud83c\udde7\ud83c\uddec",code:"BG",dial_code:"+359"},{name:"Burkina Faso",flag:"\ud83c\udde7\ud83c\uddeb",code:"BF",dial_code:"+226"},{name:"Burundi",flag:"\ud83c\udde7\ud83c\uddee",code:"BI",dial_code:"+257"},{name:"Cambodia",flag:"\ud83c\uddf0\ud83c\udded",code:"KH",dial_code:"+855"},{name:"Cameroon",flag:"\ud83c\udde8\ud83c\uddf2",code:"CM",dial_code:"+237"},{name:"Canada",flag:"\ud83c\udde8\ud83c\udde6",code:"CA",dial_code:"+1"},{name:"Cape Verde",flag:"\ud83c\udde8\ud83c\uddfb",code:"CV",dial_code:"+238"},{name:"Cayman Islands",flag:"\ud83c\uddf0\ud83c\uddfe",code:"KY",dial_code:"+345"},{name:"Central African Republic",flag:"\ud83c\udde8\ud83c\uddeb",code:"CF",dial_code:"+236"},{name:"Chad",flag:"\ud83c\uddf9\ud83c\udde9",code:"TD",dial_code:"+235"},{name:"Chile",flag:"\ud83c\udde8\ud83c\uddf1",code:"CL",dial_code:"+56"},{name:"China",flag:"\ud83c\udde8\ud83c\uddf3",code:"CN",dial_code:"+86"},{name:"Christmas Island",flag:"\ud83c\udde8\ud83c\uddfd",code:"CX",dial_code:"+61"},{name:"Cocos (Keeling) Islands",flag:"\ud83c\udde8\ud83c\udde8",code:"CC",dial_code:"+61"},{name:"Colombia",flag:"\ud83c\udde8\ud83c\uddf4",code:"CO",dial_code:"+57"},{name:"Comoros",flag:"\ud83c\uddf0\ud83c\uddf2",code:"KM",dial_code:"+269"},{name:"Congo",flag:"\ud83c\udde8\ud83c\uddec",code:"CG",dial_code:"+242"},{name:"Congo, The Democratic Republic of the Congo",flag:"\ud83c\udde8\ud83c\udde9",code:"CD",dial_code:"+243"},{name:"Cook Islands",flag:"\ud83c\udde8\ud83c\uddf0",code:"CK",dial_code:"+682"},{name:"Costa Rica",flag:"\ud83c\udde8\ud83c\uddf7",code:"CR",dial_code:"+506"},{name:"Cote d'Ivoire",flag:"\ud83c\udde8\ud83c\uddee",code:"CI",dial_code:"+225"},{name:"Croatia",flag:"\ud83c\udded\ud83c\uddf7",code:"HR",dial_code:"+385"},{name:"Cuba",flag:"\ud83c\udde8\ud83c\uddfa",code:"CU",dial_code:"+53"},{name:"Cyprus",flag:"\ud83c\udde8\ud83c\uddfe",code:"CY",dial_code:"+357"},{name:"Czech Republic",flag:"\ud83c\udde8\ud83c\uddff",code:"CZ",dial_code:"+420"},{name:"Denmark",flag:"\ud83c\udde9\ud83c\uddf0",code:"DK",dial_code:"+45"},{name:"Djibouti",flag:"\ud83c\udde9\ud83c\uddef",code:"DJ",dial_code:"+253"},{name:"Dominica",flag:"\ud83c\udde9\ud83c\uddf2",code:"DM",dial_code:"+1767"},{name:"Dominican Republic",flag:"\ud83c\udde9\ud83c\uddf4",code:"DO",dial_code:"+1849"},{name:"Ecuador",flag:"\ud83c\uddea\ud83c\udde8",code:"EC",dial_code:"+593"},{name:"Egypt",flag:"\ud83c\uddea\ud83c\uddec",code:"EG",dial_code:"+20"},{name:"El Salvador",flag:"\ud83c\uddf8\ud83c\uddfb",code:"SV",dial_code:"+503"},{name:"Equatorial Guinea",flag:"\ud83c\uddec\ud83c\uddf6",code:"GQ",dial_code:"+240"},{name:"Eritrea",flag:"\ud83c\uddea\ud83c\uddf7",code:"ER",dial_code:"+291"},{name:"Estonia",flag:"\ud83c\uddea\ud83c\uddea",code:"EE",dial_code:"+372"},{name:"Ethiopia",flag:"\ud83c\uddea\ud83c\uddf9",code:"ET",dial_code:"+251"},{name:"Falkland Islands (Malvinas)",flag:"\ud83c\uddeb\ud83c\uddf0",code:"FK",dial_code:"+500"},{name:"Faroe Islands",flag:"\ud83c\uddeb\ud83c\uddf4",code:"FO",dial_code:"+298"},{name:"Fiji",flag:"\ud83c\uddeb\ud83c\uddef",code:"FJ",dial_code:"+679"},{name:"Finland",flag:"\ud83c\uddeb\ud83c\uddee",code:"FI",dial_code:"+358"},{name:"France",flag:"\ud83c\uddeb\ud83c\uddf7",code:"FR",dial_code:"+33"},{name:"French Guiana",flag:"\ud83c\uddec\ud83c\uddeb",code:"GF",dial_code:"+594"},{name:"French Polynesia",flag:"\ud83c\uddf5\ud83c\uddeb",code:"PF",dial_code:"+689"},{name:"French Southern Territories",flag:"\ud83c\uddf9\ud83c\uddeb",code:"TF",dial_code:"+262"},{name:"Gabon",flag:"\ud83c\uddec\ud83c\udde6",code:"GA",dial_code:"+241"},{name:"Gambia",flag:"\ud83c\uddec\ud83c\uddf2",code:"GM",dial_code:"+220"},{name:"Georgia",flag:"\ud83c\uddec\ud83c\uddea",code:"GE",dial_code:"+995"},{name:"Germany",flag:"\ud83c\udde9\ud83c\uddea",code:"DE",dial_code:"+49"},{name:"Ghana",flag:"\ud83c\uddec\ud83c\udded",code:"GH",dial_code:"+233"},{name:"Gibraltar",flag:"\ud83c\uddec\ud83c\uddee",code:"GI",dial_code:"+350"},{name:"Greece",flag:"\ud83c\uddec\ud83c\uddf7",code:"GR",dial_code:"+30"},{name:"Greenland",flag:"\ud83c\uddec\ud83c\uddf1",code:"GL",dial_code:"+299"},{name:"Grenada",flag:"\ud83c\uddec\ud83c\udde9",code:"GD",dial_code:"+1473"},{name:"Guadeloupe",flag:"\ud83c\uddec\ud83c\uddf5",code:"GP",dial_code:"+590"},{name:"Guam",flag:"\ud83c\uddec\ud83c\uddfa",code:"GU",dial_code:"+1671"},{name:"Guatemala",flag:"\ud83c\uddec\ud83c\uddf9",code:"GT",dial_code:"+502"},{name:"Guernsey",flag:"\ud83c\uddec\ud83c\uddec",code:"GG",dial_code:"+44"},{name:"Guinea",flag:"\ud83c\uddec\ud83c\uddf3",code:"GN",dial_code:"+224"},{name:"Guinea-Bissau",flag:"\ud83c\uddec\ud83c\uddfc",code:"GW",dial_code:"+245"},{name:"Guyana",flag:"\ud83c\uddec\ud83c\uddfe",code:"GY",dial_code:"+592"},{name:"Haiti",flag:"\ud83c\udded\ud83c\uddf9",code:"HT",dial_code:"+509"},{name:"Heard Island and Mcdonald Islands",flag:"\ud83c\udded\ud83c\uddf2",code:"HM",dial_code:"+672"},{name:"Holy See (Vatican City State)",flag:"\ud83c\uddfb\ud83c\udde6",code:"VA",dial_code:"+379"},{name:"Honduras",flag:"\ud83c\udded\ud83c\uddf3",code:"HN",dial_code:"+504"},{name:"Hong Kong",flag:"\ud83c\udded\ud83c\uddf0",code:"HK",dial_code:"+852"},{name:"Hungary",flag:"\ud83c\udded\ud83c\uddfa",code:"HU",dial_code:"+36"},{name:"Iceland",flag:"\ud83c\uddee\ud83c\uddf8",code:"IS",dial_code:"+354"},{name:"India",flag:"\ud83c\uddee\ud83c\uddf3",code:"IN",dial_code:"+91"},{name:"Indonesia",flag:"\ud83c\uddee\ud83c\udde9",code:"ID",dial_code:"+62"},{name:"Iran, Islamic Republic of Persian Gulf",flag:"\ud83c\uddee\ud83c\uddf7",code:"IR",dial_code:"+98"},{name:"Iraq",flag:"\ud83c\uddee\ud83c\uddf6",code:"IQ",dial_code:"+964"},{name:"Ireland",flag:"\ud83c\uddee\ud83c\uddea",code:"IE",dial_code:"+353"},{name:"Isle of Man",flag:"\ud83c\uddee\ud83c\uddf2",code:"IM",dial_code:"+44"},{name:"Israel",flag:"\ud83c\uddee\ud83c\uddf1",code:"IL",dial_code:"+972"},{name:"Italy",flag:"\ud83c\uddee\ud83c\uddf9",code:"IT",dial_code:"+39"},{name:"Jamaica",flag:"\ud83c\uddef\ud83c\uddf2",code:"JM",dial_code:"+1876"},{name:"Japan",flag:"\ud83c\uddef\ud83c\uddf5",code:"JP",dial_code:"+81"},{name:"Jersey",flag:"\ud83c\uddef\ud83c\uddea",code:"JE",dial_code:"+44"},{name:"Jordan",flag:"\ud83c\uddef\ud83c\uddf4",code:"JO",dial_code:"+962"},{name:"Kazakhstan",flag:"\ud83c\uddf0\ud83c\uddff",code:"KZ",dial_code:"+7"},{name:"Kenya",flag:"\ud83c\uddf0\ud83c\uddea",code:"KE",dial_code:"+254"},{name:"Kiribati",flag:"\ud83c\uddf0\ud83c\uddee",code:"KI",dial_code:"+686"},{name:"Korea, Democratic People's Republic of Korea",flag:"\ud83c\uddf0\ud83c\uddf5",code:"KP",dial_code:"+850"},{name:"Korea, Republic of South Korea",flag:"\ud83c\uddf0\ud83c\uddf7",code:"KR",dial_code:"+82"},{name:"Kosovo",flag:"\ud83c\uddfd\ud83c\uddf0",code:"XK",dial_code:"+383"},{name:"Kuwait",flag:"\ud83c\uddf0\ud83c\uddfc",code:"KW",dial_code:"+965"},{name:"Kyrgyzstan",flag:"\ud83c\uddf0\ud83c\uddec",code:"KG",dial_code:"+996"},{name:"Laos",flag:"\ud83c\uddf1\ud83c\udde6",code:"LA",dial_code:"+856"},{name:"Latvia",flag:"\ud83c\uddf1\ud83c\uddfb",code:"LV",dial_code:"+371"},{name:"Lebanon",flag:"\ud83c\uddf1\ud83c\udde7",code:"LB",dial_code:"+961"},{name:"Lesotho",flag:"\ud83c\uddf1\ud83c\uddf8",code:"LS",dial_code:"+266"},{name:"Liberia",flag:"\ud83c\uddf1\ud83c\uddf7",code:"LR",dial_code:"+231"},{name:"Libyan Arab Jamahiriya",flag:"\ud83c\uddf1\ud83c\uddfe",code:"LY",dial_code:"+218"},{name:"Liechtenstein",flag:"\ud83c\uddf1\ud83c\uddee",code:"LI",dial_code:"+423"},{name:"Lithuania",flag:"\ud83c\uddf1\ud83c\uddf9",code:"LT",dial_code:"+370"},{name:"Luxembourg",flag:"\ud83c\uddf1\ud83c\uddfa",code:"LU",dial_code:"+352"},{name:"Macao",flag:"\ud83c\uddf2\ud83c\uddf4",code:"MO",dial_code:"+853"},{name:"Macedonia",flag:"\ud83c\uddf2\ud83c\uddf0",code:"MK",dial_code:"+389"},{name:"Madagascar",flag:"\ud83c\uddf2\ud83c\uddec",code:"MG",dial_code:"+261"},{name:"Malawi",flag:"\ud83c\uddf2\ud83c\uddfc",code:"MW",dial_code:"+265"},{name:"Malaysia",flag:"\ud83c\uddf2\ud83c\uddfe",code:"MY",dial_code:"+60"},{name:"Maldives",flag:"\ud83c\uddf2\ud83c\uddfb",code:"MV",dial_code:"+960"},{name:"Mali",flag:"\ud83c\uddf2\ud83c\uddf1",code:"ML",dial_code:"+223"},{name:"Malta",flag:"\ud83c\uddf2\ud83c\uddf9",code:"MT",dial_code:"+356"},{name:"Marshall Islands",flag:"\ud83c\uddf2\ud83c\udded",code:"MH",dial_code:"+692"},{name:"Martinique",flag:"\ud83c\uddf2\ud83c\uddf6",code:"MQ",dial_code:"+596"},{name:"Mauritania",flag:"\ud83c\uddf2\ud83c\uddf7",code:"MR",dial_code:"+222"},{name:"Mauritius",flag:"\ud83c\uddf2\ud83c\uddfa",code:"MU",dial_code:"+230"},{name:"Mayotte",flag:"\ud83c\uddfe\ud83c\uddf9",code:"YT",dial_code:"+262"},{name:"Mexico",flag:"\ud83c\uddf2\ud83c\uddfd",code:"MX",dial_code:"+52"},{name:"Micronesia, Federated States of Micronesia",flag:"\ud83c\uddeb\ud83c\uddf2",code:"FM",dial_code:"+691"},{name:"Moldova",flag:"\ud83c\uddf2\ud83c\udde9",code:"MD",dial_code:"+373"},{name:"Monaco",flag:"\ud83c\uddf2\ud83c\udde8",code:"MC",dial_code:"+377"},{name:"Mongolia",flag:"\ud83c\uddf2\ud83c\uddf3",code:"MN",dial_code:"+976"},{name:"Montenegro",flag:"\ud83c\uddf2\ud83c\uddea",code:"ME",dial_code:"+382"},{name:"Montserrat",flag:"\ud83c\uddf2\ud83c\uddf8",code:"MS",dial_code:"+1664"},{name:"Morocco",flag:"\ud83c\uddf2\ud83c\udde6",code:"MA",dial_code:"+212"},{name:"Mozambique",flag:"\ud83c\uddf2\ud83c\uddff",code:"MZ",dial_code:"+258"},{name:"Myanmar",flag:"\ud83c\uddf2\ud83c\uddf2",code:"MM",dial_code:"+95"},{name:"Namibia",flag:"\ud83c\uddf3\ud83c\udde6",code:"NA",dial_code:"+264"},{name:"Nauru",flag:"\ud83c\uddf3\ud83c\uddf7",code:"NR",dial_code:"+674"},{name:"Nepal",flag:"\ud83c\uddf3\ud83c\uddf5",code:"NP",dial_code:"+977"},{name:"Netherlands",flag:"\ud83c\uddf3\ud83c\uddf1",code:"NL",dial_code:"+31"},{name:"Netherlands Antilles",flag:"",code:"AN",dial_code:"+599"},{name:"New Caledonia",flag:"\ud83c\uddf3\ud83c\udde8",code:"NC",dial_code:"+687"},{name:"New Zealand",flag:"\ud83c\uddf3\ud83c\uddff",code:"NZ",dial_code:"+64"},{name:"Nicaragua",flag:"\ud83c\uddf3\ud83c\uddee",code:"NI",dial_code:"+505"},{name:"Niger",flag:"\ud83c\uddf3\ud83c\uddea",code:"NE",dial_code:"+227"},{name:"Nigeria",flag:"\ud83c\uddf3\ud83c\uddec",code:"NG",dial_code:"+234"},{name:"Niue",flag:"\ud83c\uddf3\ud83c\uddfa",code:"NU",dial_code:"+683"},{name:"Norfolk Island",flag:"\ud83c\uddf3\ud83c\uddeb",code:"NF",dial_code:"+672"},{name:"Northern Mariana Islands",flag:"\ud83c\uddf2\ud83c\uddf5",code:"MP",dial_code:"+1670"},{name:"Norway",flag:"\ud83c\uddf3\ud83c\uddf4",code:"NO",dial_code:"+47"},{name:"Oman",flag:"\ud83c\uddf4\ud83c\uddf2",code:"OM",dial_code:"+968"},{name:"Pakistan",flag:"\ud83c\uddf5\ud83c\uddf0",code:"PK",dial_code:"+92"},{name:"Palau",flag:"\ud83c\uddf5\ud83c\uddfc",code:"PW",dial_code:"+680"},{name:"Palestinian Territory, Occupied",flag:"\ud83c\uddf5\ud83c\uddf8",code:"PS",dial_code:"+970"},{name:"Panama",flag:"\ud83c\uddf5\ud83c\udde6",code:"PA",dial_code:"+507"},{name:"Papua New Guinea",flag:"\ud83c\uddf5\ud83c\uddec",code:"PG",dial_code:"+675"},{name:"Paraguay",flag:"\ud83c\uddf5\ud83c\uddfe",code:"PY",dial_code:"+595"},{name:"Peru",flag:"\ud83c\uddf5\ud83c\uddea",code:"PE",dial_code:"+51"},{name:"Philippines",flag:"\ud83c\uddf5\ud83c\udded",code:"PH",dial_code:"+63"},{name:"Pitcairn",flag:"\ud83c\uddf5\ud83c\uddf3",code:"PN",dial_code:"+64"},{name:"Poland",flag:"\ud83c\uddf5\ud83c\uddf1",code:"PL",dial_code:"+48"},{name:"Portugal",flag:"\ud83c\uddf5\ud83c\uddf9",code:"PT",dial_code:"+351"},{name:"Puerto Rico",flag:"\ud83c\uddf5\ud83c\uddf7",code:"PR",dial_code:"+1939"},{name:"Qatar",flag:"\ud83c\uddf6\ud83c\udde6",code:"QA",dial_code:"+974"},{name:"Romania",flag:"\ud83c\uddf7\ud83c\uddf4",code:"RO",dial_code:"+40"},{name:"Russia",flag:"\ud83c\uddf7\ud83c\uddfa",code:"RU",dial_code:"+7"},{name:"Rwanda",flag:"\ud83c\uddf7\ud83c\uddfc",code:"RW",dial_code:"+250"},{name:"Reunion",flag:"\ud83c\uddf7\ud83c\uddea",code:"RE",dial_code:"+262"},{name:"Saint Barthelemy",flag:"\ud83c\udde7\ud83c\uddf1",code:"BL",dial_code:"+590"},{name:"Saint Helena, Ascension and Tristan Da Cunha",flag:"\ud83c\uddf8\ud83c\udded",code:"SH",dial_code:"+290"},{name:"Saint Kitts and Nevis",flag:"\ud83c\uddf0\ud83c\uddf3",code:"KN",dial_code:"+1869"},{name:"Saint Lucia",flag:"\ud83c\uddf1\ud83c\udde8",code:"LC",dial_code:"+1758"},{name:"Saint Martin",flag:"\ud83c\uddf2\ud83c\uddeb",code:"MF",dial_code:"+590"},{name:"Saint Pierre and Miquelon",flag:"\ud83c\uddf5\ud83c\uddf2",code:"PM",dial_code:"+508"},{name:"Saint Vincent and the Grenadines",flag:"\ud83c\uddfb\ud83c\udde8",code:"VC",dial_code:"+1784"},{name:"Samoa",flag:"\ud83c\uddfc\ud83c\uddf8",code:"WS",dial_code:"+685"},{name:"San Marino",flag:"\ud83c\uddf8\ud83c\uddf2",code:"SM",dial_code:"+378"},{name:"Sao Tome and Principe",flag:"\ud83c\uddf8\ud83c\uddf9",code:"ST",dial_code:"+239"},{name:"Saudi Arabia",flag:"\ud83c\uddf8\ud83c\udde6",code:"SA",dial_code:"+966"},{name:"Senegal",flag:"\ud83c\uddf8\ud83c\uddf3",code:"SN",dial_code:"+221"},{name:"Serbia",flag:"\ud83c\uddf7\ud83c\uddf8",code:"RS",dial_code:"+381"},{name:"Seychelles",flag:"\ud83c\uddf8\ud83c\udde8",code:"SC",dial_code:"+248"},{name:"Sierra Leone",flag:"\ud83c\uddf8\ud83c\uddf1",code:"SL",dial_code:"+232"},{name:"Singapore",flag:"\ud83c\uddf8\ud83c\uddec",code:"SG",dial_code:"+65"},{name:"Slovakia",flag:"\ud83c\uddf8\ud83c\uddf0",code:"SK",dial_code:"+421"},{name:"Slovenia",flag:"\ud83c\uddf8\ud83c\uddee",code:"SI",dial_code:"+386"},{name:"Solomon Islands",flag:"\ud83c\uddf8\ud83c\udde7",code:"SB",dial_code:"+677"},{name:"Somalia",flag:"\ud83c\uddf8\ud83c\uddf4",code:"SO",dial_code:"+252"},{name:"South Africa",flag:"\ud83c\uddff\ud83c\udde6",code:"ZA",dial_code:"+27"},{name:"South Sudan",flag:"\ud83c\uddf8\ud83c\uddf8",code:"SS",dial_code:"+211"},{name:"South Georgia and the South Sandwich Islands",flag:"\ud83c\uddec\ud83c\uddf8",code:"GS",dial_code:"+500"},{name:"Spain",flag:"\ud83c\uddea\ud83c\uddf8",code:"ES",dial_code:"+34"},{name:"Sri Lanka",flag:"\ud83c\uddf1\ud83c\uddf0",code:"LK",dial_code:"+94"},{name:"Sudan",flag:"\ud83c\uddf8\ud83c\udde9",code:"SD",dial_code:"+249"},{name:"Suriname",flag:"\ud83c\uddf8\ud83c\uddf7",code:"SR",dial_code:"+597"},{name:"Svalbard and Jan Mayen",flag:"\ud83c\uddf8\ud83c\uddef",code:"SJ",dial_code:"+47"},{name:"Eswatini",flag:"\ud83c\uddf8\ud83c\uddff",code:"SZ",dial_code:"+268"},{name:"Sweden",flag:"\ud83c\uddf8\ud83c\uddea",code:"SE",dial_code:"+46"},{name:"Switzerland",flag:"\ud83c\udde8\ud83c\udded",code:"CH",dial_code:"+41"},{name:"Syrian Arab Republic",flag:"\ud83c\uddf8\ud83c\uddfe",code:"SY",dial_code:"+963"},{name:"Taiwan",flag:"\ud83c\uddf9\ud83c\uddfc",code:"TW",dial_code:"+886"},{name:"Tajikistan",flag:"\ud83c\uddf9\ud83c\uddef",code:"TJ",dial_code:"+992"},{name:"Tanzania, United Republic of Tanzania",flag:"\ud83c\uddf9\ud83c\uddff",code:"TZ",dial_code:"+255"},{name:"Thailand",flag:"\ud83c\uddf9\ud83c\udded",code:"TH",dial_code:"+66"},{name:"Timor-Leste",flag:"\ud83c\uddf9\ud83c\uddf1",code:"TL",dial_code:"+670"},{name:"Togo",flag:"\ud83c\uddf9\ud83c\uddec",code:"TG",dial_code:"+228"},{name:"Tokelau",flag:"\ud83c\uddf9\ud83c\uddf0",code:"TK",dial_code:"+690"},{name:"Tonga",flag:"\ud83c\uddf9\ud83c\uddf4",code:"TO",dial_code:"+676"},{name:"Trinidad and Tobago",flag:"\ud83c\uddf9\ud83c\uddf9",code:"TT",dial_code:"+1868"},{name:"Tunisia",flag:"\ud83c\uddf9\ud83c\uddf3",code:"TN",dial_code:"+216"},{name:"Turkey",flag:"\ud83c\uddf9\ud83c\uddf7",code:"TR",dial_code:"+90"},{name:"Turkmenistan",flag:"\ud83c\uddf9\ud83c\uddf2",code:"TM",dial_code:"+993"},{name:"Turks and Caicos Islands",flag:"\ud83c\uddf9\ud83c\udde8",code:"TC",dial_code:"+1649"},{name:"Tuvalu",flag:"\ud83c\uddf9\ud83c\uddfb",code:"TV",dial_code:"+688"},{name:"Uganda",flag:"\ud83c\uddfa\ud83c\uddec",code:"UG",dial_code:"+256"},{name:"Ukraine",flag:"\ud83c\uddfa\ud83c\udde6",code:"UA",dial_code:"+380"},{name:"United Arab Emirates",flag:"\ud83c\udde6\ud83c\uddea",code:"AE",dial_code:"+971"},{name:"United Kingdom",flag:"\ud83c\uddec\ud83c\udde7",code:"GB",dial_code:"+44"},{name:"United States",flag:"\ud83c\uddfa\ud83c\uddf8",code:"US",dial_code:"+1"},{name:"Uruguay",flag:"\ud83c\uddfa\ud83c\uddfe",code:"UY",dial_code:"+598"},{name:"Uzbekistan",flag:"\ud83c\uddfa\ud83c\uddff",code:"UZ",dial_code:"+998"},{name:"Vanuatu",flag:"\ud83c\uddfb\ud83c\uddfa",code:"VU",dial_code:"+678"},{name:"Venezuela, Bolivarian Republic of Venezuela",flag:"\ud83c\uddfb\ud83c\uddea",code:"VE",dial_code:"+58"},{name:"Vietnam",flag:"\ud83c\uddfb\ud83c\uddf3",code:"VN",dial_code:"+84"},{name:"Virgin Islands, British",flag:"\ud83c\uddfb\ud83c\uddec",code:"VG",dial_code:"+1284"},{name:"Virgin Islands, U.S.",flag:"\ud83c\uddfb\ud83c\uddee",code:"VI",dial_code:"+1340"},{name:"Wallis and Futuna",flag:"\ud83c\uddfc\ud83c\uddeb",code:"WF",dial_code:"+681"},{name:"Yemen",flag:"\ud83c\uddfe\ud83c\uddea",code:"YE",dial_code:"+967"},{name:"Zambia",flag:"\ud83c\uddff\ud83c\uddf2",code:"ZM",dial_code:"+260"},{name:"Zimbabwe",flag:"\ud83c\uddff\ud83c\uddfc",code:"ZW",dial_code:"+263"}],fw=function(){var t=ot((function(e){return e.user})),n=mt(),r=ve(),a=(0,e.useState)(0),o=(0,i.Z)(a,2),s=o[0],l=o[1],u=(0,e.useState)({name:"",email:"",gender:"",password:"",phoneNo:"",cpassword:"",selected:"+91"}),c=(0,i.Z)(u,2),h=c[0],f=c[1],d=(0,e.useState)(fh),p=(0,i.Z)(d,2),m=p[0],v=p[1],g=function(e){f((function(t){return _n(_n({},t),{},(0,Ye.Z)({},e.target.name,e.target.value))}))},y=function(){var e=document.getElementById("countries");v((function(e){return e===fh?"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path stroke-linecap='round' stroke-linejoin='round' stroke-width='48' d='M112 328l144-144 144 144' class='ionicon-fill-none'/></svg>":fh})),e.classList.toggle("hidden")},_=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{7,}$/.test(h.password)){e.next=4;break}return e.abrupt("return",to.error("Password must be greater than 6 characters and contain at least one uppercase letter, one lowercase letter, and one digit!",{closeOnClick:!0,pauseOnHover:!1,theme:"colored",draggable:!1,hideProgressBar:!1,autoClose:2e3}));case 4:if(0===h.password.localeCompare(h.cpassword)){e.next=8;break}return e.abrupt("return",to.error("Passwords do not match!",{closeOnClick:!0,pauseOnHover:!1,theme:"colored",draggable:!1,hideProgressBar:!1,autoClose:2e3}));case 8:return e.prev=8,t={name:h.name,email:h.email,gender:h.gender,password:h.password,phone_no:h.selected+h.phoneNo},e.next=12,Yi.post("http://localhost:5000/user/register",t,{withCredentials:!0});case 12:200===e.sent.status&&(n(Qi()),to.success("Congratulations! Your registration was successful. Welcome aboard! We are thrilled to have you as a part of our community.",{closeOnClick:!0,pauseOnHover:!1,theme:"colored",draggable:!1,hideProgressBar:!1,autoClose:2e3})),e.next=24;break;case 16:if(e.prev=16,e.t0=e.catch(8),console.log(e.t0),null===e.t0.response.data){e.next=24;break}if("object"!==typeof e.t0.response.data){e.next=23;break}if(void 0===e.t0.response.data.errors){e.next=23;break}return e.abrupt("return",to.error(e.t0.response.data.errors[0].msg,{autoClose:2e3,closeOnClick:!0,theme:"colored",draggable:!1,hideProgressBar:!1,pauseOnHover:!1}));case 23:return e.abrupt("return",to.error(e.t0.response.data.msg,{autoClose:2e3,closeOnClick:!0,theme:"colored",draggable:!1,hideProgressBar:!1,pauseOnHover:!1}));case 24:f((function(){return{name:"",email:"",password:"",gender:"",cpassword:"",selected:"+91"}})),l(0);case 26:case"end":return e.stop()}}),e,null,[[8,16]])})));return function(){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){null!==t&&r("/")}),[t,r]),(0,e.useEffect)((function(){document.getElementById("ruler").style.width="".concat(50*s,"%")}),[s]),(0,kh.jsx)("div",{children:(0,kh.jsxs)("div",{className:"w-full flex flex-col items-center justify-center",children:[(0,kh.jsxs)("div",{className:"flex justify-between gap-6 w-[85%] md:w-[50%] relative",children:[(0,kh.jsx)("div",{id:"ruler",className:"absolute z-[-1] left-0 bg-[#8057d7]  top-[37.5%] h-[3px]"}),(0,kh.jsxs)("div",{className:"my-10 flex flex-col gap-3 items-start relative",children:[(0,kh.jsx)("div",{className:"form-progress active rounded-full text-xl font-[font3] px-3 py-1 text-center bg-[#E1E1E1] text-black",children:"1"}),(0,kh.jsx)("p",{className:"text-base md:text-xl text-[#26282C] -translate-x-[17.5%] md:-translate-x-[25%]",children:"User Info"})]}),(0,kh.jsxs)("div",{className:"my-10 flex flex-col gap-3 items-center",children:[(0,kh.jsx)("div",{className:"form-progress ".concat(s<1?"":"active"," rounded-full text-xl font-[font3] px-3 py-1 text-center bg-[#E1E1E1] text-black"),children:"2"}),(0,kh.jsx)("p",{className:"text-base ".concat(1===s?"scale-[1.2] ease-in duration-500":""," md:text-xl text-[#26282C]"),children:"User Contact Details"})]}),(0,kh.jsxs)("div",{className:"my-10 flex flex-col gap-3 items-end",children:[(0,kh.jsx)("div",{className:"form-progress ".concat(2===s?"active":""," rounded-full text-xl font-[font3] px-3 py-1 text-center bg-[#E1E1E1] text-black"),children:"3"}),(0,kh.jsx)("p",{className:"text-base ".concat(2===s?"scale-[1.2] ease-in duration-500":""," md:text-xl text-[#26282C] translate-x-[17.5%] md:translate-x-[25%]"),children:"Security"})]})]}),(0,kh.jsxs)("div",{className:"flex flex-col items-center gap-4 py-12 px-8 bg-[#f9f9f9] border-[1px] rounded-2xl w-[90%] md:w-[50%] drop-shadow-xl",children:[0===s&&(0,kh.jsxs)("div",{className:"mt-10 mb-6 flex flex-col items-center md:w-[90%]",children:[(0,kh.jsxs)("div",{className:"name drop-shadow-xl flex border-[1px] bg-[#f1f1f1] items-center  py-2 px-4 md:py-3 md:px-5 gap-3 w-[90%] sm:w-full",children:[(0,kh.jsx)("img",{width:"32",height:"32",src:"https://img.icons8.com/fluency/48/name.png",alt:"name"}),(0,kh.jsx)("input",{type:"name",name:"name",value:h.name,placeholder:"Enter Your Name",onChange:function(e){return g(e)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2]"})]}),(0,kh.jsxs)("div",{className:"my-8 flex flex-col items-center gap-6 drop-shadow-lg",children:[(0,kh.jsx)("p",{className:"text-2xl md:text-3xl text-slate-700",children:"Select Your Gender"}),(0,kh.jsxs)("div",{className:"flex gap-3 sm:gap-6",children:[(0,kh.jsxs)("div",{className:"gender border-[1px] ".concat("Male"===h.gender?"gender-selected":""),onClick:function(){return f((function(e){return _n(_n({},e),{},{gender:"Male"})}))},children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='216' cy='296' r='152' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M448 160V64h-96M324 188L448 64' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-base sm:text-lg"}),(0,kh.jsx)("p",{className:"text-base sm:text-xl text-slate-900",children:"Male"})]}),(0,kh.jsxs)("div",{className:"gender border-[1px] ".concat("Female"===h.gender?"gender-selected":""),onClick:function(){return f((function(e){return _n(_n({},e),{},{gender:"Female"})}))},children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='184' r='152' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M256 336v144M314 416H198' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-base sm:text-lg"}),(0,kh.jsx)("p",{className:"text-base sm:text-xl ",children:"Female"})]}),(0,kh.jsxs)("div",{className:"gender border-[1px] ".concat("Others"===h.gender?"gender-selected":""),onClick:function(){return f((function(e){return _n(_n({},e),{},{gender:"Others"})}))},children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='128' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M448 352l-96 96M176 80l-95.98 95.98M464 128V48h-80M48 128V48h80M464 48L346.5 165.5M48 48l117.49 117.49M464 464L346.65 346.37' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"text-base sm:text-lg"}),(0,kh.jsx)("p",{className:"text-base sm:text-xl text-slate-900",children:"Others"})]})]})]})]}),1===s&&(0,kh.jsxs)("div",{className:"mt-10 mb-6 flex flex-col items-center md:w-[90%]",children:[(0,kh.jsxs)("div",{className:"email drop-shadow-xl flex border-[1px] bg-[#f1f1f1] items-center  py-2 px-4 md:py-3 md:px-5 gap-3 w-[90%] sm:w-full",children:[(0,kh.jsx)(ih,{icon:gh,className:"text-xl"}),(0,kh.jsx)("input",{type:"email",name:"email",value:h.email,placeholder:"Enter Your Email",onChange:function(e){return g(e)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2]"})]}),(0,kh.jsxs)("div",{className:"phone my-6 bg-[#f1f1f1] drop-shadow-xl w-[90%] sm:w-full flex justify-between",children:[(0,kh.jsxs)("ul",{className:"border-[1px] relative w-[25%]",children:[(0,kh.jsxs)("p",{className:"flex w-full p-2 items-center justify-between text-base md:text-lg gap-5",children:[h.selected,(0,kh.jsx)(ih,{icon:m,onClick:y,className:"cursor-pointer"})]}),(0,kh.jsx)("div",{className:"hidden duration-300 absolute w-full overflow-scroll h-44 overflow-x-hidden",id:"countries",children:hw.map((function(e){return(0,kh.jsxs)("li",{className:"p-2 w-full flex gap-6 border-b-[2px] bg-white hover:bg-[#8057d7] hover:text-white duration-200 cursor-pointer",onClick:function(){return function(e){f((function(t){return _n(_n({},t),{},{selected:e.dial_code})})),y()}(e)},children:[(0,kh.jsx)("span",{className:"fi fi-".concat(e.code.toLowerCase())}),e.dial_code]},e.code)}))})]}),(0,kh.jsxs)("div",{className:"md:flex-1 overflow-hidden flex gap-3 items-center px-4 border-[1px] w-[75%]",children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M451 374c-15.88-16-54.34-39.35-73-48.76-24.3-12.24-26.3-13.24-45.4.95-12.74 9.47-21.21 17.93-36.12 14.75s-47.31-21.11-75.68-49.39-47.34-61.62-50.53-76.48 5.41-23.23 14.79-36c13.22-18 12.22-21 .92-45.3-8.81-18.9-32.84-57-48.9-72.8C119.9 44 119.9 47 108.83 51.6A160.15 160.15 0 0083 65.37C67 76 58.12 84.83 51.91 98.1s-9 44.38 23.07 102.64 54.57 88.05 101.14 134.49S258.5 406.64 310.85 436c64.76 36.27 89.6 29.2 102.91 23s22.18-15 32.83-31a159.09 159.09 0 0013.8-25.8C465 391.17 468 391.17 451 374z' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/></svg>",className:"hidden md:block md:text-xl"}),(0,kh.jsx)("input",{type:"text",className:"md:flex-1 md:text-lg focus:outline-none bg-transparent",placeholder:"Enter Phone No",name:"phoneNo",value:h.phoneNo,onChange:function(e){return g(e)}})]})]})]}),2===s&&(0,kh.jsxs)("div",{className:"mt-10 mb-6 flex flex-col items-center gap-6 md:w-[90%]",children:[(0,kh.jsxs)("div",{className:"password w-full flex border-[1px] bg-[#f0f0f0] drop-shadow-xl items-center py-2 px-4 md:py-3 md:px-6 gap-3 sm:w-full",children:[(0,kh.jsx)(ih,{icon:vh,className:"text-xl block"}),(0,kh.jsx)("input",{type:"password",name:"password",value:h.password,placeholder:"Enter Password",onChange:function(e){return g(e)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2] p-0"})]}),(0,kh.jsxs)("div",{className:"confirmPassword border-[1px] flex bg-[#f0f0f0] drop-shadow-xl items-center  py-2 px-4 md:py-3 md:px-6 gap-3 w-full sm:w-full",children:[(0,kh.jsx)(ih,{icon:vh,className:"text-xl block"}),(0,kh.jsx)("input",{type:"password",name:"cpassword",value:h.cpassword,placeholder:"Re-enter Your Password",onChange:function(e){return g(e)},className:"sm:flex-1 bg-transparent border-none focus:outline-none font-[font2] p-0"})]}),(0,kh.jsx)("button",{onClick:function(){return _()},className:"btn flex justify-center bg-[#f0f0f0] drop-shadow-xl md:w-[30%] border-[1px]",children:"Sign Up"})]}),(0,kh.jsxs)("div",{className:"flex gap-8",children:[(0,kh.jsx)("button",{className:"btn-controls border-[1px] hover:bg-white hover:text-black hover:border-[1px] focus:bg-white focus:text-black focus:border-[1px] shadow-lg  ".concat(0===s?"hidden":""),onClick:function(){l((function(e){return 0===e?0:e-1}))},children:"Previous"}),(0,kh.jsx)("button",{className:"btn-controls border-[1px] hover:bg-white hover:text-black hover:border-[1px] focus:bg-white focus:text-black focus:border-[1px] shadow-lg ".concat(2===s?"hidden":""),onClick:function(){return function(){if(""===h.name)return to.error("Name is Required!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"colored"});if(""===h.gender)return to.error("Please select a Gender!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"colored"});if(1===s){if(""===h.email||!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(h.email))return to.error("Please Enter a Valid Email!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"colored"});if(!/^\(?(\d{3})\)?[- ]?(\d{3})[- ]?(\d{4})$/.test(h.phoneNo))return to.error("Please Enter a Valid Phone Number!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"colored"})}l((function(e){return e<3?e+1:3}))}()},children:"Next"})]})]})]})})},dw=function(t){var n=t.review,r=ot((function(e){return e.user})),a=n.createdAt.split("T")[0],o=new Date(a),s=(0,e.useState)(!1),l=(0,i.Z)(s,2),u=l[0],c=l[1],h=mt();return(0,kh.jsxs)("div",{className:"h-fit scale-90 bg-[#FFFFFF] shadow-xl overflow-hidden rounded-t-3xl rounded-b-2xl",children:[(0,kh.jsxs)("div",{className:"review-header flex justify-evenly items-center bg-gray-200 border-b-[1px]",children:[(0,kh.jsx)("img",{src:Ef,alt:"Profile",className:"my-3 w-12 rounded-full"}),(0,kh.jsx)("h1",{className:"text-black font-[font4] text-xl tracking-wider",children:n.userId.name}),(0,kh.jsx)("h1",{className:"text-[#A4A3BC] text-sm uppercase",children:o.getDate()+" "+o.toLocaleString("default",{month:"short"})})]}),(0,kh.jsxs)("div",{className:"review-body p-4 m-4",children:[(0,kh.jsx)("div",{className:"image my-1",children:n.image&&n.image.map((function(e){return(0,kh.jsx)("img",{src:e.url,alt:"...",className:"w-[7.5rem] my-2 mx-1"},e.public_id)}))}),(0,kh.jsx)("h1",{className:"font-[font4] text-lg",children:n.headline}),(0,kh.jsx)("h1",{className:"text-sm text-[#737581] font-[font1] my-2 ".concat(u?"":"line-clamp-2"),children:n.comment}),(0,kh.jsx)("button",{onClick:function(){return c((function(e){return!e}))},className:"text-blue-600 text-sm bg-transparent border-0 py-2 font-[font4]",children:u?"Less...":"Read More"}),(0,kh.jsxs)("h1",{className:"rating flex items-center gap-5",children:[(0,kh.jsx)("span",{className:"text-lg text-[#737586]",children:Number(n.rating).toFixed(1)}),(0,kh.jsx)(Oh.Z,{value:n.rating,isHalf:!0,edit:!1,activeColor:"#FFC435",color:"#cccccc",size:24})]}),(0,kh.jsx)("div",{className:"operation my-4 flex gap-5 items-center",children:r&&r._id===n.userId._id?(0,kh.jsx)("button",{onClick:function(){return function(){var e={id:n._id,userId:r._id};h(ao(e))}()},className:"px-5 py-2 text-white bg-red-500 font-[font4] text-sm",children:"Delete"}):""})]})]})},pw=function(t){var n=t.product,r=ge().productId,a=(0,e.useState)(1),o=(0,i.Z)(a,2),s=o[0],l=o[1],u=ot((function(e){return e.cart})),c=ot((function(e){return e.user})),h=ot((function(e){return e.reviews})),f=mt(),d=ve();return(0,e.useEffect)((function(){f(io({id:r}))}),[]),(0,kh.jsxs)("div",{className:"w-full",children:[(0,kh.jsxs)("div",{className:"p-1 md:w-[75%] lg:w-[85%]",children:[(0,kh.jsx)("h1",{className:"breadcrumb flex items-center my-6",children:(0,kh.jsxs)("span",{className:"capitalize text-gray-400 md:text-lg mx-1 font-[font1]",children:[n.category," \xa0/",(0,kh.jsx)("span",{className:"mx-1 md:text-lg font-[font1] text-black font-semibold",children:n.title})]})}),(0,kh.jsxs)("div",{className:"product-info my-8 md:my-10 grid grid-cols-1 lg:grid-cols-2 lg:grid-rows-1",children:[(0,kh.jsx)("div",{className:"product-image my-4 p-6",children:(0,kh.jsx)("img",{src:n.image,alt:"",className:"w-[75%] object-contain md:w-[85%] md:object-cover"})}),(0,kh.jsxs)("div",{className:"flex flex-col p-4 gap-2",children:[(0,kh.jsxs)("div",{className:"header",children:[(0,kh.jsx)("h1",{className:"text-3xl font-bold font-[font1]",children:n.title}),(0,kh.jsxs)("p",{className:"font-[font1] my-4 text-sm md:text-base",children:[n.description,"."]}),(0,kh.jsxs)("h1",{className:"text-3xl font-semibold font-[font1]",children:[Number(n.rating).toFixed(1),(0,kh.jsx)("span",{className:"font-[font1] text-base text-gray-400",children:"/ 5"})]}),(0,kh.jsx)(Oh.Z,{value:n.rating,isHalf:!0,edit:!1,activeColor:"#FFC435",color:"#cccccc",size:24})]}),(0,kh.jsxs)("div",{className:"pricing",children:[(0,kh.jsxs)("h1",{className:"flex items-center mt-6 mb-2",children:[(0,kh.jsx)("img",{width:"18",height:"18",src:"https://img.icons8.com/material-rounded/24/rupee.png",className:"inline-block",alt:"rupee"}),(0,kh.jsxs)("span",{className:"text-lg md:text-2xl font-[font4] font-bold",children:[Number(Math.floor(n.price)).toLocaleString("en-in"),".00 \xa0or \xa0",Number(Math.floor(Math.floor(n.price)/6)).toLocaleString("en-in"),"/month"]})]}),(0,kh.jsx)("span",{className:"text-gray-500 text-base font-[font1]",children:"Suggested payments with 6 months special financing"}),(0,kh.jsxs)("div",{className:"flex py-3 px-5 rounded-3xl gap-6 bg-[#F5F6F6] overflow-hidden w-fit items-center my-6",children:[(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:s<=0,onClick:function(){l((function(e){return e-1}))},children:(0,kh.jsx)(ih,{icon:_h,className:"text-xl"})}),(0,kh.jsx)("span",{className:"text-lg font-[font1] duration-200",children:s}),(0,kh.jsx)("button",{className:"bg-transparent flex items-center focus:outline-none cursor-pointer",disabled:s>=n.stock,onClick:function(){l((function(e){return e+1}))},children:(0,kh.jsx)(ih,{icon:uh,className:"text-xl"})})]})]}),(0,kh.jsx)("div",{className:"shop-buttons my-2 flex items-center  gap-4 sm:gap-8",children:(0,kh.jsxs)("button",{className:"btn-shop py-2 px-6 text-lg  text-center text-white  duration-300  bg-black border-[1px] border-black hover:bg-white hover:text-black flex items-center gap-2",onClick:function(){return null===c&&(d("/login"),to.warning("Please Login First!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"})),f(ya({productId:n._id,quantity:s,price:Math.floor(n.price)})),void(null!==u&&null!==c&&(d("/cart"),to.success("Added to Cart Successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"})))},children:[(0,kh.jsx)(ih,{icon:"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='176' cy='416' r='32'/><circle cx='400' cy='416' r='32'/><path d='M167.78 304h261.34l38.4-192H133.89l-8.47-48H32v32h66.58l48 272H432v-32H173.42l-5.64-32z'/></svg>"}),(0,kh.jsx)("span",{children:" Add to Cart"})]})}),(0,kh.jsxs)("div",{className:"delivery my-7",children:[(0,kh.jsxs)("div",{className:"flex p-4 border-[1px] w-[75%] items-center gap-5 mx-4 border-b-0",children:[(0,kh.jsx)("img",{width:"36",height:"36",className:"ms-4",src:"https://img.icons8.com/ios/50/fa7427/in-transit--v1.png",alt:"in-transit--v1"}),(0,kh.jsx)("h1",{className:"text-lg font-semibold font-sans text-neutral-700",children:"Free Delivery"})]}),(0,kh.jsxs)("div",{className:"flex p-4 border-[1px] w-[75%] items-center gap-5 mx-4",children:[(0,kh.jsx)("img",{width:"36",height:"36",className:"ms-4",src:"https://img.icons8.com/sf-regular/48/fa7427/clipboard.png",alt:"clipboard"}),(0,kh.jsxs)("div",{className:"flex flex-col",children:[(0,kh.jsx)("h1",{className:"text-lg font-semibold font-sans text-black",children:"Return Delivery"}),(0,kh.jsx)("span",{className:"font-sans text-neutral-700",children:"Free 30 days Delivery Returns."})]})]})]}),(0,kh.jsxs)("div",{className:"rating p-4 border-t-[1px] border-t-gray-500 flex flex-col items-start gap-5",children:[(0,kh.jsx)("h1",{className:"font-semibold font-[font1] text-2xl",children:"Review this product"}),(0,kh.jsx)("p",{className:"font-semibold font-[font1] text-lg",children:"Share your thoughts with other customers."}),(0,kh.jsx)(Ue,{to:"/".concat(n._id,"/review"),className:"focus:outline-none py-2 px-4 bg-black text-white text-lg hover:bg-transparent hover:text-black hover:border-[#000] border-[1px] duration-300",children:"Write a Product Review"})]})]})]})]}),(0,kh.jsx)("h1",{className:"font-[font4] text-3xl p-4 m-4",children:"Product Reviews"}),(0,kh.jsx)("div",{className:"p-2  w-full sm:columns-1 md:columns-2 lg:columns-3",children:h?h.map((function(e){return(0,kh.jsx)(dw,{className:"break-inside",review:e},e._id)})):(0,kh.jsx)("h1",{className:"font-[font4] text-xl px-4 m-4",children:"No Reviews!"})})]})},mw=function(){var t=ge().productId,n=ot((function(e){return e.products})),r=mt(),i=ve();return(0,e.useEffect)((function(){r(ua(t)),(null===n||n.length<1)&&i("/error")}),[t,r]),(0,kh.jsx)("div",{className:"p-3 flex justify-center",children:n&&(0,kh.jsx)(pw,{product:n[0]})})},vw=function(t){var n=t.order,r=ot((function(e){return e.products})),a=(0,e.useState)(1),o=(0,i.Z)(a,2),s=o[0],l=o[1],u=new Date(n.delivery_date),c=new Date(n.order_date);return(0,e.useEffect)((function(){new Date>u&&l((function(e){return e+1}))}),[]),(0,kh.jsx)("div",{className:"",children:n.products.length>0&&n.products.map((function(e){var t=r.find((function(t){return t._id===e.productId}));return(0,kh.jsxs)("div",{className:"bg-[#FFFFFF] p-3 md:p-6 rounded-xl shadow-xl my-6",children:[(0,kh.jsxs)("div",{className:"m-2 grid grid-cols-1 md:grid-cols-5 border-b-[1px]",children:[(0,kh.jsxs)("div",{className:"md:col-span-3 grid grid-cols-1 md:grid-cols-3 my-8 gap-5",children:[(0,kh.jsx)("div",{className:"bg-[#F7F7F7] m-4 p-6 flex justify-center aspect-square",children:t&&(0,kh.jsx)("img",{src:t.image,alt:"...",className:"object-contain w-28 md:w-28 mix-blend-multiply"})}),(0,kh.jsxs)("div",{className:"md:col-span-2 flex flex-col justify-start gap-4 mx-2",children:[(0,kh.jsx)("h1",{className:"font-semibold font-[font4] md:text-lg",children:t&&t.title}),(0,kh.jsxs)("p",{className:"font-sans text-base font-semibold",children:["\u20b9",(0,kh.jsx)("span",{className:"font-[font2] mx-1",children:Number(e.price).toLocaleString("en-in")}),(0,kh.jsxs)("span",{className:"block font-sans mx-1 my-1",children:["Quantity: ",e.quantity]})]}),(0,kh.jsx)("p",{className:"text-[#6B7280] font-sans text-sm line-clamp-3",children:t.description})]})]},e.productId),(0,kh.jsxs)("div",{className:"col-span-2 grid grid-cols-2 my-2 md:my-8 gap-4",children:[(0,kh.jsxs)("div",{className:"delivery-info",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-sm md:text-base",children:"Delivery address"}),(0,kh.jsxs)("div",{className:"info my-3 p-1 flex flex-col gap-1",children:[(0,kh.jsx)("p",{className:"text-[#6B7280] font-[font4] text-xs",children:n.shipping.address.line1}),(0,kh.jsx)("p",{className:"text-[#6B7280] font-[font4] text-xs",children:n.shipping.address.line2}),(0,kh.jsx)("p",{className:"text-[#6B7280] font-[font4] text-xs",children:n.shipping.address.city+", "+n.shipping.address.state+" "+n.shipping.address.postal_code})]})]}),(0,kh.jsxs)("div",{className:"shipping-info",children:[(0,kh.jsx)("h1",{className:"font-[font4] text-sm md:text-base",children:"Shipping Updates"}),(0,kh.jsxs)("div",{className:"info my-3 p-1 flex flex-col gap-1",children:[(0,kh.jsx)("p",{className:"text-[#6B7280] font-[font4] text-xs",children:n.shipping.email}),(0,kh.jsx)("p",{className:"text-[#6B7280] font-[font4] text-xs",children:n.shipping.phone})]})]})]})]},t._id),(0,kh.jsxs)("div",{className:"progress w-full p-6",children:[(0,kh.jsxs)("h1",{className:"font-[font4]",children:["Shipped On"," ",c.toLocaleString("default",{month:"long"})+" "+c.getDay()+", "+c.getFullYear()]}),(0,kh.jsxs)("div",{className:"w-full flex-col bg-gray-200 rounded-full h-2.5 dark:bg-gray-700 my-4",children:[(0,kh.jsx)("div",{className:"bg-blue-600 h-2.5 rounded-full ".concat(s>=2?"w-full":"w-[50%]")}),(0,kh.jsxs)("div",{className:"stats flex justify-between my-3",children:[(0,kh.jsx)("h1",{className:"font-sans text-sm md:text-base ".concat(s>=1?"text-blue-600 font-semibold":""),children:"Order Placed"}),(0,kh.jsx)("h1",{className:"font-sans text-sm md:text-base  ".concat(s>=1?"text-blue-600 font-semibold":""),children:"Processing"}),(0,kh.jsx)("h1",{className:"font-sans text-sm md:text-base  ".concat(s>=2?"text-blue-600 font-semibold":""),children:"Delivered"})]})]})]})]})}))})},gw=function(){var t=ot((function(e){return e.orders})),n=(ot((function(e){return e.user})),mt()),r=(ve(),0);return(0,e.useEffect)((function(){n(Qi()),n(ba())}),[]),(0,kh.jsx)("div",{className:"bg-[#F9FAFB] my-3",children:(0,kh.jsx)("div",{className:"order",children:t&&t.map((function(e){return r+=1,(0,kh.jsxs)("div",{className:"bg-[#F9FAFB] p-1 md:p-6 m-6 gap-4 rounded-lg",children:[(0,kh.jsxs)("h1",{className:"text-3xl m-3 font-semibold font-sans",children:["Order #",r]}),(0,kh.jsx)(vw,{order:e},e._id)]},e._id)}))})})},yw=function(){return(0,kh.jsx)("div",{children:(0,kh.jsxs)("div",{className:"w-full h-screen flex flex-col lg:flex-row items-center justify-center space-y-16 lg:space-y-0 space-x-8 2xl:space-x-0",children:[(0,kh.jsxs)("div",{className:"w-full lg:w-1/2 flex flex-col items-center justify-center lg:px-2 xl:px-0 text-center p-4",children:[(0,kh.jsx)("p",{className:"text-7xl md:text-8xl lg:text-9xl inter fo tracking-wider text-gray-300",children:"404"}),(0,kh.jsx)("p",{className:"text-4xl md:text-5xl lg:text-6xl inter tracking-wider text-gray-300 mt-2",children:"Page Not Found"}),(0,kh.jsx)("p",{className:"text-xl text-gray-500 my-12 inter",children:"Sorry, the page you are looking for could not be found."}),(0,kh.jsxs)(Ue,{to:"/",className:"flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-gray-100 px-4 py-2 rounded transition duration-150",title:"Return Home",children:[(0,kh.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,kh.jsx)("path",{"fill-rule":"evenodd",d:"M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z","clip-rule":"evenodd"})}),(0,kh.jsx)("span",{className:"inter text-xm",children:"Return Home"})]})]}),(0,kh.jsx)("div",{className:"w-1/2 lg:h-full flex lg:items-end justify-center p-4",children:(0,kh.jsxs)("svg",{className:"w-full text-blue-600",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 1120.59226 777.91584",children:[(0,kh.jsx)("title",{children:"not found"}),(0,kh.jsx)("circle",{cx:"212.59226",cy:"103",r:"64",fill:"#ff6584"}),(0,kh.jsx)("path",{d:"M563.68016,404.16381c0,151.01141-89.77389,203.73895-200.51559,203.73895S162.649,555.17522,162.649,404.16381,363.16457,61.04208,363.16457,61.04208,563.68016,253.1524,563.68016,404.16381Z",transform:"translate(-39.70387 -61.04208)",fill:"#cbd5e1"}),(0,kh.jsx)("polygon",{points:"316.156 523.761 318.21 397.378 403.674 241.024 318.532 377.552 319.455 320.725 378.357 207.605 319.699 305.687 319.699 305.687 321.359 203.481 384.433 113.423 321.621 187.409 322.658 0 316.138 248.096 316.674 237.861 252.547 139.704 315.646 257.508 309.671 371.654 309.493 368.625 235.565 265.329 309.269 379.328 308.522 393.603 308.388 393.818 308.449 394.99 293.29 684.589 313.544 684.589 315.974 535.005 389.496 421.285 316.156 523.761",fill:"#3f3d56"}),(0,kh.jsx)("path",{d:"M1160.29613,466.01367c0,123.61-73.4842,166.77-164.13156,166.77s-164.13156-43.16-164.13156-166.77S996.16457,185.15218,996.16457,185.15218,1160.29613,342.40364,1160.29613,466.01367Z",transform:"translate(-39.70387 -61.04208)",fill:"#cbd5e1"}),(0,kh.jsx)("polygon",{points:"950.482 552.833 952.162 449.383 1022.119 321.4 952.426 433.154 953.182 386.639 1001.396 294.044 953.382 374.329 953.382 374.329 954.741 290.669 1006.369 216.952 954.954 277.514 955.804 124.11 950.467 327.188 950.906 318.811 898.414 238.464 950.064 334.893 945.173 428.327 945.027 425.847 884.514 341.294 944.844 434.608 944.232 446.293 944.123 446.469 944.173 447.428 931.764 684.478 948.343 684.478 950.332 562.037 1010.514 468.952 950.482 552.833",fill:"#3f3d56"}),(0,kh.jsx)("ellipse",{cx:"554.59226",cy:"680.47903",rx:"554.59226",ry:"28.03433",fill:"#3f3d56"}),(0,kh.jsx)("ellipse",{cx:"892.44491",cy:"726.79663",rx:"94.98858",ry:"4.80162",fill:"#3f3d56"}),(0,kh.jsx)("ellipse",{cx:"548.71959",cy:"773.11422",rx:"94.98858",ry:"4.80162",fill:"#3f3d56"}),(0,kh.jsx)("ellipse",{cx:"287.94432",cy:"734.27887",rx:"217.01436",ry:"10.96996",fill:"#3f3d56"}),(0,kh.jsx)("circle",{cx:"97.08375",cy:"566.26982",r:"79",fill:"#2f2e41"}),(0,kh.jsx)("rect",{x:"99.80546",y:"689.02332",width:"24",height:"43",transform:"translate(-31.32451 -62.31008) rotate(0.67509)",fill:"#2f2e41"}),(0,kh.jsx)("rect",{x:"147.80213",y:"689.58887",width:"24",height:"43",transform:"translate(-31.31452 -62.87555) rotate(0.67509)",fill:"#2f2e41"}),(0,kh.jsx)("ellipse",{cx:"119.54569",cy:"732.61606",rx:"7.5",ry:"20",transform:"translate(-654.1319 782.47948) rotate(-89.32491)",fill:"#2f2e41"}),(0,kh.jsx)("ellipse",{cx:"167.55414",cy:"732.18168",rx:"7.5",ry:"20",transform:"translate(-606.25475 830.05533) rotate(-89.32491)",fill:"#2f2e41"}),(0,kh.jsx)("circle",{cx:"99.31925",cy:"546.29477",r:"27",fill:"#fff"}),(0,kh.jsx)("circle",{cx:"99.31925",cy:"546.29477",r:"9",fill:"#3f3d56"}),(0,kh.jsx)("path",{d:"M61.02588,552.94636c-6.04185-28.64075,14.68758-57.26483,46.30049-63.93367s62.13813,11.14292,68.18,39.78367-14.97834,38.93-46.59124,45.59886S67.06774,581.58712,61.02588,552.94636Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),(0,kh.jsx)("path",{d:"M257.29613,671.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.40351,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S257.29613,616.30827,257.29613,671.38411Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),(0,kh.jsx)("path",{d:"M181.50168,737.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415-26.88076-41.5798,26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.60595,37.27566L204.18523,621.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),(0,kh.jsx)("circle",{cx:"712.48505",cy:"565.41532",r:"79",fill:"#2f2e41"}),(0,kh.jsx)("rect",{x:"741.77716",y:"691.82355",width:"24",height:"43",transform:"translate(-215.99457 191.86399) rotate(-17.08345)",fill:"#2f2e41"}),(0,kh.jsx)("rect",{x:"787.6593",y:"677.72286",width:"24",height:"43",transform:"matrix(0.95588, -0.29376, 0.29376, 0.95588, -209.82788, 204.72037)",fill:"#2f2e41"}),(0,kh.jsx)("ellipse",{cx:"767.887",cy:"732.00275",rx:"20",ry:"7.5",transform:"translate(-220.8593 196.83312) rotate(-17.08345)",fill:"#2f2e41"}),(0,kh.jsx)("ellipse",{cx:"813.47537",cy:"716.94619",rx:"20",ry:"7.5",transform:"translate(-214.42477 209.56103) rotate(-17.08345)",fill:"#2f2e41"}),(0,kh.jsx)("circle",{cx:"708.52153",cy:"545.71023",r:"27",fill:"#fff"}),(0,kh.jsx)("circle",{cx:"708.52153",cy:"545.71023",r:"9",fill:"#3f3d56"}),(0,kh.jsx)("path",{d:"M657.35526,578.74316c-14.48957-25.43323-3.47841-59.016,24.59412-75.0092s62.57592-8.34055,77.06549,17.09268-2.39072,41.6435-30.46325,57.63671S671.84483,604.17639,657.35526,578.74316Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),(0,kh.jsx)("path",{d:"M611.29613,661.29875c0,50.55711-30.05368,68.20979-67.13,68.20979q-1.28835,0-2.57261-.02864c-1.71785-.03682-3.41933-.1186-5.10033-.23313-33.46068-2.36813-59.45707-20.92878-59.45707-67.948,0-48.65932,62.18106-110.05916,66.85186-114.60322l.00819-.00817c.18-.17587.27-.26177.27-.26177S611.29613,610.74164,611.29613,661.29875Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),(0,kh.jsx)("path",{d:"M541.72029,721.77424l24.55253-34.30732-24.6139,38.07426-.0654,3.93872c-1.71785-.03682-3.41933-.1186-5.10033-.23313l2.6463-50.58165-.02047-.39266.045-.07361.24949-4.77718-24.67531-38.16836,24.753,34.58547.05731,1.01433,2-38.21741-21.12507-39.44039L541.80616,625.928l2.08182-79.23247.00819-.26994v.26177l-.34764,62.47962,21.031-24.76934-21.11693,30.15184-.55624,34.21735,19.63634-32.839-19.71812,37.87389-.31085,19.0228,28.50763-45.70631-28.614,52.34448Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),(0,kh.jsx)("path",{d:"M875.29613,682.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.4035,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S875.29613,627.30827,875.29613,682.38411Z",transform:"translate(-39.70387 -61.04208)",fill:"currentColor"}),(0,kh.jsx)("path",{d:"M799.50168,748.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415L770.108,654.01076l26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.606,37.27566L822.18523,632.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z",transform:"translate(-39.70387 -61.04208)",fill:"#3f3d56"}),(0,kh.jsx)("ellipse",{cx:"721.51694",cy:"656.82212",rx:"12.40027",ry:"39.5",transform:"translate(-220.83517 966.22323) rotate(-64.62574)",fill:"#2f2e41"}),(0,kh.jsx)("ellipse",{cx:"112.51694",cy:"651.82212",rx:"12.40027",ry:"39.5",transform:"translate(-574.07936 452.71367) rotate(-68.15829)",fill:"#2f2e41"})]})})]})})},_w=function(){var t=ot((function(e){return e.products})),n=ot((function(e){return e.categories})),r=(0,e.useState)(""),o=(0,i.Z)(r,2),s=o[0],l=o[1],u=(0,e.useState)([]),c=(0,i.Z)(u,2),h=c[0],f=c[1],d=(0,e.useState)(null),p=(0,i.Z)(d,2),m=p[0],v=p[1],g=new FormData,y=mt(),_=(0,e.useRef)([]),x=cb(),b=x.formState.errors,k=x.getValues,E=x.setValue,S=x.register,T=x.handleSubmit,C=x.reset,M=S("category",{required:{value:!0,message:"Product Category is Required!"}}).ref,A=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(){var t,n,r,i;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,w.Z)(h),e.prev=1,t.s();case 3:if((n=t.n()).done){e.next=13;break}return r=n.value,g.append("file",r.file),g.append("upload_preset","Products"),e.next=9,fetch("https://api.cloudinary.com/v1_1/dsgvwvgks/image/upload",{method:"POST",body:g}).then((function(e){return e.json()}));case 9:i=e.sent,_.current=[].concat((0,a.Z)(_.current),[i.url]);case 11:e.next=3;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t.e(e.t0);case 18:return e.prev=18,t.f(),e.finish(18);case 21:return e.abrupt("return",_.current);case 22:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=(0,hr.Z)((0,cr.Z)().mark((function e(t){var n;return(0,cr.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A();case 2:return n=_n(_n({},t),{},{productId:s,image:_.current.length>0?_.current[0]:null}),y(ha({data:n})),C(),E("rating",0),f([]),l(""),_.current=[],e.abrupt("return",to.success("Product Edited Successfully!",{closeOnClick:!0,draggable:!1,autoClose:!0}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,e.useEffect)((function(){var e=null!==t?t.filter((function(e){return e._id===s})):"";v(e),e.length>0&&(E("name",e[0].title),E("description",e[0].description),E("price",Math.floor(e[0].price)),E("rating",e[0].rating),E("category",e[0].category),E("stock",e[0].stock))}),[s]),(0,kh.jsx)("div",{className:"flex justify-center",children:(0,kh.jsxs)("div",{className:"w-[95%] grid grid-cols-1 lg:grid-cols-2",children:[(0,kh.jsx)("div",{children:t&&t.map((function(e){return(0,kh.jsxs)("div",{className:"grid grid-cols-2 gap-5 rounded-lg shadow-lg border-[1px] m-6 p-8",children:[(0,kh.jsxs)("div",{className:"image flex items-center gap-6",children:[(0,kh.jsx)("input",{type:"radio",onChange:function(e){return l(e.target.value)},className:"accent-pink-500 focus:outline-none",name:"product",value:e._id}),(0,kh.jsx)("img",{src:e.image,className:"w-20 h-auto mix-blend-multiply",alt:"Product Here..."})]}),(0,kh.jsxs)("div",{className:"details",children:[(0,kh.jsx)("h1",{className:"font-[font1]  whitespace-nowrap overflow-hidden text-ellipsis font-semibold text-xl",children:e.title}),(0,kh.jsxs)("h3",{className:"text-lg my-4",children:[(0,kh.jsx)("span",{className:"font-[font1]",children:"\u20b9"}),Number(Math.floor(e.price)).toLocaleString("en-in")]})]})]},e._id)}))}),(0,kh.jsx)("div",{className:"form",children:""!==s?m.length>0?(0,kh.jsxs)("div",{className:"min-h-[100vh] m-4",children:[(0,kh.jsx)("h1",{className:"text-3xl font-[font1] p-4 font-[700]",children:"Edit Product"}),(0,kh.jsxs)("div",{className:"grid grid-cols-1 gap-7",children:[(0,kh.jsxs)("div",{className:"images my-4 p-8 border-[0.5px] rounded-xl shadow-lg h-fit",children:[(0,kh.jsx)("h1",{className:"font-[font1] font-[750] text-2xl my-3",children:"Add Image"}),(0,kh.jsxs)("div",{children:[(0,kh.jsx)("div",{className:"",children:(0,kh.jsx)("main",{className:"container mx-auto max-w-screen-lg h-full",children:(0,kh.jsx)("article",{"aria-label":"File Upload Modal",className:"relative h-full flex flex-col bg-white  rounded-md",children:(0,kh.jsxs)("section",{className:"h-full overflow-auto p-8 w-full flex flex-col",children:[(0,kh.jsxs)("header",{className:"border-dashed border-2 border-[#d1d1d1] py-12 rounded-xl flex flex-col justify-center items-center",children:[(0,kh.jsxs)("p",{className:"mb-3 font-semibold text-gray-900 flex flex-wrap justify-center",children:[(0,kh.jsx)("span",{children:"Drag and drop your"}),"\xa0",(0,kh.jsx)("span",{children:"files anywhere or"})]}),(0,kh.jsx)("input",{id:"hidden-input",type:"file",className:"hidden",onChange:function(e){return function(e){var t,n=(0,w.Z)(e.target.files);try{for(n.s();!(t=n.n()).done;){var r=t.value;f([{src:URL.createObjectURL(r),file:r}])}}catch(i){n.e(i)}finally{n.f()}}(e)}}),(0,kh.jsx)("button",{type:"button",id:"button",className:"mt-2 rounded-sm px-3 py-1 bg-gray-200 hover:bg-gray-300 focus:shadow-outline focus:outline-none",onClick:function(){return document.getElementById("hidden-input").click()},children:"Upload a file"})]}),(0,kh.jsx)("h1",{className:"pt-8 pb-3 font-semibold sm:text-lg text-gray-900",children:"To Upload"}),(0,kh.jsxs)("ul",{id:"gallery",className:"flex flex-1 flex-wrap -m-1",children:[h.length>0&&h.map((function(e){return(0,kh.jsxs)("li",{className:"mx-3",children:[(0,kh.jsx)("img",{src:e.src,className:"w-24 h-16",alt:"..."}),(0,kh.jsx)(ih,{icon:bh,className:"m-1 text-lg cursor-pointer",onClick:function(){f([])}})]},e.src)})),0===h.length&&(0,kh.jsxs)("li",{id:"empty",className:"h-full w-full text-center flex flex-col  justify-center items-center",children:[(0,kh.jsx)("img",{className:"mx-auto w-32",src:"https://user-images.githubusercontent.com/507615/54591670-ac0a0180-4a65-11e9-846c-e55ffce0fe7b.png",alt:"no data"}),(0,kh.jsx)("span",{className:"text-small text-gray-500",children:"No files selected"})]})]})]})})})}),(0,kh.jsx)("template",{id:"file-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group w-full h-full rounded-md focus:outline-none focus:shadow-outline elative bg-gray-100 cursor-pointer relative shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview hidden w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1 text-blue-800",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-1",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M15 2v5h5v15h-16v-20h11zm1-2h-14v24h20v-18l-6-6z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs text-gray-700"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md text-gray-800",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})}),(0,kh.jsx)("template",{id:"image-template",children:(0,kh.jsx)("li",{className:"block p-1 w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/6 xl:w-1/8 h-24",children:(0,kh.jsxs)("article",{tabIndex:"0",className:"group hasImage w-full h-full rounded-md focus:outline-none focus:shadow-outline bg-gray-100 cursor-pointer relative text-transparent hover:text-white shadow-sm",children:[(0,kh.jsx)("img",{alt:"upload preview",className:"img-preview w-full h-full sticky object-cover rounded-md bg-fixed"}),(0,kh.jsx)("section",{className:"flex flex-col rounded-md text-xs break-words w-full h-full z-20 absolute top-0 py-2 px-3",children:(0,kh.jsxs)("div",{className:"flex",children:[(0,kh.jsx)("span",{className:"p-1",children:(0,kh.jsx)("i",{children:(0,kh.jsx)("svg",{className:"fill-current w-4 h-4 ml-auto pt-",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{d:"M5 8.5c0-.828.672-1.5 1.5-1.5s1.5.672 1.5 1.5c0 .829-.672 1.5-1.5 1.5s-1.5-.671-1.5-1.5zm9 .5l-2.519 4-2.481-1.96-4 5.96h14l-5-8zm8-4v14h-20v-14h20zm2-2h-24v18h24v-18z"})})})}),(0,kh.jsx)("p",{className:"p-1 size text-xs"}),(0,kh.jsx)("button",{className:"delete ml-auto focus:outline-none hover:bg-gray-300 p-1 rounded-md",children:(0,kh.jsx)("svg",{className:"pointer-events-none fill-current w-4 h-4 ml-auto",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:(0,kh.jsx)("path",{className:"pointer-events-none",d:"M3 6l3 18h12l3-18h-18zm19-4v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.316c0 .901.73 2 1.631 2h5.711z"})})})]})})]})})})]})]}),(0,kh.jsxs)("form",{action:"",className:"",onSubmit:T(P),children:[(0,kh.jsxs)("div",{className:"product-info my-4 p-8 border-[0.5px] rounded-xl shadow-lg",children:[(0,kh.jsxs)("div",{className:"prod_name my-4 p-4",children:[(0,kh.jsx)("label",{htmlFor:"name",className:"font-[font1] font-[750] text-xl",children:"Product Name *"}),(0,kh.jsx)("input",_n({type:"text",id:"name",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},S("name",{value:m[0].title,required:{value:!0,message:"Product Name is Required!"}}))),b.name&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.name.message]})]}),(0,kh.jsxs)("div",{className:"prod_desc my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"description",className:"font-[font1] font-[750] text-xl",children:"Description *"}),(0,kh.jsx)("textarea",_n({id:"description",className:"resize-none py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block",rows:"5"},S("description",{value:m[0].description,required:{value:!0,message:"Product Description is Required!"},minLength:{value:10,message:"Description must be longer than 10 characters!"}}))),b.description&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.description.message]})]}),(0,kh.jsxs)("div",{className:"prod_price my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"price",className:"font-[font1] font-[750] text-xl",children:"Price *"}),(0,kh.jsx)("input",_n({type:"number",id:"price",step:".10",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},S("price",{value:Math.floor(m[0].price),required:{value:!0,message:"Product Price is Required!"},min:{value:1,message:"Price must be greater than 0!"}}))),b.price&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.price.message]})]}),(0,kh.jsxs)("div",{className:"prod_rating my-2 p-4",children:[(0,kh.jsx)("h1",{className:"text-xl font-[750] font-[font1]",children:"Overall rating *"}),(0,kh.jsx)(Oh.Z,_n(_n({value:k("rating")},S("rating",{value:m[0].rating,required:{value:!0,message:"Please select a Rating!"},min:{value:1,message:"Please select a Rating!"},max:{value:5,message:"Please select a Rating!"}})),{},{ref:null,edit:!0,isHalf:!0,activeColor:"#ffd400",color:"#cccccc",size:32,classNames:"outline-none",onChange:function(e){return E("rating",e)}})),b.rating&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg  flex items-center gap-3",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.rating.message]})]}),(0,kh.jsxs)("div",{className:"prod_category my-2 p-4",children:[(0,kh.jsx)("h1",{className:"text-xl font-[750] font-[font1]",children:"Category *"}),(0,kh.jsxs)("select",{ref:M,onChange:function(e){return function(e){var t=e.target.value;"Other"===t?document.getElementById("categoryInput").classList.remove("hidden"):(document.getElementById("categoryInput").classList.add("hidden"),E("category",t))}(e)},className:"border border-black capitalize py-2 px-3 my-4 text-lg focus:outline-none",children:[(0,kh.jsx)("option",{value:"",selected:!0,hidden:!0,children:"Select a Category"}),n&&n.map((function(e){return(0,kh.jsx)("option",{className:"capitalize p-2",value:e,selected:e===m[0].category,children:e},e)})),(0,kh.jsx)("option",{className:"capitalize p-2",value:"Other",children:"Other"},"Other")]}),(0,kh.jsx)("input",{ref:M,type:"text",placeholder:"Add Category",className:"hidden py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg md:mx-3",id:"categoryInput",onChange:function(e){return E("category",e.target.value)}}),b.category&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.category.message]})]}),(0,kh.jsxs)("div",{className:"prod_stock my-2 p-4",children:[(0,kh.jsx)("label",{htmlFor:"stock",className:"font-[font1] font-[750] text-xl",children:"Stock *"}),(0,kh.jsx)("input",_n({type:"number",id:"stock",className:"py-2 px-5 border-[0.5px] rounded-md border-black outline-none hover:border-2 hover:border-black focus:border-black focus:border-2 duration-200 my-4 text-lg w-full block"},S("stock",{value:m[0].stock,required:{value:!0,message:"Product Stock is Required!"},min:{value:10,message:"Stock must be greater than 10!"}}))),b.stock&&(0,kh.jsxs)("h1",{className:"text-red-600 text-lg flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),b.stock.message]})]})]}),(0,kh.jsx)("div",{className:"flex justify-end",children:(0,kh.jsx)("input",{type:"submit",className:"bg-[#000] text-lg text-white py-2 px-5 me-1 my-2 rounded-md",value:"Edit Product"})})]})]})]}):"":(0,kh.jsx)("h1",{className:"m-4 p-5 text-2xl font-[font1] font-semibold",children:"No Product Selected!"})})]})})},xw=function(){var e=ve(),t=ge().token,n=cb(),r=n.formState.errors,i=n.register,a=n.reset,o=n.handleSubmit,s=function(){var n=(0,hr.Z)((0,cr.Z)().mark((function n(r){var i;return(0,cr.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.newPassword===r.confirmPass){n.next=4;break}return n.abrupt("return",to.error("Passwords do not match!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}));case 4:return n.prev=4,n.next=7,Yi.put("http://localhost:5000/user/password/reset",{token:t,newPassword:r.newPassword},{withCredentials:!0});case 7:if("200"!=(i=n.sent).status||!i.data.success){n.next=11;break}return to.success("Password has been reset successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"}),n.abrupt("return",e("/login"));case 11:n.next=16;break;case 13:n.prev=13,n.t0=n.catch(4),to.error("Link has expired!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"});case 16:a();case 17:case"end":return n.stop()}}),n,null,[[4,13]])})));return function(e){return n.apply(this,arguments)}}();return(0,kh.jsx)("div",{className:"bg-[#f5f5f5] p-6 flex justify-center",children:(0,kh.jsx)("div",{className:"card w-full md:w-[50%] bg-white p-6 mx-4 shadow-xl rounded-2xl",children:(0,kh.jsxs)("form",{onSubmit:o(s),children:[(0,kh.jsx)("h1",{className:"font-[font5] text-[1.65rem] my-6",children:"Change Password"}),(0,kh.jsxs)("div",{className:"newPass my-4",children:[(0,kh.jsx)("label",{className:"font-[font4]",htmlFor:"newPass",children:"New Password"}),(0,kh.jsx)("input",_n(_n({type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022",id:"newPass"},i("newPassword",{required:{value:!0,message:"New Password is Required!"},pattern:{value:/([A-Z0-9a-z@_-]){8,}/g,message:"New Password must contain at least 8 characters and should contain alphanumeric characters and @,-,_!"}})),{},{className:"px-2 py-2 w-full border my-3 rounded-xl bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})),r.newPassword&&(0,kh.jsxs)("h1",{className:"text-red-600 flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),r.newPassword.message]})]}),(0,kh.jsxs)("div",{className:"confirmPass my-4",children:[(0,kh.jsx)("label",{className:"font-[font4]",htmlFor:"confirmPass",children:"Confirm password"}),(0,kh.jsx)("input",_n(_n({type:"password",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022",id:"confirmPass"},i("confirmPass",{required:{value:!0,message:"Confirm Password is Required!"},pattern:{value:/([A-Z0-9a-z@_-]){8,}/g,message:"New Password must contain at least 8 characters and should contain alphanumeric characters and @,-,_!"}})),{},{className:"px-2 py-2 w-full border my-3 rounded-xl bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})),r.confirmPass&&(0,kh.jsxs)("h1",{className:"text-red-600 flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),r.confirmPass.message]})]}),(0,kh.jsx)("button",{type:"submit",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 font-[font4] tracking-wide",children:"Reset Password"})]})})})},bw=function(){var t=mt(),n=ot((function(e){return e.user})),r=ot((function(e){return e.orders})),i=cb(),a=i.formState.errors,o=i.setValue,s=i.register,l=i.handleSubmit;return(0,e.useEffect)((function(){t(ba()),n&&(o("fname",n.name.split(" ")[0]),o("lname",n.name.split(" ")[1]),o("gender",n.gender))}),[n]),(0,kh.jsx)("div",{className:"",children:(0,kh.jsx)("div",{className:"bg-[#f5f5f5] p-6 flex justify-center",children:(0,kh.jsxs)("div",{className:"card w-full md:w-[50%] bg-white p-6 mx-4 shadow-xl",children:[(0,kh.jsx)("h1",{className:"font-[font5] text-[1.75rem] mx-5 my-6",children:"Edit Profile"}),(0,kh.jsxs)("form",{onSubmit:l((function(e){var r=_n(_n({},e),{},{id:n._id});return t(ta(r)),to.success("Profile Changed Successfully!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"})})),children:[(0,kh.jsx)("div",{className:"icon flex justify-center",children:(0,kh.jsx)("img",{src:Ef,alt:"Profile",className:"my-6 w-20 md:w-28"})}),(0,kh.jsxs)("div",{className:"names flex flex-col md:flex-row justify-evenly p-4 gap-4",children:[(0,kh.jsxs)("div",{className:"fname",children:[(0,kh.jsx)("label",{htmlFor:"fname",className:"font-[font4]",children:"First Name"}),(0,kh.jsx)("input",_n(_n({type:"text",id:"fname"},s("fname",{required:{value:!0,message:"First Name is Required!"},pattern:{value:/([A-Za-z]){3,}/g,message:"First Name must contain atleast 3 characters!"}})),{},{className:"px-4 w-full py-2 border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})),a.fname&&(0,kh.jsxs)("h1",{className:"text-red-600 flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),a.fname.message]})]}),(0,kh.jsxs)("div",{className:"lname",children:[(0,kh.jsx)("label",{htmlFor:"lname",className:"font-[font4]",children:"Last Name"}),(0,kh.jsx)("input",_n(_n({type:"text",id:"lname"},s("lname",{required:{value:!0,message:"Last Name is Required!"},pattern:{value:/([A-Za-z]){3,}/g,message:"Last Name must contain atleast 3 characters!"}})),{},{className:"px-4 py-2 w-full border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})),a.lname&&(0,kh.jsxs)("h1",{className:"text-red-600 flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),a.lname.message]})]})]}),(0,kh.jsxs)("div",{className:"email p-4",children:[(0,kh.jsx)("label",{htmlFor:"email",className:"font-[font4]",children:"Email"}),(0,kh.jsx)("input",{readOnly:!0,type:"email",id:"email",className:"px-4 py-2 w-full border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150",value:n?n.email:""})]}),(0,kh.jsxs)("div",{className:"phone p-4",children:[(0,kh.jsx)("label",{htmlFor:"contactNo",className:"font-[font4]",children:"Contact Number"}),(0,kh.jsx)("input",{type:"text",value:n?n.phone_no:"",id:"contactNo",className:"px-4 py-2 w-full border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})]}),(0,kh.jsxs)("div",{className:"flex flex-col md:flex-row justify-evenly p-4 gap-4",children:[(0,kh.jsxs)("div",{className:"flex flex-col justify-start items-start",children:[(0,kh.jsx)("label",{htmlFor:"gender",className:"font-[font4]",children:"Select Gender"}),(0,kh.jsxs)("select",_n(_n({className:"px-4 py-2 w-full border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-black focus:border-[2px] duration-150"},s("gender",{required:{value:!0,message:"Gender is Required!"}})),{},{name:"gender",id:"gender",children:[(0,kh.jsx)("option",{value:"Male",children:"Male"}),(0,kh.jsx)("option",{value:"Female",children:"Female"}),(0,kh.jsx)("option",{value:"Others",children:"Others"})]})),a.gender&&(0,kh.jsxs)("h1",{className:"text-red-600 flex items-center gap-2",children:[(0,kh.jsx)(ih,{icon:wh,className:"text-lg"}),a.gender.message]})]}),(0,kh.jsxs)("div",{className:"orders",children:[(0,kh.jsx)("label",{htmlFor:"orders",className:"font-[font4]",children:"Your Orders"}),(0,kh.jsx)("input",{type:"text",id:"orders",readOnly:!0,value:null!==r?r.length:0,className:"px-4 py-2 w-full border my-3 rounded-lg font-[font1] text-sm bg-[#F9FAFB] focus:border-[#2563EB] focus:border-[2px] duration-150"})]})]}),(0,kh.jsx)("button",{type:"submit",className:"w-full text-white bg-primary-600 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800 font-[font4] tracking-wide",children:"Save"})]})]})})})};var ww=function(){var t=pe(),n=ot((function(e){return e.user})),r=mt();return(0,e.useEffect)((function(){r(Qi()),r(oa()),r(pa())}),[]),(0,e.useEffect)((function(){null!==n&&r(ga())}),[n]),(0,kh.jsxs)("div",{className:"w-full",children:["/login"!==t.pathname&&(0,kh.jsx)(Eh,{}),(0,kh.jsx)(Ha,{position:"top-center",autoClose:3e3,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!1,pauseOnHover:!0,theme:"light",limit:1}),(0,kh.jsxs)(Le,{children:[(0,kh.jsx)(Ie,{path:"/",element:(0,kh.jsx)(kf,{})}),(0,kh.jsx)(Ie,{path:"/about",element:(0,kh.jsx)(db,{})}),(0,kh.jsx)(Ie,{path:"/shop",element:(0,kh.jsx)(cw,{})}),(0,kh.jsx)(Ie,{path:"/contact",element:(0,kh.jsx)(nw,{})}),(0,kh.jsx)(Ie,{path:"/login",element:(0,kh.jsx)(sw,{})}),(0,kh.jsx)(Ie,{path:"/signup",element:(0,kh.jsx)(fw,{})}),n&&(0,kh.jsx)(Ie,{path:"/user/profile",element:(0,kh.jsx)(bw,{})}),!n&&(0,kh.jsx)(Ie,{path:"/accounts/password/reset",element:(0,kh.jsx)(aw,{})}),!n&&(0,kh.jsx)(Ie,{path:"/accounts/user/:token",element:(0,kh.jsx)(xw,{})}),(0,kh.jsx)(Ie,{path:"/orders",element:(0,kh.jsx)(gw,{})}),(0,kh.jsx)(Ie,{path:"/cart",element:(0,kh.jsx)(kb,{})}),(0,kh.jsx)(Ie,{path:"/faq",element:(0,kh.jsx)(rw,{})}),(0,kh.jsx)(Ie,{path:"/shipping",element:(0,kh.jsx)(uw,{})}),(0,kh.jsx)(Ie,{path:"/product/:productId",element:(0,kh.jsx)(mw,{})}),(0,kh.jsx)(Ie,{path:"/:productId/review",element:(0,kh.jsx)(lw,{})}),n&&(0,kh.jsx)(Ie,{path:"/admin-dashboard",element:n.isAdmin?(0,kh.jsx)($_,{}):(0,kh.jsx)(yw,{})}),n&&(0,kh.jsx)(Ie,{path:"/admin-dashboard/products/create",element:n.isAdmin?(0,kh.jsx)(hb,{}):(0,kh.jsx)(yw,{})}),n&&(0,kh.jsx)(Ie,{path:"/admin-dashboard/products/edit",element:n.isAdmin?(0,kh.jsx)(_w,{}):(0,kh.jsx)(yw,{})}),(0,kh.jsx)(Ie,{path:"*",element:(0,kh.jsx)(yw,{})})]}),(0,kh.jsx)(Ph,{})]})},kw=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,kh.jsx)(Fe,{children:(0,kh.jsx)(ct,{store:so,children:(0,kh.jsx)(ww,{})})})),kw()}()}();
//# sourceMappingURL=main.b75f8535.js.map